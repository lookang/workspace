<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Traveling to Mars (Mars Mission Transit) </title>
    <link rel="stylesheet"  type="text/css" href="file:///Users/lookang/Google Drive/PublicLawrence/workspace/output/_ejs_library/css/ejss.css" />
    <script src="file:///Users/lookang/Google Drive/PublicLawrence/EjsS_5.3.SG_171223/bin/javascript/lib/scripts/common_script.js"></script>
    <script src="file:///Users/lookang/Google Drive/PublicLawrence/EjsS_5.3.SG_171223/bin/javascript/lib/scripts/textresizedetector.js"></script>
<script type="text/javascript"><!--//--><![CDATA[//><!--
/**
 * math.js
 * https://github.com/josdejong/mathjs
 *
 * Math.js is an extensive math library for JavaScript and Node.js,
 * It features real and complex numbers, units, matrices, a large set of
 * mathematical functions, and a flexible expression parser.
 *
 * @version 3.16.4
 * @date    2017-10-01
 *
 * @license
 * Copyright (C) 2013-2017 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function (e, t) {
	"object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.math = t() : e.math = t()
}
(this, function () {
	return function (e) {
		function t(n) {
			if (r[n])
				return r[n].exports;
			var i = r[n] = {
				i: n,
				l: !1,
				exports: {}
			};
			return e[n].call(i.exports, i, i.exports, t),
			i.l = !0,
			i.exports
		}
		var r = {};
		return t.m = e,
		t.c = r,
		t.d = function (e, r, n) {
			t.o(e, r) || Object.defineProperty(e, r, {
				configurable: !1,
				enumerable: !0,
				get: n
			})
		},
		t.n = function (e) {
			var r = e && e.__esModule ? function () {
				return e.default
			}
			 : function () {
				return e
			};
			return t.d(r, "a", r),
			r
		},
		t.o = function (e, t) {
			return Object.prototype.hasOwnProperty.call(e, t)
		},
		t.p = "",
		t(t.s = 148)
	}
	([function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					function i(t, r, n) {
						var i = e.Matrix.storage(r || "default");
						return new i(t, n)
					}
					var a = n("matrix", {
							"": function () {
								return i([])
							},
							string: function (e) {
								return i([], e)
							},
							"string, string": function (e, t) {
								return i([], e, t)
							},
							Array: function (e) {
								return i(e)
							},
							Matrix: function (e) {
								return i(e, e.storage())
							},
							"Array | Matrix, string": i,
							"Array | Matrix, string, string": i
						});
					return a.toTex = {
						0: "\\begin{bmatrix}\\end{bmatrix}",
						1: "\\left(${args[0]}\\right)",
						2: "\\left(${args[0]}\\right)"
					},
					a
				}
				t.name = "matrix",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				e.exports = function e(t, r, n) {
					return t && "function" == typeof t.map ? t.map(function (t) {
						return e(t, r, n)
					}) : r(t)
				}
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r) {
					var i,
					a = e.length;
					if (a != t[r])
						throw new f(a, t[r]);
					if (r < t.length - 1) {
						var o = r + 1;
						for (i = 0; i < a; i++) {
							var s = e[i];
							if (!Array.isArray(s))
								throw new f(t.length - 1, t.length, "<");
							n(e[i], t, o)
						}
					} else
						for (i = 0; i < a; i++)
							if (Array.isArray(e[i]))
								throw new f(t.length + 1, t.length, ">")
				}
				function i(e, r, n, a) {
					var o,
					s,
					u = e.length,
					c = r[n],
					f = Math.min(u, c);
					if (e.length = c, n < r.length - 1) {
						var l = n + 1;
						for (o = 0; o < f; o++)
							s = e[o], Array.isArray(s) || (s = [s], e[o] = s), i(s, r, l, a);
						for (o = f; o < c; o++)
							s = [], e[o] = s, i(s, r, l, a)
					} else {
						for (o = 0; o < f; o++)
							for (; Array.isArray(e[o]); )
								e[o] = e[o][0];
						if (a !== t.UNINITIALIZED)
							for (o = f; o < c; o++)
								e[o] = a
					}
				}
				function a(e, t) {
					var r,
					n = [];
					if (0 === t.length) {
						if (0 === e.length)
							throw new f(null, null, "!=");
						return e.shift()
					}
					for (r = 0; r < t[0]; r += 1)
						n.push(a(e, t.slice(1)));
					return n
				}
				function o(e, t, r) {
					var n,
					i;
					if (r < t) {
						var a = r + 1;
						for (n = 0, i = e.length; n < i; n++)
							e[n] = o(e[n], t, a)
					} else
						for (; Array.isArray(e); )
							e = e[0];
					return e
				}
				function s(e, t, r) {
					var n,
					i;
					if (Array.isArray(e)) {
						var a = r + 1;
						for (n = 0, i = e.length; n < i; n++)
							e[n] = s(e[n], t, a)
					} else
						for (var o = r; o < t; o++)
							e = [e];
					return e
				}
				var u = r(3),
				c = r(9),
				f = (r(5), r(59), r(10)),
				l = r(51);
				t.size = function (e) {
					for (var t = []; Array.isArray(e); )
						t.push(e.length), e = e[0];
					return t
				},
				t.validate = function (e, t) {
					var r = 0 == t.length;
					if (r) {
						if (Array.isArray(e))
							throw new f(e.length, 0)
					} else
						n(e, t, 0)
				},
				t.validateIndex = function (e, t) {
					if (!u.isNumber(e) || !u.isInteger(e))
						throw new TypeError("Index must be an integer (value: " + e + ")");
					if (e < 0 || "number" == typeof t && e >= t)
						throw new l(e, t)
				},
				t.UNINITIALIZED = {},
				t.resize = function (e, t, r) {
					if (!Array.isArray(e) || !Array.isArray(t))
						throw new TypeError("Array expected");
					if (0 === t.length)
						throw new Error("Resizing to scalar is not supported");
					t.forEach(function (e) {
						if (!u.isNumber(e) || !u.isInteger(e) || e < 0)
							throw new TypeError("Invalid size, must contain positive integers (size: " + c.format(t) + ")")
					});
					var n = void 0 !== r ? r : 0;
					return i(e, t, 0, n),
					e
				},
				t.reshape = function (e, r) {
					var n,
					i = t.flatten(e),
					o = function (e) {
						return e.reduce(function (e, t) {
							return e * t
						})
					};
					if (!Array.isArray(e) || !Array.isArray(r))
						throw new TypeError("Array expected");
					if (0 === r.length)
						throw new f(0, o(t.size(e)), "!=");
					try {
						n = a(i, r)
					} catch (n) {
						if (n instanceof f)
							throw new f(o(r), o(t.size(e)), "!=");
						throw n
					}
					if (i.length > 0)
						throw new f(o(r), o(t.size(e)), "!=");
					return n
				},
				t.squeeze = function (e, r) {
					for (var n = r || t.size(e); Array.isArray(e) && 1 === e.length; )
						e = e[0], n.shift();
					for (var i = n.length; 1 === n[i - 1]; )
						i--;
					return i < n.length && (e = o(e, i, 0), n.length = i),
					e
				},
				t.unsqueeze = function (e, r, n, i) {
					var a = i || t.size(e);
					if (n)
						for (var o = 0; o < n; o++)
							e = [e], a.unshift(1);
					for (e = s(e, r, 0); a.length < r; )
						a.push(1);
					return e
				},
				t.flatten = function (e) {
					if (!Array.isArray(e))
						return e;
					var t = [];
					return e.forEach(function e(r) {
						Array.isArray(r) ? r.forEach(e) : t.push(r)
					}),
					t
				},
				t.map = function (e, t) {
					return Array.prototype.map.call(e, t)
				},
				t.forEach = function (e, t) {
					Array.prototype.forEach.call(e, t)
				},
				t.filter = function (e, r) {
					if (1 !== t.size(e).length)
						throw new Error("Only one dimensional matrices supported");
					return Array.prototype.filter.call(e, r)
				},
				t.filterRegExp = function (e, r) {
					if (1 !== t.size(e).length)
						throw new Error("Only one dimensional matrices supported");
					return Array.prototype.filter.call(e, function (e) {
						return r.test(e)
					})
				},
				t.join = function (e, t) {
					return Array.prototype.join.call(e, t)
				},
				t.identify = function (e) {
					if (!Array.isArray(e))
						throw new TypeError("Array input expected");
					if (0 === e.length)
						return e;
					var t = [],
					r = 0;
					t[0] = {
						value: e[0],
						identifier: 0
					};
					for (var n = 1; n < e.length; n++)
						e[n] === e[n - 1] ? r++ : r = 0, t.push({
							value: e[n],
							identifier: r
						});
					return t
				},
				t.generalize = function (e) {
					if (!Array.isArray(e))
						throw new TypeError("Array input expected");
					if (0 === e.length)
						return e;
					for (var t = [], r = 0; r < e.length; r++)
						t.push(e[r].value);
					return t
				},
				t.isArray = Array.isArray
			}, function (e, t, r) {
				"use strict";
				function n(e) {
					for (var t = [], r = 0; r < e; r++)
						t.push(0);
					return t
				}
				t.isNumber = function (e) {
					return "number" == typeof e
				},
				t.isInteger = function (e) {
					return !!isFinite(e) && e == Math.round(e)
				},
				t.sign = Math.sign || function (e) {
					return e > 0 ? 1 : e < 0 ? -1 : 0
				},
				t.format = function (e, r) {
					if ("function" == typeof r)
						return r(e);
					if (e === 1 / 0)
						return "Infinity";
					if (e ===  - (1 / 0))
						return "-Infinity";
					if (isNaN(e))
						return "NaN";
					var n = "auto",
					i = void 0;
					switch (r && (r.notation && (n = r.notation), t.isNumber(r) ? i = r : r.precision && (i = r.precision)), n) {
					case "fixed":
						return t.toFixed(e, i);
					case "exponential":
						return t.toExponential(e, i);
					case "engineering":
						return t.toEngineering(e, i);
					case "auto":
						return t.toPrecision(e, i, r && r.exponential).replace(/((\.\d*?)(0+))($|e)/, function () {
							var e = arguments[2],
							t = arguments[4];
							return "." !== e ? e + t : t
						});
					default:
						throw new Error('Unknown notation "' + n + '". Choose "auto", "exponential", or "fixed".')
					}
				},
				t.splitNumber = function (e) {
					var t = String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);
					if (!t)
						throw new SyntaxError("Invalid number " + e);
					var r = t[1],
					n = t[2],
					i = parseFloat(t[4] || "0"),
					a = n.indexOf(".");
					i += a !== -1 ? a - 1 : n.length - 1;
					var o = n.replace(".", "").replace(/^0*/, function (e) {
							return i -= e.length,
							""
						}).replace(/0*$/, "").split("").map(function (e) {
							return parseInt(e)
						});
					return 0 === o.length && (o.push(0), i++), {
						sign: r,
						coefficients: o,
						exponent: i
					}
				},
				t.toEngineering = function (e, r) {
					if (isNaN(e) || !isFinite(e))
						return String(e);
					var i = t.roundDigits(t.splitNumber(e), r),
					a = i.exponent,
					o = i.coefficients,
					s = a % 3 === 0 ? a : a < 0 ? a - 3 - a % 3 : a - a % 3,
					u = a >= 0 ? a : Math.abs(s);
					o.length - 1 < u && (o = o.concat(n(u - (o.length - 1))));
					for (var c = Math.abs(a - s), f = 1; --c >= 0; )
						f++;
					var l = o.slice(f).join(""),
					p = l.match(/[1-9]/) ? "." + l : "",
					h = o.slice(0, f).join("") + p + "e" + (a >= 0 ? "+" : "") + s.toString();
					return i.sign + h
				},
				t.toFixed = function (e, r) {
					if (isNaN(e) || !isFinite(e))
						return String(e);
					var i = t.splitNumber(e),
					a = t.roundDigits(i, i.exponent + 1 + (r || 0)),
					o = a.coefficients,
					s = a.exponent + 1,
					u = s + (r || 0);
					return o.length < u && (o = o.concat(n(u - o.length))),
					s < 0 && (o = n(-s + 1).concat(o), s = 1),
					r && o.splice(s, 0, 0 === s ? "0." : "."),
					a.sign + o.join("")
				},
				t.toExponential = function (e, r) {
					if (isNaN(e) || !isFinite(e))
						return String(e);
					var i = t.splitNumber(e),
					a = r ? t.roundDigits(i, r) : i,
					o = a.coefficients,
					s = a.exponent;
					o.length < r && (o = o.concat(n(r - o.length)));
					var u = o.shift();
					return a.sign + u + (o.length > 0 ? "." + o.join("") : "") + "e" + (s >= 0 ? "+" : "") + s
				},
				t.toPrecision = function (e, r, i) {
					if (isNaN(e) || !isFinite(e))
						return String(e);
					var a = i && void 0 !== i.lower ? i.lower : .001,
					o = i && void 0 !== i.upper ? i.upper : 1e5,
					s = t.splitNumber(e),
					u = Math.abs(Math.pow(10, s.exponent));
					if (u < a || u >= o)
						return t.toExponential(e, r);
					var c = r ? t.roundDigits(s, r) : s,
					f = c.coefficients,
					l = c.exponent;
					f.length < r && (f = f.concat(n(r - f.length))),
					f = f.concat(n(l - f.length + 1 + (f.length < r ? r - f.length : 0))),
					f = n(-l).concat(f);
					var p = l > 0 ? l : 0;
					return p < f.length - 1 && f.splice(p + 1, 0, "."),
					c.sign + f.join("")
				},
				t.roundDigits = function (e, t) {
					for (var r = {
							sign: e.sign,
							coefficients: e.coefficients,
							exponent: e.exponent
						}, n = r.coefficients; t <= 0; )
						n.unshift(0), r.exponent++, t++;
					if (n.length > t) {
						var i = n.splice(t, n.length - t);
						if (i[0] >= 5) {
							var a = t - 1;
							for (n[a]++; 10 === n[a]; )
								n.pop(), 0 === a && (n.unshift(0), r.exponent++, a++), a--, n[a]++
						}
					}
					return r
				},
				t.digits = function (e) {
					return e.toExponential().replace(/e.*$/, "").replace(/^0\.?0*|\./, "").length
				},
				t.DBL_EPSILON = Number.EPSILON || 2.220446049250313e-16,
				t.nearlyEqual = function (e, r, n) {
					if (null == n)
						return e == r;
					if (e == r)
						return !0;
					if (isNaN(e) || isNaN(r))
						return !1;
					if (isFinite(e) && isFinite(r)) {
						var i = Math.abs(e - r);
						return i < t.DBL_EPSILON || i <= Math.max(Math.abs(e), Math.abs(r)) * n
					}
					return !1
				}
			}, function (e, t, r) {
				"use strict";
				t.symbols = {
					Alpha: "A",
					alpha: "\\alpha",
					Beta: "B",
					beta: "\\beta",
					Gamma: "\\Gamma",
					gamma: "\\gamma",
					Delta: "\\Delta",
					delta: "\\delta",
					Epsilon: "E",
					epsilon: "\\epsilon",
					varepsilon: "\\varepsilon",
					Zeta: "Z",
					zeta: "\\zeta",
					Eta: "H",
					eta: "\\eta",
					Theta: "\\Theta",
					theta: "\\theta",
					vartheta: "\\vartheta",
					Iota: "I",
					iota: "\\iota",
					Kappa: "K",
					kappa: "\\kappa",
					varkappa: "\\varkappa",
					Lambda: "\\Lambda",
					lambda: "\\lambda",
					Mu: "M",
					mu: "\\mu",
					Nu: "N",
					nu: "\\nu",
					Xi: "\\Xi",
					xi: "\\xi",
					Omicron: "O",
					omicron: "o",
					Pi: "\\Pi",
					pi: "\\pi",
					varpi: "\\varpi",
					Rho: "P",
					rho: "\\rho",
					varrho: "\\varrho",
					Sigma: "\\Sigma",
					sigma: "\\sigma",
					varsigma: "\\varsigma",
					Tau: "T",
					tau: "\\tau",
					Upsilon: "\\Upsilon",
					upsilon: "\\upsilon",
					Phi: "\\Phi",
					phi: "\\phi",
					varphi: "\\varphi",
					Chi: "X",
					chi: "\\chi",
					Psi: "\\Psi",
					psi: "\\psi",
					Omega: "\\Omega",
					omega: "\\omega",
					true: "\\mathrm{True}",
					false: "\\mathrm{False}",
					i: "i",
					inf: "\\infty",
					Inf: "\\infty",
					infinity: "\\infty",
					Infinity: "\\infty",
					oo: "\\infty",
					lim: "\\lim",
					undefined: "\\mathbf{?}"
				},
				t.operators = {
					transpose: "^\\top",
					factorial: "!",
					pow: "^",
					dotPow: ".^\\wedge",
					unaryPlus: "+",
					unaryMinus: "-",
					bitNot: "~",
					not: "\\neg",
					multiply: "\\cdot",
					divide: "\\frac",
					dotMultiply: ".\\cdot",
					dotDivide: ".:",
					mod: "\\mod",
					add: "+",
					subtract: "-",
					to: "\\rightarrow",
					leftShift: "<<",
					rightArithShift: ">>",
					rightLogShift: ">>>",
					equal: "=",
					unequal: "\\neq",
					smaller: "<",
					larger: ">",
					smallerEq: "\\leq",
					largerEq: "\\geq",
					bitAnd: "\\&",
					bitXor: "\\underline{|}",
					bitOr: "|",
					and: "\\wedge",
					xor: "\\veebar",
					or: "\\vee"
				},
				t.defaultTemplate = "\\mathrm{${name}}\\left(${args}\\right)";
				var n = {
					deg: "^\\circ"
				};
				t.toSymbol = function (e, r) {
					if (r = "undefined" != typeof r && r)
						return n.hasOwnProperty(e) ? n[e] : "\\mathrm{" + e + "}";
					if (t.symbols.hasOwnProperty(e))
						return t.symbols[e];
					if (e.indexOf("_") !== -1) {
						var i = e.indexOf("_");
						return t.toSymbol(e.substring(0, i)) + "_{" + t.toSymbol(e.substring(i + 1)) + "}"
					}
					return e
				}
			}, function (e, t, r) {
				"use strict";
				var n = r(71);
				t.clone = function e(r) {
					var i = typeof r;
					if ("number" === i || "string" === i || "boolean" === i || null === r || void 0 === r)
						return r;
					if ("function" == typeof r.clone)
						return r.clone();
					if (Array.isArray(r))
						return r.map(function (t) {
							return e(t)
						});
					if (r instanceof Number)
						return new Number(r.valueOf());
					if (r instanceof String)
						return new String(r.valueOf());
					if (r instanceof Boolean)
						return new Boolean(r.valueOf());
					if (r instanceof Date)
						return new Date(r.valueOf());
					if (n(r))
						return r;
					if (r instanceof RegExp)
						throw new TypeError("Cannot clone " + r);
					return t.map(r, e)
				},
				t.map = function (e, r) {
					var n = {};
					for (var i in e)
						t.hasOwnProperty(e, i) && (n[i] = r(e[i]));
					return n
				},
				t.extend = function (e, r) {
					for (var n in r)
						t.hasOwnProperty(r, n) && (e[n] = r[n]);
					return e
				},
				t.deepExtend = function e(r, n) {
					if (Array.isArray(n))
						throw new TypeError("Arrays are not supported by deepExtend");
					for (var i in n)
						if (t.hasOwnProperty(n, i))
							if (n[i] && n[i].constructor === Object)
								void 0 === r[i] && (r[i] = {}), r[i].constructor === Object ? e(r[i], n[i]) : r[i] = n[i];
							else {
								if (Array.isArray(n[i]))
									throw new TypeError("Arrays are not supported by deepExtend");
								r[i] = n[i]
							}
					return r
				},
				t.deepEqual = function (e, r) {
					var n,
					i,
					a;
					if (Array.isArray(e)) {
						if (!Array.isArray(r))
							return !1;
						if (e.length != r.length)
							return !1;
						for (i = 0, a = e.length; i < a; i++)
							if (!t.deepEqual(e[i], r[i]))
								return !1;
						return !0
					}
					if (e instanceof Object) {
						if (Array.isArray(r) || !(r instanceof Object))
							return !1;
						for (n in e)
							if (!t.deepEqual(e[n], r[n]))
								return !1;
						for (n in r)
							if (!t.deepEqual(e[n], r[n]))
								return !1;
						return !0
					}
					return typeof e == typeof r && e == r
				},
				t.canDefineProperty = function () {
					try {
						if (Object.defineProperty)
							return Object.defineProperty({}, "x", {
								get: function () {}
							}), !0
					} catch (e) {}
					return !1
				},
				t.lazy = function (e, r, n) {
					if (t.canDefineProperty()) {
						var i,
						a = !0;
						Object.defineProperty(e, r, {
							get: function () {
								return a && (i = n(), a = !1),
								i
							},
							set: function (e) {
								i = e,
								a = !1
							},
							configurable: !0,
							enumerable: !0
						})
					} else
						e[r] = n()
				},
				t.traverse = function (e, t) {
					var r = e;
					if (t)
						for (var n = t.split("."), i = 0; i < n.length; i++) {
							var a = n[i];
							a in r || (r[a] = {}),
							r = r[a]
						}
					return r
				},
				t.hasOwnProperty = function (e, t) {
					return e && Object.hasOwnProperty.call(e, t)
				},
				t.isFactory = function (e) {
					return e && "function" == typeof e.factory
				}
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var a = e.DenseMatrix,
					o = function (e, t, r, o) {
						var u,
						c = e._data,
						f = e._size,
						l = e._datatype,
						p = r;
						"string" == typeof l && (u = l, t = n.convert(t, u), p = n.find(r, [u, u]));
						var h = f.length > 0 ? s(p, 0, f, f[0], c, t, o) : [];
						return new a({
							data: h,
							size: i(f),
							datatype: u
						})
					},
					s = function (e, t, r, n, i, a, o) {
						var u = [];
						if (t === r.length - 1)
							for (var c = 0; c < n; c++)
								u[c] = o ? e(a, i[c]) : e(i[c], a);
						else
							for (var f = 0; f < n; f++)
								u[f] = s(e, t + 1, r, r[t + 1], i[f], a, o);
						return u
					};
					return o
				}
				var i = r(5).clone;
				t.name = "algorithm14",
				t.factory = n
			}, function (e, t, r) {
				function n() {
					function e(e, t) {
						if (void 0 !== r[e])
							throw new Error('Cannot register type "' + e + '": already exists');
						r[e] = t
					}
					function t(e, t, n) {
						if (i(r, e.type)) {
							var a = r[e.type];
							return a(e, t, n)
						}
						if ("function" != typeof e._compile || i(e, "_compile"))
							throw new Error('Cannot compile node: unknown type "' + e.type + '"');
						return e._compile(t, n)
					}
					var r = {};
					return {
						register: e,
						compile: t
					}
				}
				var i = r(5).hasOwnProperty;
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var i = e.DenseMatrix,
					o = function (e, t, r) {
						var o = e._data,
						u = e._size,
						c = e._datatype,
						f = t._data,
						l = t._size,
						p = t._datatype,
						h = [];
						if (u.length !== l.length)
							throw new a(u.length, l.length);
						for (var m = 0; m < u.length; m++) {
							if (u[m] !== l[m])
								throw new RangeError("Dimension mismatch. Matrix A (" + u + ") must match Matrix B (" + l + ")");
							h[m] = u[m]
						}
						var d,
						v = r;
						"string" == typeof c && c === p && (d = c, t = n.convert(t, d), v = n.find(r, [d, d]));
						var g = h.length > 0 ? s(v, 0, h, h[0], o, f) : [];
						return new i({
							data: g,
							size: h,
							datatype: d
						})
					},
					s = function (e, t, r, n, i, a) {
						var o = [];
						if (t === r.length - 1)
							for (var u = 0; u < n; u++)
								o[u] = e(i[u], a[u]);
						else
							for (var c = 0; c < n; c++)
								o[c] = s(e, t + 1, r, r[t + 1], i[c], a[c]);
						return o
					};
					return o
				}
				var i = r(25),
				a = r(10),
				o = i.string;
				o.isString;
				t.name = "algorithm13",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, r) {
					if (Array.isArray(e)) {
						for (var i = "[", a = e.length, o = 0; o < a; o++)
							0 != o && (i += ", "), i += n(e[o], r);
						return i += "]"
					}
					return t.format(e, r)
				}
				function i(e) {
					return e && "object" == typeof e && "number" == typeof e.s && "number" == typeof e.n && "number" == typeof e.d || !1
				}
				var a = r(3).format,
				o = r(165).format,
				s = r(71);
				t.isString = function (e) {
					return "string" == typeof e
				},
				t.endsWith = function (e, t) {
					var r = e.length - t.length,
					n = e.length;
					return e.substring(r, n) === t
				},
				t.format = function (e, r) {
					if ("number" == typeof e)
						return a(e, r);
					if (s(e))
						return o(e, r);
					if (i(e))
						return r && "decimal" === r.fraction ? e.toString() : e.s * e.n + "/" + e.d;
					if (Array.isArray(e))
						return n(e, r);
					if (t.isString(e))
						return '"' + e + '"';
					if ("function" == typeof e)
						return e.syntax ? String(e.syntax) : "function";
					if (e && "object" == typeof e) {
						if ("function" == typeof e.format)
							return e.format(r);
						if (e && e.toString() !== {}
							.toString())
							return e.toString();
						var u = [];
						for (var c in e)
							e.hasOwnProperty(c) && u.push('"' + c + '": ' + t.format(e[c], r));
						return "{" + u.join(", ") + "}"
					}
					return String(e)
				},
				t.stringify = function (e) {
					for (var t = String(e), r = "", n = 0; n < t.length; ) {
						var i = t.charAt(n);
						"\\" === i ? (r += i, n++, i = t.charAt(n), "" !== i && '"\\/bfnrtu'.indexOf(i) !== -1 || (r += "\\"), r += i) : r += '"' === i ? '\\"' : i,
						n++
					}
					return '"' + r + '"'
				},
				t.escape = function (e) {
					var t = String(e);
					return t = t.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
				}
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r) {
					if (!(this instanceof n))
						throw new SyntaxError("Constructor must be called with the new operator");
					this.actual = e,
					this.expected = t,
					this.relation = r,
					this.message = "Dimension mismatch (" + (Array.isArray(e) ? "[" + e.join(", ") + "]" : e) + " " + (this.relation || "!=") + " " + (Array.isArray(t) ? "[" + t.join(", ") + "]" : t) + ")",
					this.stack = (new Error).stack
				}
				n.prototype = new RangeError,
				n.prototype.constructor = RangeError,
				n.prototype.name = "DimensionError",
				n.prototype.isDimensionError = !0,
				e.exports = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var o = n("equalScalar", {
							"boolean, boolean": function (e, t) {
								return e === t
							},
							"number, number": function (e, r) {
								return e === r || i(e, r, t.epsilon)
							},
							"BigNumber, BigNumber": function (e, r) {
								return e.eq(r) || a(e, r, t.epsilon)
							},
							"Fraction, Fraction": function (e, t) {
								return e.equals(t)
							},
							"Complex, Complex": function (e, t) {
								return e.equals(t)
							},
							"Unit, Unit": function (e, t) {
								if (!e.equalBase(t))
									throw new Error("Cannot compare units with different base");
								return o(e.value, t.value)
							},
							"string, string": function (e, t) {
								return e === t
							}
						});
					return o
				}
				var i = r(3).nearlyEqual,
				a = r(35);
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, o) {
					var s = r(4),
					u = n(r(0)),
					c = n(r(20)),
					f = n(r(23)),
					l = n(r(11)),
					p = n(r(17)),
					h = n(r(6)),
					m = e.DenseMatrix,
					d = e.SparseMatrix,
					v = o("multiply", i({
								"Array, Array": function (t, r) {
									g(a.size(t), a.size(r));
									var n = v(u(t), u(r));
									return e.isMatrix(n) ? n.valueOf() : n
								},
								"Matrix, Matrix": function (e, t) {
									var r = e.size(),
									n = t.size();
									return g(r, n),
									1 === r.length ? 1 === n.length ? y(e, t, r[0]) : x(e, t) : 1 === n.length ? b(e, t) : N(e, t)
								},
								"Matrix, Array": function (e, t) {
									return v(e, u(t))
								},
								"Array, Matrix": function (e, t) {
									return v(u(e, t.storage()), t)
								},
								"Matrix, any": function (e, t) {
									var r;
									switch (e.storage()) {
									case "sparse":
										r = p(e, t, f, !1);
										break;
									case "dense":
										r = h(e, t, f, !1)
									}
									return r
								},
								"any, Matrix": function (e, t) {
									var r;
									switch (t.storage()) {
									case "sparse":
										r = p(t, e, f, !0);
										break;
									case "dense":
										r = h(t, e, f, !0)
									}
									return r
								},
								"Array, any": function (e, t) {
									return h(u(e), t, f, !1).valueOf()
								},
								"any, Array": function (e, t) {
									return h(u(t), e, f, !0).valueOf()
								},
								"any, any": f,
								"any, any, ...any": function (e, t, r) {
									for (var n = v(e, t), i = 0; i < r.length; i++)
										n = v(n, r[i]);
									return n
								}
							}, f.signatures)),
					g = function (e, t) {
						switch (e.length) {
						case 1:
							switch (t.length) {
							case 1:
								if (e[0] !== t[0])
									throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");
								break;
							case 2:
								if (e[0] !== t[0])
									throw new RangeError("Dimension mismatch in multiplication. Vector length (" + e[0] + ") must match Matrix rows (" + t[0] + ")");
								break;
							default:
								throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has " + t.length + " dimensions)")
							}
							break;
						case 2:
							switch (t.length) {
							case 1:
								if (e[1] !== t[0])
									throw new RangeError("Dimension mismatch in multiplication. Matrix columns (" + e[1] + ") must match Vector length (" + t[0] + ")");
								break;
							case 2:
								if (e[1] !== t[0])
									throw new RangeError("Dimension mismatch in multiplication. Matrix A columns (" + e[1] + ") must match Matrix B rows (" + t[0] + ")");
								break;
							default:
								throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has " + t.length + " dimensions)")
							}
							break;
						default:
							throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has " + e.length + " dimensions)")
						}
					},
					y = function (e, t, r) {
						if (0 === r)
							throw new Error("Cannot multiply two empty vectors");
						var n,
						i = e._data,
						a = e._datatype,
						s = t._data,
						u = t._datatype,
						l = c,
						p = f;
						a && u && a === u && "string" == typeof a && (n = a, l = o.find(c, [n, n]), p = o.find(f, [n, n]));
						for (var h = p(i[0], s[0]), m = 1; m < r; m++)
							h = l(h, p(i[m], s[m]));
						return h
					},
					x = function (e, t) {
						switch (t.storage()) {
						case "dense":
							return w(e, t)
						}
						throw new Error("Not implemented")
					},
					w = function (e, t) {
						var r,
						n = e._data,
						i = e._size,
						a = e._datatype,
						s = t._data,
						u = t._size,
						l = t._datatype,
						p = i[0],
						h = u[1],
						d = c,
						v = f;
						a && l && a === l && "string" == typeof a && (r = a, d = o.find(c, [r, r]), v = o.find(f, [r, r]));
						for (var g = [], y = 0; y < h; y++) {
							for (var x = v(n[0], s[0][y]), w = 1; w < p; w++)
								x = d(x, v(n[w], s[w][y]));
							g[y] = x
						}
						return new m({
							data: g,
							size: [h],
							datatype: r
						})
					},
					b = function (e, t) {
						switch (e.storage()) {
						case "dense":
							return E(e, t);
						case "sparse":
							return O(e, t)
						}
					},
					N = function (e, t) {
						switch (e.storage()) {
						case "dense":
							switch (t.storage()) {
							case "dense":
								return M(e, t);
							case "sparse":
								return A(e, t)
							}
							break;
						case "sparse":
							switch (t.storage()) {
							case "dense":
								return T(e, t);
							case "sparse":
								return _(e, t)
							}
						}
					},
					E = function (e, t) {
						var r,
						n = e._data,
						i = e._size,
						a = e._datatype,
						s = t._data,
						u = t._datatype,
						l = i[0],
						p = i[1],
						h = c,
						d = f;
						a && u && a === u && "string" == typeof a && (r = a, h = o.find(c, [r, r]), d = o.find(f, [r, r]));
						for (var v = [], g = 0; g < l; g++) {
							for (var y = n[g], x = d(y[0], s[0]), w = 1; w < p; w++)
								x = h(x, d(y[w], s[w]));
							v[g] = x
						}
						return new m({
							data: v,
							size: [l],
							datatype: r
						})
					},
					M = function (e, t) {
						var r,
						n = e._data,
						i = e._size,
						a = e._datatype,
						s = t._data,
						u = t._size,
						l = t._datatype,
						p = i[0],
						h = i[1],
						d = u[1],
						v = c,
						g = f;
						a && l && a === l && "string" == typeof a && (r = a, v = o.find(c, [r, r]), g = o.find(f, [r, r]));
						for (var y = [], x = 0; x < p; x++) {
							var w = n[x];
							y[x] = [];
							for (var b = 0; b < d; b++) {
								for (var N = g(w[0], s[0][b]), E = 1; E < h; E++)
									N = v(N, g(w[E], s[E][b]));
								y[x][b] = N
							}
						}
						return new m({
							data: y,
							size: [p, d],
							datatype: r
						})
					},
					A = function (e, t) {
						var r = e._data,
						n = e._size,
						i = e._datatype,
						a = t._values,
						s = t._index,
						u = t._ptr,
						p = t._size,
						h = t._datatype;
						if (!a)
							throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");
						var m,
						v = n[0],
						g = p[1],
						y = c,
						x = f,
						w = l,
						b = 0;
						i && h && i === h && "string" == typeof i && (m = i, y = o.find(c, [m, m]), x = o.find(f, [m, m]), w = o.find(l, [m, m]), b = o.convert(0, m));
						for (var N = [], E = [], M = [], A = new d({
									values: N,
									index: E,
									ptr: M,
									size: [v, g],
									datatype: m
								}), O = 0; O < g; O++) {
							M[O] = E.length;
							var T = u[O],
							_ = u[O + 1];
							if (_ > T)
								for (var S = 0, C = 0; C < v; C++) {
									for (var z, k = C + 1, I = T; I < _; I++) {
										var B = s[I];
										S !== k ? (z = x(r[C][B], a[I]), S = k) : z = y(z, x(r[C][B], a[I]))
									}
									S !== k || w(z, b) || (E.push(C), N.push(z))
								}
						}
						return M[g] = E.length,
						A
					},
					O = function (e, t) {
						var r = e._values,
						n = e._index,
						i = e._ptr,
						a = e._datatype;
						if (!r)
							throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");
						var s,
						u = t._data,
						p = t._datatype,
						h = e._size[0],
						m = t._size[0],
						v = [],
						g = [],
						y = [],
						x = c,
						w = f,
						b = l,
						N = 0;
						a && p && a === p && "string" == typeof a && (s = a, x = o.find(c, [s, s]), w = o.find(f, [s, s]), b = o.find(l, [s, s]), N = o.convert(0, s));
						var E = [],
						M = [];
						y[0] = 0;
						for (var A = 0; A < m; A++) {
							var O = u[A];
							if (!b(O, N))
								for (var T = i[A], _ = i[A + 1], S = T; S < _; S++) {
									var C = n[S];
									M[C] ? E[C] = x(E[C], w(O, r[S])) : (M[C] = !0, g.push(C), E[C] = w(O, r[S]))
								}
						}
						for (var z = g.length, k = 0; k < z; k++) {
							var I = g[k];
							v[k] = E[I]
						}
						return y[1] = g.length,
						new d({
							values: v,
							index: g,
							ptr: y,
							size: [h, 1],
							datatype: s
						})
					},
					T = function (e, t) {
						var r = e._values,
						n = e._index,
						i = e._ptr,
						a = e._datatype;
						if (!r)
							throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");
						var s,
						u = t._data,
						p = t._datatype,
						h = e._size[0],
						m = t._size[0],
						v = t._size[1],
						g = c,
						y = f,
						x = l,
						w = 0;
						a && p && a === p && "string" == typeof a && (s = a, g = o.find(c, [s, s]), y = o.find(f, [s, s]), x = o.find(l, [s, s]), w = o.convert(0, s));
						for (var b = [], N = [], E = [], M = new d({
									values: b,
									index: N,
									ptr: E,
									size: [h, v],
									datatype: s
								}), A = [], O = [], T = 0; T < v; T++) {
							E[T] = N.length;
							for (var _ = T + 1, S = 0; S < m; S++) {
								var C = u[S][T];
								if (!x(C, w))
									for (var z = i[S], k = i[S + 1], I = z; I < k; I++) {
										var B = n[I];
										O[B] !== _ ? (O[B] = _, N.push(B), A[B] = y(C, r[I])) : A[B] = g(A[B], y(C, r[I]))
									}
							}
							for (var P = E[T], R = N.length, U = P; U < R; U++) {
								var q = N[U];
								b[U] = A[q]
							}
						}
						return E[v] = N.length,
						M
					},
					_ = function (e, t) {
						var r,
						n = e._values,
						i = e._index,
						a = e._ptr,
						s = e._datatype,
						u = t._values,
						l = t._index,
						p = t._ptr,
						h = t._datatype,
						m = e._size[0],
						v = t._size[1],
						g = n && u,
						y = c,
						x = f;
						s && h && s === h && "string" == typeof s && (r = s, y = o.find(c, [r, r]), x = o.find(f, [r, r]));
						for (var w, b, N, E, M, A, O, T, _ = g ? [] : void 0, S = [], C = [], z = new d({
									values: _,
									index: S,
									ptr: C,
									size: [m, v],
									datatype: r
								}), k = g ? [] : void 0, I = [], B = 0; B < v; B++) {
							C[B] = S.length;
							var P = B + 1;
							for (M = p[B], A = p[B + 1], E = M; E < A; E++)
								if (T = l[E], g)
									for (b = a[T], N = a[T + 1], w = b; w < N; w++)
										O = i[w], I[O] !== P ? (I[O] = P, S.push(O), k[O] = x(u[E], n[w])) : k[O] = y(k[O], x(u[E], n[w]));
								else
									for (b = a[T], N = a[T + 1], w = b; w < N; w++)
										O = i[w], I[O] !== P && (I[O] = P, S.push(O));
							if (g)
								for (var R = C[B], U = S.length, q = R; q < U; q++) {
									var L = S[q];
									_[q] = k[L]
								}
						}
						return C[v] = S.length,
						z
					};
					return v.toTex = {
						2: "\\left(${args[0]}" + s.operators.multiply + "${args[1]}\\right)"
					},
					v
				}
				var i = r(5).extend,
				a = r(2);
				t.name = "multiply",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t) {
					if (u(e) && a(e, t))
						return e[t];
					if ("function" == typeof e[t] && s(e, t))
						throw new Error('Cannot access method "' + t + '" as a property');
					throw new Error('No access to property "' + t + '"')
				}
				function i(e, t, r) {
					if (u(e) && a(e, t))
						return e[t] = r;
					throw new Error('No access to property "' + t + '"')
				}
				function a(e, t) {
					return !(!e || "object" != typeof e) && (!!c(f, t) || !(t in Object.prototype) && !(t in Function.prototype))
				}
				function o(e, t) {
					if (!s(e, t))
						throw new Error('No access to method "' + t + '"')
				}
				function s(e, t) {
					return !(!e || "function" != typeof e[t]) && (!(c(e, t) && e.__proto__ && t in e.__proto__) && (!!c(l, t) || !(t in Object.prototype) && !(t in Function.prototype)))
				}
				function u(e) {
					return "object" == typeof e && e && e.constructor === Object
				}
				var c = r(5).hasOwnProperty,
				f = {
					length: !0,
					name: !0
				},
				l = {
					toString: !0,
					valueOf: !0,
					toLocaleString: !0
				};
				t.getSafeProperty = n,
				t.setSafeProperty = i,
				t.isSafeProperty = a,
				t.validateSafeMethod = o,
				t.isSafeMethod = s,
				t.isPlainObject = u
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, s, u) {
					function c() {
						if (!(this instanceof c))
							throw new SyntaxError("Constructor must be called with the new operator")
					}
					function f(e) {
						for (var t in e)
							if (o(e, t) && t in i)
								throw new Error('Scope contains an illegal symbol, "' + t + '" is a reserved keyword')
					}
					var l = n(r(7)).compile;
					return c.prototype.eval = function (e) {
						return this.compile().eval(e)
					},
					c.prototype.type = "Node",
					c.prototype.isNode = !0,
					c.prototype.comment = "",
					c.prototype.compile = function () {
						if (arguments.length > 0)
							throw new Error("Calling compile(math) is deprecated. Call the function as compile() instead.");
						var e = {
							math: u.expression.mathWithTransform,
							args: {},
							_validateScope: f
						},
						t = {},
						r = l(this, e, t),
						n = Object.keys(e).map(function (e) {
								return "    var " + e + ' = defs["' + e + '"];'
							}),
						i = n.join(" ") + 'return {  "eval": function (scope) {    if (scope) _validateScope(scope);    scope = scope || {};    return ' + r + ";  }};",
						a = new Function("defs", i);
						return a(e)
					},
					c.prototype.forEach = function (e) {
						throw new Error("Cannot run forEach on a Node interface")
					},
					c.prototype.map = function (e) {
						throw new Error("Cannot run map on a Node interface")
					},
					c.prototype._ifNode = function (t) {
						if (!e.isNode(t))
							throw new TypeError("Callback function must return a Node");
						return t
					},
					c.prototype.traverse = function (e) {
						function t(e, r) {
							e.forEach(function (e, n, i) {
								r(e, n, i),
								t(e, r)
							})
						}
						e(this, null, null),
						t(this, e)
					},
					c.prototype.transform = function (e) {
						function t(e, r) {
							return e.map(function (e, n, i) {
								var a = r(e, n, i);
								return t(a, r)
							})
						}
						var r = e(this, null, null);
						return t(r, e)
					},
					c.prototype.filter = function (e) {
						var t = [];
						return this.traverse(function (r, n, i) {
							e(r, n, i) && t.push(r)
						}),
						t
					},
					c.prototype.find = function () {
						throw new Error("Function Node.find is deprecated. Use Node.filter instead.")
					},
					c.prototype.match = function () {
						throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")
					},
					c.prototype.clone = function () {
						throw new Error("Cannot clone a Node interface")
					},
					c.prototype.cloneDeep = function () {
						return this.map(function (e) {
							return e.cloneDeep()
						})
					},
					c.prototype.equals = function (e) {
						return !!e && a(this, e)
					},
					c.prototype.toString = function (e) {
						var t;
						if (e && "object" == typeof e)
							switch (typeof e.handler) {
							case "object":
							case "undefined":
								break;
							case "function":
								t = e.handler(this, e);
								break;
							default:
								throw new TypeError("Object or function expected as callback")
							}
						return "undefined" != typeof t ? t : this._toString(e)
					},
					c.prototype.toHTML = function (e) {
						var t;
						if (e && "object" == typeof e)
							switch (typeof e.handler) {
							case "object":
							case "undefined":
								break;
							case "function":
								t = e.handler(this, e);
								break;
							default:
								throw new TypeError("Object or function expected as callback")
							}
						return "undefined" != typeof t ? t : this.toHTML(e)
					},
					c.prototype._toString = function () {
						throw new Error("_toString not implemented for " + this.type)
					},
					c.prototype.toTex = function (e) {
						var t;
						if (e && "object" == typeof e)
							switch (typeof e.handler) {
							case "object":
							case "undefined":
								break;
							case "function":
								t = e.handler(this, e);
								break;
							default:
								throw new TypeError("Object or function expected as callback")
							}
						return "undefined" != typeof t ? t : this._toTex(e)
					},
					c.prototype._toTex = function (e) {
						throw new Error("_toTex not implemented for " + this.type)
					},
					c.prototype.getIdentifier = function () {
						return this.type
					},
					c.prototype.getContent = function () {
						return this
					},
					c
				}
				var i = r(77),
				a = r(5).deepEqual,
				o = r(5).hasOwnProperty;
				t.name = "Node",
				t.path = "expression.node",
				t.math = !0,
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var a = e.DenseMatrix,
					o = function (e, t, r, o) {
						var s = e._data,
						u = e._size,
						c = e._datatype,
						f = t._values,
						l = t._index,
						p = t._ptr,
						h = t._size,
						m = t._datatype;
						if (u.length !== h.length)
							throw new i(u.length, h.length);
						if (u[0] !== h[0] || u[1] !== h[1])
							throw new RangeError("Dimension mismatch. Matrix A (" + u + ") must match Matrix B (" + h + ")");
						if (!f)
							throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");
						var d,
						v = u[0],
						g = u[1],
						y = 0,
						x = r;
						"string" == typeof c && c === m && (d = c, y = n.convert(0, d), x = n.find(r, [d, d]));
						for (var w = [], b = 0; b < v; b++)
							w[b] = [];
						for (var N = [], E = [], M = 0; M < g; M++) {
							for (var A = M + 1, O = p[M], T = p[M + 1], _ = O; _ < T; _++) {
								var S = l[_];
								N[S] = o ? x(f[_], s[S][M]) : x(s[S][M], f[_]),
								E[S] = A
							}
							for (var C = 0; C < v; C++)
								E[C] === A ? w[C][M] = N[C] : w[C][M] = o ? x(y, s[C][M]) : x(s[C][M], y)
						}
						return new a({
							data: w,
							size: [v, g],
							datatype: d
						})
					};
					return o
				}
				var i = r(10);
				t.name = "algorithm03",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var i = e.DenseMatrix,
					a = function (e, t, r, a) {
						var o = e._values,
						s = e._index,
						u = e._ptr,
						c = e._size,
						f = e._datatype;
						if (!o)
							throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");
						var l,
						p = c[0],
						h = c[1],
						m = r;
						"string" == typeof f && (l = f, t = n.convert(t, l), m = n.find(r, [l, l]));
						for (var d = [], v = new i({
									data: d,
									size: [p, h],
									datatype: l
								}), g = [], y = [], x = 0; x < h; x++) {
							for (var w = x + 1, b = u[x], N = u[x + 1], E = b; E < N; E++) {
								var M = s[E];
								g[M] = o[E],
								y[M] = w
							}
							for (var A = 0; A < p; A++)
								0 === x && (d[A] = []), y[A] === w ? d[A][x] = a ? m(t, g[A]) : m(g[A], t) : d[A][x] = a ? m(t, 0) : m(0, t)
						}
						return v
					};
					return a
				}
				t.name = "algorithm12",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, i) {
					var a = n(r(11)),
					o = e.SparseMatrix,
					s = function (e, t, r, n) {
						var s = e._values,
						u = e._index,
						c = e._ptr,
						f = e._size,
						l = e._datatype;
						if (!s)
							throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");
						var p,
						h = f[0],
						m = f[1],
						d = a,
						v = 0,
						g = r;
						"string" == typeof l && (p = l, d = i.find(a, [p, p]), v = i.convert(0, p), t = i.convert(t, p), g = i.find(r, [p, p]));
						for (var y = [], x = [], w = [], b = new o({
									values: y,
									index: x,
									ptr: w,
									size: [h, m],
									datatype: p
								}), N = 0; N < m; N++) {
							w[N] = x.length;
							for (var E = c[N], M = c[N + 1], A = E; A < M; A++) {
								var O = u[A],
								T = n ? g(t, s[A]) : g(s[A], t);
								d(T, v) || (x.push(O), y.push(T))
							}
						}
						return w[m] = x.length,
						b
					};
					return s
				}
				t.name = "algorithm11",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, a) {
					var o = n(r(0)),
					s = n(r(20)),
					u = r(4),
					c = n(r(33)),
					f = n(r(73)),
					l = n(r(36)),
					p = n(r(8)),
					h = n(r(6)),
					m = a("add", i({
								"Matrix, Matrix": function (e, t) {
									var r;
									switch (e.storage()) {
									case "sparse":
										switch (t.storage()) {
										case "sparse":
											r = f(e, t, s);
											break;
										default:
											r = c(t, e, s, !0)
										}
										break;
									default:
										switch (t.storage()) {
										case "sparse":
											r = c(e, t, s, !1);
											break;
										default:
											r = p(e, t, s)
										}
									}
									return r
								},
								"Array, Array": function (e, t) {
									return m(o(e), o(t)).valueOf()
								},
								"Array, Matrix": function (e, t) {
									return m(o(e), t)
								},
								"Matrix, Array": function (e, t) {
									return m(e, o(t))
								},
								"Matrix, any": function (e, t) {
									var r;
									switch (e.storage()) {
									case "sparse":
										r = l(e, t, s, !1);
										break;
									default:
										r = h(e, t, s, !1)
									}
									return r
								},
								"any, Matrix": function (e, t) {
									var r;
									switch (t.storage()) {
									case "sparse":
										r = l(t, e, s, !0);
										break;
									default:
										r = h(t, e, s, !0)
									}
									return r
								},
								"Array, any": function (e, t) {
									return h(o(e), t, s, !1).valueOf()
								},
								"any, Array": function (e, t) {
									return h(o(t), e, s, !0).valueOf()
								},
								"any, any": s,
								"any, any, ...any": function (e, t, r) {
									for (var n = m(e, t), i = 0; i < r.length; i++)
										n = m(n, r[i]);
									return n
								}
							}, s.signatures));
					return m.toTex = {
						2: "\\left(${args[0]}" + u.operators.add + "${args[1]}\\right)"
					},
					m
				}
				var i = r(5).extend;
				t.name = "add",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, i) {
					var a = n(r(23)),
					o = i("divide", {
							"number, number": function (e, t) {
								return e / t
							},
							"Complex, Complex": function (e, t) {
								return e.div(t)
							},
							"BigNumber, BigNumber": function (e, t) {
								return e.div(t)
							},
							"Fraction, Fraction": function (e, t) {
								return e.div(t)
							},
							"Unit, number | Fraction | BigNumber": function (e, t) {
								var r = e.clone();
								return r.value = o(null === r.value ? r._normalize(1) : r.value, t),
								r
							},
							"number | Fraction | BigNumber, Unit": function (e, t) {
								var r = t.pow(-1);
								return r.value = a(null === r.value ? r._normalize(1) : r.value, e),
								r
							},
							"Unit, Unit": function (e, t) {
								return e.divide(t)
							}
						});
					return o
				}
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var i = n("add", {
							"number, number": function (e, t) {
								return e + t
							},
							"Complex, Complex": function (e, t) {
								return e.add(t)
							},
							"BigNumber, BigNumber": function (e, t) {
								return e.plus(t)
							},
							"Fraction, Fraction": function (e, t) {
								return e.add(t)
							},
							"Unit, Unit": function (e, t) {
								if (null == e.value)
									throw new Error("Parameter x contains a unit with undefined value");
								if (null == t.value)
									throw new Error("Parameter y contains a unit with undefined value");
								if (!e.equalBase(t))
									throw new Error("Units do not match");
								var r = e.clone();
								return r.value = i(r.value, t.value),
								r.fixPrefix = !1,
								r
							}
						});
					return i
				}
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, a) {
					var o = r(4),
					s = n(r(0)),
					u = n(r(20)),
					c = n(r(37)),
					f = n(r(33)),
					l = n(r(15)),
					p = n(r(60)),
					h = n(r(36)),
					m = n(r(8)),
					d = n(r(6)),
					v = a("subtract", {
							"number, number": function (e, t) {
								return e - t
							},
							"Complex, Complex": function (e, t) {
								return e.sub(t)
							},
							"BigNumber, BigNumber": function (e, t) {
								return e.minus(t)
							},
							"Fraction, Fraction": function (e, t) {
								return e.sub(t)
							},
							"Unit, Unit": function (e, t) {
								if (null == e.value)
									throw new Error("Parameter x contains a unit with undefined value");
								if (null == t.value)
									throw new Error("Parameter y contains a unit with undefined value");
								if (!e.equalBase(t))
									throw new Error("Units do not match");
								var r = e.clone();
								return r.value = v(r.value, t.value),
								r.fixPrefix = !1,
								r
							},
							"Matrix, Matrix": function (e, t) {
								var r = e.size(),
								n = t.size();
								if (r.length !== n.length)
									throw new i(r.length, n.length);
								var a;
								switch (e.storage()) {
								case "sparse":
									switch (t.storage()) {
									case "sparse":
										a = p(e, t, v);
										break;
									default:
										a = l(t, e, v, !0)
									}
									break;
								default:
									switch (t.storage()) {
									case "sparse":
										a = f(e, t, v, !1);
										break;
									default:
										a = m(e, t, v)
									}
								}
								return a
							},
							"Array, Array": function (e, t) {
								return v(s(e), s(t)).valueOf()
							},
							"Array, Matrix": function (e, t) {
								return v(s(e), t)
							},
							"Matrix, Array": function (e, t) {
								return v(e, s(t))
							},
							"Matrix, any": function (e, t) {
								var r;
								switch (e.storage()) {
								case "sparse":
									r = h(e, c(t), u);
									break;
								default:
									r = d(e, t, v)
								}
								return r
							},
							"any, Matrix": function (e, t) {
								var r;
								switch (t.storage()) {
								case "sparse":
									r = h(t, e, v, !0);
									break;
								default:
									r = d(t, e, v, !0)
								}
								return r
							},
							"Array, any": function (e, t) {
								return d(s(e), t, v, !1).valueOf()
							},
							"any, Array": function (e, t) {
								return d(s(t), e, v, !0).valueOf()
							}
						});
					return v.toTex = {
						2: "\\left(${args[0]}" + o.operators.subtract + "${args[1]}\\right)"
					},
					v
				}
				var i = r(10);
				t.name = "subtract",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, u) {
					function c(t, r) {
						if (!e.isIndex(r))
							throw new TypeError("Index expected");
						if (1 != r.size().length)
							throw new f(r.size().length, 1);
						var n = t.length;
						s(r.min()[0], n),
						s(r.max()[0], n);
						var i = r.dimension(0),
						a = "";
						return i.forEach(function (e) {
							a += t.charAt(e)
						}),
						a
					}
					function l(e, t, r, n) {
						if (!t || t.isIndex !== !0)
							throw new TypeError("Index expected");
						if (1 != t.size().length)
							throw new f(t.size().length, 1);
						if (void 0 !== n) {
							if ("string" != typeof n || 1 !== n.length)
								throw new TypeError("Single character expected as defaultValue")
						} else
							n = " ";
						var i = t.dimension(0),
						a = i.size()[0];
						if (a != r.length)
							throw new f(i.size()[0], r.length);
						var o = e.length;
						s(t.min()[0]),
						s(t.max()[0]);
						for (var u = [], c = 0; c < o; c++)
							u[c] = e.charAt(c);
						if (i.forEach(function (e, t) {
								u[e] = r.charAt(t[0])
							}), u.length > o)
							for (c = o - 1, a = u.length; c < a; c++)
								u[c] || (u[c] = n);
						return u.join("")
					}
					var p = n(r(0)),
					h = u("subset", {
							"Array, Index": function (e, t) {
								var r = p(e),
								n = r.subset(t);
								return t.isScalar() ? n : n.valueOf()
							},
							"Matrix, Index": function (e, t) {
								return e.subset(t)
							},
							"Object, Index": i,
							"string, Index": c,
							"Array, Index, any": function (e, t, r) {
								return p(o(e)).subset(t, r, void 0).valueOf()
							},
							"Array, Index, any, any": function (e, t, r, n) {
								return p(o(e)).subset(t, r, n).valueOf()
							},
							"Matrix, Index, any": function (e, t, r) {
								return e.clone().subset(t, r)
							},
							"Matrix, Index, any, any": function (e, t, r, n) {
								return e.clone().subset(t, r, n)
							},
							"string, Index, string": l,
							"string, Index, string, string": l,
							"Object, Index, any": a
						});
					return h.toTex = void 0,
					h
				}
				function i(e, t) {
					if (1 !== t.size().length)
						throw new f(t.size(), 1);
					var r = t.dimension(0);
					if ("string" != typeof r)
						throw new TypeError("String expected as index to retrieve an object property");
					return u(e, r)
				}
				function a(e, t, r) {
					if (1 !== t.size().length)
						throw new f(t.size(), 1);
					var n = t.dimension(0);
					if ("string" != typeof n)
						throw new TypeError("String expected as index to retrieve an object property");
					var i = o(e);
					return c(i, n, r),
					i
				}
				var o = r(5).clone,
				s = r(2).validateIndex,
				u = r(13).getSafeProperty,
				c = r(13).setSafeProperty,
				f = r(10);
				t.name = "subset",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, r, n) {
					var i = n("multiplyScalar", {
							"number, number": function (e, t) {
								return e * t
							},
							"Complex, Complex": function (e, t) {
								return e.mul(t)
							},
							"BigNumber, BigNumber": function (e, t) {
								return e.times(t)
							},
							"Fraction, Fraction": function (e, t) {
								return e.mul(t)
							},
							"number | Fraction | BigNumber | Complex, Unit": function (e, t) {
								var r = t.clone();
								return r.value = null === r.value ? r._normalize(e) : i(r.value, e),
								r
							},
							"Unit, number | Fraction | BigNumber | Complex": function (e, t) {
								var r = e.clone();
								return r.value = null === r.value ? r._normalize(t) : i(r.value, t),
								r
							},
							"Unit, Unit": function (e, t) {
								return e.multiply(t)
							}
						});
					return i
				}
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				function n(e, t, n, a) {
					var o = n(r(11)),
					s = e.SparseMatrix,
					u = function (e, t, r, n) {
						var u = e._data,
						c = e._size,
						f = e._datatype,
						l = t._values,
						p = t._index,
						h = t._ptr,
						m = t._size,
						d = t._datatype;
						if (c.length !== m.length)
							throw new i(c.length, m.length);
						if (c[0] !== m[0] || c[1] !== m[1])
							throw new RangeError("Dimension mismatch. Matrix A (" + c + ") must match Matrix B (" + m + ")");
						if (!l)
							throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");
						var v,
						g = c[0],
						y = c[1],
						x = o,
						w = 0,
						b = r;
						"string" == typeof f && f === d && (v = f, x = a.find(o, [v, v]), w = a.convert(0, v), b = a.find(r, [v, v]));
						for (var N = [], E = [], M = [], A = 0; A < y; A++) {
							M[A] = E.length;
							for (var O = h[A], T = h[A + 1], _ = O; _ < T; _++) {
								var S = p[_],
								C = n ? b(l[_], u[S][A]) : b(u[S][A], l[_]);
								x(C, w) || (E.push(S), N.push(C))
							}
						}
						return M[y] = E.length,
						new s({
							values: N,
							index: E,
							ptr: M,
							size: [g, y],
							datatype: v
						})
					};
					return u
				}
				var i = r(10);
				t.name = "algorithm02",
				t.factory = n
			}, function (e, t, r) {
				"use strict";
				t.array = r(2),
				t.boolean = r(174),
				t.function  = r(32), t.number = r(3), t.object = r(5), t.string = r(9), t.types = r(59), t.emitter = r(90)
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = e.DenseMatrix,
				o = function (e, t, r) {
					var o = e._size,
					u = e._datatype,
					c = t._size,
					f = t._datatype;
					if (o.length !== c.length)
						throw new i(o.length, c.length);
					if (o[0] !== c[0] || o[1] !== c[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + o + ") must match Matrix B (" + c + ")");
					var l,
					p = o[0],
					h = o[1],
					m = 0,
					d = r;
					"string" == typeof u && u === f && (l = u, m = n.convert(0, l), d = n.find(r, [l, l]));
					var v,
					g,
					y = [];
					for (v = 0; v < p; v++)
						y[v] = [];
					var x = new a({
							data: y,
							size: [p, h],
							datatype: l
						}),
					w = [],
					b = [],
					N = [],
					E = [];
					for (g = 0; g < h; g++) {
						var M = g + 1;
						for (s(e, g, N, w, M), s(t, g, E, b, M), v = 0; v < p; v++) {
							var A = N[v] === M ? w[v] : m,
							O = E[v] === M ? b[v] : m;
							y[v][g] = d(A, O)
						}
					}
					return x
				},
				s = function (e, t, r, n, i) {
					for (var a = e._values, o = e._index, s = e._ptr, u = s[t], c = s[t + 1]; u < c; u++) {
						var f = o[u];
						r[f] = i,
						n[f] = a[u]
					}
				};
				return o
			}
			var i = r(10);
			t.name = "algorithm07",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e) {
				function t(n) {
					if (!(this instanceof t))
						throw new SyntaxError("Constructor must be called with the new operator");
					this._dimensions = [],
					this._isScalar = !0;
					for (var i = 0, a = arguments.length; i < a; i++) {
						var o = arguments[i];
						if (e.isRange(o))
							this._dimensions.push(o), this._isScalar = !1;
						else if (Array.isArray(o) || e.isMatrix(o)) {
							var s = r(o.valueOf());
							this._dimensions.push(s);
							var u = s.size();
							1 === u.length && 1 === u[0] || (this._isScalar = !1)
						} else if ("number" == typeof o)
							this._dimensions.push(r([o]));
						else {
							if ("string" != typeof o)
								throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");
							this._dimensions.push(o)
						}
					}
				}
				function r(t) {
					for (var r = 0, n = t.length; r < n; r++)
						if ("number" != typeof t[r] || !a(t[r]))
							throw new TypeError("Index parameters must be positive integer numbers");
					return new e.ImmutableDenseMatrix(t)
				}
				return t.prototype.type = "Index",
				t.prototype.isIndex = !0,
				t.prototype.clone = function () {
					var e = new t;
					return e._dimensions = i(this._dimensions),
					e._isScalar = this._isScalar,
					e
				},
				t.create = function (e) {
					var r = new t;
					return t.apply(r, e),
					r
				},
				t.prototype.size = function () {
					for (var e = [], t = 0, r = this._dimensions.length; t < r; t++) {
						var n = this._dimensions[t];
						e[t] = "string" == typeof n ? 1 : n.size()[0]
					}
					return e
				},
				t.prototype.max = function () {
					for (var e = [], t = 0, r = this._dimensions.length; t < r; t++) {
						var n = this._dimensions[t];
						e[t] = "string" == typeof n ? n : n.max()
					}
					return e
				},
				t.prototype.min = function () {
					for (var e = [], t = 0, r = this._dimensions.length; t < r; t++) {
						var n = this._dimensions[t];
						e[t] = "string" == typeof n ? n : n.min()
					}
					return e
				},
				t.prototype.forEach = function (e) {
					for (var t = 0, r = this._dimensions.length; t < r; t++)
						e(this._dimensions[t], t, this)
				},
				t.prototype.dimension = function (e) {
					return this._dimensions[e] || null
				},
				t.prototype.isObjectProperty = function () {
					return 1 === this._dimensions.length && "string" == typeof this._dimensions[0]
				},
				t.prototype.getObjectProperty = function () {
					return this.isObjectProperty() ? this._dimensions[0] : null
				},
				t.prototype.isScalar = function () {
					return this._isScalar
				},
				t.prototype.toArray = function () {
					for (var e = [], t = 0, r = this._dimensions.length; t < r; t++) {
						var n = this._dimensions[t];
						e.push("string" == typeof n ? n : n.toArray())
					}
					return e
				},
				t.prototype.valueOf = t.prototype.toArray,
				t.prototype.toString = function () {
					for (var e = [], t = 0, r = this._dimensions.length; t < r; t++) {
						var n = this._dimensions[t];
						"string" == typeof n ? e.push(JSON.stringify(n)) : e.push(n.toString())
					}
					return "[" + e.join(", ") + "]"
				},
				t.prototype.toJSON = function () {
					return {
						mathjs: "Index",
						dimensions: this._dimensions
					}
				},
				t.fromJSON = function (e) {
					return t.create(e.dimensions)
				},
				t
			}
			var i = r(5).clone,
			a = r(3).isInteger;
			t.name = "Index",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(0)),
				s = a("size", {
						Matrix: function (e) {
							return o(e.size())
						},
						Array: i.size,
						string: function (e) {
							return "Array" === t.matrix ? [e.length] : o([e.length])
						},
						"number | Complex | BigNumber | Unit | boolean | null": function (e) {
							return "Array" === t.matrix ? [] : o([])
						}
					});
				return s.toTex = void 0,
				s
			}
			var i = r(2);
			t.name = "size",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("abs", {
						number: Math.abs,
						Complex: function (e) {
							return e.abs()
						},
						BigNumber: function (e) {
							return e.abs()
						},
						Fraction: function (e) {
							return e.abs()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						},
						Unit: function (e) {
							return e.abs()
						}
					});
				return a.toTex = {
					1: "\\left|${args[0]}\\right|"
				},
				a
			}
			var i = r(1);
			t.name = "abs",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(11)),
				s = n(r(15)),
				u = n(r(26)),
				c = n(r(16)),
				f = n(r(8)),
				l = n(r(6)),
				p = r(4),
				h = i("equal", {
						"any, any": function (e, t) {
							return null === e ? null === t : null === t ? null === e : void 0 === e ? void 0 === t : void 0 === t ? void 0 === e : o(e, t)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, o);
									break;
								default:
									r = s(t, e, o, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = s(e, t, o, !1);
									break;
								default:
									r = f(e, t, o)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return h(a(e), a(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return h(a(e), t)
						},
						"Matrix, Array": function (e, t) {
							return h(e, a(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = c(e, t, o, !1);
								break;
							default:
								r = l(e, t, o, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = c(t, e, o, !0);
								break;
							default:
								r = l(t, e, o, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return l(a(e), t, o, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return l(a(t), e, o, !0).valueOf()
						}
					});
				return h.toTex = {
					2: "\\left(${args[0]}" + p.operators.equal + "${args[1]}\\right)"
				},
				h
			}
			t.name = "equal",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					return e.isSparseMatrix(t) && e.isSparseMatrix(r) ? u(t.toJSON().values, r.toJSON().values) : e.isSparseMatrix(t) ? s(t.toArray(), r) : e.isSparseMatrix(r) ? s(t, r.toArray()) : e.isDenseMatrix(t) ? s(t.toJSON().data, r) : e.isDenseMatrix(r) ? s(t, r.toJSON().data) : Array.isArray(t) ? Array.isArray(r) ? u(t, r) : s(t, [r]) : s([t], r)
				}
				function u(e, t) {
					for (var r = 0, n = Math.min(e.length, t.length); r < n; r++) {
						var i = h(e[r], t[r]);
						if (0 !== i)
							return i
					}
					return e.length > t.length ? 1 : e.length < t.length ? -1 : 0
				}
				function c(e, t) {
					var r = Object.keys(e),
					n = Object.keys(t);
					r.sort(a),
					n.sort(a);
					var i = u(r, n);
					if (0 !== i)
						return i;
					for (var o = 0; o < r.length; o++) {
						var s = h(e[r[o]], t[n[o]]);
						if (0 !== s)
							return s
					}
					return 0
				}
				var f = n(r(76)),
				l = (n(r(0)), n(r(49))),
				p = l.signatures["boolean,boolean"],
				h = o("compareNatural", {
						"any, any": function (e, t) {
							var r,
							n = f(e),
							o = f(t);
							if (!("number" !== n && "BigNumber" !== n && "Fraction" !== n || "number" !== o && "BigNumber" !== o && "Fraction" !== o))
								return r = l(e, t), "0" !== r.toString() ? r > 0 ? 1 : -1 : a(n, o);
							if ("Array" === n || "Matrix" === n || "Array" === o || "Matrix" === o)
								return r = s(e, t), 0 !== r ? r : a(n, o);
							if (n !== o)
								return a(n, o);
							if ("Complex" === n)
								return i(e, t);
							if ("Unit" === n)
								return e.equalBase(t) ? h(e.value, t.value) : u(e.formatUnits(), t.formatUnits());
							if ("boolean" === n)
								return p(e, t);
							if ("string" === n)
								return a(e, t);
							if ("Object" === n)
								return c(e, t);
							if ("null" === n)
								return 0;
							if ("undefined" === n)
								return 0;
							throw new TypeError('Unsupported type of value "' + n + '"')
						}
					});
				return h.toTex = void 0,
				h
			}
			function i(e, t) {
				return e.re > t.re ? 1 : e.re < t.re ? -1 : e.im > t.im ? 1 : e.im < t.im ? -1 : 0
			}
			var a = r(483);
			t.name = "compareNatural",
			t.factory = n
		}, function (e, t) {
			t.memoize = function (e, t) {
				return function r() {
					"object" != typeof r.cache && (r.cache = {});
					for (var n = [], i = 0; i < arguments.length; i++)
						n[i] = arguments[i];
					var a = t ? t(n) : JSON.stringify(n);
					return a in r.cache ? r.cache[a] : r.cache[a] = e.apply(e, n)
				}
			},
			t.maxArgumentCount = function (e) {
				return Object.keys(e.signatures || {}).reduce(function (e, t) {
					var r = (t.match(/,/g) || []).length + 1;
					return Math.max(e, r)
				}, -1)
			},
			t.callWithRightArgumentCount = function (e, t, r) {
				return Object.keys(e.signatures || {}).reduce(function (e, t) {
					var r = (t.match(/,/g) || []).length + 1;
					return Math.max(e, r)
				}, -1)
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = e.DenseMatrix,
				o = function (e, t, r, o) {
					var s = e._data,
					u = e._size,
					c = e._datatype,
					f = t._values,
					l = t._index,
					p = t._ptr,
					h = t._size,
					m = t._datatype;
					if (u.length !== h.length)
						throw new i(u.length, h.length);
					if (u[0] !== h[0] || u[1] !== h[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + u + ") must match Matrix B (" + h + ")");
					if (!f)
						throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");
					var d,
					v,
					g = u[0],
					y = u[1],
					x = "string" == typeof c && c === m ? c : void 0,
					w = x ? n.find(r, [x, x]) : r,
					b = [];
					for (d = 0; d < g; d++)
						b[d] = [];
					var N = [],
					E = [];
					for (v = 0; v < y; v++) {
						for (var M = v + 1, A = p[v], O = p[v + 1], T = A; T < O; T++)
							d = l[T], N[d] = o ? w(f[T], s[d][v]) : w(s[d][v], f[T]), E[d] = M;
						for (d = 0; d < g; d++)
							E[d] === M ? b[d][v] = N[d] : b[d][v] = s[d][v]
					}
					return new a({
						data: b,
						size: [g, y],
						datatype: x
					})
				};
				return o
			}
			var i = r(10);
			t.name = "algorithm01",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(15)),
				c = n(r(26)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = r(4),
				m = o("larger", {
						"boolean, boolean": function (e, t) {
							return e > t
						},
						"number, number": function (e, r) {
							return e > r && !i(e, r, t.epsilon)
						},
						"BigNumber, BigNumber": function (e, r) {
							return e.gt(r) && !a(e, r, t.epsilon)
						},
						"Fraction, Fraction": function (e, t) {
							return 1 === e.compare(t)
						},
						"Complex, Complex": function () {
							throw new TypeError("No ordering relation is defined for complex numbers")
						},
						"Unit, Unit": function (e, t) {
							if (!e.equalBase(t))
								throw new Error("Cannot compare units with different base");
							return m(e.value, t.value)
						},
						"string, string": function (e, t) {
							return e > t
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m);
									break;
								default:
									r = u(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, m, !1);
									break;
								default:
									r = l(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, s(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, m, !1);
								break;
							default:
								r = p(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, m, !0);
								break;
							default:
								r = p(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(s(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(s(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + h.operators.larger + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).nearlyEqual,
			a = r(35);
			t.name = "larger",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			e.exports = function (e, t, r) {
				if (null == r)
					return e.eq(t);
				if (e.eq(t))
					return !0;
				if (e.isNaN() || t.isNaN())
					return !1;
				if (e.isFinite() && t.isFinite()) {
					var n = e.minus(t).abs();
					if (n.isZero())
						return !0;
					var i = e.constructor.max(e.abs(), t.abs());
					return n.lte(i.times(r))
				}
				return !1
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var i = e.DenseMatrix,
				a = function (e, t, r, a) {
					var o = e._values,
					s = e._index,
					u = e._ptr,
					c = e._size,
					f = e._datatype;
					if (!o)
						throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");
					var l,
					p = c[0],
					h = c[1],
					m = r;
					"string" == typeof f && (l = f, t = n.convert(t, l), m = n.find(r, [l, l]));
					for (var d = [], v = new i({
								data: d,
								size: [p, h],
								datatype: l
							}), g = [], y = [], x = 0; x < h; x++) {
						for (var w = x + 1, b = u[x], N = u[x + 1], E = b; E < N; E++) {
							var M = s[E];
							g[M] = o[E],
							y[M] = w
						}
						for (var A = 0; A < p; A++)
							0 === x && (d[A] = []), y[A] === w ? d[A][x] = a ? m(t, g[A]) : m(g[A], t) : d[A][x] = t
					}
					return v
				};
				return a
			}
			t.name = "algorithm10",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = r(4),
				s = a("unaryMinus", {
						number: function (e) {
							return -e
						},
						Complex: function (e) {
							return e.neg()
						},
						BigNumber: function (e) {
							return e.neg()
						},
						Fraction: function (e) {
							return e.neg()
						},
						Unit: function (e) {
							var t = e.clone();
							return t.value = s(e.value),
							t
						},
						"Array | Matrix": function (e) {
							return i(e, s, !0)
						}
					});
				return s.toTex = {
					1: o.operators.unaryMinus + "\\left(${args[0]}\\right)"
				},
				s
			}
			var i = r(1);
			t.name = "unaryMinus",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					var n = u(t),
					i = n ? new e.BigNumber(0) : 0;
					if (c(t), r) {
						var o = f(r);
						return t.length > 0 ? o.resize(t, i) : o
					}
					var s = [];
					return t.length > 0 ? a(s, t, i) : s
				}
				function u(t) {
					var r = !1;
					return t.forEach(function (t, n, i) {
						e.isBigNumber(t) && (r = !0, i[n] = t.toNumber())
					}),
					r
				}
				function c(e) {
					e.forEach(function (e) {
						if ("number" != typeof e || !i(e) || e < 0)
							throw new Error("Parameters in function zeros must be positive integers")
					})
				}
				var f = n(r(0)),
				l = o("zeros", {
						"": function () {
							return "Array" === t.matrix ? s([]) : s([], "default")
						},
						"...number | BigNumber | string": function (e) {
							var r = e[e.length - 1];
							if ("string" == typeof r) {
								var n = e.pop();
								return s(e, n)
							}
							return "Array" === t.matrix ? s(e) : s(e, "default")
						},
						Array: s,
						Matrix: function (e) {
							var t = e.storage();
							return s(e.valueOf(), t)
						},
						"Array | Matrix, string": function (e, t) {
							return s(e.valueOf(), t)
						}
					});
				return l.toTex = void 0,
				l
			}
			var i = r(3).isInteger,
			a = r(2).resize;
			t.name = "zeros",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					if (1 != arguments.length && 2 != arguments.length)
						throw new i("parse", arguments.length, 1, 2);
					if (he = r && r.nodes ? r.nodes : {}, "string" == typeof t)
						return me = t, g();
					if (Array.isArray(t) || t instanceof e.Matrix)
						return a(t, function (e) {
							if ("string" != typeof e)
								throw new TypeError("String expected");
							return me = e,
							g()
						});
					throw new TypeError("String or matrix expected")
				}
				function u() {
					ve = 0,
					ge = me.charAt(0),
					we = 0,
					be = null
				}
				function c() {
					ve++,
					ge = me.charAt(ve)
				}
				function f() {
					return me.charAt(ve - 1)
				}
				function l() {
					return me.charAt(ve + 1)
				}
				function p() {
					return me.charAt(ve + 2)
				}
				function h() {
					for (xe = fe.NULL, ye = "", de = ""; s.isWhitespace(ge, we); )
						c();
					if ("#" == ge)
						for (; "\n" != ge && "" != ge; )
							de += ge, c();
					if ("" == ge)
						return void(xe = fe.DELIMITER);
					if ("\n" == ge && !we)
						return xe = fe.DELIMITER, ye = ge, void c();
					var e = ge + l(),
					t = e + p();
					if (3 == t.length && le[t])
						return xe = fe.DELIMITER, ye = t, c(), c(), void c();
					if (2 == e.length && le[e])
						return xe = fe.DELIMITER, ye = e, c(), void c();
					if (le[ge])
						return xe = fe.DELIMITER, ye = ge, void c();
					if (!s.isDigitDot(ge)) {
						if (s.isAlpha(ge, f(), l())) {
							for (; s.isAlpha(ge, f(), l()) || s.isDigit(ge); )
								ye += ge, c();
							return void(xe = pe.hasOwnProperty(ye) ? fe.DELIMITER : fe.SYMBOL)
						}
						for (xe = fe.UNKNOWN; "" != ge; )
							ye += ge, c();
						throw W('Syntax error in part "' + ye + '"')
					}
					if (xe = fe.NUMBER, "." == ge)
						ye += ge, c(), s.isDigit(ge) || (xe = fe.DELIMITER);
					else {
						for (; s.isDigit(ge); )
							ye += ge, c();
						s.isDecimalMark(ge, l()) && (ye += ge, c())
					}
					for (; s.isDigit(ge); )
						ye += ge, c();
					if (e = l(), "E" == ge || "e" == ge)
						if (s.isDigit(e) || "-" == e || "+" == e) {
							if (ye += ge, c(), "+" != ge && "-" != ge || (ye += ge, c()), !s.isDigit(ge))
								throw W('Digit expected, got "' + ge + '"');
							for (; s.isDigit(ge); )
								ye += ge, c();
							if (s.isDecimalMark(ge, l()))
								throw W('Digit expected, got "' + ge + '"')
						} else if ("." == e)
							throw c(), W('Digit expected, got "' + ge + '"')
				}
				function m() {
					do
						h();
					while ("\n" == ye)
				}
				function d() {
					we++
				}
				function v() {
					we--
				}
				function g() {
					u(),
					h();
					var e = y();
					if ("" != ye)
						throw xe == fe.DELIMITER ? Y("Unexpected operator " + ye) : W('Unexpected part "' + ye + '"');
					return e
				}
				function y() {
					var e,
					t,
					r = [];
					for ("" != ye && "\n" != ye && ";" != ye && (e = x(), e.comment = de); "\n" == ye || ";" == ye; )
						0 == r.length && e && (t = ";" != ye, r.push({
								node: e,
								visible: t
							})), h(), "\n" != ye && ";" != ye && "" != ye && (e = x(), e.comment = de, t = ";" != ye, r.push({
								node: e,
								visible: t
							}));
					return r.length > 0 ? new K(r) : (e || (e = new te("undefined", "undefined"), e.comment = de), e)
				}
				function x() {
					var t,
					r,
					n,
					i,
					a = w();
					if ("=" == ye) {
						if (e.isSymbolNode(a))
							return t = a.name, m(), n = x(), new Q(new ce(t), n);
						if (e.isAccessorNode(a))
							return m(), n = x(), new Q(a.object, a.index, n);
						if (e.isFunctionNode(a) && (i = !0, r = [], t = a.name, a.args.forEach(function (t, n) {
									e.isSymbolNode(t) ? r[n] = t.name : i = !1
								}), i))
							return m(), n = x(), new re(t, r, n);
						throw W("Invalid left hand side of assignment operator =")
					}
					return a
				}
				function w() {
					for (var e = b(); "?" == ye; ) {
						var t = be;
						be = we,
						m();
						var r = e,
						n = x();
						if (":" != ye)
							throw W("False part of conditional expression expected");
						be = null,
						m();
						var i = x();
						e = new ee(r, n, i),
						be = t
					}
					return e
				}
				function b() {
					for (var e = N(); "or" == ye; )
						m(), e = new ae("or", "or", [e, N()]);
					return e
				}
				function N() {
					for (var e = E(); "xor" == ye; )
						m(), e = new ae("xor", "xor", [e, E()]);
					return e
				}
				function E() {
					for (var e = M(); "and" == ye; )
						m(), e = new ae("and", "and", [e, M()]);
					return e
				}
				function M() {
					for (var e = A(); "|" == ye; )
						m(), e = new ae("|", "bitOr", [e, A()]);
					return e
				}
				function A() {
					for (var e = O(); "^|" == ye; )
						m(), e = new ae("^|", "bitXor", [e, O()]);
					return e
				}
				function O() {
					for (var e = T(); "&" == ye; )
						m(), e = new ae("&", "bitAnd", [e, T()]);
					return e
				}
				function T() {
					var e,
					t,
					r,
					n,
					i;
					for (e = _(), t = {
							"==": "equal",
							"!=": "unequal",
							"<": "smaller",
							">": "larger",
							"<=": "smallerEq",
							">=": "largerEq"
						}; t.hasOwnProperty(ye); )
						r = ye, n = t[r], m(), i = [e, _()], e = new ae(r, n, i);
					return e
				}
				function _() {
					var e,
					t,
					r,
					n,
					i;
					for (e = S(), t = {
							"<<": "leftShift",
							">>": "rightArithShift",
							">>>": "rightLogShift"
						}; t.hasOwnProperty(ye); )
						r = ye, n = t[r], m(), i = [e, S()], e = new ae(r, n, i);
					return e
				}
				function S() {
					var e,
					t,
					r,
					n,
					i;
					for (e = C(), t = {
							to: "to",
							in: "to"
						}; t.hasOwnProperty(ye); )
						r = ye, n = t[r], m(), "in" === r && "" === ye ? e = new ae("*", "multiply", [e, new ce("in")], !0) : (i = [e, C()], e = new ae(r, n, i));
					return e
				}
				function C() {
					var e,
					t = [];
					if (e = ":" == ye ? new te("1", "number") : z(), ":" == ye && be !== we) {
						for (t.push(e); ":" == ye && t.length < 3; )
							m(), ")" == ye || "]" == ye || "," == ye || "" == ye ? t.push(new ce("end")) : t.push(z());
						e = 3 == t.length ? new ue(t[0], t[2], t[1]) : new ue(t[0], t[1])
					}
					return e
				}
				function z() {
					var e,
					t,
					r,
					n,
					i;
					for (e = k(), t = {
							"+": "add",
							"-": "subtract"
						}; t.hasOwnProperty(ye); )
						r = ye, n = t[r], m(), i = [e, k()], e = new ae(r, n, i);
					return e
				}
				function k() {
					var t,
					r,
					n,
					i,
					a;
					for (t = I(), r = t, n = {
							"*": "multiply",
							".*": "dotMultiply",
							"/": "divide",
							"./": "dotDivide",
							"%": "mod",
							mod: "mod"
						}; ; )
						if (n.hasOwnProperty(ye))
							i = ye, a = n[i], m(), r = I(), t = new ae(i, a, [t, r]);
						else {
							if (!(xe === fe.SYMBOL || "in" === ye && e.isConstantNode(t)) && (xe !== fe.NUMBER || e.isConstantNode(r) || e.isOperatorNode(r) && "!" !== r.op) && "(" !== ye)
								break;
							r = I(),
							t = new ae("*", "multiply", [t, r], !0)
						}
					return t
				}
				function I() {
					var e,
					t,
					r,
					n = {
						"-": "unaryMinus",
						"+": "unaryPlus",
						"~": "bitNot",
						not: "not"
					};
					return n.hasOwnProperty(ye) ? (r = n[ye], e = ye, m(), t = [I()], new ae(e, r, t)) : B()
				}
				function B() {
					var e,
					t,
					r,
					n;
					return e = P(),
					"^" != ye && ".^" != ye || (t = ye, r = "^" == t ? "pow" : "dotPow", m(), n = [e, I()], e = new ae(t, r, n)),
					e
				}
				function P() {
					var e,
					t,
					r,
					n,
					i;
					for (e = R(), t = {
							"!": "factorial",
							"'": "transpose"
						}; t.hasOwnProperty(ye); )
						r = ye, n = t[r], h(), i = [e], e = new ae(r, n, i), e = q(e);
					return e
				}
				function R() {
					var e = [];
					if (xe == fe.SYMBOL && he.hasOwnProperty(ye)) {
						var t = he[ye];
						if (h(), "(" == ye) {
							if (e = [], d(), h(), ")" != ye)
								for (e.push(x()); "," == ye; )
									h(), e.push(x());
							if (")" != ye)
								throw W("Parenthesis ) expected");
							v(),
							h()
						}
						return new t(e)
					}
					return U()
				}
				function U() {
					var e,
					t;
					return xe == fe.SYMBOL || xe == fe.DELIMITER && ye in pe ? (t = ye, h(), e = new ce(t), e = q(e)) : L()
				}
				function q(t, r) {
					for (var n; !("(" !== ye && "[" !== ye && "." !== ye || r && r.indexOf(ye) === -1); )
						if (n = [], "(" === ye) {
							if (!(e.isSymbolNode(t) || e.isAccessorNode(t) || e.isFunctionNode(t)))
								return t;
							if (d(), h(), ")" !== ye)
								for (n.push(x()); "," === ye; )
									h(), n.push(x());
							if (")" !== ye)
								throw W("Parenthesis ) expected");
							v(),
							h(),
							t = new se(t, n)
						} else if ("[" === ye) {
							if (d(), h(), "]" !== ye)
								for (n.push(x()); "," === ye; )
									h(), n.push(x());
							if ("]" !== ye)
								throw W("Parenthesis ] expected");
							v(),
							h(),
							t = new X(t, new ne(n))
						} else {
							if (h(), xe !== fe.SYMBOL)
								throw W("Property name expected after dot");
							n.push(new te(ye)),
							h();
							var i = !0;
							t = new X(t, new ne(n, i))
						}
					return t
				}
				function L() {
					var e,
					t;
					return '"' == ye ? (t = j(), e = new te(t, "string"), e = q(e)) : F()
				}
				function j() {
					for (var e = ""; "" != ge && '"' != ge; )
						"\\" == ge && (e += ge, c()), e += ge, c();
					if (h(), '"' != ye)
						throw W('End of string " expected');
					return h(),
					e
				}
				function F() {
					var e,
					t,
					r,
					n;
					if ("[" == ye) {
						if (d(), h(), "]" != ye) {
							var i = D();
							if (";" == ye) {
								for (r = 1, t = [i]; ";" == ye; )
									h(), t[r] = D(), r++;
								if ("]" != ye)
									throw W("End of matrix ] expected");
								v(),
								h(),
								n = t[0].items.length;
								for (var a = 1; a < r; a++)
									if (t[a].items.length != n)
										throw Y("Column dimensions mismatch (" + t[a].items.length + " != " + n + ")");
								e = new J(t)
							} else {
								if ("]" != ye)
									throw W("End of matrix ] expected");
								v(),
								h(),
								e = i
							}
						} else
							v(), h(), e = new J([]);
						return q(e)
					}
					return H()
				}
				function D() {
					for (var e = [x()], t = 1; "," == ye; )
						h(), e[t] = x(), t++;
					return new J(e)
				}
				function H() {
					if ("{" == ye) {
						var e,
						t = {};
						do
							if (h(), "}" != ye) {
								if ('"' == ye)
									e = j();
								else {
									if (xe != fe.SYMBOL)
										throw W("Symbol or string expected as object key");
									e = ye,
									h()
								}
								if (":" != ye)
									throw W("Colon : expected after object key");
								h(),
								t[e] = x()
							}
						while ("," == ye);
						if ("}" != ye)
							throw W("Comma , or bracket } expected after object value");
						h();
						var r = new ie(t);
						return r = q(r)
					}
					return $()
				}
				function $() {
					var e;
					return xe == fe.NUMBER ? (e = ye, h(), new te(e, "number")) : G()
				}
				function G() {
					var e;
					if ("(" == ye) {
						if (d(), h(), e = x(), ")" != ye)
							throw W("Parenthesis ) expected");
						return v(),
						h(),
						e = new oe(e),
						e = q(e)
					}
					return Z()
				}
				function Z() {
					throw W("" == ye ? "Unexpected end of expression" : "'" === ye ? "Value expected. Note: strings must be enclosed by double quotes" : "Value expected")
				}
				function V() {
					return ve - ye.length + 1
				}
				function W(e) {
					var t = V(),
					r = new SyntaxError(e + " (char " + t + ")");
					return r.char = t,
					r
				}
				function Y(e) {
					var t = V(),
					r = new SyntaxError(e + " (char " + t + ")");
					return r.char = t,
					r
				}
				var X = n(r(102)),
				J = n(r(80)),
				Q = n(r(104)),
				K = n(r(105)),
				ee = n(r(106)),
				te = n(r(53)),
				re = n(r(107)),
				ne = n(r(78)),
				ie = n(r(109)),
				ae = n(r(62)),
				oe = n(r(63)),
				se = n(r(54)),
				ue = n(r(79)),
				ce = n(r(40)),
				fe = {
					NULL: 0,
					DELIMITER: 1,
					NUMBER: 2,
					SYMBOL: 3,
					UNKNOWN: 4
				},
				le = {
					",": !0,
					"(": !0,
					")": !0,
					"[": !0,
					"]": !0,
					"{": !0,
					"}": !0,
					'"': !0,
					";": !0,
					"+": !0,
					"-": !0,
					"*": !0,
					".*": !0,
					"/": !0,
					"./": !0,
					"%": !0,
					"^": !0,
					".^": !0,
					"~": !0,
					"!": !0,
					"&": !0,
					"|": !0,
					"^|": !0,
					"'": !0,
					"=": !0,
					":": !0,
					"?": !0,
					"==": !0,
					"!=": !0,
					"<": !0,
					">": !0,
					"<=": !0,
					">=": !0,
					"<<": !0,
					">>": !0,
					">>>": !0
				},
				pe = {
					mod: !0,
					to: !0,
					in: !0,
					and: !0,
					xor: !0,
					or: !0,
					not: !0
				},
				he = {},
				me = "",
				de = "",
				ve = 0,
				ge = "",
				ye = "",
				xe = fe.NULL,
				we = 0,
				be = null;
				return s.isAlpha = function (e, t, r) {
					return s.isValidLatinOrGreek(e) || s.isValidMathSymbol(e, r) || s.isValidMathSymbol(t, e)
				},
				s.isValidLatinOrGreek = function (e) {
					return /^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)
				},
				s.isValidMathSymbol = function (e, t) {
					return /^[\uD835]$/.test(e) && /^[\uDC00-\uDFFF]$/.test(t) && /^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)
				},
				s.isWhitespace = function (e, t) {
					return " " == e || "\t" == e || "\n" == e && t > 0
				},
				s.isDecimalMark = function (e, t) {
					return "." == e && "/" !== t && "*" !== t && "^" !== t
				},
				s.isDigitDot = function (e) {
					return e >= "0" && e <= "9" || "." == e
				},
				s.isDigit = function (e) {
					return e >= "0" && e <= "9"
				},
				s
			}
			var i = r(50),
			a = r(1);
			t.name = "parse",
			t.path = "expression",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, c, f) {
				function l(t) {
					return !!e.Unit && e.Unit.isValuelessUnit(t)
				}
				function p(e) {
					if (!(this instanceof p))
						throw new SyntaxError("Constructor must be called with the new operator");
					if ("string" != typeof e)
						throw new TypeError('String expected for parameter "name"');
					this.name = e
				}
				function h(t, r, n) {
					if (!(t instanceof p))
						throw new TypeError("No valid SymbolNode");
					r.undef = m,
					r.Unit = e.Unit,
					r.getSafeProperty = u,
					r.hasOwnProperty = s;
					var i = a(t.name);
					return s(n, t.name) ? n[t.name] : t.name in r.math ? "(" + i + " in scope ? getSafeProperty(scope, " + i + ") : getSafeProperty(math, " + i + "))" : "(" + i + " in scope ? getSafeProperty(scope, " + i + ") : " + (l(t.name) ? "new Unit(null, " + i + ")" : "undef(" + i + ")") + ")"
				}
				function m(e) {
					throw new Error("Undefined symbol " + e)
				}
				var d = n(r(7)).register,
				v = (n(r(7)).compile, n(r(14)));
				return p.prototype = new v,
				p.prototype.type = "SymbolNode",
				p.prototype.isSymbolNode = !0,
				d(p.prototype.type, h),
				p.prototype.forEach = function (e) {},
				p.prototype.map = function (e) {
					return this.clone()
				},
				p.prototype.clone = function () {
					return new p(this.name)
				},
				p.prototype._toString = function (e) {
					return this.name
				},
				p.prototype.toHTML = function (e) {
					var t = o(this.name);
					return "true" == t || "false" == t ? '<span class="math-symbol math-boolean">' + t + "</span>" : "i" == t ? '<span class="math-symbol math-imaginary-symbol">' + t + "</span>" : "Infinity" == t ? '<span class="math-symbol math-infinity-symbol">' + t + "</span>" : "NaN" == t ? '<span class="math-symbol math-nan-symbol">' + t + "</span>" : "null" == t ? '<span class="math-symbol math-null-symbol">' + t + "</span>" : "uninitialized" == t ? '<span class="math-symbol math-uninitialized-symbol">' + t + "</span>" : '<span class="math-symbol">' + t + "</span>"
				},
				p.prototype._toTex = function (e) {
					var t = !1;
					"undefined" == typeof f[this.name] && l(this.name) && (t = !0);
					var r = i.toSymbol(this.name, t);
					return "\\" === r[0] ? r : " " + r
				},
				p
			}
			var i = r(4),
			a = r(9).stringify,
			o = r(9).escape,
			s = r(5).hasOwnProperty,
			u = r(13).getSafeProperty;
			t.name = "SymbolNode",
			t.path = "expression.node",
			t.math = !0,
			t.factory = n
		}, function (e, t, r) {
			var n = r(51);
			t.transform = function (e) {
				return e && e.isIndexError ? new n(e.index + 1, e.min + 1, void 0 !== e.max ? e.max + 1 : void 0) : e
			}
		}, function (e, t, r) {
			"use strict";
			var n = r(58);
			e.exports = function e(t, r) {
				n(t) && (t = t.valueOf());
				for (var i = 0, a = t.length; i < a; i++) {
					var o = t[i];
					Array.isArray(o) ? e(o, r) : r(o)
				}
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, c) {
				function d(t, r) {
					if (!(this instanceof d))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (r && !h(r))
						throw new Error("Invalid datatype: " + r);
					if (e.isMatrix(t))
						"DenseMatrix" === t.type ? (this._data = u.clone(t._data), this._size = u.clone(t._size), this._datatype = r || t._datatype) : (this._data = t.toArray(), this._size = t.size(), this._datatype = r || t._datatype);
					else if (t && f(t.data) && f(t.size))
						this._data = t.data, this._size = t.size, this._datatype = r || t.datatype;
					else if (f(t))
						this._data = b(t), this._size = s.size(this._data), s.validate(this._data, this._size), this._datatype = r;
					else {
						if (t)
							throw new TypeError("Unsupported type of data (" + i.types.type(t) + ")");
						this._data = [],
						this._size = [0],
						this._datatype = r
					}
				}
				function v(t, r) {
					if (!e.isIndex(r))
						throw new TypeError("Invalid index");
					var n = r.isScalar();
					if (n)
						return t.get(r.min());
					var i = r.size();
					if (i.length != t._size.length)
						throw new a(i.length, t._size.length);
					for (var o = r.min(), s = r.max(), u = 0, c = t._size.length; u < c; u++)
						m(o[u], t._size[u]), m(s[u], t._size[u]);
					return new d(g(t._data, r, i.length, 0), t._datatype)
				}
				function g(e, t, r, n) {
					var i = n === r - 1,
					a = t.dimension(n);
					return i ? a.map(function (t) {
						return m(t, e.length),
						e[t]
					}).valueOf() : a.map(function (i) {
						m(i, e.length);
						var a = e[i];
						return g(a, t, r, n + 1)
					}).valueOf()
				}
				function y(t, r, n, i) {
					if (!r || r.isIndex !== !0)
						throw new TypeError("Invalid index");
					var o,
					c = r.size(),
					f = r.isScalar();
					if (e.isMatrix(n) ? (o = n.size(), n = n.valueOf()) : o = s.size(n), f) {
						if (0 !== o.length)
							throw new TypeError("Scalar expected");
						t.set(r.min(), n, i)
					} else {
						if (c.length < t._size.length)
							throw new a(c.length, t._size.length, "<");
						if (o.length < c.length) {
							for (var l = 0, p = 0; 1 === c[l] && 1 === o[l]; )
								l++;
							for (; 1 === c[l]; )
								p++, l++;
							n = s.unsqueeze(n, c.length, p, o)
						}
						if (!u.deepEqual(c, o))
							throw new a(c, o, ">");
						var h = r.max().map(function (e) {
								return e + 1
							});
						w(t, h, i);
						var m = c.length,
						d = 0;
						x(t._data, r, n, m, d)
					}
					return t
				}
				function x(e, t, r, n, i) {
					var a = i === n - 1,
					o = t.dimension(i);
					a ? o.forEach(function (t, n) {
						m(t),
						e[t] = r[n[0]]
					}) : o.forEach(function (a, o) {
						m(a),
						x(e[a], t, r[o[0]], n, i + 1)
					})
				}
				function w(e, t, r) {
					for (var n = e._size.slice(0), i = !1; n.length < t.length; )
						n.push(0), i = !0;
					for (var a = 0, o = t.length; a < o; a++)
						t[a] > n[a] && (n[a] = t[a], i = !0);
					i && E(e, n, r)
				}
				function b(e) {
					for (var t = 0, r = e.length; t < r; t++) {
						var n = e[t];
						f(n) ? e[t] = b(n) : n && n.isMatrix === !0 && (e[t] = b(n.valueOf()))
					}
					return e
				}
				var N = n(r(72));
				d.prototype = new N,
				d.prototype.type = "DenseMatrix",
				d.prototype.isDenseMatrix = !0,
				d.prototype.storage = function () {
					return "dense"
				},
				d.prototype.datatype = function () {
					return this._datatype
				},
				d.prototype.create = function (e, t) {
					return new d(e, t)
				},
				d.prototype.subset = function (e, t, r) {
					switch (arguments.length) {
					case 1:
						return v(this, e);
					case 2:
					case 3:
						return y(this, e, t, r);
					default:
						throw new SyntaxError("Wrong number of arguments")
					}
				},
				d.prototype.get = function (e) {
					if (!f(e))
						throw new TypeError("Array expected");
					if (e.length != this._size.length)
						throw new a(e.length, this._size.length);
					for (var t = 0; t < e.length; t++)
						m(e[t], this._size[t]);
					for (var r = this._data, n = 0, i = e.length; n < i; n++) {
						var o = e[n];
						m(o, r.length),
						r = r[o]
					}
					return r
				},
				d.prototype.set = function (e, t, r) {
					if (!f(e))
						throw new TypeError("Array expected");
					if (e.length < this._size.length)
						throw new a(e.length, this._size.length, "<");
					var n,
					i,
					o,
					s = e.map(function (e) {
							return e + 1
						});
					w(this, s, r);
					var u = this._data;
					for (n = 0, i = e.length - 1; n < i; n++)
						o = e[n], m(o, u.length), u = u[o];
					return o = e[e.length - 1],
					m(o, u.length),
					u[o] = t,
					this
				},
				d.prototype.resize = function (e, t, r) {
					if (!f(e))
						throw new TypeError("Array expected");
					var n = r ? this.clone() : this;
					return E(n, e, t)
				};
				var E = function (e, t, r) {
					if (0 === t.length) {
						for (var n = e._data; f(n); )
							n = n[0];
						return n
					}
					return e._size = t.slice(0),
					e._data = s.resize(e._data, e._size, r),
					e
				};
				return d.prototype.reshape = function (e, t) {
					var r = t ? this.clone() : this;
					return r._data = s.reshape(r._data, e),
					r._size = e.slice(0),
					r
				},
				d.prototype.clone = function () {
					var e = new d({
							data: u.clone(this._data),
							size: u.clone(this._size),
							datatype: this._datatype
						});
					return e
				},
				d.prototype.size = function () {
					return this._size.slice(0)
				},
				d.prototype.map = function (e) {
					var t = this,
					r = function (n, i) {
						return f(n) ? n.map(function (e, t) {
							return r(e, i.concat(t))
						}) : e(n, i, t)
					};
					return new d({
						data: r(this._data, []),
						size: u.clone(this._size),
						datatype: this._datatype
					})
				},
				d.prototype.forEach = function (e) {
					var t = this,
					r = function (n, i) {
						f(n) ? n.forEach(function (e, t) {
							r(e, i.concat(t))
						}) : e(n, i, t)
					};
					r(this._data, [])
				},
				d.prototype.toArray = function () {
					return u.clone(this._data)
				},
				d.prototype.valueOf = function () {
					return this._data
				},
				d.prototype.format = function (e) {
					return o.format(this._data, e)
				},
				d.prototype.toString = function () {
					return o.format(this._data)
				},
				d.prototype.toJSON = function () {
					return {
						mathjs: "DenseMatrix",
						data: this._data,
						size: this._size,
						datatype: this._datatype
					}
				},
				d.prototype.diagonal = function (t) {
					if (t) {
						if (e.isBigNumber(t) && (t = t.toNumber()), !l(t) || !p(t))
							throw new TypeError("The parameter k must be an integer number")
					} else
						t = 0;
					for (var r = t > 0 ? t : 0, n = t < 0 ? -t : 0, i = this._size[0], a = this._size[1], o = Math.min(i - n, a - r), s = [], u = 0; u < o; u++)
						s[u] = this._data[u + n][u + r];
					return new d({
						data: s,
						size: [o],
						datatype: this._datatype
					})
				},
				d.diagonal = function (t, r, n, i, a) {
					if (!f(t))
						throw new TypeError("Array expected, size parameter");
					if (2 !== t.length)
						throw new Error("Only two dimensions matrix are supported");
					if (t = t.map(function (t) {
								if (e.isBigNumber(t) && (t = t.toNumber()), !l(t) || !p(t) || t < 1)
									throw new Error("Size values must be positive integers");
									return t
								}), n) {
							if (e.isBigNumber(n) && (n = n.toNumber()), !l(n) || !p(n))
								throw new TypeError("The parameter k must be an integer number")
						}
					else
						n = 0;
					i && h(a) && (i = c.convert(i, a));
					var o,
					u = n > 0 ? n : 0,
					m = n < 0 ? -n : 0,
					v = t[0],
					g = t[1],
					y = Math.min(v - m, g - u);
					if (f(r)) {
						if (r.length !== y)
							throw new Error("Invalid value array length");
						o = function (e) {
							return r[e]
						}
					} else if (e.isMatrix(r)) {
						var x = r.size();
						if (1 !== x.length || x[0] !== y)
							throw new Error("Invalid matrix length");
						o = function (e) {
							return r.get([e])
						}
					} else
						o = function () {
							return r
						};
					i || (i = e.isBigNumber(o(0)) ? new e.BigNumber(0) : 0);
					var w = [];
					if (t.length > 0) {
						w = s.resize(w, t, i);
						for (var b = 0; b < y; b++)
							w[b + m][b + u] = o(b)
					}
					return new d({
						data: w,
						size: [v, g]
					})
				},
				d.fromJSON = function (e) {
					return new d(e)
				},
				d.prototype.swapRows = function (e, t) {
					if (!(l(e) && p(e) && l(t) && p(t)))
						throw new Error("Row index must be positive integers");
					if (2 !== this._size.length)
						throw new Error("Only two dimensional matrix is supported");
					return m(e, this._size[0]),
					m(t, this._size[0]),
					d._swapRows(e, t, this._data),
					this
				},
				d._swapRows = function (e, t, r) {
					var n = r[e];
					r[e] = r[t],
					r[t] = n
				},
				e.Matrix._storage.dense = d,
				e.Matrix._storage.default = d, d
			}
			var i = r(25),
			a = r(10),
			o = (r(13).getSafeProperty, r(13).setSafeProperty, i.string),
			s = i.array,
			u = i.object,
			c = i.number,
			f = Array.isArray,
			l = c.isNumber,
			p = c.isInteger,
			h = o.isString,
			m = s.validateIndex;
			t.name = "DenseMatrix",
			t.path = "type",
			t.factory = n,
			t.lazy = !1
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(15)),
				c = n(r(26)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = r(4),
				m = o("smaller", {
						"boolean, boolean": function (e, t) {
							return e < t
						},
						"number, number": function (e, r) {
							return e < r && !i(e, r, t.epsilon)
						},
						"BigNumber, BigNumber": function (e, r) {
							return e.lt(r) && !a(e, r, t.epsilon)
						},
						"Fraction, Fraction": function (e, t) {
							return e.compare(t) === -1
						},
						"Complex, Complex": function (e, t) {
							throw new TypeError("No ordering relation is defined for complex numbers")
						},
						"Unit, Unit": function (e, t) {
							if (!e.equalBase(t))
								throw new Error("Cannot compare units with different base");
							return m(e.value, t.value)
						},
						"string, string": function (e, t) {
							return e < t
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m);
									break;
								default:
									r = u(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, m, !1);
									break;
								default:
									r = l(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, s(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, m, !1);
								break;
							default:
								r = p(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, m, !0);
								break;
							default:
								r = p(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(s(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(s(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + h.operators.smaller + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).nearlyEqual,
			a = r(35);
			t.name = "smaller",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(r, n) {
					if (t.predictable && !i(n) && r < 0)
						try {
							var a = m(n),
							o = d(a);
							if ((n === o || Math.abs((n - o) / n) < 1e-14) && a.d % 2 === 1)
								return (a.n % 2 === 0 ? 1 : -1) * Math.pow(-r, n)
						} catch (e) {}
					return r * r < 1 && n === 1 / 0 || r * r > 1 && n ===  - (1 / 0) ? 0 : t.predictable && (r < -1 && n === 1 / 0 || r > -1 && r < 0 && n ===  - (1 / 0)) ? NaN : i(n) || r >= 0 || t.predictable ? Math.pow(r, n) : new e.Complex(r, 0).pow(n, 0)
				}
				function u(e, t) {
					if (!i(t) || t < 0)
						throw new TypeError("For A^b, b must be a positive integer (value is " + t + ")");
					var r = a(e);
					if (2 != r.length)
						throw new Error("For A^b, A must be 2 dimensional (A has " + r.length + " dimensions)");
					if (r[0] != r[1])
						throw new Error("For A^b, A must be square (size is " + r[0] + "x" + r[1] + ")");
					for (var n = l(r[0]).valueOf(), o = e; t >= 1; )
						1 == (1 & t) && (n = p(o, n)), t >>= 1, o = p(o, o);
					return n
				}
				function c(e, t) {
					return h(u(e.valueOf(), t))
				}
				var f = r(4),
				l = n(r(61)),
				p = n(r(12)),
				h = n(r(0)),
				m = n(r(92)),
				d = n(r(74)),
				v = o("pow", {
						"number, number": s,
						"Complex, Complex": function (e, t) {
							return e.pow(t)
						},
						"BigNumber, BigNumber": function (r, n) {
							return n.isInteger() || r >= 0 || t.predictable ? r.pow(n) : new e.Complex(r.toNumber(), 0).pow(n.toNumber(), 0)
						},
						"Fraction, Fraction": function (e, r) {
							if (1 !== r.d) {
								if (t.predictable)
									throw new Error("Function pow does not support non-integer exponents for fractions.");
								return s(e.valueOf(), r.valueOf())
							}
							return e.pow(r)
						},
						"Array, number": u,
						"Array, BigNumber": function (e, t) {
							return u(e, t.toNumber())
						},
						"Matrix, number": c,
						"Matrix, BigNumber": function (e, t) {
							return c(e, t.toNumber())
						},
						"Unit, number": function (e, t) {
							return e.pow(t)
						}
					});
				return v.toTex = {
					2: "\\left(${args[0]}\\right)" + f.operators.pow + "{${args[1]}}"
				},
				v
			}
			var i = r(3).isInteger,
			a = r(2).size;
			t.name = "pow",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			var n = r(58);
			e.exports = function (e) {
				return Array.isArray(e) || n(e)
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(19)),
				s = n(r(12)),
				u = n(r(114)),
				c = n(r(0)),
				f = n(r(17)),
				l = n(r(6)),
				p = a("divide", i({
							"Array | Matrix, Array | Matrix": function (e, t) {
								return s(e, u(t))
							},
							"Matrix, any": function (e, t) {
								var r;
								switch (e.storage()) {
								case "sparse":
									r = f(e, t, o, !1);
									break;
								case "dense":
									r = l(e, t, o, !1)
								}
								return r
							},
							"Array, any": function (e, t) {
								return l(c(e), t, o, !1).valueOf()
							},
							"any, Array | Matrix": function (e, t) {
								return s(e, u(t))
							}
						}, o.signatures));
				return p.toTex = {
					2: "\\frac{${args[0]}}{${args[1]}}"
				},
				p
			}
			var i = r(5).extend;
			t.name = "divide",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("isInteger", {
						number: a.isInteger,
						BigNumber: function (e) {
							return e.isInt()
						},
						Fraction: function (e) {
							return 1 === e.d && isFinite(e.n)
						},
						"Array | Matrix": function (e) {
							return i(e, o)
						}
					});
				return o
			}
			var i = r(1),
			a = r(3);
			t.name = "isInteger",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(15)),
				c = n(r(60)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = o("compare", {
						"boolean, boolean": function (e, t) {
							return e === t ? 0 : e > t ? 1 : -1
						},
						"number, number": function (e, r) {
							return e === r || i(e, r, t.epsilon) ? 0 : e > r ? 1 : -1
						},
						"BigNumber, BigNumber": function (r, n) {
							return r.eq(n) || a(r, n, t.epsilon) ? new e.BigNumber(0) : new e.BigNumber(r.cmp(n))
						},
						"Fraction, Fraction": function (t, r) {
							return new e.Fraction(t.compare(r))
						},
						"Complex, Complex": function () {
							throw new TypeError("No ordering relation is defined for complex numbers")
						},
						"Unit, Unit": function (e, t) {
							if (!e.equalBase(t))
								throw new Error("Cannot compare units with different base");
							return h(e.value, t.value)
						},
						"string, string": function (e, t) {
							return e === t ? 0 : e > t ? 1 : -1
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, h);
									break;
								default:
									r = u(t, e, h, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, h, !1);
									break;
								default:
									r = l(e, t, h)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return h(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return h(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return h(e, s(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, h, !1);
								break;
							default:
								r = p(e, t, h, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, h, !0);
								break;
							default:
								r = p(t, e, h, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(s(e), t, h, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(s(t), e, h, !0).valueOf()
						}
					});
				return h.toTex = void 0,
				h
			}
			var i = r(3).nearlyEqual,
			a = r(35);
			t.name = "compare",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, i) {
				if (!(this instanceof n))
					throw new SyntaxError("Constructor must be called with the new operator");
				this.fn = e,
				this.count = t,
				this.min = r,
				this.max = i,
				this.message = "Wrong number of arguments in function " + e + " (" + t + " provided, " + r + (void 0 != i ? "-" + i : "") + " expected)",
				this.stack = (new Error).stack
			}
			n.prototype = new Error,
			n.prototype.constructor = Error,
			n.prototype.name = "ArgumentsError",
			n.prototype.isArgumentsError = !0,
			e.exports = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r) {
				if (!(this instanceof n))
					throw new SyntaxError("Constructor must be called with the new operator");
				this.index = e,
				arguments.length < 3 ? (this.min = 0, this.max = t) : (this.min = t, this.max = r),
				void 0 !== this.min && this.index < this.min ? this.message = "Index out of range (" + this.index + " < " + this.min + ")" : void 0 !== this.max && this.index >= this.max ? this.message = "Index out of range (" + this.index + " > " + (this.max - 1) + ")" : this.message = "Index out of range (" + this.index + ")",
				this.stack = (new Error).stack
			}
			n.prototype = new RangeError,
			n.prototype.constructor = RangeError,
			n.prototype.name = "IndexError",
			n.prototype.isIndexError = !0,
			e.exports = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t) {
				var r = e;
				"keep" !== t && (r = e.getContent());
				for (var n = r.getIdentifier(), i = 0; i < o.length; i++)
					if (n in o[i])
						return i;
				return null
			}
			function i(e, t) {
				var r = e;
				"keep" !== t && (r = e.getContent());
				var i = r.getIdentifier(),
				a = n(r, t);
				if (null === a)
					return null;
				var s = o[a][i];
				if (s.hasOwnProperty("associativity")) {
					if ("left" === s.associativity)
						return "left";
					if ("right" === s.associativity)
						return "right";
					throw Error("'" + i + "' has the invalid associativity '" + s.associativity + "'.")
				}
				return null
			}
			function a(e, t, r) {
				var i = e,
				a = t;
				if ("keep" !== r)
					var i = e.getContent(), a = t.getContent();
				var s = i.getIdentifier(),
				u = a.getIdentifier(),
				c = n(i, r);
				if (null === c)
					return null;
				var f = o[c][s];
				if (f.hasOwnProperty("associativeWith") && f.associativeWith instanceof Array) {
					for (var l = 0; l < f.associativeWith.length; l++)
						if (f.associativeWith[l] === u)
							return !0;
					return !1
				}
				return null
			}
			var o = [{
					AssignmentNode: {},
					FunctionAssignmentNode: {}
				}, {
					ConditionalNode: {
						latexLeftParens: !1,
						latexRightParens: !1,
						latexParens: !1
					}
				}, {
					"OperatorNode:or": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:xor": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:and": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:bitOr": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:bitXor": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:bitAnd": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:equal": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:unequal": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:smaller": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:larger": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:smallerEq": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:largerEq": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:leftShift": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:rightArithShift": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:rightLogShift": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:to": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					RangeNode: {}
				}, {
					"OperatorNode:add": {
						associativity: "left",
						associativeWith: ["OperatorNode:add", "OperatorNode:subtract"]
					},
					"OperatorNode:subtract": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:multiply": {
						associativity: "left",
						associativeWith: ["OperatorNode:multiply", "OperatorNode:divide", "Operator:dotMultiply", "Operator:dotDivide"]
					},
					"OperatorNode:divide": {
						associativity: "left",
						associativeWith: [],
						latexLeftParens: !1,
						latexRightParens: !1,
						latexParens: !1
					},
					"OperatorNode:dotMultiply": {
						associativity: "left",
						associativeWith: ["OperatorNode:multiply", "OperatorNode:divide", "OperatorNode:dotMultiply", "OperatorNode:doDivide"]
					},
					"OperatorNode:dotDivide": {
						associativity: "left",
						associativeWith: []
					},
					"OperatorNode:mod": {
						associativity: "left",
						associativeWith: []
					}
				}, {
					"OperatorNode:unaryPlus": {
						associativity: "right"
					},
					"OperatorNode:unaryMinus": {
						associativity: "right"
					},
					"OperatorNode:bitNot": {
						associativity: "right"
					},
					"OperatorNode:not": {
						associativity: "right"
					}
				}, {
					"OperatorNode:pow": {
						associativity: "right",
						associativeWith: [],
						latexRightParens: !1
					},
					"OperatorNode:dotPow": {
						associativity: "right",
						associativeWith: []
					}
				}, {
					"OperatorNode:factorial": {
						associativity: "left"
					}
				}, {
					"OperatorNode:transpose": {
						associativity: "left"
					}
				}
			];
			e.exports.properties = o,
			e.exports.getPrecedence = n,
			e.exports.getAssociativity = i,
			e.exports.isAssociativeWith = a
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				function u(e, t) {
					if (!(this instanceof u))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (t) {
						if ("string" != typeof t)
							throw new TypeError('String expected for parameter "valueType"');
						if ("string" != typeof e)
							throw new TypeError('String expected for parameter "value"');
						this.value = e,
						this.valueType = t
					} else
						this.value = e + "", this.valueType = i(e);
					if (!h[this.valueType])
						throw new TypeError('Unsupported type of value "' + this.valueType + '"')
				}
				function c(e, r, n) {
					if (!(e instanceof u))
						throw new TypeError("No valid ConstantNode");
					switch (e.valueType) {
					case "number":
						return "BigNumber" === t.number ? "math.bignumber(" + a(e.value) + ")" : "Fraction" === t.number ? "math.fraction(" + a(e.value) + ")" : (f(e.value), e.value.replace(/^(0*)[0-9]/, function (e, t) {
								return e.substring(t.length)
							}));
					case "string":
						return a(e.value);
					case "boolean":
						return "true" === String(e.value) ? "true" : "false";
					case "undefined":
						return "undefined";
					case "null":
						return "null";
					default:
						throw new TypeError('Unsupported type of constant "' + e.valueType + '"')
					}
				}
				function f(e) {
					if ("string" != typeof e || !/^[\-+]?((\d+\.?\d*)|(\d*\.?\d+))([eE][+\-]?\d+)?$/.test(e))
						throw new Error('Invalid numeric value "' + e + '"')
				}
				var l = n(r(7)).register,
				p = (n(r(7)).compile, n(r(14))),
				h = {
					number: !0,
					string: !0,
					boolean: !0,
					undefined: !0,
					null: !0
				};
				return u.prototype = new p,
				u.prototype.type = "ConstantNode",
				u.prototype.isConstantNode = !0,
				l(u.prototype.type, c),
				u.prototype.forEach = function (e) {},
				u.prototype.map = function (e) {
					return this.clone()
				},
				u.prototype.clone = function () {
					return new u(this.value, this.valueType)
				},
				u.prototype._toString = function (e) {
					switch (this.valueType) {
					case "string":
						return a(this.value);
					default:
						return this.value
					}
				},
				u.prototype.toHTML = function (e) {
					var t = o(this.value);
					switch (this.valueType) {
					case "number":
						return '<span class="math-number">' + t + "</span>";
					case "string":
						return '<span class="math-string">' + t + "</span>";
					case "boolean":
						return '<span class="math-boolean">' + t + "</span>";
					case "null":
						return '<span class="math-null-symbol">' + t + "</span>";
					case "undefined":
						return '<span class="math-undefined">' + t + "</span>";
					default:
						return '<span class="math-symbol">' + t + "</span>"
					}
				},
				u.prototype._toTex = function (e) {
					var t,
					r = this.value;
					switch (this.valueType) {
					case "string":
						return "\\mathtt{" + a(r) + "}";
					case "number":
						return t = r.toLowerCase().indexOf("e"),
						t !== -1 ? r.substring(0, t) + "\\cdot10^{" + r.substring(t + 1) + "}" : r;
					default:
						return r
					}
				},
				u
			}
			var i = r(59).type,
			a = r(9).stringify,
			o = r(9).escape;
			t.name = "ConstantNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, h, m) {
				function d(t, r) {
					if (!(this instanceof d))
						throw new SyntaxError("Constructor must be called with the new operator");
					if ("string" == typeof t && (t = new N(t)), !e.isNode(t))
						throw new TypeError('Node expected as parameter "fn"');
					if (!Array.isArray(r) || !r.every(e.isNode))
						throw new TypeError('Array containing Nodes expected for parameter "args"');
					this.fn = t,
					this.args = r || [],
					Object.defineProperty(this, "name", {
						get: function () {
							return this.fn.name || ""
						}
						.bind(this),
						set: function () {
							throw new Error("Cannot assign a new name, name is read-only")
						}
					});
					var n = function () {
						throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")
					};
					Object.defineProperty(this, "object", {
						get: n,
						set: n
					})
				}
				function v(t, r, n) {
					if (!(t instanceof d))
						throw new TypeError("No valid FunctionNode");
					var i,
					o = w(t.fn, r, n),
					s = c(t.args, function (e) {
							return w(e, r, n)
						}),
					h = g(r, n);
					if (e.isSymbolNode(t.fn)) {
						var m = t.fn.name,
						v = u(r.math, m) ? r.math[m] : void 0,
						y = "function" == typeof v && 1 == v.rawArgs;
						return y ? (i = p(r), r[i] = t.args, o + "(" + i + ", math, " + h + ")") : o + "(" + f(s, ", ") + ")"
					}
					if (e.isAccessorNode(t.fn) && e.isIndexNode(t.fn.index) && t.fn.index.isObjectProperty()) {
						i = p(r),
						r[i] = t.args,
						r.validateSafeMethod = l;
						var x = w(t.fn.object, r, n),
						b = a(t.fn.index.getObjectProperty());
						return "(function () {var object = " + x + ";validateSafeMethod(object, " + b + ");return (object[" + b + "] && object[" + b + "].rawArgs)  ? object[" + b + "](" + i + ", math, " + h + ") : object[" + b + "](" + f(s, ", ") + ")})()"
					}
					return i = p(r),
					r[i] = t.args,
					"(function () {var fn = " + o + ";return (fn && fn.rawArgs)  ? fn(" + i + ", math, " + h + ") : fn(" + f(s, ", ") + ")})()"
				}
				function g(e, t) {
					var r = Object.keys(t);
					if (0 === r.length)
						return "scope";
					e.extend = s;
					var n = c(r, function (e) {
							return a(e) + ": " + t[e]
						});
					return "extend(extend({}, scope), {" + f(n, ", ") + "})"
				}
				function y(t, r, n) {
					for (var i, a = "", o = new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)", "ig"), s = 0; null !== (i = o.exec(t)); )
						if (a += t.substring(s, i.index), s = i.index, "$$" === i[0])
							a += "$", s++;
						else {
							s += i[0].length;
							var u = r[i[1]];
							if (!u)
								throw new ReferenceError("Template: Property " + i[1] + " does not exist.");
							if (void 0 === i[2])
								switch (typeof u) {
								case "string":
									a += u;
									break;
								case "object":
									if (e.isNode(u))
										a += u.toTex(n);
									else {
										if (!Array.isArray(u))
											throw new TypeError("Template: " + i[1] + " has to be a Node, String or array of Nodes");
										a += u.map(function (t, r) {
											if (e.isNode(t))
												return t.toTex(n);
											throw new TypeError("Template: " + i[1] + "[" + r + "] is not a Node.")
										}).join(",")
									}
									break;
								default:
									throw new TypeError("Template: " + i[1] + " has to be a Node, String or array of Nodes")
								}
							else {
								if (!e.isNode(u[i[2]] && u[i[2]]))
									throw new TypeError("Template: " + i[1] + "[" + i[2] + "] is not a Node.");
								a += u[i[2]].toTex(n)
							}
						}
					return a += t.slice(s)
				}
				var x = n(r(7)).register,
				w = n(r(7)).compile,
				b = n(r(14)),
				N = n(r(40));
				d.prototype = new b,
				d.prototype.type = "FunctionNode",
				d.prototype.isFunctionNode = !0,
				x(d.prototype.type, v),
				d.prototype.forEach = function (e) {
					for (var t = 0; t < this.args.length; t++)
						e(this.args[t], "args[" + t + "]", this)
				},
				d.prototype.map = function (e) {
					for (var t = this.fn.map(e), r = [], n = 0; n < this.args.length; n++)
						r[n] = this._ifNode(e(this.args[n], "args[" + n + "]", this));
					return new d(t, r)
				},
				d.prototype.clone = function () {
					return new d(this.fn, this.args.slice(0))
				};
				var E = d.prototype.toString;
				d.prototype.toString = function (e) {
					var t,
					r = this.fn.toString(e);
					return e && "object" == typeof e.handler && u(e.handler, r) && (t = e.handler[r](this, e)),
					"undefined" != typeof t ? t : E.call(this, e)
				},
				d.prototype._toString = function (t) {
					var r = this.args.map(function (e) {
							return e.toString(t)
						}),
					n = e.isFunctionAssignmentNode(this.fn) ? "(" + this.fn.toString(t) + ")" : this.fn.toString(t);
					return n + "(" + r.join(", ") + ")"
				},
				d.prototype.toHTML = function (e) {
					var t = this.args.map(function (t) {
							return t.toHTML(e)
						});
					return '<span class="math-function">' + o(this.fn) + '</span><span class="math-paranthesis math-round-parenthesis">(</span>' + t.join('<span class="math-separator">,</span>') + '<span class="math-paranthesis math-round-parenthesis">)</span>'
				};
				var M = d.prototype.toTex;
				return d.prototype.toTex = function (e) {
					var t;
					return e && "object" == typeof e.handler && u(e.handler, this.name) && (t = e.handler[this.name](this, e)),
					"undefined" != typeof t ? t : M.call(this, e)
				},
				d.prototype._toTex = function (e) {
					var t,
					r = this.args.map(function (t) {
							return t.toTex(e)
						});
					!m[this.name] || "function" != typeof m[this.name].toTex && "object" != typeof m[this.name].toTex && "string" != typeof m[this.name].toTex || (t = m[this.name].toTex);
					var n;
					switch (typeof t) {
					case "function":
						n = t(this, e);
						break;
					case "string":
						n = y(t, this, e);
						break;
					case "object":
						switch (typeof t[r.length]) {
						case "function":
							n = t[r.length](this, e);
							break;
						case "string":
							n = y(t[r.length], this, e)
						}
					}
					return "undefined" != typeof n ? n : y(i.defaultTemplate, this, e)
				},
				d.prototype.getIdentifier = function () {
					return this.type + ":" + this.name
				},
				d
			}
			var i = r(4),
			a = r(9).stringify,
			o = r(9).escape,
			s = r(5).extend,
			u = r(5).hasOwnProperty,
			c = r(2).map,
			f = r(2).join,
			l = r(13).validateSafeMethod,
			p = r(108);
			t.name = "FunctionNode",
			t.path = "expression.node",
			t.math = !0,
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("isPositive", {
						number: function (e) {
							return e > 0
						},
						BigNumber: function (e) {
							return !e.isNeg() && !e.isZero() && !e.isNaN()
						},
						Fraction: function (e) {
							return e.s > 0 && e.n > 0
						},
						Unit: function (e) {
							return a(e.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			r(3);
			t.name = "isPositive",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function a(r) {
					return r >= 0 || t.predictable ? Math.sqrt(r) : new e.Complex(r, 0).sqrt()
				}
				var o = n("sqrt", {
						number: a,
						Complex: function (e) {
							return e.sqrt()
						},
						BigNumber: function (e) {
							return !e.isNegative() || t.predictable ? e.sqrt() : a(e.toNumber())
						},
						"Array | Matrix": function (e) {
							return i(e, o, !0)
						},
						Unit: function (e) {
							return e.pow(.5)
						}
					});
				return o.toTex = {
					1: "\\sqrt{${args[0]}}"
				},
				o
			}
			var i = r(1);
			t.name = "sqrt",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("isNegative", {
						number: function (e) {
							return e < 0
						},
						BigNumber: function (e) {
							return e.isNeg() && !e.isZero() && !e.isNaN()
						},
						Fraction: function (e) {
							return e.s < 0
						},
						Unit: function (e) {
							return a(e.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			r(3);
			t.name = "isNegative",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			e.exports = function (e) {
				return e && e.constructor.prototype.isMatrix || !1
			}
		}, function (e, t, r) {
			"use strict";
			t.type = function (e) {
				var t = typeof e;
				return "object" === t ? null === e ? "null" : Array.isArray(e) ? "Array" : e instanceof Date ? "Date" : e instanceof RegExp ? "RegExp" : e instanceof Boolean ? "boolean" : e instanceof Number ? "number" : e instanceof String ? "string" : "Object" : "function" === t ? "Function" : t
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(11)),
				s = e.SparseMatrix,
				u = function (e, t, r) {
					var n = e._values,
					u = e._index,
					c = e._ptr,
					f = e._size,
					l = e._datatype,
					p = t._values,
					h = t._index,
					m = t._ptr,
					d = t._size,
					v = t._datatype;
					if (f.length !== d.length)
						throw new i(f.length, d.length);
					if (f[0] !== d[0] || f[1] !== d[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + f + ") must match Matrix B (" + d + ")");
					var g,
					y = f[0],
					x = f[1],
					w = o,
					b = 0,
					N = r;
					"string" == typeof l && l === v && (g = l, w = a.find(o, [g, g]), b = a.convert(0, g), N = a.find(r, [g, g]));
					var E,
					M,
					A,
					O,
					T = n && p ? [] : void 0,
					_ = [],
					S = [],
					C = new s({
							values: T,
							index: _,
							ptr: S,
							size: [y, x],
							datatype: g
						}),
					z = T ? [] : void 0,
					k = T ? [] : void 0,
					I = [],
					B = [];
					for (M = 0; M < x; M++) {
						S[M] = _.length;
						var P = M + 1;
						for (A = c[M], O = c[M + 1]; A < O; A++)
							E = u[A], _.push(E), I[E] = P, z && (z[E] = n[A]);
						for (A = m[M], O = m[M + 1]; A < O; A++)
							E = h[A], I[E] !== P && _.push(E), B[E] = P, k && (k[E] = p[A]);
						if (T)
							for (A = S[M]; A < _.length; ) {
								E = _[A];
								var R = I[E],
								U = B[E];
								if (R === P || U === P) {
									var q = R === P ? z[E] : b,
									L = U === P ? k[E] : b,
									j = N(q, L);
									w(j, b) ? _.splice(A, 1) : (T.push(j), A++)
								}
							}
					}
					return S[x] = _.length,
					C
				};
				return u
			}
			var i = r(10);
			t.name = "algorithm05",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(e, t) {
					switch (e.length) {
					case 0:
						return t ? c(t) : [];
					case 1:
						return u(e[0], e[0], t);
					case 2:
						return u(e[0], e[1], t);
					default:
						throw new Error("Vector containing two values expected")
					}
				}
				function u(t, r, n) {
					var o = e.isBigNumber(t) || e.isBigNumber(r) ? e.BigNumber : null;
					if (e.isBigNumber(t) && (t = t.toNumber()), e.isBigNumber(r) && (r = r.toNumber()), !a(t) || t < 1)
						throw new Error("Parameters in function eye must be positive integers");
					if (!a(r) || r < 1)
						throw new Error("Parameters in function eye must be positive integers");
					var s = o ? new e.BigNumber(1) : 1,
					u = o ? new o(0) : 0,
					c = [t, r];
					if (n) {
						var f = e.Matrix.storage(n);
						return f.diagonal(c, s, 0, u)
					}
					for (var l = i.resize([], c, u), p = t < r ? t : r, h = 0; h < p; h++)
						l[h][h] = s;
					return l
				}
				var c = n(r(0)),
				f = o("eye", {
						"": function () {
							return "Matrix" === t.matrix ? c([]) : []
						},
						string: function (e) {
							return c(e)
						},
						"number | BigNumber": function (e) {
							return u(e, e, "Matrix" === t.matrix ? "default" : void 0)
						},
						"number | BigNumber, string": function (e, t) {
							return u(e, e, t)
						},
						"number | BigNumber, number | BigNumber": function (e, r) {
							return u(e, r, "Matrix" === t.matrix ? "default" : void 0)
						},
						"number | BigNumber, number | BigNumber, string": function (e, t, r) {
							return u(e, t, r)
						},
						Array: function (e) {
							return s(e)
						},
						"Array, string": function (e, t) {
							return s(e, t)
						},
						Matrix: function (e) {
							return s(e.valueOf(), e.storage())
						},
						"Matrix, string": function (e, t) {
							return s(e.valueOf(), t)
						}
					});
				return f.toTex = void 0,
				f
			}
			var i = r(2),
			a = r(3).isInteger;
			t.name = "eye",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, l) {
				function p(t, r, n, i) {
					if (!(this instanceof p))
						throw new SyntaxError("Constructor must be called with the new operator");
					if ("string" != typeof t)
						throw new TypeError('string expected for parameter "op"');
					if ("string" != typeof r)
						throw new TypeError('string expected for parameter "fn"');
					if (!Array.isArray(n) || !n.every(e.isNode))
						throw new TypeError('Array containing Nodes expected for parameter "args"');
					this.implicit = i === !0,
					this.op = t,
					this.fn = r,
					this.args = n || []
				}
				function h(e, t, r) {
					if (!(e instanceof p))
						throw new TypeError("No valid OperatorNode");
					if ("string" != typeof e.fn || !c(t.math, e.fn))
						throw t.math[e.fn] ? new Error('No access to function "' + e.fn + '"') : new Error("Function " + e.fn + ' missing in provided namespace "math"');
					var n = a(e.args, function (e) {
							return v(e, t, r)
						});
					return "math[" + s(e.fn) + "](" + o(n, ", ") + ")"
				}
				function m(e, t, r, n, i) {
					var a = f.getPrecedence(e, t),
					o = f.getAssociativity(e, t);
					if ("all" === t || n.length > 2 && "OperatorNode:add" !== e.getIdentifier() && "OperatorNode:multiply" !== e.getIdentifier()) {
						var s = n.map(function (e) {
								switch (e.getContent().type) {
								case "ArrayNode":
								case "ConstantNode":
								case "SymbolNode":
								case "ParenthesisNode":
									return !1;
								default:
									return !0
								}
							});
						return s
					}
					var u = void 0;
					switch (n.length) {
					case 0:
						u = [];
						break;
					case 1:
						var c = f.getPrecedence(n[0], t);
						if (i && null !== c) {
							var l,
							p;
							if ("keep" === t ? (l = n[0].getIdentifier(), p = e.getIdentifier()) : (l = n[0].getContent().getIdentifier(), p = e.getContent().getIdentifier()), f.properties[a][p].latexLeftParens === !1) {
								u = [!1];
								break
							}
							if (f.properties[c][l].latexParens === !1) {
								u = [!1];
								break
							}
						}
						if (null === c) {
							u = [!1];
							break
						}
						if (c <= a) {
							u = [!0];
							break
						}
						u = [!1];
						break;
					case 2:
						var h,
						m = f.getPrecedence(n[0], t),
						d = f.isAssociativeWith(e, n[0], t);
						h = null !== m && (m === a && "right" === o && !d || m < a);
						var v,
						g = f.getPrecedence(n[1], t),
						y = f.isAssociativeWith(e, n[1], t);
						if (v = null !== g && (g === a && "left" === o && !y || g < a), i) {
							var p,
							x,
							w;
							"keep" === t ? (p = e.getIdentifier(), x = e.args[0].getIdentifier(), w = e.args[1].getIdentifier()) : (p = e.getContent().getIdentifier(), x = e.args[0].getContent().getIdentifier(), w = e.args[1].getContent().getIdentifier()),
							null !== m && (f.properties[a][p].latexLeftParens === !1 && (h = !1), f.properties[m][x].latexParens === !1 && (h = !1)),
							null !== g && (f.properties[a][p].latexRightParens === !1 && (v = !1), f.properties[g][w].latexParens === !1 && (v = !1))
						}
						u = [h, v];
						break;
					default:
						if ("OperatorNode:add" === e.getIdentifier() || "OperatorNode:multiply" === e.getIdentifier())
							var u = n.map(function (r) {
									var n = f.getPrecedence(r, t),
									i = f.isAssociativeWith(e, r, t),
									s = f.getAssociativity(r, t);
									return null !== n && (a === n && o === s && !i || n < a)
								})
					}
					return n.length >= 2 && "OperatorNode:multiply" === e.getIdentifier() && e.implicit && "auto" === t && "hide" === r && (u = n.map(function (e, t) {
								var r = "ParenthesisNode" === e.getIdentifier();
								return !(!u[t] && !r)
							})),
					u
				}
				var d = n(r(7)).register,
				v = n(r(7)).compile,
				g = n(r(14));
				n(r(53)),
				n(r(40)),
				n(r(54));
				return p.prototype = new g,
				p.prototype.type = "OperatorNode",
				p.prototype.isOperatorNode = !0,
				d(p.prototype.type, h),
				p.prototype.forEach = function (e) {
					for (var t = 0; t < this.args.length; t++)
						e(this.args[t], "args[" + t + "]", this)
				},
				p.prototype.map = function (e) {
					for (var t = [], r = 0; r < this.args.length; r++)
						t[r] = this._ifNode(e(this.args[r], "args[" + r + "]", this));
					return new p(this.op, this.fn, t)
				},
				p.prototype.clone = function () {
					return new p(this.op, this.fn, this.args.slice(0), this.implicit)
				},
				p.prototype._toString = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = e && e.implicit ? e.implicit : "hide",
					n = this.args,
					i = m(this, t, r, n, !1);
					if (1 === n.length) {
						var a = f.getAssociativity(this, t),
						o = n[0].toString(e);
						return i[0] && (o = "(" + o + ")"),
						"right" === a ? this.op + o : "left" === a ? o + this.op : o + this.op
					}
					if (2 == n.length) {
						var s = n[0].toString(e),
						u = n[1].toString(e);
						return i[0] && (s = "(" + s + ")"),
						i[1] && (u = "(" + u + ")"),
						this.implicit && "OperatorNode:multiply" === this.getIdentifier() && "hide" == r ? s + " " + u : s + " " + this.op + " " + u
					}
					if (n.length > 2 && ("OperatorNode:add" === this.getIdentifier() || "OperatorNode:multiply" === this.getIdentifier())) {
						var c = n.map(function (t, r) {
								return t = t.toString(e),
								i[r] && (t = "(" + t + ")"),
								t
							});
						return this.implicit && "OperatorNode:multiply" === this.getIdentifier() && "hide" === r ? c.join(" ") : c.join(" " + this.op + " ")
					}
					return this.fn + "(" + this.args.join(", ") + ")"
				},
				p.prototype.toHTML = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = e && e.implicit ? e.implicit : "hide",
					n = this.args,
					i = m(this, t, r, n, !1);
					if (1 === n.length) {
						var a = f.getAssociativity(this, t),
						o = n[0].toHTML(e);
						return i[0] && (o = '<span class="math-parenthesis math-round-parenthesis">(</span>' + o + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
						"right" === a ? '<span class="math-operator math-unary-operator math-lefthand-unary-operator">' + u(this.op) + "</span>" + o : "left" === a ? '<span class="math-operator math-unary-operator math-righthand-unary-operator">' + u(this.op) + "</span>" + o : '<span class="math-operator math-unary-operator math-righthand-unary-operator">' + u(this.op) + "</span>" + o
					}
					if (2 == n.length) {
						var s = n[0].toHTML(e),
						c = n[1].toHTML(e);
						return i[0] && (s = '<span class="math-parenthesis math-round-parenthesis">(</span>' + s + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
						i[1] && (c = '<span class="math-parenthesis math-round-parenthesis">(</span>' + c + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
						this.implicit && "OperatorNode:multiply" === this.getIdentifier() && "hide" == r ? s + '<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>' + c : s + '<span class="math-operator math-binary-operator math-explicit-binary-operator">' + u(this.op) + "</span>" + c
					}
					if (n.length > 2 && ("OperatorNode:add" === this.getIdentifier() || "OperatorNode:multiply" === this.getIdentifier())) {
						var l = n.map(function (t, r) {
								return t = t.toHTML(e),
								i[r] && (t = '<span class="math-parenthesis math-round-parenthesis">(</span>' + t + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
								t
							});
						return this.implicit && "OperatorNode:multiply" === this.getIdentifier() && "hide" === r ? l.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>') : l.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">' + u(this.op) + "</span>")
					}
					return '<span class="math-function">' + u(this.fn) + '</span><span class="math-paranthesis math-round-parenthesis">(</span>' + l.join('<span class="math-separator">,</span>') + '<span class="math-paranthesis math-round-parenthesis">)</span>'
				},
				p.prototype._toTex = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = e && e.implicit ? e.implicit : "hide",
					n = this.args,
					a = m(this, t, r, n, !0),
					o = i.operators[this.fn];
					if (o = "undefined" == typeof o ? this.op : o, 1 === n.length) {
						var s = f.getAssociativity(this, t),
						u = n[0].toTex(e);
						return a[0] && (u = "\\left(" + u + "\\right)"),
						"right" === s ? o + u : "left" === s ? u + o : u + o
					}
					if (2 === n.length) {
						var c = n[0],
						l = c.toTex(e);
						a[0] && (l = "\\left(" + l + "\\right)");
						var p = n[1],
						h = p.toTex(e);
						a[1] && (h = "\\left(" + h + "\\right)");
						var d;
						switch (d = "keep" === t ? c.getIdentifier() : c.getContent().getIdentifier(), this.getIdentifier()) {
						case "OperatorNode:divide":
							return o + "{" + l + "}{" + h + "}";
						case "OperatorNode:pow":
							switch (l = "{" + l + "}", h = "{" + h + "}", d) {
							case "ConditionalNode":
							case "OperatorNode:divide":
								l = "\\left(" + l + "\\right)"
							}
						case "OperatorNode:multiply":
							if (this.implicit && "hide" === r)
								return l + "~" + h
						}
						return l + o + h
					}
					if (n.length > 2 && ("OperatorNode:add" === this.getIdentifier() || "OperatorNode:multiply" === this.getIdentifier())) {
						var v = n.map(function (t, r) {
								return t = t.toTex(e),
								a[r] && (t = "\\left(" + t + "\\right)"),
								t
							});
						return "OperatorNode:multiply" === this.getIdentifier() && this.implicit ? v.join("~") : v.join(o)
					}
					return "\\mathrm{" + this.fn + "}\\left(" + n.map(function (t) {
						return t.toTex(e);
					}).join(",") + "\\right)"
				},
				p.prototype.getIdentifier = function () {
					return this.type + ":" + this.fn
				},
				p
			}
			var i = r(4),
			a = r(2).map,
			o = r(2).join,
			s = r(9).stringify,
			u = r(9).escape,
			c = r(13).isSafeMethod,
			f = r(52);
			t.name = "OperatorNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(t) {
					if (!(this instanceof a))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (!e.isNode(t))
						throw new TypeError('Node expected for parameter "content"');
					this.content = t
				}
				function o(e, t, r) {
					if (!(e instanceof a))
						throw new TypeError("No valid ParenthesisNode");
					return u(e.content, t, r)
				}
				var s = n(r(7)).register,
				u = n(r(7)).compile,
				c = n(r(14));
				return a.prototype = new c,
				a.prototype.type = "ParenthesisNode",
				a.prototype.isParenthesisNode = !0,
				s(a.prototype.type, o),
				a.prototype.getContent = function () {
					return this.content.getContent()
				},
				a.prototype.forEach = function (e) {
					e(this.content, "content", this)
				},
				a.prototype.map = function (e) {
					var t = e(this.content, "content", this);
					return new a(t)
				},
				a.prototype.clone = function () {
					return new a(this.content)
				},
				a.prototype._toString = function (e) {
					return !e || e && !e.parenthesis || e && "keep" === e.parenthesis ? "(" + this.content.toString(e) + ")" : this.content.toString(e)
				},
				a.prototype.toHTML = function (e) {
					return !e || e && !e.parenthesis || e && "keep" === e.parenthesis ? '<span class="math-parenthesis math-round-parenthesis">(</span>' + this.content.toHTML(e) + '<span class="math-parenthesis math-round-parenthesis">)</span>' : this.content.toHTML(e)
				},
				a.prototype._toTex = function (e) {
					return !e || e && !e.parenthesis || e && "keep" === e.parenthesis ? "\\left(" + this.content.toTex(e) + "\\right)" : this.content.toTex(e)
				},
				a
			}
			t.name = "ParenthesisNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, f) {
				var l = n(r(0)),
				p = f("concat", {
						"...Array | Matrix | number | BigNumber": function (t) {
							var r,
							n,
							f = t.length,
							p = -1,
							h = !1,
							m = [];
							for (r = 0; r < f; r++) {
								var d = t[r];
								if (e.isMatrix(d) && (h = !0), e.isNumber(d) || e.isBigNumber(d)) {
									if (r !== f - 1)
										throw new Error("Dimension must be specified as last argument");
									if (n = p, p = d.valueOf(), !o(p))
										throw new TypeError("Integer number expected for dimension");
									if (p < 0 || r > 0 && p > n)
										throw new u(p, n + 1)
								} else {
									var v = a(d).valueOf(),
									g = s.size(v);
									if (m[r] = v, n = p, p = g.length - 1, r > 0 && p != n)
										throw new c(n + 1, p + 1)
								}
							}
							if (0 == m.length)
								throw new SyntaxError("At least one matrix expected");
							for (var y = m.shift(); m.length; )
								y = i(y, m.shift(), p, 0);
							return h ? l(y) : y
						},
						"...string": function (e) {
							return e.join("")
						}
					});
				return p.toTex = void 0,
				p
			}
			function i(e, t, r, n) {
				if (n < r) {
					if (e.length != t.length)
						throw new c(e.length, t.length);
					for (var a = [], o = 0; o < e.length; o++)
						a[o] = i(e[o], t[o], r, n + 1);
					return a
				}
				return e.concat(t)
			}
			var a = r(5).clone,
			o = r(3).isInteger,
			s = r(2),
			u = r(51),
			c = r(10);
			t.name = "concat",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r) {
				var a,
				o,
				s,
				u;
				if (t <= 0) {
					if (Array.isArray(e[0])) {
						for (u = i(e), o = [], a = 0; a < u.length; a++)
							o[a] = n(u[a], t - 1, r);
						return o
					}
					for (s = e[0], a = 1; a < e.length; a++)
						s = r(s, e[a]);
					return s
				}
				for (o = [], a = 0; a < e.length; a++)
					o[a] = n(e[a], t - 1, r);
				return o
			}
			function i(e) {
				var t,
				r,
				n = e.length,
				i = e[0].length,
				a = [];
				for (r = 0; r < i; r++) {
					var o = [];
					for (t = 0; t < n; t++)
						o.push(e[t][r]);
					a.push(o)
				}
				return a
			}
			var a = r(2).size,
			o = r(58),
			s = r(51);
			e.exports = function (e, t, r) {
				var i = Array.isArray(e) ? a(e) : e.size();
				if (t < 0 || t >= i.length)
					throw new s(t, i.length);
				return o(e) ? e.create(n(e.valueOf(), t, r)) : n(e, t, r)
			}
		}, function (e, t, r) {
			"use strict";
			var n = r(46);
			e.exports = function (e) {
				for (var t = 0; t < e.length; t++)
					if (n(e[t]))
						return !0;
				return !1
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = r(4),
				u = n(r(0)),
				c = e.DenseMatrix,
				f = e.SparseMatrix,
				l = o("transpose", {
						Array: function (e) {
							return l(u(e)).valueOf()
						},
						Matrix: function (e) {
							var t,
							r = e.size();
							switch (r.length) {
							case 1:
								t = e.clone();
								break;
							case 2:
								var n = r[0],
								i = r[1];
								if (0 === i)
									throw new RangeError("Cannot transpose a 2D matrix with no columns (size: " + a(r) + ")");
								switch (e.storage()) {
								case "dense":
									t = p(e, n, i);
									break;
								case "sparse":
									t = h(e, n, i)
								}
								break;
							default:
								throw new RangeError("Matrix must be a vector or two dimensional (size: " + a(this._size) + ")")
							}
							return t
						},
						any: function (e) {
							return i(e)
						}
					}),
				p = function (e, t, r) {
					for (var n, a = e._data, o = [], s = 0; s < r; s++) {
						n = o[s] = [];
						for (var u = 0; u < t; u++)
							n[u] = i(a[u][s])
					}
					return new c({
						data: o,
						size: [r, t],
						datatype: e._datatype
					})
				},
				h = function (e, t, r) {
					for (var n = e._values, a = e._index, o = e._ptr, s = n ? [] : void 0, u = [], c = [], l = [], p = 0; p < t; p++)
						l[p] = 0;
					var h,
					m,
					d;
					for (h = 0, m = a.length; h < m; h++)
						l[a[h]]++;
					for (var v = 0, g = 0; g < t; g++)
						c.push(v), v += l[g], l[g] = c[g];
					for (c.push(v), d = 0; d < r; d++)
						for (var y = o[d], x = o[d + 1], w = y; w < x; w++) {
							var b = l[a[w]]++;
							u[b] = d,
							n && (s[b] = i(n[w]))
						}
					return new f({
						values: s,
						index: u,
						ptr: c,
						size: [r, t],
						datatype: e._datatype
					})
				};
				return l.toTex = {
					1: "\\left(${args[0]}\\right)" + s.operators.transpose
				},
				l
			}
			var i = r(5).clone,
			a = r(9).format;
			t.name = "transpose",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(11)),
				u = e.SparseMatrix,
				c = function (e, t, r) {
					var n = e._values,
					c = e._size,
					f = e._datatype,
					l = t._values,
					p = t._size,
					h = t._datatype;
					if (c.length !== p.length)
						throw new a(c.length, p.length);
					if (c[0] !== p[0] || c[1] !== p[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + c + ") must match Matrix B (" + p + ")");
					var m,
					d = c[0],
					v = c[1],
					g = s,
					y = 0,
					x = r;
					"string" == typeof f && f === h && (m = f, g = o.find(s, [m, m]), y = o.convert(0, m), x = o.find(r, [m, m]));
					for (var w = n && l ? [] : void 0, b = [], N = [], E = new u({
								values: w,
								index: b,
								ptr: N,
								size: [d, v],
								datatype: m
							}), M = w ? [] : void 0, A = [], O = [], T = 0; T < v; T++) {
						N[T] = b.length;
						var _ = T + 1;
						if (i(e, T, A, M, O, _, E, x), i(t, T, A, M, O, _, E, x), M)
							for (var S = N[T]; S < b.length; ) {
								var C = b[S];
								if (O[C] === _) {
									var z = M[C];
									g(z, y) ? b.splice(S, 1) : (w.push(z), S++)
								} else
									b.splice(S, 1)
							}
						else
							for (var k = N[T]; k < b.length; ) {
								var I = b[k];
								O[I] !== _ ? b.splice(k, 1) : k++
							}
					}
					return N[v] = b.length,
					E
				};
				return c
			}
			var i = r(436),
			a = r(10);
			t.name = "algorithm06",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(137)),
				s = r(4),
				u = a("factorial", {
						number: function (e) {
							if (e < 0)
								throw new Error("Value must be non-negative");
							return o(e + 1)
						},
						BigNumber: function (e) {
							if (e.isNegative())
								throw new Error("Value must be non-negative");
							return o(e.plus(1))
						},
						"Array | Matrix": function (e) {
							return i(e, u)
						}
					});
				return u.toTex = {
					1: "\\left(${args[0]}\\right)" + s.operators.factorial
				},
				u
			}
			var i = r(1);
			t.name = "factorial",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("combinations", {
						"number, number": function (e, t) {
							var r,
							n,
							i;
							if (!a(e) || e < 0)
								throw new TypeError("Positive integer value expected in function combinations");
							if (!a(t) || t < 0)
								throw new TypeError("Positive integer value expected in function combinations");
							if (t > e)
								throw new TypeError("k must be less than or equal to n");
							for (r = Math.max(t, e - t), n = 1, i = 1; i <= e - r; i++)
								n = n * (r + i) / i;
							return n
						},
						"BigNumber, BigNumber": function (t, r) {
							var n,
							a,
							o,
							s,
							u = new e.BigNumber(1);
							if (!i(t) || !i(r))
								throw new TypeError("Positive integer value expected in function combinations");
							if (r.gt(t))
								throw new TypeError("k must be less than n in function combinations");
							for (n = t.minus(r), r.lt(n) && (n = r), a = u, o = u, s = t.minus(n); o.lte(s); o = o.plus(1))
								a = a.times(n.plus(o)).dividedBy(o);
							return a
						}
					});
				return o.toTex = {
					2: "\\binom{${args[0]}}{${args[1]}}"
				},
				o
			}
			function i(e) {
				return e.isInteger() && e.gte(0)
			}
			var a = r(3).isInteger;
			t.name = "combinations",
			t.factory = n
		}, function (e, t) {
			e.exports = function (e) {
				return e && e.constructor.prototype.isBigNumber || !1
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function i() {
					if (!(this instanceof i))
						throw new SyntaxError("Constructor must be called with the new operator")
				}
				return i.prototype.type = "Matrix",
				i.prototype.isMatrix = !0,
				i.storage = function (e) {
					if (!o(e))
						throw new TypeError("format must be a string value");
					var t = i._storage[e];
					if (!t)
						throw new SyntaxError("Unsupported matrix storage format: " + e);
					return t
				},
				i._storage = {},
				i.prototype.storage = function () {
					throw new Error("Cannot invoke storage on a Matrix interface")
				},
				i.prototype.datatype = function () {
					throw new Error("Cannot invoke datatype on a Matrix interface")
				},
				i.prototype.create = function (e, t) {
					throw new Error("Cannot invoke create on a Matrix interface")
				},
				i.prototype.subset = function (e, t, r) {
					throw new Error("Cannot invoke subset on a Matrix interface")
				},
				i.prototype.get = function (e) {
					throw new Error("Cannot invoke get on a Matrix interface")
				},
				i.prototype.set = function (e, t, r) {
					throw new Error("Cannot invoke set on a Matrix interface")
				},
				i.prototype.resize = function (e, t) {
					throw new Error("Cannot invoke resize on a Matrix interface")
				},
				i.prototype.reshape = function (e, t) {
					throw new Error("Cannot invoke reshape on a Matrix interface")
				},
				i.prototype.clone = function () {
					throw new Error("Cannot invoke clone on a Matrix interface")
				},
				i.prototype.size = function () {
					throw new Error("Cannot invoke size on a Matrix interface")
				},
				i.prototype.map = function (e, t) {
					throw new Error("Cannot invoke map on a Matrix interface")
				},
				i.prototype.forEach = function (e) {
					throw new Error("Cannot invoke forEach on a Matrix interface")
				},
				i.prototype.toArray = function () {
					throw new Error("Cannot invoke toArray on a Matrix interface")
				},
				i.prototype.valueOf = function () {
					throw new Error("Cannot invoke valueOf on a Matrix interface")
				},
				i.prototype.format = function (e) {
					throw new Error("Cannot invoke format on a Matrix interface")
				},
				i.prototype.toString = function () {
					throw new Error("Cannot invoke toString on a Matrix interface")
				},
				i
			}
			var i = r(25),
			a = i.string,
			o = a.isString;
			t.name = "Matrix",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(11)),
				s = e.SparseMatrix,
				u = function (e, t, r) {
					var n = e._values,
					u = e._index,
					c = e._ptr,
					f = e._size,
					l = e._datatype,
					p = t._values,
					h = t._index,
					m = t._ptr,
					d = t._size,
					v = t._datatype;
					if (f.length !== d.length)
						throw new i(f.length, d.length);
					if (f[0] !== d[0] || f[1] !== d[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + f + ") must match Matrix B (" + d + ")");
					var g,
					y = f[0],
					x = f[1],
					w = o,
					b = 0,
					N = r;
					"string" == typeof l && l === v && (g = l, w = a.find(o, [g, g]), b = a.convert(0, g), N = a.find(r, [g, g]));
					var E,
					M,
					A,
					O,
					T,
					_ = n && p ? [] : void 0,
					S = [],
					C = [],
					z = new s({
							values: _,
							index: S,
							ptr: C,
							size: [y, x],
							datatype: g
						}),
					k = n && p ? [] : void 0,
					I = n && p ? [] : void 0,
					B = [],
					P = [];
					for (M = 0; M < x; M++) {
						C[M] = S.length;
						var R = M + 1;
						for (O = c[M], T = c[M + 1], A = O; A < T; A++)
							E = u[A], S.push(E), B[E] = R, k && (k[E] = n[A]);
						for (O = m[M], T = m[M + 1], A = O; A < T; A++)
							if (E = h[A], B[E] === R) {
								if (k) {
									var U = N(k[E], p[A]);
									w(U, b) ? B[E] = null : k[E] = U
								}
							} else
								S.push(E), P[E] = R, I && (I[E] = p[A]);
						if (k && I)
							for (A = C[M]; A < S.length; )
								E = S[A], B[E] === R ? (_[A] = k[E], A++) : P[E] === R ? (_[A] = I[E], A++) : S.splice(A, 1)
					}
					return C[x] = S.length,
					z
				};
				return u
			}
			var i = r(10);
			t.name = "algorithm04",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("number", {
						"": function () {
							return 0
						},
						number: function (e) {
							return e
						},
						string: function (e) {
							var t = Number(e);
							if (isNaN(t))
								throw new SyntaxError('String "' + e + '" is no valid number');
							return t
						},
						BigNumber: function (e) {
							return e.toNumber()
						},
						Fraction: function (e) {
							return e.valueOf()
						},
						Unit: function (e) {
							throw new Error("Second argument with valueless unit expected")
						},
						"Unit, string | Unit": function (e, t) {
							return e.toNumber(t)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					0: "0",
					1: "\\left(${args[0]}\\right)",
					2: "\\left(\\left(${args[0]}\\right)${args[1]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "number",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("isNumeric", {
						"number | BigNumber | Fraction | boolean": function () {
							return !0
						},
						"Complex | Unit | string": function () {
							return !1
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			r(3);
			t.name = "isNumeric",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("_typeof", {
						any: function (t) {
							var r = i.type(t);
							if ("Object" === r) {
								if (e.isBigNumber(t))
									return "BigNumber";
								if (e.isComplex(t))
									return "Complex";
								if (e.isFraction(t))
									return "Fraction";
								if (e.isMatrix(t))
									return "Matrix";
								if (e.isUnit(t))
									return "Unit";
								if (e.isIndex(t))
									return "Index";
								if (e.isRange(t))
									return "Range";
								if (e.isChain(t))
									return "Chain";
								if (e.isHelp(t))
									return "Help"
							}
							return r
						}
					});
				return a.toTex = void 0,
				a
			}
			var i = r(59);
			t.name = "typeof",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			e.exports = {
				end: !0
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				function u(t, r) {
					if (!(this instanceof u))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (this.dimensions = t, this.dotNotation = r || !1, !m(t) || !t.every(e.isNode))
						throw new TypeError('Array containing Nodes expected for parameter "dimensions"');
					if (this.dotNotation && !this.isObjectProperty())
						throw new Error("dotNotation only applicable for object properties");
					var n = function () {
						throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")
					};
					Object.defineProperty(this, "object", {
						get: n,
						set: n
					})
				}
				function c(t, r, n) {
					if (!(t instanceof u))
						throw new TypeError("No valid IndexNode");
					var o = Object.create(n);
					r.range = function (t, r, n) {
						return new h(e.isBigNumber(t) ? t.toNumber() : t, e.isBigNumber(r) ? r.toNumber() : r, e.isBigNumber(n) ? n.toNumber() : n)
					};
					var s = i(t.dimensions, function (t, n) {
							return e.isRangeNode(t) ? t.needsEnd() ? (o.end = "end", "(function () {var end = size[" + n + "]; return range(" + l(t.start, r, o) + ", " + l(t.end, r, o) + ", " + (t.step ? l(t.step, r, o) : "1") + "); })()") : "range(" + l(t.start, r, o) + ", " + l(t.end, r, o) + ", " + (t.step ? l(t.step, r, o) : "1") + ")" : e.isSymbolNode(t) && "end" === t.name ? (o.end = "end", "(function () {var end = size[" + n + "]; return " + l(t, r, o) + "; })()") : l(t, r, o)
						});
					return "math.index(" + a(s, ", ") + ")"
				}
				var f = n(r(7)).register,
				l = n(r(7)).compile,
				p = n(r(14)),
				h = (n(r(79)), n(r(40)), n(r(93))),
				m = Array.isArray;
				return u.prototype = new p,
				u.prototype.type = "IndexNode",
				u.prototype.isIndexNode = !0,
				f(u.prototype.type, c),
				u.prototype.forEach = function (e) {
					for (var t = 0; t < this.dimensions.length; t++)
						e(this.dimensions[t], "dimensions[" + t + "]", this)
				},
				u.prototype.map = function (e) {
					for (var t = [], r = 0; r < this.dimensions.length; r++)
						t[r] = this._ifNode(e(this.dimensions[r], "dimensions[" + r + "]", this));
					return new u(t)
				},
				u.prototype.clone = function () {
					return new u(this.dimensions.slice(0))
				},
				u.prototype.isObjectProperty = function () {
					return 1 === this.dimensions.length && e.isConstantNode(this.dimensions[0]) && "string" === this.dimensions[0].valueType
				},
				u.prototype.getObjectProperty = function () {
					return this.isObjectProperty() ? this.dimensions[0].value : null
				},
				u.prototype._toString = function (e) {
					return this.dotNotation ? "." + this.getObjectProperty() : "[" + this.dimensions.join(", ") + "]"
				},
				u.prototype.toHTML = function (e) {
					for (var t = [], r = 0; r < this.dimensions.length; r++)
						t[r] = this.dimensions[r].toHTML();
					return this.dotNotation ? '<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">' + o(this.getObjectProperty()) + "</span>" : '<span class="math-parenthesis math-square-parenthesis">[</span>' + t.join('<span class="math-separator">,</span>') + '<span class="math-parenthesis math-square-parenthesis">]</span>'
				},
				u.prototype._toTex = function (e) {
					var t = this.dimensions.map(function (t) {
							return t.toTex(e)
						});
					return this.dotNotation ? "." + this.getObjectProperty() : "_{" + t.join(",") + "}"
				},
				u.prototype.needsSize = function () {
					return this.dimensions.some(function (t) {
						return e.isRangeNode(t) && t.needsEnd() || e.isSymbolNode(t) && "end" === t.name
					})
				},
				u
			}
			var i = r(2).map,
			a = r(2).join,
			o = r(9).escape;
			t.name = "IndexNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(t, r, n) {
					if (!(this instanceof o))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (!e.isNode(t))
						throw new TypeError("Node expected");
					if (!e.isNode(r))
						throw new TypeError("Node expected");
					if (n && !e.isNode(n))
						throw new TypeError("Node expected");
					if (arguments.length > 3)
						throw new Error("Too many arguments");
					this.start = t,
					this.end = r,
					this.step = n || null
				}
				function s(e, t, r) {
					if (!(e instanceof o))
						throw new TypeError("No valid RangeNode");
					return "math.range(" + f(e.start, t, r) + ", " + f(e.end, t, r) + (e.step ? ", " + f(e.step, t, r) : "") + ")"
				}
				function u(e, t) {
					var r = i.getPrecedence(e, t),
					n = {},
					a = i.getPrecedence(e.start, t);
					if (n.start = null !== a && a <= r || "all" === t, e.step) {
						var o = i.getPrecedence(e.step, t);
						n.step = null !== o && o <= r || "all" === t
					}
					var s = i.getPrecedence(e.end, t);
					return n.end = null !== s && s <= r || "all" === t,
					n
				}
				var c = n(r(7)).register,
				f = n(r(7)).compile,
				l = n(r(14));
				return o.prototype = new l,
				o.prototype.type = "RangeNode",
				o.prototype.isRangeNode = !0,
				o.prototype.needsEnd = function () {
					var t = this.filter(function (t) {
							return e.isSymbolNode(t) && "end" === t.name
						});
					return t.length > 0
				},
				c(o.prototype.type, s),
				o.prototype.forEach = function (e) {
					e(this.start, "start", this),
					e(this.end, "end", this),
					this.step && e(this.step, "step", this)
				},
				o.prototype.map = function (e) {
					return new o(this._ifNode(e(this.start, "start", this)), this._ifNode(e(this.end, "end", this)), this.step && this._ifNode(e(this.step, "step", this)))
				},
				o.prototype.clone = function () {
					return new o(this.start, this.end, this.step && this.step)
				},
				o.prototype._toString = function (e) {
					var t,
					r = e && e.parenthesis ? e.parenthesis : "keep",
					n = u(this, r),
					i = this.start.toString(e);
					if (n.start && (i = "(" + i + ")"), t = i, this.step) {
						var a = this.step.toString(e);
						n.step && (a = "(" + a + ")"),
						t += ":" + a
					}
					var o = this.end.toString(e);
					return n.end && (o = "(" + o + ")"),
					t += ":" + o
				},
				o.prototype.toHTML = function (e) {
					var t,
					r = e && e.parenthesis ? e.parenthesis : "keep",
					n = u(this, r),
					i = this.start.toHTML(e);
					if (n.start && (i = '<span class="math-parenthesis math-round-parenthesis">(</span>' + i + '<span class="math-parenthesis math-round-parenthesis">)</span>'), t = i, this.step) {
						var a = this.step.toHTML(e);
						n.step && (a = '<span class="math-parenthesis math-round-parenthesis">(</span>' + a + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
						t += '<span class="math-operator math-range-operator">:</span>' + a
					}
					var o = this.end.toHTML(e);
					return n.end && (o = '<span class="math-parenthesis math-round-parenthesis">(</span>' + o + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
					t += '<span class="math-operator math-range-operator">:</span>' + o
				},
				o.prototype._toTex = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = u(this, t),
					n = this.start.toTex(e);
					if (r.start && (n = "\\left(" + n + "\\right)"), this.step) {
						var i = this.step.toTex(e);
						r.step && (i = "\\left(" + i + "\\right)"),
						n += ":" + i
					}
					var a = this.end.toTex(e);
					return r.end && (a = "\\left(" + a + "\\right)"),
					n += ":" + a
				},
				o
			}
			var i = r(52);
			t.name = "RangeNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t) {
					if (!(this instanceof s))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (this.items = t || [], !Array.isArray(this.items) || !this.items.every(e.isNode))
						throw new TypeError("Array containing Nodes expected");
					var r = function () {
						throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")
					};
					Object.defineProperty(this, "nodes", {
						get: r,
						set: r
					})
				}
				function u(e, t, r) {
					if (!(e instanceof s))
						throw new TypeError("No valid ArrayNode");
					var n = "Array" !== t.math.config().matrix,
					o = i(e.items, function (e) {
							return f(e, t, r)
						});
					return (n ? "math.matrix([" : "[") + a(o, ",") + (n ? "])" : "]")
				}
				var c = n(r(7)).register,
				f = n(r(7)).compile,
				l = n(r(14));
				return s.prototype = new l,
				s.prototype.type = "ArrayNode",
				s.prototype.isArrayNode = !0,
				c(s.prototype.type, u),
				s.prototype.forEach = function (e) {
					for (var t = 0; t < this.items.length; t++) {
						var r = this.items[t];
						e(r, "items[" + t + "]", this)
					}
				},
				s.prototype.map = function (e) {
					for (var t = [], r = 0; r < this.items.length; r++)
						t[r] = this._ifNode(e(this.items[r], "items[" + r + "]", this));
					return new s(t)
				},
				s.prototype.clone = function () {
					return new s(this.items.slice(0))
				},
				s.prototype._toString = function (e) {
					var t = this.items.map(function (t) {
							return t.toString(e)
						});
					return "[" + t.join(", ") + "]"
				},
				s.prototype.toHTML = function (e) {
					var t = this.items.map(function (t) {
							return t.toHTML(e)
						});
					return '<span class="math-parenthesis math-square-parenthesis">[</span>' + t.join('<span class="math-separator">,</span>') + '<span class="math-parenthesis math-square-parenthesis">]</span>'
				},
				s.prototype._toTex = function (e) {
					var t = "\\begin{bmatrix}";
					return this.items.forEach(function (r) {
						t += r.items ? r.items.map(function (t) {
							return t.toTex(e)
						}).join("&") : r.toTex(e),
						t += "\\\\"
					}),
					t += "\\end{bmatrix}"
				},
				s
			}
			var i = r(2).map,
			a = r(2).join;
			t.name = "ArrayNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t) {
			function r(e, t, r, n) {
				return function (t, r, n) {
					var i = t.filter(function (t) {
							return e.isSymbolNode(t) && !(t.name in r) && !(t.name in n)
						})[0];
					if (!i)
						throw new Error('No undefined variable found in inline expression "' + t + '"');
					var a = i.name,
					o = Object.create(n),
					s = t.compile();
					return function (e) {
						return o[a] = e,
						s.eval(o)
					}
				}
			}
			t.factory = r
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("isZero", {
						number: function (e) {
							return 0 === e
						},
						BigNumber: function (e) {
							return e.isZero()
						},
						Complex: function (e) {
							return 0 === e.re && 0 === e.im
						},
						Fraction: function (e) {
							return 1 === e.d && 0 === e.n
						},
						Unit: function (e) {
							return a(e.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			r(3);
			t.name = "isZero",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e) {
					return -e - 2
				};
				return e
			}
			t.name = "cs_flip",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e) {
				var t = e.DenseMatrix,
				r = function (r, n, i) {
					var u = r.size();
					if (2 !== u.length)
						throw new RangeError("Matrix must be two dimensional (size: " + a.format(u) + ")");
					var c = u[0],
					f = u[1];
					if (c !== f)
						throw new RangeError("Matrix must be square (size: " + a.format(u) + ")");
					var l,
					p,
					h;
					if (e.isMatrix(n)) {
						var m = n.size();
						if (1 === m.length) {
							if (m[0] !== c)
								throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");
							for (l = [], h = n._data, p = 0; p < c; p++)
								l[p] = [h[p]];
							return new t({
								data: l,
								size: [c, 1],
								datatype: n._datatype
							})
						}
						if (2 === m.length) {
							if (m[0] !== c || 1 !== m[1])
								throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");
							if (e.isDenseMatrix(n)) {
								if (i) {
									for (l = [], h = n._data, p = 0; p < c; p++)
										l[p] = [h[p][0]];
									return new t({
										data: l,
										size: [c, 1],
										datatype: n._datatype
									})
								}
								return n
							}
							for (l = [], p = 0; p < c; p++)
								l[p] = [0];
							for (var d = n._values, v = n._index, g = n._ptr, y = g[1], x = g[0]; x < y; x++)
								p = v[x], l[p][0] = d[x];
							return new t({
								data: l,
								size: [c, 1],
								datatype: n._datatype
							})
						}
						throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")
					}
					if (s(n)) {
						var w = o.size(n);
						if (1 === w.length) {
							if (w[0] !== c)
								throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");
							for (l = [], p = 0; p < c; p++)
								l[p] = [n[p]];
							return new t({
								data: l,
								size: [c, 1]
							})
						}
						if (2 === w.length) {
							if (w[0] !== c || 1 !== w[1])
								throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");
							for (l = [], p = 0; p < c; p++)
								l[p] = [n[p][0]];
							return new t({
								data: l,
								size: [c, 1]
							})
						}
						throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")
					}
				};
				return r
			}
			var i = r(25),
			a = i.string,
			o = i.array,
			s = Array.isArray;
			t.factory = n
		}, function (e, t, r) {
			function n(e) {
				for (var t = e.d, r = t[0] + "", n = 1; n < t.length; ++n) {
					for (var i = t[n] + "", a = 7 - i.length; a--; )
						i = "0" + i;
					r += i
				}
				var o;
				for (o = r.length - 1; "0" == r.charAt(o); --o);
				var s = e.e,
				u = r.slice(0, o + 1 || 1),
				c = u.length;
				if (s > 0)
					if (++s > c)
						for (s -= c; s--; u += "0");
					else
						s < c && (u = u.slice(0, s) + "." + u.slice(s));
				for (var f = [0], n = 0; n < u.length; ) {
					for (var l = f.length; l--; f[l] *= 10);
					f[0] += u.charAt(n++) << 0;
					for (var o = 0; o < f.length; ++o)
						f[o] > 1 && (null == f[o + 1] && (f[o + 1] = 0), f[o + 1] += f[o] >> 1, f[o] &= 1)
				}
				return f.reverse()
			}
			var i = r(86);
			e.exports = function (e, t, r) {
				var a,
				o,
				s = e.constructor,
				u =  + (e.s < 0),
				c =  + (t.s < 0);
				if (u) {
					a = n(i(e));
					for (var f = 0; f < a.length; ++f)
						a[f] ^= 1
				} else
					a = n(e);
				if (c) {
					o = n(i(t));
					for (var f = 0; f < o.length; ++f)
						o[f] ^= 1
				} else
					o = n(t);
				var l,
				p,
				h;
				a.length <= o.length ? (l = a, p = o, h = u) : (l = o, p = a, h = c);
				var m = l.length,
				d = p.length,
				v = 1 ^ r(u, c),
				g = new s(1 ^ v),
				y = new s(1),
				x = new s(2),
				w = s.precision;
				for (s.config({
						precision: 1e9
					}); m > 0; )
					r(l[--m], p[--d]) == v && (g = g.plus(y)), y = y.times(x);
				for (; d > 0; )
					r(h, p[--d]) == v && (g = g.plus(y)), y = y.times(x);
				return s.config({
					precision: w
				}),
				0 == v && (g.s = -g.s),
				g
			}
		}, function (e, t) {
			e.exports = function (e) {
				if (e.isFinite() && !e.isInteger())
					throw new Error("Integer expected in function bitNot");
				var t = e.constructor,
				r = t.precision;
				t.config({
					precision: 1e9
				});
				var e = e.plus(new t(1));
				return e.s = -e.s || null,
				t.config({
					precision: r
				}),
				e
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(11)),
				s = e.SparseMatrix,
				u = function (e, t, r) {
					var n = e._values,
					u = e._index,
					c = e._ptr,
					f = e._size,
					l = e._datatype,
					p = t._values,
					h = t._index,
					m = t._ptr,
					d = t._size,
					v = t._datatype;
					if (f.length !== d.length)
						throw new i(f.length, d.length);
					if (f[0] !== d[0] || f[1] !== d[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + f + ") must match Matrix B (" + d + ")");
					if (!n || !p)
						throw new Error("Cannot perform operation on Pattern Sparse Matrices");
					var g,
					y = f[0],
					x = f[1],
					w = o,
					b = 0,
					N = r;
					"string" == typeof l && l === v && (g = l, w = a.find(o, [g, g]), b = a.convert(0, g), N = a.find(r, [g, g]));
					for (var E, M, A, O, T = [], _ = [], S = [], C = new s({
								values: T,
								index: _,
								ptr: S,
								size: [y, x],
								datatype: g
							}), z = [], k = [], I = 0; I < x; I++) {
						S[I] = _.length;
						var B = I + 1;
						for (M = c[I], A = c[I + 1], E = M; E < A; E++)
							O = u[E], k[O] = B, z[O] = n[E], _.push(O);
						for (M = m[I], A = m[I + 1], E = M; E < A; E++)
							O = h[E], k[O] === B && (z[O] = N(z[O], p[E]));
						for (E = S[I]; E < _.length; ) {
							O = _[E];
							var P = z[O];
							w(P, b) ? _.splice(E, 1) : (T.push(P), E++)
						}
					}
					return S[x] = _.length,
					C
				};
				return u
			}
			var i = r(10);
			t.name = "algorithm08",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, t) {
					return -c(e, t)
				}
				function s(t, r, n) {
					if (!i(r) || r < 0)
						throw new Error("k must be a non-negative integer");
					if (e.isMatrix(t)) {
						var a = t.size();
						if (a.length > 1)
							throw new Error("Only one dimensional matrices supported");
						return u(t.valueOf(), r, n)
					}
					if (Array.isArray(t))
						return u(t, r, n)
				}
				function u(e, t, r) {
					if (t >= e.length)
						throw new Error("k out of bounds");
					for (var n = 0, i = e.length - 1; n < i; ) {
						for (var a = n, o = i, s = e[Math.floor(Math.random() * (i - n + 1)) + n]; a < o; )
							if (r(e[a], s) >= 0) {
								var u = e[o];
								e[o] = e[a],
								e[a] = u,
								--o
							} else ++a;
						r(e[a], s) > 0 && --a,
						t <= a ? i = a : n = a + 1
					}
					return e[t]
				}
				var c = n(r(49));
				return a("partitionSelect", {
					"Array | Matrix, number": function (e, t) {
						return s(e, t, c)
					},
					"Array | Matrix, number, string": function (e, t, r) {
						if ("asc" === r)
							return s(e, t, c);
						if ("desc" === r)
							return s(e, t, o);
						throw new Error('Compare string must be "asc" or "desc"')
					},
					"Array | Matrix, number, function": s
				})
			}
			var i = r(3).isInteger;
			t.name = "partitionSelect",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s, u) {
				function c(t) {
					if (!h.hasOwnProperty(t))
						throw new Error("Unknown distribution " + t);
					var r = Array.prototype.slice.call(arguments, 1),
					n = h[t].apply(this, r);
					return function (t) {
						var r = {
							random: function (t, r, n) {
								var s,
								c,
								l;
								if (arguments.length > 3)
									throw new i("random", arguments.length, 0, 3);
								if (1 === arguments.length ? a(t) ? s = t : l = t : 2 === arguments.length ? a(t) ? (s = t, l = r) : (c = t, l = r) : (s = t, c = r, l = n), void 0 !== c && !o(c) || void 0 !== l && !o(l))
									throw new TypeError("Invalid argument in function random");
								if (void 0 === l && (l = 1), void 0 === c && (c = 0), void 0 !== s) {
									var p = h(s.valueOf(), c, l, u);
									return e.isMatrix(s) ? f(p) : p
								}
								return u(c, l)
							},
							randomInt: s({
								"number | Array": function (t) {
									var r = 0;
									if (a(t)) {
										var n = t,
										i = 1,
										o = h(n.valueOf(), r, i, c);
										return e.isMatrix(n) ? f(o) : o
									}
									var i = t;
									return c(r, i)
								},
								"number | Array, number": function (t, r) {
									if (a(t)) {
										var n = t,
										i = r,
										o = 0,
										s = h(n.valueOf(), o, i, c);
										return e.isMatrix(n) ? f(s) : s
									}
									var o = t,
									i = r;
									return c(o, i)
								},
								"Array, number, number": function (e, t, r) {
									var n = h(e.valueOf(), t, r, c);
									return e && e.isMatrix === !0 ? f(n) : n
								}
							}),
							pickRandom: s({
								Array: function (e) {
									return n(e)
								},
								"Array, number | Array": function (e, t) {
									var r,
									i;
									if (Array.isArray(t))
										i = t;
									else {
										if (!o(t))
											throw new TypeError("Invalid argument in function pickRandom");
										r = t
									}
									return n(e, r, i)
								},
								"Array, number | Array, Array | number": function (e, t, r) {
									var i,
									a;
									if (Array.isArray(t) ? (a = t, i = r) : (a = r, i = t), !Array.isArray(a) || !o(i))
										throw new TypeError("Invalid argument in function pickRandom");
									return n(e, i, a)
								}
							})
						},
						n = function (t, r, n) {
							var i = "undefined" == typeof r;
							if (i && (r = 1), e.isMatrix(t))
								t = t.valueOf();
							else if (!Array.isArray(t))
								throw new TypeError("Unsupported type of value in function pickRandom");
							if (l.size(t).length > 1)
								throw new Error("Only one dimensional vectors supported");
							if ("undefined" != typeof n) {
								if (n.length != t.length)
									throw new Error("Weights must have the same length as possibles");
								for (var a = 0, s = 0, u = n.length; s < u; s++) {
									if (!o(n[s]) || n[s] < 0)
										throw new Error("Weights must be an array of positive numbers");
									a += n[s]
								}
							}
							var c = t.length;
							if (0 == c)
								return [];
							if (r >= c)
								return t;
							for (var f, h = []; h.length < r; ) {
								if ("undefined" == typeof n)
									f = t[Math.floor(p() * c)];
								else
									for (var m = p() * a, s = 0, u = t.length; s < u; s++)
										if (m -= n[s], m < 0) {
											f = t[s];
											break
										}
								h.indexOf(f) == -1 && h.push(f)
							}
							return i ? h[0] : h
						},
						u = function (e, r) {
							return e + t() * (r - e)
						},
						c = function (e, r) {
							return Math.floor(e + t() * (r - e))
						},
						h = function (e, t, r, n) {
							var i,
							a,
							o = [];
							if (e = e.slice(0), e.length > 1)
								for (var a = 0, i = e.shift(); a < i; a++)
									o.push(h(e, t, r, n));
							else
								for (var a = 0, i = e.shift(); a < i; a++)
									o.push(n(t, r));
							return o
						};
						return r
					}
					(n)
				}
				var f = n(r(0)),
				l = r(2),
				p = n(r(490)),
				h = {
					uniform: function () {
						return p
					},
					normal: function () {
						return function () {
							for (var e, t, r = -1; r < 0 || r > 1; )
								e = p(), t = p(), r = 1 / 6 * Math.pow(-2 * Math.log(e), .5) * Math.cos(2 * Math.PI * t) + .5;
							return r
						}
					}
				};
				return c.toTex = void 0,
				c
			}
			var i = r(50),
			a = r(46),
			o = r(3).isNumber;
			t.name = "distribution",
			t.factory = n
		}, function (e, t, r) {
			var n = r(153);
			t.mixin = function (e) {
				var t = new n;
				return e.on = t.on.bind(t),
				e.off = t.off.bind(t),
				e.once = t.once.bind(t),
				e.emit = t.emit.bind(t),
				e
			}
		}, function (e, t, r) {
			function n(e, t, r, n, s) {
				return i.prototype.type = "Complex",
				i.prototype.isComplex = !0,
				i.prototype.toJSON = function () {
					return {
						mathjs: "Complex",
						re: this.re,
						im: this.im
					}
				},
				i.prototype.toPolar = function () {
					return {
						r: this.abs(),
						phi: this.arg()
					}
				},
				i.prototype.format = function (e) {
					var t = "",
					r = this.im,
					n = this.re,
					i = a(this.re, e),
					s = a(this.im, e),
					u = o(e) ? e : e ? e.precision : null;
					if (null !== u) {
						var c = Math.pow(10, -u);
						Math.abs(n / r) < c && (n = 0),
						Math.abs(r / n) < c && (r = 0)
					}
					return t = 0 == r ? i : 0 == n ? 1 == r ? "i" : r == -1 ? "-i" : s + "i" : r < 0 ? r == -1 ? i + " - i" : i + " - " + s.substring(1) + "i" : 1 == r ? i + " + i" : i + " + " + s + "i"
				},
				i.fromPolar = function (t) {
					switch (arguments.length) {
					case 1:
						var r = arguments[0];
						if ("object" == typeof r)
							return i(r);
						throw new TypeError("Input has to be an object with r and phi keys.");
					case 2:
						var n = arguments[0],
						a = arguments[1];
						if (o(n)) {
							if (e.isUnit(a) && a.hasBase("ANGLE") && (a = a.toNumber("rad")), o(a))
								return new i({
									r: n,
									phi: a
								});
							throw new TypeError("Phi is not a number nor an angle unit.")
						}
						throw new TypeError("Radius r is not a number.");
					default:
						throw new SyntaxError("Wrong number of arguments in function fromPolar")
					}
				},
				i.prototype.valueOf = i.prototype.toString,
				i.fromJSON = function (e) {
					return new i(e)
				},
				i.EPSILON = t.epsilon,
				s.on("config", function (e, t) {
					e.epsilon !== t.epsilon && (i.EPSILON = e.epsilon)
				}),
				i.compare = function (e, t) {
					return e.re > t.re ? 1 : e.re < t.re ? -1 : e.im > t.im ? 1 : e.im < t.im ? -1 : 0
				},
				i
			}
			var i = r(168),
			a = r(3).format,
			o = r(3).isNumber;
			t.name = "Complex",
			t.path = "type",
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("fraction", {
						number: function (t) {
							if (!isFinite(t) || isNaN(t))
								throw new Error(t + " cannot be represented as a fraction");
							return new e.Fraction(t)
						},
						string: function (t) {
							return new e.Fraction(t)
						},
						"number, number": function (t, r) {
							return new e.Fraction(t, r)
						},
						BigNumber: function (t) {
							return new e.Fraction(t.toString())
						},
						Fraction: function (e) {
							return e
						},
						Object: function (t) {
							return new e.Fraction(t)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			t.name = "fraction",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function a(t, r, n) {
					if (!(this instanceof a))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (null != t)
						if (e.isBigNumber(t))
							t = t.toNumber();
						else if ("number" != typeof t)
							throw new TypeError("Parameter start must be a number");
					if (null != r)
						if (e.isBigNumber(r))
							r = r.toNumber();
						else if ("number" != typeof r)
							throw new TypeError("Parameter end must be a number");
					if (null != n)
						if (e.isBigNumber(n))
							n = n.toNumber();
						else if ("number" != typeof n)
							throw new TypeError("Parameter step must be a number");
					this.start = null != t ? parseFloat(t) : 0,
					this.end = null != r ? parseFloat(r) : 0,
					this.step = null != n ? parseFloat(n) : 1
				}
				return a.prototype.type = "Range",
				a.prototype.isRange = !0,
				a.parse = function (e) {
					if ("string" != typeof e)
						return null;
					var t = e.split(":"),
					r = t.map(function (e) {
							return parseFloat(e)
						}),
					n = r.some(function (e) {
							return isNaN(e)
						});
					if (n)
						return null;
					switch (r.length) {
					case 2:
						return new a(r[0], r[1]);
					case 3:
						return new a(r[0], r[2], r[1]);
					default:
						return null
					}
				},
				a.prototype.clone = function () {
					return new a(this.start, this.end, this.step)
				},
				a.prototype.size = function () {
					var e = 0,
					t = this.start,
					r = this.step,
					n = this.end,
					a = n - t;
					return i.sign(r) == i.sign(a) ? e = Math.ceil(a / r) : 0 == a && (e = 0),
					isNaN(e) && (e = 0),
					[e]
				},
				a.prototype.min = function () {
					var e = this.size()[0];
					return e > 0 ? this.step > 0 ? this.start : this.start + (e - 1) * this.step : void 0
				},
				a.prototype.max = function () {
					var e = this.size()[0];
					return e > 0 ? this.step > 0 ? this.start + (e - 1) * this.step : this.start : void 0
				},
				a.prototype.forEach = function (e) {
					var t = this.start,
					r = this.step,
					n = this.end,
					i = 0;
					if (r > 0)
						for (; t < n; )
							e(t, [i], this), t += r, i++;
					else if (r < 0)
						for (; t > n; )
							e(t, [i], this), t += r, i++
				},
				a.prototype.map = function (e) {
					var t = [];
					return this.forEach(function (r, n, i) {
						t[n[0]] = e(r, n, i)
					}),
					t
				},
				a.prototype.toArray = function () {
					var e = [];
					return this.forEach(function (t, r) {
						e[r[0]] = t
					}),
					e
				},
				a.prototype.valueOf = function () {
					return this.toArray()
				},
				a.prototype.format = function (e) {
					var t = i.format(this.start, e);
					return 1 != this.step && (t += ":" + i.format(this.step, e)),
					t += ":" + i.format(this.end, e)
				},
				a.prototype.toString = function () {
					return this.format()
				},
				a.prototype.toJSON = function () {
					return {
						mathjs: "Range",
						start: this.start,
						end: this.end,
						step: this.step
					}
				},
				a.fromJSON = function (e) {
					return new a(e.start, e.end, e.step)
				},
				a
			}
			var i = r(3);
			t.name = "Range",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function i(e) {
					if (!(this instanceof i))
						throw new SyntaxError("Constructor must be called with the new operator");
					this.entries = e || []
				}
				return i.prototype.type = "ResultSet",
				i.prototype.isResultSet = !0,
				i.prototype.valueOf = function () {
					return this.entries
				},
				i.prototype.toString = function () {
					return "[" + this.entries.join(", ") + "]"
				},
				i.prototype.toJSON = function () {
					return {
						mathjs: "ResultSet",
						entries: this.entries
					}
				},
				i.fromJSON = function (e) {
					return new i(e.entries)
				},
				i
			}
			t.name = "ResultSet",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			function n(e) {
				return e[0].precision
			}
			var i = r(32).memoize;
			t.e = i(function (e) {
					return new e(1).exp()
				}, n),
			t.phi = i(function (e) {
					return new e(1).plus(new e(5).sqrt()).div(2)
				}, n),
			t.pi = i(function (e) {
					return e.acos(-1)
				}, n),
			t.tau = i(function (e) {
					return t.pi(e).times(2)
				}, n)
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("fix", {
						number: function (e) {
							return e > 0 ? Math.floor(e) : Math.ceil(e)
						},
						Complex: function (t) {
							return new e.Complex(t.re > 0 ? Math.floor(t.re) : Math.ceil(t.re), t.im > 0 ? Math.floor(t.im) : Math.ceil(t.im))
						},
						BigNumber: function (e) {
							return e.isNegative() ? e.ceil() : e.floor()
						},
						Fraction: function (e) {
							return e.s < 0 ? e.ceil() : e.floor()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\mathrm{${name}}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "fix",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var c = n(r(0)),
				f = n(r(11)),
				l = n(r(38)),
				p = n(r(17)),
				h = n(r(16)),
				m = n(r(6)),
				d = o("round", {
						number: Math.round,
						"number, number": function (e, t) {
							if (!a(t))
								throw new TypeError(u);
							if (t < 0 || t > 15)
								throw new Error("Number of decimals in function round must be in te range of 0-15");
							return i(e, t)
						},
						Complex: function (e) {
							return e.round()
						},
						"Complex, number": function (e, t) {
							if (t % 1)
								throw new TypeError(u);
							return e.round(t)
						},
						"Complex, BigNumber": function (e, t) {
							if (!t.isInteger())
								throw new TypeError(u);
							var r = t.toNumber();
							return e.round(r)
						},
						"number, BigNumber": function (t, r) {
							if (!r.isInteger())
								throw new TypeError(u);
							return new e.BigNumber(t).toDecimalPlaces(r.toNumber())
						},
						BigNumber: function (e) {
							return e.toDecimalPlaces(0)
						},
						"BigNumber, BigNumber": function (e, t) {
							if (!t.isInteger())
								throw new TypeError(u);
							return e.toDecimalPlaces(t.toNumber())
						},
						Fraction: function (e) {
							return e.round()
						},
						"Fraction, number": function (e, t) {
							if (t % 1)
								throw new TypeError(u);
							return e.round(t)
						},
						"Array | Matrix": function (e) {
							return s(e, d, !0)
						},
						"Matrix, number | BigNumber": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = p(e, t, d, !1);
								break;
							default:
								r = m(e, t, d, !1)
							}
							return r
						},
						"number | Complex | BigNumber, Matrix": function (e, t) {
							if (!f(e, 0)) {
								var r;
								switch (t.storage()) {
								case "sparse":
									r = h(t, e, d, !0);
									break;
								default:
									r = m(t, e, d, !0)
								}
								return r
							}
							return l(t.size(), t.storage())
						},
						"Array, number | BigNumber": function (e, t) {
							return m(c(e), t, d, !1).valueOf()
						},
						"number | Complex | BigNumber, Array": function (e, t) {
							return m(c(t), e, d, !0).valueOf()
						}
					});
				return d.toTex = {
					1: "\\left\\lfloor${args[0]}\\right\\rceil",
					2: void 0
				},
				d
			}
			function i(e, t) {
				return parseFloat(o(e, t))
			}
			var a = r(3).isInteger,
			o = r(3).toFixed,
			s = r(1),
			u = "Number of decimals in function round must be an integer";
			t.name = "round",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("format", {
						any: i.format,
						"any, Object | function | number": i.format
					});
				return a.toTex = void 0,
				a
			}
			var i = r(9);
			t.name = "format",
			t.factory = n
		}, function (e, t, r) {
			function n(e, t, n, i) {
				var a = {};
				return a.bignumber = r(192),
				a.boolean = r(193),
				a.complex = r(194),
				a.createUnit = r(195),
				a.fraction = r(196),
				a.index = r(197),
				a.matrix = r(198),
				a.number = r(199),
				a.sparse = r(200),
				a.splitUnit = r(201),
				a.string = r(202),
				a.unit = r(203),
				a.e = r(100),
				a.E = r(100),
				a.false = r(204),
				a.i = r(205),
				a.Infinity = r(206),
				a.LN2 = r(207),
				a.LN10 = r(208),
				a.LOG2E = r(209),
				a.LOG10E = r(210),
				a.NaN = r(211),
				a.null = r(212),
				a.pi = r(101),
				a.PI = r(101),
				a.phi = r(213),
				a.SQRT1_2 = r(214),
				a.SQRT2 = r(215),
				a.tau = r(216),
				a.true = r(217),
				a.version = r(218),
				a.speedOfLight = {
					description: "Speed of light in vacuum",
					examples: ["speedOfLight"]
				},
				a.gravitationConstant = {
					description: "Newtonian constant of gravitation",
					examples: ["gravitationConstant"]
				},
				a.planckConstant = {
					description: "Planck constant",
					examples: ["planckConstant"]
				},
				a.reducedPlanckConstant = {
					description: "Reduced Planck constant",
					examples: ["reducedPlanckConstant"]
				},
				a.magneticConstant = {
					description: "Magnetic constant (vacuum permeability)",
					examples: ["magneticConstant"]
				},
				a.electricConstant = {
					description: "Electric constant (vacuum permeability)",
					examples: ["electricConstant"]
				},
				a.vacuumImpedance = {
					description: "Characteristic impedance of vacuum",
					examples: ["vacuumImpedance"]
				},
				a.coulomb = {
					description: "Coulomb's constant",
					examples: ["coulomb"]
				},
				a.elementaryCharge = {
					description: "Elementary charge",
					examples: ["elementaryCharge"]
				},
				a.bohrMagneton = {
					description: "Borh magneton",
					examples: ["bohrMagneton"]
				},
				a.conductanceQuantum = {
					description: "Conductance quantum",
					examples: ["conductanceQuantum"]
				},
				a.inverseConductanceQuantum = {
					description: "Inverse conductance quantum",
					examples: ["inverseConductanceQuantum"]
				},
				a.magneticFluxQuantum = {
					description: "Magnetic flux quantum",
					examples: ["magneticFluxQuantum"]
				},
				a.nuclearMagneton = {
					description: "Nuclear magneton",
					examples: ["nuclearMagneton"]
				},
				a.klitzing = {
					description: "Von Klitzing constant",
					examples: ["klitzing"]
				},
				a.bohrRadius = {
					description: "Borh radius",
					examples: ["bohrRadius"]
				},
				a.classicalElectronRadius = {
					description: "Classical electron radius",
					examples: ["classicalElectronRadius"]
				},
				a.electronMass = {
					description: "Electron mass",
					examples: ["electronMass"]
				},
				a.fermiCoupling = {
					description: "Fermi coupling constant",
					examples: ["fermiCoupling"]
				},
				a.fineStructure = {
					description: "Fine-structure constant",
					examples: ["fineStructure"]
				},
				a.hartreeEnergy = {
					description: "Hartree energy",
					examples: ["hartreeEnergy"]
				},
				a.protonMass = {
					description: "Proton mass",
					examples: ["protonMass"]
				},
				a.deuteronMass = {
					description: "Deuteron Mass",
					examples: ["deuteronMass"]
				},
				a.neutronMass = {
					description: "Neutron mass",
					examples: ["neutronMass"]
				},
				a.quantumOfCirculation = {
					description: "Quantum of circulation",
					examples: ["quantumOfCirculation"]
				},
				a.rydberg = {
					description: "Rydberg constant",
					examples: ["rydberg"]
				},
				a.thomsonCrossSection = {
					description: "Thomson cross section",
					examples: ["thomsonCrossSection"]
				},
				a.weakMixingAngle = {
					description: "Weak mixing angle",
					examples: ["weakMixingAngle"]
				},
				a.efimovFactor = {
					description: "Efimov factor",
					examples: ["efimovFactor"]
				},
				a.atomicMass = {
					description: "Atomic mass constant",
					examples: ["atomicMass"]
				},
				a.avogadro = {
					description: "Avogadro's number",
					examples: ["avogadro"]
				},
				a.boltzmann = {
					description: "Boltzmann constant",
					examples: ["boltzmann"]
				},
				a.faraday = {
					description: "Faraday constant",
					examples: ["faraday"]
				},
				a.firstRadiation = {
					description: "First radiation constant",
					examples: ["firstRadiation"]
				},
				a.loschmidt = {
					description: "Loschmidt constant at T=273.15 K and p=101.325 kPa",
					examples: ["loschmidt"]
				},
				a.gasConstant = {
					description: "Gas constant",
					examples: ["gasConstant"]
				},
				a.molarPlanckConstant = {
					description: "Molar Planck constant",
					examples: ["molarPlanckConstant"]
				},
				a.molarVolume = {
					description: "Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",
					examples: ["molarVolume"]
				},
				a.sackurTetrode = {
					description: "Sackur-Tetrode constant at T=1 K and p=101.325 kPa",
					examples: ["sackurTetrode"]
				},
				a.secondRadiation = {
					description: "Second radiation constant",
					examples: ["secondRadiation"]
				},
				a.stefanBoltzmann = {
					description: "Stefan-Boltzmann constant",
					examples: ["stefanBoltzmann"]
				},
				a.wienDisplacement = {
					description: "Wien displacement law constant",
					examples: ["wienDisplacement"]
				},
				a.molarMass = {
					description: "Molar mass constant",
					examples: ["molarMass"]
				},
				a.molarMassC12 = {
					description: "Molar mass constant of carbon-12",
					examples: ["molarMassC12"]
				},
				a.gravity = {
					description: "Standard acceleration of gravity (standard acceleration of free-fall on Earth)",
					examples: ["gravity"]
				},
				a.planckLength = {
					description: "Planck length",
					examples: ["planckLength"]
				},
				a.planckMass = {
					description: "Planck mass",
					examples: ["planckMass"]
				},
				a.planckTime = {
					description: "Planck time",
					examples: ["planckTime"]
				},
				a.planckCharge = {
					description: "Planck charge",
					examples: ["planckCharge"]
				},
				a.planckTemperature = {
					description: "Planck temperature",
					examples: ["planckTemperature"]
				},
				a.derivative = r(219),
				a.lsolve = r(220),
				a.lup = r(221),
				a.lusolve = r(222),
				a.simplify = r(223),
				a.slu = r(224),
				a.usolve = r(225),
				a.qr = r(226),
				a.abs = r(227),
				a.add = r(228),
				a.cbrt = r(229),
				a.ceil = r(230),
				a.cube = r(231),
				a.divide = r(232),
				a.dotDivide = r(233),
				a.dotMultiply = r(234),
				a.dotPow = r(235),
				a.exp = r(236),
				a.fix = r(237),
				a.floor = r(238),
				a.gcd = r(239),
				a.hypot = r(240),
				a.lcm = r(241),
				a.log = r(242),
				a.log10 = r(243),
				a.mod = r(244),
				a.multiply = r(245),
				a.norm = r(246),
				a.nthRoot = r(247),
				a.pow = r(248),
				a.round = r(249),
				a.sign = r(250),
				a.sqrt = r(251),
				a.square = r(252),
				a.subtract = r(253),
				a.unaryMinus = r(254),
				a.unaryPlus = r(255),
				a.xgcd = r(256),
				a.bitAnd = r(257),
				a.bitNot = r(258),
				a.bitOr = r(259),
				a.bitXor = r(260),
				a.leftShift = r(261),
				a.rightArithShift = r(262),
				a.rightLogShift = r(263),
				a.bellNumbers = r(264),
				a.catalan = r(265),
				a.composition = r(266),
				a.stirlingS2 = r(267),
				a.config = r(268),
				a.import = r(269),
				a.typed = r(270),
				a.arg = r(271),
				a.conj = r(272),
				a.re = r(273),
				a.im = r(274),
				a.eval = r(275),
				a.help = r(276),
				a.distance = r(277),
				a.intersect = r(278),
				a.and = r(279),
				a.not = r(280),
				a.or = r(281),
				a.xor = r(282),
				a.concat = r(283),
				a.cross = r(284),
				a.det = r(285),
				a.diag = r(286),
				a.dot = r(287),
				a.eye = r(288),
				a.filter = r(289),
				a.flatten = r(290),
				a.forEach = r(291),
				a.inv = r(292),
				a.kron = r(293),
				a.map = r(294),
				a.ones = r(295),
				a.partitionSelect = r(296),
				a.range = r(297),
				a.resize = r(298),
				a.reshape = r(299),
				a.size = r(300),
				a.sort = r(301),
				a.squeeze = r(302),
				a.subset = r(303),
				a.trace = r(304),
				a.transpose = r(305),
				a.zeros = r(306),
				a.combinations = r(307),
				a.factorial = r(308),
				a.gamma = r(309),
				a.kldivergence = r(310),
				a.multinomial = r(311),
				a.permutations = r(312),
				a.pickRandom = r(313),
				a.random = r(314),
				a.randomInt = r(315),
				a.compare = r(316),
				a.compareNatural = r(317),
				a.deepEqual = r(318),
				a.equal = r(319),
				a.larger = r(320),
				a.largerEq = r(321),
				a.smaller = r(322),
				a.smallerEq = r(323),
				a.unequal = r(324),
				a.setCartesian = r(325),
				a.setDifference = r(326),
				a.setDistinct = r(327),
				a.setIntersect = r(328),
				a.setIsSubset = r(329),
				a.setMultiplicity = r(330),
				a.setPowerset = r(331),
				a.setSize = r(332),
				a.setSymDifference = r(333),
				a.setUnion = r(334),
				a.erf = r(335),
				a.mad = r(336),
				a.max = r(337),
				a.mean = r(338),
				a.median = r(339),
				a.min = r(340),
				a.mode = r(341),
				a.prod = r(342),
				a.quantileSeq = r(343),
				a.std = r(344),
				a.sum = r(345),
				a.var = r(346),
				a.acos = r(347),
				a.acosh = r(348),
				a.acot = r(349),
				a.acoth = r(350),
				a.acsc = r(351),
				a.acsch = r(352),
				a.asec = r(353),
				a.asech = r(354),
				a.asin = r(355),
				a.asinh = r(356),
				a.atan = r(357),
				a.atanh = r(358),
				a.atan2 = r(359),
				a.cos = r(360),
				a.cosh = r(361),
				a.cot = r(362),
				a.coth = r(363),
				a.csc = r(364),
				a.csch = r(365),
				a.sec = r(366),
				a.sech = r(367),
				a.sin = r(368),
				a.sinh = r(369),
				a.tan = r(370),
				a.tanh = r(371),
				a.to = r(372),
				a.clone = r(373),
				a.format = r(374),
				a.isNaN = r(375),
				a.isInteger = r(376),
				a.isNegative = r(377),
				a.isNumeric = r(378),
				a.isPositive = r(379),
				a.isPrime = r(380),
				a.isZero = r(381),
				a.typeof = r(382),
				a
			}
			t.name = "docs",
			t.path = "expression",
			t.factory = n
		}, function (e, t) {
			e.exports = {
				name: "e",
				category: "Constants",
				syntax: ["e"],
				description: "Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",
				examples: ["e", "e ^ 2", "exp(2)", "log(e)"],
				seealso: ["exp"]
			}
		}, function (e, t) {
			e.exports = {
				name: "pi",
				category: "Constants",
				syntax: ["pi"],
				description: "The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",
				examples: ["pi", "sin(pi/2)"],
				seealso: ["tau"]
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					if (!(this instanceof s))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (!e.isNode(t))
						throw new TypeError('Node expected for parameter "object"');
					if (!e.isIndexNode(r))
						throw new TypeError('IndexNode expected for parameter "index"');
					this.object = t || null,
					this.index = r,
					Object.defineProperty(this, "name", {
						get: function () {
							return this.index ? this.index.isObjectProperty() ? this.index.getObjectProperty() : "" : this.object.name || ""
						}
						.bind(this),
						set: function () {
							throw new Error("Cannot assign a new name, name is read-only")
						}
					})
				}
				function u(e, t, r) {
					if (!(e instanceof s))
						throw new TypeError("No valid AccessorNode");
					t.access = h,
					t.getSafeProperty = a;
					var n = l(e.object, t, r),
					o = l(e.index, t, r);
					if (e.index.isObjectProperty()) {
						var u = i(e.index.getObjectProperty());
						return "getSafeProperty(" + n + ", " + u + ")"
					}
					return e.index.needsSize() ? "(function () {  var object = " + n + ";  var size = math.size(object).valueOf();  return access(object, " + o + ");})()" : "access(" + n + ", " + o + ")"
				}
				function c(t) {
					return !(e.isAccessorNode(t) || e.isArrayNode(t) || e.isConstantNode(t) || e.isFunctionNode(t) || e.isObjectNode(t) || e.isParenthesisNode(t) || e.isSymbolNode(t))
				}
				var f = n(r(7)).register,
				l = n(r(7)).compile,
				p = n(r(14)),
				h = (n(r(78)), n(r(103)));
				return s.prototype = new p,
				s.prototype.type = "AccessorNode",
				s.prototype.isAccessorNode = !0,
				f(s.prototype.type, u),
				s.prototype.forEach = function (e) {
					e(this.object, "object", this),
					e(this.index, "index", this)
				},
				s.prototype.map = function (e) {
					return new s(this._ifNode(e(this.object, "object", this)), this._ifNode(e(this.index, "index", this)))
				},
				s.prototype.clone = function () {
					return new s(this.object, this.index)
				},
				s.prototype._toString = function (e) {
					var t = this.object.toString(e);
					return c(this.object) && (t = "(" + t + ")"),
					t + this.index.toString(e)
				},
				s.prototype.toHTML = function (e) {
					var t = this.object.toHTML(e);
					return c(this.object) && (t = '<span class="math-parenthesis math-round-parenthesis">(</span>' + t + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
					t + this.index.toHTML(e)
				},
				s.prototype._toTex = function (e) {
					var t = this.object.toTex(e);
					return c(this.object) && (t = "\\left(" + t + "\\right)"),
					t + this.index.toTex(e)
				},
				s
			}
			var i = r(9).stringify,
			a = r(13).getSafeProperty;
			t.name = "AccessorNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(22));
				return function (e, t) {
					try {
						if (Array.isArray(e))
							return s(e, t);
						if (e && "function" == typeof e.subset)
							return e.subset(t);
						if ("string" == typeof e)
							return s(e, t);
						if ("object" == typeof e) {
							if (!t.isObjectProperty())
								throw new TypeError("Cannot apply a numeric index as object property");
							return a(e, t.getObjectProperty())
						}
						throw new TypeError("Cannot apply index: unsupported type of object")
					} catch (e) {
						throw i(e)
					}
				}
			}
			var i = r(41).transform,
			a = r(13).getSafeProperty;
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				function u(t, r, n) {
					if (!(this instanceof u))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (this.object = t, this.index = n ? r : null, this.value = n ? n : r, !e.isSymbolNode(t) && !e.isAccessorNode(t))
						throw new TypeError('SymbolNode or AccessorNode expected as "object"');
					if (e.isSymbolNode(t) && "end" === t.name)
						throw new Error('Cannot assign to symbol "end"');
					if (this.index && !e.isIndexNode(this.index))
						throw new TypeError('IndexNode expected as "index"');
					if (!e.isNode(this.value))
						throw new TypeError('Node expected as "value"');
					Object.defineProperty(this, "name", {
						get: function () {
							return this.index ? this.index.isObjectProperty() ? this.index.getObjectProperty() : "" : this.object.name || ""
						}
						.bind(this),
						set: function () {
							throw new Error("Cannot assign a new name, name is read-only")
						}
					})
				}
				function c(t, r, n) {
					if (!(t instanceof u))
						throw new TypeError("No valid AssignmentNode");
					r.assign = m,
					r.access = d,
					r.getSafeProperty = a,
					r.setSafeProperty = o;
					var s,
					c = p(t.object, r, n),
					f = t.index ? p(t.index, r, n) : null,
					l = p(t.value, r, n),
					h = i(t.object.name);
					if (t.index) {
						if (t.index.isObjectProperty()) {
							var v = i(t.index.getObjectProperty());
							return "setSafeProperty(" + c + ", " + v + ", " + l + ")"
						}
						if (e.isSymbolNode(t.object))
							return s = t.index.needsSize() ? "var size = math.size(object).valueOf();" : "", "(function () {  var object = " + c + ";  var value = " + l + ";  " + s + "  setSafeProperty(scope, " + h + ", assign(object, " + f + ", value));  return value;})()";
						s = t.index.needsSize() ? "var size = math.size(object).valueOf();" : "";
						var g = p(t.object.object, r, n);
						if (t.object.index.isObjectProperty()) {
							var y = i(t.object.index.getObjectProperty());
							return "(function () {  var parent = " + g + ";  var object = getSafeProperty(parent, " + y + ");  var value = " + l + ";" + s + "  setSafeProperty(parent, " + y + ", assign(object, " + f + ", value));  return value;})()"
						}
						var x = t.object.index.needsSize() ? "var size = math.size(parent).valueOf();" : "",
						w = p(t.object.index, r, n);
						return "(function () {  var parent = " + g + ";  " + x + "  var parentIndex = " + w + ";  var object = access(parent, parentIndex);  var value = " + l + ";  " + s + "  assign(parent, parentIndex, assign(object, " + f + ", value));  return value;})()"
					}
					if (!e.isSymbolNode(t.object))
						throw new TypeError("SymbolNode expected as object");
					return "setSafeProperty(scope, " + h + ", " + l + ")"
				}
				function f(e, t) {
					t || (t = "keep");
					var r = v.getPrecedence(e, t),
					n = v.getPrecedence(e.value, t);
					return "all" === t || null !== n && n <= r
				}
				var l = n(r(7)).register,
				p = n(r(7)).compile,
				h = n(r(14)),
				m = (n(r(80)), n(r(0)), n(r(385))),
				d = n(r(103)),
				v = (r(77), r(52));
				return u.prototype = new h,
				u.prototype.type = "AssignmentNode",
				u.prototype.isAssignmentNode = !0,
				l(u.prototype.type, c),
				u.prototype.forEach = function (e) {
					e(this.object, "object", this),
					this.index && e(this.index, "index", this),
					e(this.value, "value", this)
				},
				u.prototype.map = function (e) {
					var t = this._ifNode(e(this.object, "object", this)),
					r = this.index ? this._ifNode(e(this.index, "index", this)) : null,
					n = this._ifNode(e(this.value, "value", this));
					return new u(t, r, n)
				},
				u.prototype.clone = function () {
					return new u(this.object, this.index, this.value)
				},
				u.prototype._toString = function (e) {
					var t = this.object.toString(e),
					r = this.index ? this.index.toString(e) : "",
					n = this.value.toString(e);
					return f(this, e && e.parenthesis) && (n = "(" + n + ")"),
					t + r + " = " + n
				},
				u.prototype.toHTML = function (e) {
					var t = this.object.toHTML(e),
					r = this.index ? this.index.toHTML(e) : "",
					n = this.value.toHTML(e);
					return f(this, e && e.parenthesis) && (n = '<span class="math-paranthesis math-round-parenthesis">(</span>' + n + '<span class="math-paranthesis math-round-parenthesis">)</span>'),
					t + r + '<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>' + n
				},
				u.prototype._toTex = function (e) {
					var t = this.object.toTex(e),
					r = this.index ? this.index.toTex(e) : "",
					n = this.value.toTex(e);
					return f(this, e && e.parenthesis) && (n = "\\left(" + n + "\\right)"),
					t + r + ":=" + n
				},
				u
			}
			var i = (r(4), r(9).stringify),
			a = r(13).getSafeProperty,
			o = r(13).setSafeProperty;
			t.name = "AssignmentNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t) {
					if (!(this instanceof s))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (!Array.isArray(t))
						throw new Error("Array expected");
					this.blocks = t.map(function (t) {
							var r = t && t.node,
							n = !t || void 0 === t.visible || t.visible;
							if (!e.isNode(r))
								throw new TypeError('Property "node" must be a Node');
							if ("boolean" != typeof n)
								throw new TypeError('Property "visible" must be a boolean');
							return {
								node: r,
								visible: n
							}
						})
				}
				function u(e, t, r) {
					if (!(e instanceof s))
						throw new TypeError("No valid BlockNode");
					t.ResultSet = p;
					var n = i(e.blocks, function (e) {
							var n = f(e.node, t, r);
							return e.visible ? "results.push(" + n + ");" : n + ";"
						});
					return "(function () {var results = [];" + a(n, "") + "return new ResultSet(results);})()"
				}
				var c = n(r(7)).register,
				f = n(r(7)).compile,
				l = n(r(14)),
				p = n(r(94));
				return s.prototype = new l,
				s.prototype.type = "BlockNode",
				s.prototype.isBlockNode = !0,
				c(s.prototype.type, u),
				s.prototype.forEach = function (e) {
					for (var t = 0; t < this.blocks.length; t++)
						e(this.blocks[t].node, "blocks[" + t + "].node", this)
				},
				s.prototype.map = function (e) {
					for (var t = [], r = 0; r < this.blocks.length; r++) {
						var n = this.blocks[r],
						i = this._ifNode(e(n.node, "blocks[" + r + "].node", this));
						t[r] = {
							node: i,
							visible: n.visible
						}
					}
					return new s(t)
				},
				s.prototype.clone = function () {
					var e = this.blocks.map(function (e) {
							return {
								node: e.node,
								visible: e.visible
							}
						});
					return new s(e)
				},
				s.prototype._toString = function (e) {
					return this.blocks.map(function (t) {
						return t.node.toString(e) + (t.visible ? "" : ";")
					}).join("\n")
				},
				s.prototype.toHTML = function (e) {
					return this.blocks.map(function (t) {
						return t.node.toHTML(e) + (t.visible ? "" : '<span class="math-separator">;</span>')
					}).join('<span class="math-separator"><br /></span>')
				},
				s.prototype._toTex = function (e) {
					return this.blocks.map(function (t) {
						return t.node.toTex(e) + (t.visible ? "" : ";")
					}).join("\\;\\;\n")
				},
				s
			}
			var i = r(2).map,
			a = r(2).join;
			t.name = "BlockNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(t, r, n) {
					if (!(this instanceof o))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (!e.isNode(t))
						throw new TypeError("Parameter condition must be a Node");
					if (!e.isNode(r))
						throw new TypeError("Parameter trueExpr must be a Node");
					if (!e.isNode(n))
						throw new TypeError("Parameter falseExpr must be a Node");
					this.condition = t,
					this.trueExpr = r,
					this.falseExpr = n
				}
				function s(t, r, n) {
					if (!(t instanceof o))
						throw new TypeError("No valid ConditionalNode");
					return r.testCondition = function (t) {
						if ("number" == typeof t || "boolean" == typeof t || "string" == typeof t)
							return !!t;
						if (t) {
							if (e.isBigNumber(t))
								return !t.isZero();
							if (e.isComplex(t))
								return !(!t.re && !t.im);
							if (e.isUnit(t))
								return !!t.value
						}
						if (null === t || void 0 === t)
							return !1;
						throw new TypeError('Unsupported type of condition "' + r.math.typeof(t) + '"')
					},
					"testCondition(" + c(t.condition, r, n) + ") ? ( " + c(t.trueExpr, r, n) + ") : ( " + c(t.falseExpr, r, n) + ")"
				}
				var u = n(r(7)).register,
				c = n(r(7)).compile,
				f = n(r(14));
				return o.prototype = new f,
				o.prototype.type = "ConditionalNode",
				o.prototype.isConditionalNode = !0,
				u(o.prototype.type, s),
				o.prototype.forEach = function (e) {
					e(this.condition, "condition", this),
					e(this.trueExpr, "trueExpr", this),
					e(this.falseExpr, "falseExpr", this)
				},
				o.prototype.map = function (e) {
					return new o(this._ifNode(e(this.condition, "condition", this)), this._ifNode(e(this.trueExpr, "trueExpr", this)), this._ifNode(e(this.falseExpr, "falseExpr", this)))
				},
				o.prototype.clone = function () {
					return new o(this.condition, this.trueExpr, this.falseExpr)
				},
				o.prototype._toString = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = i.getPrecedence(this, t),
					n = this.condition.toString(e),
					a = i.getPrecedence(this.condition, t);
					("all" === t || "OperatorNode" === this.condition.type || null !== a && a <= r) && (n = "(" + n + ")");
					var o = this.trueExpr.toString(e),
					s = i.getPrecedence(this.trueExpr, t);
					("all" === t || "OperatorNode" === this.trueExpr.type || null !== s && s <= r) && (o = "(" + o + ")");
					var u = this.falseExpr.toString(e),
					c = i.getPrecedence(this.falseExpr, t);
					return ("all" === t || "OperatorNode" === this.falseExpr.type || null !== c && c <= r) && (u = "(" + u + ")"),
					n + " ? " + o + " : " + u
				},
				o.prototype.toHTML = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = i.getPrecedence(this, t),
					n = this.condition.toHTML(e),
					a = i.getPrecedence(this.condition, t);
					("all" === t || "OperatorNode" === this.condition.type || null !== a && a <= r) && (n = '<span class="math-parenthesis math-round-parenthesis">(</span>' + n + '<span class="math-parenthesis math-round-parenthesis">)</span>');
					var o = this.trueExpr.toHTML(e),
					s = i.getPrecedence(this.trueExpr, t);
					("all" === t || "OperatorNode" === this.trueExpr.type || null !== s && s <= r) && (o = '<span class="math-parenthesis math-round-parenthesis">(</span>' + o + '<span class="math-parenthesis math-round-parenthesis">)</span>');
					var u = this.falseExpr.toHTML(e),
					c = i.getPrecedence(this.falseExpr, t);
					return ("all" === t || "OperatorNode" === this.falseExpr.type || null !== c && c <= r) && (u = '<span class="math-parenthesis math-round-parenthesis">(</span>' + u + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
					n + '<span class="math-operator math-conditional-operator">?</span>' + o + '<span class="math-operator math-conditional-operator">:</span>' + u
				},
				o.prototype._toTex = function (e) {
					return "\\begin{cases} {" + this.trueExpr.toTex(e) + "}, &\\quad{\\text{if }\\;" + this.condition.toTex(e) + "}\\\\{" + this.falseExpr.toTex(e) + "}, &\\quad{\\text{otherwise}}\\end{cases}"
				},
				o
			}
			var i = (r(4), r(52));
			t.name = "ConditionalNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, h) {
				function m(t, r, n) {
					if (!(this instanceof m))
						throw new SyntaxError("Constructor must be called with the new operator");
					if ("string" != typeof t)
						throw new TypeError('String expected for parameter "name"');
					if (!Array.isArray(r))
						throw new TypeError('Array containing strings or objects expected for parameter "params"');
					if (!e.isNode(n))
						throw new TypeError('Node expected for parameter "expr"');
					if (t in i)
						throw new Error('Illegal function name, "' + t + '" is a reserved keyword');
					this.name = t,
					this.params = r.map(function (e) {
							return e && e.name || e
						}),
					this.types = r.map(function (e) {
							return e && e.type || "any"
						}),
					this.expr = n
				}
				function d(e, t, r) {
					if (!(e instanceof m))
						throw new TypeError("No valid FunctionAssignmentNode");
					t.typed = h,
					t.setSafeProperty = l;
					var n = Object.create(r),
					i = s(e.params, function (e) {
							return n[e] = p(n),
							n[e]
						}),
					o = y(e.expr, t, n),
					c = a(e.name);
					return "setSafeProperty(scope, " + c + ",   (function () {    var fn = typed(" + c + ", {      " + a(u(e.types, ",")) + ": function (" + u(i, ",") + ") {        return " + o + "      }    });    fn.syntax = " + a(e.name + "(" + u(e.params, ", ") + ")") + ";    return fn;  })())"
				}
				function v(e, t) {
					var r = f.getPrecedence(e, t),
					n = f.getPrecedence(e.expr, t);
					return "all" === t || null !== n && n <= r
				}
				var g = n(r(7)).register,
				y = n(r(7)).compile,
				x = n(r(14));
				return m.prototype = new x,
				m.prototype.type = "FunctionAssignmentNode",
				m.prototype.isFunctionAssignmentNode = !0,
				g(m.prototype.type, d),
				m.prototype.forEach = function (e) {
					e(this.expr, "expr", this)
				},
				m.prototype.map = function (e) {
					var t = this._ifNode(e(this.expr, "expr", this));
					return new m(this.name, this.params.slice(0), t)
				},
				m.prototype.clone = function () {
					return new m(this.name, this.params.slice(0), this.expr)
				},
				m.prototype._toString = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = this.expr.toString(e);
					return v(this, t) && (r = "(" + r + ")"),
					this.name + "(" + this.params.join(", ") + ") = " + r
				},
				m.prototype.toHTML = function (e) {
					for (var t = e && e.parenthesis ? e.parenthesis : "keep", r = [], n = 0; n < this.params.length; n++)
						r.push('<span class="math-symbol math-parameter">' + o(this.params[n]) + "</span>");
					var i = this.expr.toHTML(e);
					return v(this, t) && (i = '<span class="math-parenthesis math-round-parenthesis">(</span>' + i + '<span class="math-parenthesis math-round-parenthesis">)</span>'),
					'<span class="math-function">' + o(this.name) + '</span><span class="math-parenthesis math-round-parenthesis">(</span>' + r.join('<span class="math-separator">,</span>') + '<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>' + i
				},
				m.prototype._toTex = function (e) {
					var t = e && e.parenthesis ? e.parenthesis : "keep",
					r = this.expr.toTex(e);
					return v(this, t) && (r = "\\left(" + r + "\\right)"),
					"\\mathrm{" + this.name + "}\\left(" + this.params.map(c.toSymbol).join(",") + "\\right):=" + r
				},
				m
			}
			var i = r(77),
			a = r(9).stringify,
			o = r(9).escape,
			s = r(2).map,
			u = r(2).join,
			c = r(4),
			f = r(52),
			l = r(13).setSafeProperty,
			p = r(108);
			t.name = "FunctionAssignmentNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t) {
			function r(e) {
				return "arg" + Object.keys(e).length
			}
			e.exports = r
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, u) {
				function c(t) {
					if (!(this instanceof c))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (this.properties = t || {}, t && ("object" != typeof t || !Object.keys(t).every(function (r) {
								return e.isNode(t[r])
							})))
						throw new TypeError("Object containing Nodes expected")
				}
				function f(e, t, r) {
					if (!(e instanceof c))
						throw new TypeError("No valid ObjectNode");
					var n = [];
					for (var a in e.properties)
						if (s(e.properties, a)) {
							if (!o(e.properties, a))
								throw new Error('No access to property "' + a + '"');
							n.push(i(a) + ": " + p(e.properties[a], t, r))
						}
					return "{" + n.join(", ") + "}"
				}
				var l = n(r(7)).register,
				p = n(r(7)).compile,
				h = n(r(14));
				return c.prototype = new h,
				c.prototype.type = "ObjectNode",
				c.prototype.isObjectNode = !0,
				l(c.prototype.type, f),
				c.prototype.forEach = function (e) {
					for (var t in this.properties)
						this.properties.hasOwnProperty(t) && e(this.properties[t], "properties[" + i(t) + "]", this)
				},
				c.prototype.map = function (e) {
					var t = {};
					for (var r in this.properties)
						this.properties.hasOwnProperty(r) && (t[r] = this._ifNode(e(this.properties[r], "properties[" + i(r) + "]", this)));
					return new c(t)
				},
				c.prototype.clone = function () {
					var e = {};
					for (var t in this.properties)
						this.properties.hasOwnProperty(t) && (e[t] = this.properties[t]);
					return new c(e)
				},
				c.prototype._toString = function (e) {
					var t = [];
					for (var r in this.properties)
						this.properties.hasOwnProperty(r) && t.push(i(r) + ": " + this.properties[r].toString(e));
					return "{" + t.join(", ") + "}"
				},
				c.prototype.toHTML = function (e) {
					var t = [];
					for (var r in this.properties)
						this.properties.hasOwnProperty(r) && t.push('<span class="math-symbol math-property">' + a(r) + '</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>' + this.properties[r].toHTML(e));
					return '<span class="math-parenthesis math-curly-parenthesis">{</span>' + t.join('<span class="math-separator">,</span>') + '<span class="math-parenthesis math-curly-parenthesis">}</span>'
				},
				c.prototype._toTex = function (e) {
					var t = [];
					for (var r in this.properties)
						this.properties.hasOwnProperty(r) && t.push("\\mathbf{" + r + ":} & " + this.properties[r].toTex(e) + "\\\\");
					return "\\left\\{\\begin{array}{ll}" + t.join("\n") + "\\end{array}\\right\\}"
				},
				c
			}
			var i = r(9).stringify,
			a = r(9).escape,
			o = r(13).isSafeProperty,
			s = r(5).hasOwnProperty;
			t.name = "ObjectNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i, a) {
				var o = n(r(111));
				return i("parser", {
					"": function () {
						return new o(a)
					}
				})
			}
			t.name = "parser",
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o, s) {
				function u() {
					if (!(this instanceof u))
						throw new SyntaxError("Constructor must be called with the new operator");
					this.scope = {}
				}
				var c = n(r(39));
				return u.prototype.type = "Parser",
				u.prototype.isParser = !0,
				u.prototype.parse = function (e) {
					throw new Error("Parser.parse is deprecated. Use math.parse instead.")
				},
				u.prototype.compile = function (e) {
					throw new Error("Parser.compile is deprecated. Use math.compile instead.")
				},
				u.prototype.eval = function (e) {
					return c(e).compile().eval(this.scope)
				},
				u.prototype.get = function (e) {
					return e in this.scope ? a.getSafeProperty(this.scope, e) : void 0
				},
				u.prototype.getAll = function () {
					return i({}, this.scope)
				},
				u.prototype.set = function (e, t) {
					return a.setSafeProperty(this.scope, e, t)
				},
				u.prototype.remove = function (e) {
					delete this.scope[e]
				},
				u.prototype.clear = function () {
					for (var e in this.scope)
						this.scope.hasOwnProperty(e) && delete this.scope[e]
				},
				u
			}
			var i = r(5).extend,
			a = r(13);
			t.name = "Parser",
			t.path = "expression",
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				function u(e, t) {
					return f(e, t) ? e : t
				}
				function c(e) {
					var t = void 0;
					if (i(e, function (e) {
							(void 0 === t || f(e, t)) && (t = e)
						}), void 0 === t)
						throw new Error("Cannot calculate max of an empty array");
					return t
				}
				var f = n(r(34)),
				l = s("max", {
						"Array | Matrix": c,
						"Array | Matrix, number | BigNumber": function (e, t) {
							return a(e, t.valueOf(), u)
						},
						"...": function (e) {
							if (o(e))
								throw new TypeError("Scalar values expected in function max");
							return c(e)
						}
					});
				return l.toTex = "\\max\\left(${args}\\right)",
				l
			}
			var i = r(42),
			a = r(65),
			o = r(66);
			t.name = "max",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, u) {
				function c(e, t) {
					var r = o(e, t, l),
					n = Array.isArray(e) ? i(e) : e.size();
					return p(r, n[t])
				}
				function f(e) {
					var t = 0,
					r = 0;
					if (a(e, function (e) {
							t = l(t, e),
							r++
						}), 0 === r)
						throw new Error("Cannot calculate mean of an empty array");
					return p(t, r)
				}
				var l = n(r(18)),
				p = n(r(47)),
				h = u("mean", {
						"Array | Matrix": f,
						"Array | Matrix, number | BigNumber": c,
						"...": function (e) {
							if (s(e))
								throw new TypeError("Scalar values expected in function mean");
							return f(e)
						}
					});
				return h.toTex = void 0,
				h
			}
			var i = r(2).size,
			a = r(42),
			o = r(65),
			s = r(66);
			t.name = "mean",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, t, r) {
					var n,
					i,
					a,
					o,
					s;
					if (1 == t) {
						if (o = e[0][0], 0 == o)
							throw Error("Cannot calculate inverse, determinant is zero");
						return [[u(1, o)]]
					}
					if (2 == t) {
						var m = p(e);
						if (0 == m)
							throw Error("Cannot calculate inverse, determinant is zero");
						return [[u(e[1][1], m), u(l(e[0][1]), m)], [u(l(e[1][0]), m), u(e[0][0], m)]]
					}
					var d = e.concat();
					for (n = 0; n < t; n++)
						d[n] = d[n].concat();
					for (var v = h(t).valueOf(), g = 0; g < r; g++) {
						for (n = g; n < t && 0 == d[n][g]; )
							n++;
						if (n == t || 0 == d[n][g])
							throw Error("Cannot calculate inverse, determinant is zero");
						n != g && (s = d[g], d[g] = d[n], d[n] = s, s = v[g], v[g] = v[n], v[n] = s);
						var y = d[g],
						x = v[g];
						for (n = 0; n < t; n++) {
							var w = d[n],
							b = v[n];
							if (n != g) {
								if (0 != w[g]) {
									for (a = u(l(w[g]), y[g]), i = g; i < r; i++)
										w[i] = c(w[i], f(a, y[i]));
									for (i = 0; i < r; i++)
										b[i] = c(b[i], f(a, x[i]))
								}
							} else {
								for (a = y[g], i = g; i < r; i++)
									w[i] = u(w[i], a);
								for (i = 0; i < r; i++)
									b[i] = u(b[i], a)
							}
						}
					}
					return v
				}
				var s = n(r(0)),
				u = n(r(19)),
				c = n(r(20)),
				f = n(r(12)),
				l = n(r(37)),
				p = n(r(115)),
				h = n(r(61)),
				m = a("inv", {
						"Array | Matrix": function (t) {
							var r = e.isMatrix(t) ? t.size() : i.array.size(t);
							switch (r.length) {
							case 1:
								if (1 == r[0])
									return e.isMatrix(t) ? s([u(1, t.valueOf()[0])]) : [u(1, t[0])];
								throw new RangeError("Matrix must be square (size: " + i.string.format(r) + ")");
							case 2:
								var n = r[0],
								a = r[1];
								if (n == a)
									return e.isMatrix(t) ? s(o(t.valueOf(), n, a), t.storage()) : o(t, n, a);
								throw new RangeError("Matrix must be square (size: " + i.string.format(r) + ")");
							default:
								throw new RangeError("Matrix must be two dimensional (size: " + i.string.format(r) + ")")
							}
						},
						any: function (e) {
							return u(1, e)
						}
					});
				return m.toTex = {
					1: "\\left(${args[0]}\\right)^{-1}"
				},
				m
			}
			var i = r(25);
			t.name = "inv",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function s(e, t, r) {
					if (1 == t)
						return a.clone(e[0][0]);
					if (2 == t)
						return f(l(e[0][0], e[1][1]), l(e[1][0], e[0][1]));
					for (var n = function (e) {
						var t,
						r,
						n = new Array(e.length),
						i = 0;
						for (t = 1; t < e.length; t++)
							i = c(i, e[t][t]);
						for (t = 0; t < e.length; t++) {
							for (n[t] = new Array(e.length), n[t][t] = p(i), r = 0; r < t; r++)
								n[t][r] = 0;
							for (r = t + 1; r < e.length; r++)
								n[t][r] = e[t][r];
							t + 1 < e.length && (i = f(i, e[t + 1][t + 1]))
						}
						return n
					}, i = e, o = 0; o < t - 1; o++)
						i = l(n(i), e);
					return t % 2 == 0 ? p(i[0][0]) : i[0][0]
				}
				var u = n(r(0)),
				c = n(r(18)),
				f = n(r(21)),
				l = n(r(12)),
				p = n(r(37)),
				h = i("det", {
						any: function (e) {
							return a.clone(e)
						},
						"Array | Matrix": function (t) {
							var r;
							switch (e.isMatrix(t) ? r = t.size() : Array.isArray(t) ? (t = u(t), r = t.size()) : r = [], r.length) {
							case 0:
								return a.clone(t);
							case 1:
								if (1 == r[0])
									return a.clone(t.valueOf()[0]);
								throw new RangeError("Matrix must be square (size: " + o.format(r) + ")");
							case 2:
								var n = r[0],
								i = r[1];
								if (n == i)
									return s(t.clone().valueOf(), n, i);
								throw new RangeError("Matrix must be square (size: " + o.format(r) + ")");
							default:
								throw new RangeError("Matrix must be two dimensional (size: " + o.format(r) + ")")
							}
						}
					});
				return h.toTex = {
					1: "\\det\\left(${args[0]}\\right)"
				},
				h
			}
			var i = r(25),
			a = i.object,
			o = i.string;
			t.name = "det",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				function u(e, t) {
					return f(e, t) ? e : t
				}
				function c(e) {
					var t = void 0;
					if (i(e, function (e) {
							(void 0 === t || f(e, t)) && (t = e)
						}), void 0 === t)
						throw new Error("Cannot calculate min of an empty array");
					return t
				}
				var f = n(r(44)),
				l = s("min", {
						"Array | Matrix": c,
						"Array | Matrix, number | BigNumber": function (e, t) {
							return a(e, t.valueOf(), u)
						},
						"...": function (e) {
							if (o(e))
								throw new TypeError("Scalar values expected in function min");
							return c(e)
						}
					});
				return l.toTex = "\\min\\left(${args}\\right)",
				l
			}
			var i = r(42),
			a = r(65),
			o = r(66);
			t.name = "min",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e) {
					return "Array" === t.matrix ? e : p(e)
				}
				function o(r, n) {
					var i = l(r);
					if (!i)
						throw new SyntaxError('String "' + r + '" is no valid range');
					var o;
					return "BigNumber" === t.number ? (o = n ? f : c, a(o(new e.BigNumber(i.start), new e.BigNumber(i.end), new e.BigNumber(i.step)))) : (o = n ? u : s, a(o(i.start, i.end, i.step)))
				}
				function s(e, t, r) {
					var n = [],
					i = e;
					if (r > 0)
						for (; i < t; )
							n.push(i), i += r;
					else if (r < 0)
						for (; i > t; )
							n.push(i), i += r;
					return n
				}
				function u(e, t, r) {
					var n = [],
					i = e;
					if (r > 0)
						for (; i <= t; )
							n.push(i), i += r;
					else if (r < 0)
						for (; i >= t; )
							n.push(i), i += r;
					return n
				}
				function c(e, t, r) {
					var n = [],
					i = e;
					if (r.gt(h))
						for (; i.lt(t); )
							n.push(i), i = i.plus(r);
					else if (r.lt(h))
						for (; i.gt(t); )
							n.push(i), i = i.plus(r);
					return n
				}
				function f(e, t, r) {
					var n = [],
					i = e;
					if (r.gt(h))
						for (; i.lte(t); )
							n.push(i), i = i.plus(r);
					else if (r.lt(h))
						for (; i.gte(t); )
							n.push(i), i = i.plus(r);
					return n
				}
				function l(e) {
					var t = e.split(":"),
					r = t.map(function (e) {
							return Number(e)
						}),
					n = r.some(function (e) {
							return isNaN(e)
						});
					if (n)
						return null;
					switch (r.length) {
					case 2:
						return {
							start: r[0],
							end: r[1],
							step: 1
						};
					case 3:
						return {
							start: r[0],
							end: r[2],
							step: r[1]
						};
					default:
						return null
					}
				}
				var p = n(r(0)),
				h = new e.BigNumber(0),
				m = new e.BigNumber(1),
				d = i("range", {
						string: o,
						"string, boolean": o,
						"number, number": function (e, t) {
							return a(s(e, t, 1))
						},
						"number, number, number": function (e, t, r) {
							return a(s(e, t, r))
						},
						"number, number, boolean": function (e, t, r) {
							return a(r ? u(e, t, 1) : s(e, t, 1))
						},
						"number, number, number, boolean": function (e, t, r, n) {
							return a(n ? u(e, t, r) : s(e, t, r))
						},
						"BigNumber, BigNumber": function (e, t) {
							return a(c(e, t, m))
						},
						"BigNumber, BigNumber, BigNumber": function (e, t, r) {
							return a(c(e, t, r))
						},
						"BigNumber, BigNumber, boolean": function (e, t, r) {
							return a(r ? f(e, t, m) : c(e, t, m))
						},
						"BigNumber, BigNumber, BigNumber, boolean": function (e, t, r, n) {
							return a(n ? f(e, t, r) : c(e, t, r))
						}
					});
				return d.toTex = void 0,
				d
			}
			t.name = "range",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i, a) {
				function o(t) {
					return t.transform(function (t, r, n) {
						return e.isParenthesisNode(t) ? t.content : t
					})
				}
				function s(e) {
					for (var t = [], r = 0; r < e.length; r++) {
						var n,
						i = e[r],
						a = typeof i;
						switch (a) {
						case "string":
							var s = i.split("->");
							if (2 !== s.length)
								throw SyntaxError("Could not parse rule: " + i);
							i = {
								l: s[0],
								r: s[1]
							};
						case "object":
							if (n = {
									l: o(d(i.l)),
									r: o(d(i.r))
								}, i.context && (n.evaluate = i.context), i.evaluate && (n.evaluate = d(i.evaluate)), n.l.isOperatorNode && O(n.l)) {
								var c = C(n.l),
								f = u();
								n.expanded = {},
								n.expanded.l = c([n.l.clone(), f]),
								T(n.expanded.l),
								_(n.expanded.l),
								n.expanded.r = c([n.r, f])
							}
							break;
						case "function":
							n = i;
							break;
						default:
							throw TypeError("Unsupported type of rule: " + a)
						}
						t.push(n)
					}
					return t
				}
				function u() {
					return new w("_p" + I++)
				}
				function c(e, t) {
					var r,
					n,
					i = [],
					a = C(e);
					if (A(e, t))
						for (var o = 0; o < e.args.length; o++)
							n = e.args.slice(0), n.splice(o, 1), r = 1 === n.length ? n[0] : a(n), i.push(a([e.args[o], r]));
					else
						n = e.args.slice(1), r = 1 === n.length ? n[0] : a(n), i.push(a([e.args[0], r]));
					return i
				}
				function f(e, t) {
					var r = {
						placeholders: {}
					};
					if (!e.placeholders && !t.placeholders)
						return r;
					if (!e.placeholders)
						return t;
					if (!t.placeholders)
						return e;
					for (var n in e.placeholders)
						if (r.placeholders[n] = e.placeholders[n], t.placeholders.hasOwnProperty(n) && !m(e.placeholders[n], t.placeholders[n]))
							return null;
					for (var n in t.placeholders)
						r.placeholders[n] = t.placeholders[n];
					return r
				}
				function l(e, t) {
					var r = [];
					if (0 === e.length || 0 === t.length)
						return r;
					for (var n, i = 0; i < e.length; i++)
						for (var a = 0; a < t.length; a++)
							n = f(e[i], t[a]), n && r.push(n);
					return r
				}
				function p(e) {
					if (0 === e.length)
						return e;
					for (var t = e.reduce(l), r = [], n = {}, i = 0; i < t.length; i++) {
						var a = JSON.stringify(t[i]);
						n[a] || (n[a] = !0, r.push(t[i]))
					}
					return r
				}
				function h(t, r, n) {
					var i = [{
							placeholders: {}
						}
					];
					if (t instanceof y && r instanceof y || t instanceof g && r instanceof g) {
						if (t instanceof y) {
							if (t.op !== r.op || t.fn !== r.fn)
								return []
						} else if (t instanceof g && t.name !== r.name)
							return [];
						if ((1 !== r.args.length || 1 !== t.args.length) && O(r) && !n) {
							if (r.args.length >= 2 && 2 === t.args.length) {
								for (var o = c(r, t.context), s = [], u = 0; u < o.length; u++) {
									var f = h(t, o[u], !0);
									s = s.concat(f)
								}
								return s
							}
							if (t.args.length > 2)
								throw Error("Unexpected non-binary associative function: " + t.toString());
							return []
						}
						for (var l = [], u = 0; u < t.args.length; u++) {
							var m = h(t.args[u], r.args[u]);
							if (0 === m.length)
								return [];
							l.push(m)
						}
						i = p(l)
					} else if (t instanceof w) {
						if (0 === t.name.length)
							throw new Error("Symbol in rule has 0 length...!?");
						if (a.hasOwnProperty(t.name)) {
							if (!k[t.name])
								throw new Error("Built in constant: " + t.name + " is not supported by simplify.");
							if (t.name !== r.name)
								return []
						} else if ("n" === t.name[0] || "_p" === t.name.substring(0, 2))
							i[0].placeholders[t.name] = r;
						else if ("v" === t.name[0]) {
							if (e.isConstantNode(r))
								return [];
							i[0].placeholders[t.name] = r
						} else {
							if ("c" !== t.name[0])
								throw new Error("Invalid symbol in rule: " + t.name);
							if (!(r instanceof v))
								return [];
							i[0].placeholders[t.name] = r
						}
					} else {
						if (!(t instanceof v))
							return [];
						if (t.value !== r.value)
							return []
					}
					return i
				}
				function m(e, t) {
					if (e instanceof v && t instanceof v) {
						if (e.value !== t.value)
							return !1
					} else if (e instanceof w && t instanceof w) {
						if (e.name !== t.name)
							return !1
					} else {
						if (!(e instanceof y && t instanceof y || e instanceof g && t instanceof g))
							return !1;
						if (e instanceof y) {
							if (e.op !== t.op || e.fn !== t.fn)
								return !1
						} else if (e instanceof g && e.name !== t.name)
							return !1;
						if (e.args.length !== t.args.length)
							return !1;
						for (var r = 0; r < e.args.length; r++)
							if (!m(e.args[r], t.args[r]))
								return !1
					}
					return !0
				}
				var d = n(r(39)),
				v = n(r(53)),
				g = n(r(54)),
				y = n(r(62)),
				x = n(r(63)),
				w = n(r(40)),
				b = (n(r(14)), n(r(406))),
				N = n(r(407)),
				E = n(r(408)),
				M = n(r(119)),
				A = M.isCommutative,
				O = M.isAssociative,
				T = M.flatten,
				_ = M.unflattenr,
				S = M.unflattenl,
				C = M.createMakeNodeFunction,
				z = i("simplify", {
						string: function (e) {
							return z(d(e), z.rules, {})
						},
						"string, Object": function (e, t) {
							return z(d(e), z.rules, t)
						},
						"string, Array": function (e, t) {
							return z(d(e), t, {})
						},
						"string, Array, Object": function (e, t, r) {
							return z(d(e), t, r)
						},
						"Node, Object": function (e, t) {
							return z(e, z.rules, t)
						},
						Node: function (e) {
							return z(e, z.rules, {})
						},
						"Node, Array": function (e, t) {
							return z(e, t, {})
						},
						"Node, Array, Object": function (e, t, r) {
							t = s(t);
							for (var n = E(e, r), n = o(n), i = {}, a = n.toString({
										parenthesis: "all"
									}); !i[a]; ) {
								i[a] = !0,
								I = 0;
								for (var u = 0; u < t.length; u++)
									"function" == typeof t[u] ? n = t[u](n) : (T(n), n = B(n, t[u])), S(n);
								a = n.toString({
										parenthesis: "all"
									})
							}
							return n
						}
					});
				z.simplifyCore = N,
				z.resolve = E;
				var k = {
					true: !0,
					false: !0,
					e: !0,
					i: !0,
					Infinity: !0,
					LN2: !0,
					LN10: !0,
					LOG2E: !0,
					LOG10E: !0,
					NaN: !0,
					phi: !0,
					pi: !0,
					SQRT1_2: !0,
					SQRT2: !0,
					tau: !0
				};
				z.rules = [N, {
						l: "log(e)",
						r: "1"
					}, {
						l: "n-n1",
						r: "n+-n1"
					}, {
						l: "-(c*v)",
						r: "(-c) * v"
					}, {
						l: "-v",
						r: "(-1) * v"
					}, {
						l: "n/n1^n2",
						r: "n*n1^-n2"
					}, {
						l: "n/n1",
						r: "n*n1^-1"
					}, {
						l: "n*n",
						r: "n^2"
					}, {
						l: "n * n^n1",
						r: "n^(n1+1)"
					}, {
						l: "n^n1 * n^n2",
						r: "n^(n1+n2)"
					}, {
						l: "n+n",
						r: "2*n"
					}, {
						l: "n+-n",
						r: "0"
					}, {
						l: "n1*n2 + n2",
						r: "(n1+1)*n2"
					}, {
						l: "n1*n3 + n2*n3",
						r: "(n1+n2)*n3"
					}, b, {
						l: "(-n)*n1",
						r: "-(n*n1)"
					}, {
						l: "c+v",
						r: "v+c",
						context: {
							add: {
								commutative: !1
							}
						}
					}, {
						l: "v*c",
						r: "c*v",
						context: {
							multiply: {
								commutative: !1
							}
						}
					}, {
						l: "n+-n1",
						r: "n-n1"
					}, {
						l: "n*(n1^-1)",
						r: "n/n1"
					}, {
						l: "n*n1^-n2",
						r: "n/n1^n2"
					}, {
						l: "n1^-1",
						r: "1/n1"
					}, {
						l: "n*(n1/n2)",
						r: "(n*n1)/n2"
					}, {
						l: "n-(n1+n2)",
						r: "n-n1-n2"
					}, {
						l: "1*n",
						r: "n"
					}
				];
				var I = 0,
				B = i("applyRule", {
						"Node, Object": function (e, t) {
							var r = e;
							if (r instanceof y || r instanceof g) {
								if (r.args)
									for (var n = 0; n < r.args.length; n++)
										r.args[n] = B(r.args[n], t)
							} else
								r instanceof x && r.content && (r.content = B(r.content, t));
							var i = t.r,
							a = h(t.l, r)[0];
							return !a && t.expanded && (i = t.expanded.r, a = h(t.expanded.l, r)[0]),
							a && (r = i.clone(), r.traverse(function (e, t, r) {
									e.isSymbolNode && (e.transformThisNode = !0)
								}), r = r.transform(function (e, t, r) {
										if (e.transformThisNode && a.placeholders.hasOwnProperty(e.name)) {
											var n = a.placeholders[e.name].clone();
											return n
										}
										return e
									})),
							r
						}
					});
				return z
			}
			t.math = !0,
			t.name = "simplify",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, i) {
				function a(e, t) {
					if (!e.args || e.args.length <= 1)
						return !0;
					var r = e.fn.toString();
					return t && t.hasOwnProperty(r) && t[r].hasOwnProperty("commutative") ? t[r].commutative : d[r] || !1
				}
				function o(e, t) {
					if (!e.args || e.args.length <= 1)
						return !0;
					var r = e.fn.toString();
					return t && t.hasOwnProperty(r) && t[r].hasOwnProperty("associative") ? t[r].associative : v[r] || !1
				}
				function s(e) {
					if (!e.args || 0 === e.args.length)
						return e;
					e.args = u(e);
					for (var t = 0; t < e.args.length; t++)
						s(e.args[t])
				}
				function u(t) {
					var r,
					n = [],
					i = function (t) {
						for (var a = 0; a < t.args.length; a++) {
							var o = t.args[a];
							e.isOperatorNode(o) && r === o.op ? i(o) : n.push(o)
						}
					};
					return e.isOperatorNode(t) && o(t) ? (r = t.op, i(t), n) : t.args
				}
				function c(e) {
					if (e.args && 0 !== e.args.length) {
						for (var t = l(e), r = e.args.length, n = 0; n < r; n++)
							c(e.args[n]);
						if (r > 2 && o(e)) {
							for (var i = e.args.pop(); e.args.length > 0; )
								i = t([e.args.pop(), i]);
							e.args = i.args
						}
					}
				}
				function f(e) {
					if (e.args && 0 !== e.args.length) {
						for (var t = l(e), r = e.args.length, n = 0; n < r; n++)
							f(e.args[n]);
						if (r > 2 && o(e)) {
							for (var i = e.args.shift(); e.args.length > 0; )
								i = t([i, e.args.shift()]);
							e.args = i.args
						}
					}
				}
				function l(t) {
					return e.isOperatorNode(t) ? function (e) {
						try {
							return new h(t.op, t.fn, e)
						} catch (e) {
							return console.error(e),
							[]
						}
					}
					 : function (e) {
						return new p(new m(t.name), e)
					}
				}
				var p = i.expression.node.FunctionNode,
				h = i.expression.node.OperatorNode,
				m = i.expression.node.SymbolNode,
				d = {
					add: !0,
					multiply: !0
				},
				v = {
					add: !0,
					multiply: !0
				};
				return {
					createMakeNodeFunction: l,
					isCommutative: a,
					isAssociative: o,
					flatten: s,
					allChildren: u,
					unflattenr: c,
					unflattenl: f
				}
			}
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("clone", {
						any: i.clone
					});
				return a.toTex = void 0,
				a
			}
			var i = r(5);
			t.name = "clone",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(15)),
				c = n(r(26)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = r(4),
				m = o("unequal", {
						"any, any": function (e, t) {
							return null === e ? null !== t : null === t ? null !== e : void 0 === e ? void 0 !== t : void 0 === t ? void 0 !== e : d(e, t)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, d);
									break;
								default:
									r = u(t, e, d, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, d, !1);
									break;
								default:
									r = l(e, t, d)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, s(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, d, !1);
								break;
							default:
								r = p(e, t, d, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, d, !0);
								break;
							default:
								r = p(t, e, d, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(s(e), t, d, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(s(t), e, d, !0).valueOf()
						}
					}),
				d = o("_unequal", {
						"boolean, boolean": function (e, t) {
							return e !== t
						},
						"number, number": function (e, r) {
							return !i(e, r, t.epsilon)
						},
						"BigNumber, BigNumber": function (e, r) {
							return !a(e, r, t.epsilon)
						},
						"Fraction, Fraction": function (e, t) {
							return !e.equals(t)
						},
						"Complex, Complex": function (e, t) {
							return !e.equals(t)
						},
						"Unit, Unit": function (e, t) {
							if (!e.equalBase(t))
								throw new Error("Cannot compare units with different base");
							return m(e.value, t.value)
						},
						"string, string": function (e, t) {
							return e !== t
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + h.operators.unequal + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).nearlyEqual,
			a = r(35);
			t.name = "unequal",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("sign", {
						number: i.sign,
						Complex: function (e) {
							return e.sign()
						},
						BigNumber: function (t) {
							return new e.BigNumber(t.cmp(0))
						},
						Fraction: function (t) {
							return new e.Fraction(t.s, 1)
						},
						"Array | Matrix": function (e) {
							return a(e, o, !0)
						},
						Unit: function (e) {
							return o(e.value)
						}
					});
				return o.toTex = {
					1: "\\mathrm{${name}}\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(3),
			a = r(1);
			t.name = "sign",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("conj", {
						number: function (e) {
							return e
						},
						BigNumber: function (e) {
							return e
						},
						Complex: function (e) {
							return e.conjugate()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\left(${args[0]}\\right)^*"
				},
				a
			}
			var i = r(1);
			t.name = "conj",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var o = n(r(0)),
				s = n(r(29)),
				u = n(r(20)),
				c = n(r(19)),
				f = n(r(23)),
				l = n(r(21)),
				p = n(r(34)),
				h = n(r(11)),
				m = n(r(37)),
				d = e.SparseMatrix,
				v = e.DenseMatrix,
				g = e.Spa,
				y = i("lup", {
						DenseMatrix: function (e) {
							return x(e)
						},
						SparseMatrix: function (e) {
							return w(e)
						},
						Array: function (e) {
							var t = o(e),
							r = x(t);
							return {
								L: r.L.valueOf(),
								U: r.U.valueOf(),
								p: r.p
							}
						}
					}),
				x = function (e) {
					var t,
					r,
					n,
					i = e._size[0],
					o = e._size[1],
					m = Math.min(i, o),
					d = a.clone(e._data),
					g = [],
					y = [i, m],
					x = [],
					w = [m, o],
					b = [];
					for (t = 0; t < i; t++)
						b[t] = t;
					for (r = 0; r < o; r++) {
						if (r > 0)
							for (t = 0; t < i; t++) {
								var N = Math.min(t, r),
								E = 0;
								for (n = 0; n < N; n++)
									E = u(E, f(d[t][n], d[n][r]));
								d[t][r] = l(d[t][r], E)
							}
						var M = r,
						A = 0,
						O = 0;
						for (t = r; t < i; t++) {
							var T = d[t][r],
							_ = s(T);
							p(_, A) && (M = t, A = _, O = T)
						}
						if (r !== M && (b[r] = [b[M], b[M] = b[r]][0], v._swapRows(r, M, d)), r < i)
							for (t = r + 1; t < i; t++) {
								var S = d[t][r];
								h(S, 0) || (d[t][r] = c(d[t][r], O))
							}
					}
					for (r = 0; r < o; r++)
						for (t = 0; t < i; t++)
							0 === r && (t < o && (x[t] = []), g[t] = []), t < r ? (t < o && (x[t][r] = d[t][r]), r < i && (g[t][r] = 0)) : t !== r ? (t < o && (x[t][r] = 0), r < i && (g[t][r] = d[t][r])) : (t < o && (x[t][r] = d[t][r]), r < i && (g[t][r] = 1));
					var C = new v({
							data: g,
							size: y
						}),
					z = new v({
							data: x,
							size: w
						}),
					k = [];
					for (t = 0, m = b.length; t < m; t++)
						k[b[t]] = t;
					return {
						L: C,
						U: z,
						p: k,
						toString: function () {
							return "L: " + this.L.toString() + "\nU: " + this.U.toString() + "\nP: " + this.p
						}
					}
				},
				w = function (e) {
					var t,
					r,
					n,
					i = e._size[0],
					a = e._size[1],
					o = Math.min(i, a),
					u = e._values,
					l = e._index,
					v = e._ptr,
					y = [],
					x = [],
					w = [],
					b = [i, o],
					N = [],
					E = [],
					M = [],
					A = [o, a],
					O = [],
					T = [];
					for (t = 0; t < i; t++)
						O[t] = t, T[t] = t;
					var _ = function (e, t) {
						var r = T[e],
						n = T[t];
						O[r] = t,
						O[n] = e,
						T[e] = n,
						T[t] = r
					};
					for (r = 0; r < a; r++) {
						var S = new g;
						r < i && (w.push(y.length), y.push(1), x.push(r)),
						M.push(N.length);
						var C = v[r],
						z = v[r + 1];
						for (n = C; n < z; n++)
							t = l[n], S.set(O[t], u[n]);
						r > 0 && S.forEach(0, r - 1, function (e, t) {
							d._forEachRow(e, y, x, w, function (r, n) {
								r > e && S.accumulate(r, m(f(n, t)))
							})
						});
						var k = r,
						I = S.get(r),
						B = s(I);
						S.forEach(r + 1, i - 1, function (e, t) {
							var r = s(t);
							p(r, B) && (k = e, B = r, I = t)
						}),
						r !== k && (d._swapRows(r, k, b[1], y, x, w), d._swapRows(r, k, A[1], N, E, M), S.swap(r, k), _(r, k)),
						S.forEach(0, i - 1, function (e, t) {
							e <= r ? (N.push(t), E.push(e)) : (t = c(t, I), h(t, 0) || (y.push(t), x.push(e)))
						})
					}
					return M.push(N.length),
					w.push(y.length), {
						L: new d({
							values: y,
							index: x,
							ptr: w,
							size: b
						}),
						U: new d({
							values: N,
							index: E,
							ptr: M,
							size: A
						}),
						p: O,
						toString: function () {
							return "L: " + this.L.toString() + "\nU: " + this.U.toString() + "\nP: " + this.p
						}
					}
				};
				return y
			}
			var i = r(25),
			a = i.object;
			t.name = "lup",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(410)),
				s = n(r(418)),
				u = i("slu", {
						"SparseMatrix, number, number": function (e, t, r) {
							if (!o(t) || t < 0 || t > 3)
								throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");
							if (r < 0 || r > 1)
								throw new Error("Partial pivoting threshold must be a number from 0 to 1");
							var n = a(t, e, !1),
							i = s(e, n, r);
							return {
								L: i.L,
								U: i.U,
								p: i.pinv,
								q: n.q,
								toString: function () {
									return "L: " + this.L.toString() + "\nU: " + this.U.toString() + "\np: " + this.p.toString() + (this.q ? "\nq: " + this.q.toString() : "") + "\n"
								}
							}
						}
					});
				return u
			}
			var i = r(25),
			a = i.number,
			o = a.isInteger;
			t.name = "slu",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e, t, r, n, i, a, o) {
					var s = 0;
					for (r[o] = e; s >= 0; ) {
						var u = r[o + s],
						c = r[n + u];
						c == -1 ? (s--, a[t++] = u) : (r[n + u] = r[i + c], ++s, r[o + s] = c)
					}
					return t
				};
				return e
			}
			t.name = "cs_tdfs",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(15)),
				c = n(r(26)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = r(4),
				m = o("largerEq", {
						"boolean, boolean": function (e, t) {
							return e >= t
						},
						"number, number": function (e, r) {
							return e >= r || i(e, r, t.epsilon)
						},
						"BigNumber, BigNumber": function (e, r) {
							return e.gte(r) || a(e, r, t.epsilon)
						},
						"Fraction, Fraction": function (e, t) {
							return e.compare(t) !== -1
						},
						"Complex, Complex": function () {
							throw new TypeError("No ordering relation is defined for complex numbers")
						},
						"Unit, Unit": function (e, t) {
							if (!e.equalBase(t))
								throw new Error("Cannot compare units with different base");
							return m(e.value, t.value)
						},
						"string, string": function (e, t) {
							return e >= t
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m);
									break;
								default:
									r = u(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, m, !1);
									break;
								default:
									r = l(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, s(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, m, !1);
								break;
							default:
								r = p(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, m, !0);
								break;
							default:
								r = p(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(s(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(s(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + h.operators.largerEq + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).nearlyEqual,
			a = r(35);
			t.name = "largerEq",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e, t) {
					return e[t] < 0
				};
				return e
			}
			t.name = "cs_marked",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(83)),
				a = function (e, t) {
					e[t] = i(e[t])
				};
				return a
			}
			t.name = "cs_mark",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(19)),
				s = n(r(23)),
				u = n(r(21)),
				c = n(r(11)),
				f = n(r(84)),
				l = e.DenseMatrix,
				p = i("lsolve", {
						"SparseMatrix, Array | Matrix": function (e, t) {
							return m(e, t)
						},
						"DenseMatrix, Array | Matrix": function (e, t) {
							return h(e, t)
						},
						"Array, Array | Matrix": function (e, t) {
							var r = a(e),
							n = h(r, t);
							return n.valueOf()
						}
					}),
				h = function (e, t) {
					t = f(e, t, !0);
					for (var r = t._data, n = e._size[0], i = e._size[1], a = [], p = e._data, h = 0; h < i; h++) {
						var m,
						d = r[h][0] || 0;
						if (c(d, 0))
							m = 0;
						else {
							var v = p[h][h];
							if (c(v, 0))
								throw new Error("Linear system cannot be solved since matrix is singular");
							m = o(d, v);
							for (var g = h + 1; g < n; g++)
								r[g] = [u(r[g][0] || 0, s(m, p[g][h]))]
						}
						a[h] = [m]
					}
					return new l({
						data: a,
						size: [n, 1]
					})
				},
				m = function (e, t) {
					t = f(e, t, !0);
					for (var r, n, i = t._data, a = e._size[0], p = e._size[1], h = e._values, m = e._index, d = e._ptr, v = [], g = 0; g < p; g++) {
						var y = i[g][0] || 0;
						if (c(y, 0))
							v[g] = [0];
						else {
							var x = 0,
							w = [],
							b = [],
							N = d[g + 1];
							for (n = d[g]; n < N; n++)
								r = m[n], r === g ? x = h[n] : r > g && (w.push(h[n]), b.push(r));
							if (c(x, 0))
								throw new Error("Linear system cannot be solved since matrix is singular");
							var E = o(y, x);
							for (n = 0, N = b.length; n < N; n++)
								r = b[n], i[r] = [u(i[r][0] || 0, s(E, w[n]))];
							v[g] = [E]
						}
					}
					return new l({
						data: v,
						size: [a, 1]
					})
				};
				return p
			}
			t.name = "lsolve",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(19)),
				s = n(r(23)),
				u = n(r(21)),
				c = n(r(11)),
				f = n(r(84)),
				l = e.DenseMatrix,
				p = i("usolve", {
						"SparseMatrix, Array | Matrix": function (e, t) {
							return m(e, t)
						},
						"DenseMatrix, Array | Matrix": function (e, t) {
							return h(e, t)
						},
						"Array, Array | Matrix": function (e, t) {
							var r = a(e),
							n = h(r, t);
							return n.valueOf()
						}
					}),
				h = function (e, t) {
					t = f(e, t, !0);
					for (var r = t._data, n = e._size[0], i = e._size[1], a = [], p = e._data, h = i - 1; h >= 0; h--) {
						var m,
						d = r[h][0] || 0;
						if (c(d, 0))
							m = 0;
						else {
							var v = p[h][h];
							if (c(v, 0))
								throw new Error("Linear system cannot be solved since matrix is singular");
							m = o(d, v);
							for (var g = h - 1; g >= 0; g--)
								r[g] = [u(r[g][0] || 0, s(m, p[g][h]))]
						}
						a[h] = [m]
					}
					return new l({
						data: a,
						size: [n, 1]
					})
				},
				m = function (e, t) {
					t = f(e, t, !0);
					for (var r, n, i = t._data, a = e._size[0], p = e._size[1], h = e._values, m = e._index, d = e._ptr, v = [], g = p - 1; g >= 0; g--) {
						var y = i[g][0] || 0;
						if (c(y, 0))
							v[g] = [0];
						else {
							var x = 0,
							w = [],
							b = [],
							N = d[g],
							E = d[g + 1];
							for (n = E - 1; n >= N; n--)
								r = m[n], r === g ? x = h[n] : r < g && (w.push(h[n]), b.push(r));
							if (c(x, 0))
								throw new Error("Linear system cannot be solved since matrix is singular");
							var M = o(y, x);
							for (n = 0, E = b.length; n < E; n++)
								r = b[n], i[r] = [u(i[r][0], s(M, w[n]))];
							v[g] = [M]
						}
					}
					return new l({
						data: v,
						size: [a, 1]
					})
				};
				return p
			}
			t.name = "usolve",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(19)),
				s = r(4),
				u = n(r(24)),
				c = n(r(15)),
				f = n(r(26)),
				l = n(r(17)),
				p = n(r(16)),
				h = n(r(8)),
				m = n(r(6)),
				d = i("dotDivide", {
						"any, any": o,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, o, !1);
									break;
								default:
									r = u(t, e, o, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, o, !1);
									break;
								default:
									r = h(e, t, o)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return d(a(e), a(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return d(a(e), t)
						},
						"Matrix, Array": function (e, t) {
							return d(e, a(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = l(e, t, o, !1);
								break;
							default:
								r = m(e, t, o, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = p(t, e, o, !0);
								break;
							default:
								r = m(t, e, o, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return m(a(e), t, o, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return m(a(t), e, o, !0).valueOf()
						}
					});
				return d.toTex = {
					2: "\\left(${args[0]}" + s.operators.dotDivide + "${args[1]}\\right)"
				},
				d
			}
			t.name = "dotDivide",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(11)),
				s = e.SparseMatrix,
				u = function (e, t, r) {
					var n = e._values,
					u = e._index,
					c = e._ptr,
					f = e._size,
					l = e._datatype,
					p = t._values,
					h = t._index,
					m = t._ptr,
					d = t._size,
					v = t._datatype;
					if (f.length !== d.length)
						throw new i(f.length, d.length);
					if (f[0] !== d[0] || f[1] !== d[1])
						throw new RangeError("Dimension mismatch. Matrix A (" + f + ") must match Matrix B (" + d + ")");
					var g,
					y = f[0],
					x = f[1],
					w = o,
					b = 0,
					N = r;
					"string" == typeof l && l === v && (g = l, w = a.find(o, [g, g]), b = a.convert(0, g), N = a.find(r, [g, g]));
					var E,
					M,
					A,
					O,
					T,
					_ = n && p ? [] : void 0,
					S = [],
					C = [],
					z = new s({
							values: _,
							index: S,
							ptr: C,
							size: [y, x],
							datatype: g
						}),
					k = _ ? [] : void 0,
					I = [];
					for (M = 0; M < x; M++) {
						C[M] = S.length;
						var B = M + 1;
						if (k)
							for (O = m[M], T = m[M + 1], A = O; A < T; A++)
								E = h[A], I[E] = B, k[E] = p[A];
						for (O = c[M], T = c[M + 1], A = O; A < T; A++)
							if (E = u[A], k) {
								var P = I[E] === B ? k[E] : b,
								R = N(n[A], P);
								w(R, b) || (S.push(E), _.push(R))
							} else
								S.push(E)
					}
					return C[x] = S.length,
					z
				};
				return u
			}
			var i = r(10);
			t.name = "algorithm09",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(19)),
				s = a("log", {
						number: function (r) {
							return r >= 0 || t.predictable ? Math.log(r) : new e.Complex(r, 0).log()
						},
						Complex: function (e) {
							return e.log()
						},
						BigNumber: function (r) {
							return !r.isNegative() || t.predictable ? r.ln() : new e.Complex(r.toNumber(), 0).log()
						},
						"Array | Matrix": function (e) {
							return i(e, s)
						},
						"any, any": function (e, t) {
							return o(s(e), s(t))
						}
					});
				return s.toTex = {
					1: "\\ln\\left(${args[0]}\\right)",
					2: "\\log_{${args[1]}}\\left(${args[0]}\\right)"
				},
				s
			}
			var i = r(1);
			t.name = "log",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(18)),
				c = o("trace", {
						Array: function (e) {
							return c(s(e))
						},
						Matrix: function (e) {
							var t;
							switch (e.storage()) {
							case "dense":
								t = f(e);
								break;
							case "sparse":
								t = l(e)
							}
							return t
						},
						any: i
					}),
				f = function (e) {
					var t = e._size,
					r = e._data;
					switch (t.length) {
					case 1:
						if (1 == t[0])
							return i(r[0]);
						throw new RangeError("Matrix must be square (size: " + a(t) + ")");
					case 2:
						var n = t[0],
						o = t[1];
						if (n === o) {
							for (var s = 0, c = 0; c < n; c++)
								s = u(s, r[c][c]);
							return s
						}
						throw new RangeError("Matrix must be square (size: " + a(t) + ")");
					default:
						throw new RangeError("Matrix must be two dimensional (size: " + a(t) + ")")
					}
				},
				l = function (e) {
					var t = e._values,
					r = e._index,
					n = e._ptr,
					i = e._size,
					o = i[0],
					s = i[1];
					if (o === s) {
						var c = 0;
						if (t.length > 0)
							for (var f = 0; f < s; f++)
								for (var l = n[f], p = n[f + 1], h = l; h < p; h++) {
									var m = r[h];
									if (m === f) {
										c = u(c, t[h]);
										break
									}
									if (m > f)
										break
								}
						return c
					}
					throw new RangeError("Matrix must be square (size: " + a(i) + ")")
				};
				return c.toTex = {
					1: "\\mathrm{tr}\\left(${args[0]}\\right)"
				},
				c
			}
			var i = r(5).clone,
			a = r(9).format;
			t.name = "trace",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(18)),
				o = n(r(21)),
				s = n(r(12)),
				u = n(r(47)),
				c = n(r(45)),
				f = n(r(69)),
				l = n(r(70)),
				p = n(r(57)),
				h = n(r(48)),
				m = n(r(34)),
				d = i("stirlingS2", {
						"number | BigNumber, number | BigNumber": function (e, t) {
							if (!h(e) || p(e) || !h(t) || p(t))
								throw new TypeError("Non-negative integer value expected in function stirlingS2");
							if (m(t, e))
								throw new TypeError("k must be less than or equal to n in function stirlingS2");
							for (var r = f(t), n = 0, i = 0; i <= t; i++) {
								var d = c(-1, o(t, i)),
								v = l(t, i),
								g = c(i, e);
								n = a(n, s(s(v, g), d))
							}
							return u(n, r)
						}
					});
				return d.toTex = {
					2: "\\mathrm{S}\\left(${args}\\right)"
				},
				d
			}
			t.name = "stirlingS2",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, u) {
				function c(r) {
					if (r.isZero())
						return new e.BigNumber(1);
					for (var n = t.precision + (0 | Math.log(r.toNumber())), i = e.BigNumber.clone({
								precision: n
							}), a = new i(r), o = r.toNumber() - 1; o > 1; )
						a = a.times(o), o--;
					return new e.BigNumber(a.toPrecision(e.BigNumber.precision))
				}
				var f = n(r(12)),
				l = n(r(45)),
				p = u("gamma", {
						number: function (e) {
							var t,
							r;
							if (a(e)) {
								if (e <= 0)
									return isFinite(e) ? 1 / 0 : NaN;
								if (e > 171)
									return 1 / 0;
								for (var n = e - 2, i = e - 1; n > 1; )
									i *= n, n--;
								return 0 == i && (i = 1),
								i
							}
							if (e < .5)
								return Math.PI / (Math.sin(Math.PI * e) * p(1 - e));
							if (e >= 171.35)
								return 1 / 0;
							if (e > 85) {
								var u = e * e,
								c = u * e,
								f = c * e,
								l = f * e;
								return Math.sqrt(2 * Math.PI / e) * Math.pow(e / Math.E, e) * (1 + 1 / (12 * e) + 1 / (288 * u) - 139 / (51840 * c) - 571 / (2488320 * f) + 163879 / (209018880 * l) + 5246819 / (75246796800 * l * e))
							}
							--e,
							r = s[0];
							for (var h = 1; h < s.length; ++h)
								r += s[h] / (e + h);
							return t = e + o + .5,
							Math.sqrt(2 * Math.PI) * Math.pow(t, e + .5) * Math.exp(-t) * r
						},
						Complex: function (t) {
							var r,
							n;
							if (0 == t.im)
								return p(t.re);
							t = new e.Complex(t.re - 1, t.im),
							n = new e.Complex(s[0], 0);
							for (var i = 1; i < s.length; ++i) {
								var a = t.re + i,
								u = a * a + t.im * t.im;
								0 != u ? (n.re += s[i] * a / u, n.im +=  - (s[i] * t.im) / u) : n.re = s[i] < 0 ?  - (1 / 0) : 1 / 0
							}
							r = new e.Complex(t.re + o + .5, t.im);
							var c = Math.sqrt(2 * Math.PI);
							t.re += .5;
							var h = l(r, t);
							0 == h.im ? h.re *= c : 0 == h.re ? h.im *= c : (h.re *= c, h.im *= c);
							var m = Math.exp(-r.re);
							return r.re = m * Math.cos(-r.im),
							r.im = m * Math.sin(-r.im),
							f(f(h, r), n)
						},
						BigNumber: function (t) {
							if (t.isInteger())
								return t.isNegative() || t.isZero() ? new e.BigNumber(1 / 0) : c(t.minus(1));
							if (!t.isFinite())
								return new e.BigNumber(t.isNegative() ? NaN : 1 / 0);
							throw new Error("Integer BigNumber expected")
						},
						"Array | Matrix": function (e) {
							return i(e, p)
						}
					});
				return p.toTex = {
					1: "\\Gamma\\left(${args[0]}\\right)"
				},
				p
			}
			var i = r(1),
			a = r(3).isInteger,
			o = 4.7421875,
			s = [.9999999999999971, 57.15623566586292, -59.59796035547549, 14.136097974741746,  - .4919138160976202, 3399464998481189e-20, 4652362892704858e-20, -9837447530487956e-20, .0001580887032249125,  - .00021026444172410488, .00021743961811521265,  - .0001643181065367639, 8441822398385275e-20, -26190838401581408e-21, 36899182659531625e-22];
			t.name = "gamma",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = r(4),
				s = a("not", {
						number: function (e) {
							return !e
						},
						Complex: function (e) {
							return 0 === e.re && 0 === e.im
						},
						BigNumber: function (e) {
							return e.isZero() || e.isNaN()
						},
						Unit: function (e) {
							return s(e.value)
						},
						"Array | Matrix": function (e) {
							return i(e, s)
						}
					});
				return s.toTex = {
					1: o.operators.not + "\\left(${args[0]}\\right)"
				},
				s
			}
			var i = r(1);
			t.name = "not",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("map", {
						"Array, function": i,
						"Matrix, function": function (e, t) {
							return e.map(t)
						}
					});
				return a.toTex = void 0,
				a
			}
			function i(e, t) {
				var r = a(t),
				n = function (i, a) {
					return Array.isArray(i) ? i.map(function (e, t) {
						return n(e, a.concat(t))
					}) : 1 === r ? t(i) : 2 === r ? t(i, a) : t(i, a, e)
				};
				return n(e, [])
			}
			var a = r(32).maxArgumentCount;
			t.name = "map",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e) {
					if ("asc" === e)
						return f;
					if ("desc" === e)
						return l;
					if ("natural" === e)
						return p;
					throw new Error('String "asc", "desc", or "natural" expected')
				}
				function s(e) {
					if (1 !== i(e).length)
						throw new Error("One dimensional array expected")
				}
				function u(e) {
					if (1 !== e.size().length)
						throw new Error("One dimensional matrix expected")
				}
				var c = n(r(0)),
				f = n(r(49)),
				l = function (e, t) {
					return -f(e, t)
				},
				p = n(r(31)),
				h = a("sort", {
						Array: function (e) {
							return s(e),
							e.sort(f)
						},
						Matrix: function (e) {
							return u(e),
							c(e.toArray().sort(f), e.storage())
						},
						"Array, function": function (e, t) {
							return s(e),
							e.sort(t)
						},
						"Matrix, function": function (e, t) {
							return u(e),
							c(e.toArray().sort(t), e.storage())
						},
						"Array, string": function (e, t) {
							return s(e),
							e.sort(o(t))
						},
						"Matrix, string": function (e, t) {
							return u(e),
							c(e.toArray().sort(o(t)), e.storage())
						}
					});
				return h.toTex = void 0,
				h
			}
			var i = r(2).size;
			t.name = "sort",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(r) {
					var n = void 0;
					if (i(r, function (e) {
							n = void 0 === n ? e : s(n, e)
						}), void 0 === n)
						switch (t.number) {
						case "number":
							return 0;
						case "BigNumber":
							return new e.BigNumber(0);
						case "Fraction":
							return new e.Fraction(0);
						default:
							return 0
						}
					return n
				}
				var s = n(r(20)),
				u = a("sum", {
						"Array | Matrix": function (e) {
							return o(e)
						},
						"Array | Matrix, number | BigNumber": function () {
							throw new Error("sum(A, dim) is not yet supported")
						},
						"...": function (e) {
							return o(e)
						}
					});
				return u.toTex = void 0,
				u
			}
			var i = r(42);
			t.name = "sum",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				var u = n(r(30)),
				c = n(r(27)),
				f = n(r(43)),
				l = n(r(28)),
				p = n(r(22)),
				h = n(r(31)),
				m = s("setDifference", {
						"Array | Matrix, Array | Matrix": function (e, t) {
							if (0 === p(l(e), new c(0)))
								var r = [];
							else {
								if (0 === p(l(t), new c(0)))
									return i(e.toArray());
								for (var n, s = a(i(Array.isArray(e) ? e : e.toArray()).sort(h)), m = a(i(Array.isArray(t) ? t : t.toArray()).sort(h)), r = [], d = 0; d < s.length; d++) {
									n = !1;
									for (var v = 0; v < m.length; v++)
										if (u(s[d].value, m[v].value) && s[d].identifier === m[v].identifier) {
											n = !0;
											break
										}
									n || r.push(s[d])
								}
							}
							return Array.isArray(e) && Array.isArray(t) ? o(r) : new f(o(r))
						}
					});
				return m
			}
			var i = r(2).flatten,
			a = r(2).identify,
			o = r(2).generalize;
			t.name = "setDifference",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				var u = n(r(30)),
				c = n(r(27)),
				f = n(r(43)),
				l = n(r(28)),
				p = n(r(22)),
				h = n(r(31)),
				m = s("setIntersect", {
						"Array | Matrix, Array | Matrix": function (e, t) {
							if (0 === p(l(e), new c(0)) || 0 === p(l(t), new c(0)))
								var r = [];
							else
								for (var n = a(i(Array.isArray(e) ? e : e.toArray()).sort(h)), s = a(i(Array.isArray(t) ? t : t.toArray()).sort(h)), r = [], m = 0; m < n.length; m++)
									for (var d = 0; d < s.length; d++)
										if (u(n[m].value, s[d].value) && n[m].identifier === s[d].identifier) {
											r.push(n[m]);
											break
										}
							return Array.isArray(e) && Array.isArray(t) ? o(r) : new f(o(r))
						}
					});
				return m
			}
			var i = r(2).flatten,
			a = r(2).identify,
			o = r(2).generalize;
			t.name = "setIntersect",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(27)),
				s = n(r(64)),
				u = n(r(28)),
				c = (n(r(140)), n(r(22))),
				f = n(r(142)),
				l = a("setSymDifference", {
						"Array | Matrix, Array | Matrix": function (e, t) {
							if (0 === c(u(e), new o(0)))
								return i(t);
							if (0 === c(u(t), new o(0)))
								return i(e);
							var r = i(e),
							n = i(t);
							return s(f(r, n), f(n, r))
						}
					});
				return l
			}
			var i = r(2).flatten;
			t.name = "setSymDifference",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(e) {
					e = i(e.valueOf());
					var t = e.length;
					if (0 == t)
						throw new Error("Cannot calculate median of an empty array");
					if (t % 2 == 0) {
						for (var r = t / 2 - 1, n = l(e, r + 1), a = e[r], o = 0; o < r; ++o)
							f(e[o], a) > 0 && (a = e[o]);
						return m(a, n)
					}
					var s = l(e, (t - 1) / 2);
					return h(s)
				}
				var u = n(r(20)),
				c = n(r(19)),
				f = n(r(49)),
				l = n(r(88)),
				p = o("median", {
						"Array | Matrix": s,
						"Array | Matrix, number | BigNumber": function (e, t) {
							throw new Error("median(A, dim) is not yet supported")
						},
						"...": function (e) {
							if (a(e))
								throw new TypeError("Scalar values expected in function median");
							return s(e)
						}
					}),
				h = o({
						"number | BigNumber | Complex | Unit": function (e) {
							return e
						}
					}),
				m = o({
						"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit": function (e, t) {
							return c(u(e, t), 2)
						}
					});
				return p.toTex = void 0,
				p
			}
			var i = r(2).flatten,
			a = (r(65), r(66));
			t.name = "median",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					var n = 0,
					i = 0;
					if (0 == t.length)
						throw new SyntaxError("Function var requires one or more parameters (0 provided)");
					if (a(t, function (e) {
							n = u(n, e),
							i++
						}), 0 === i)
						throw new Error("Cannot calculate var of an empty array");
					var o = l(n, i);
					switch (n = 0, a(t, function (e) {
							var t = c(e, o);
							n = u(n, f(t, t))
						}), r) {
					case "uncorrected":
						return l(n, i);
					case "biased":
						return l(n, i + 1);
					case "unbiased":
						var s = e.isBigNumber(n) ? new e.BigNumber(0) : 0;
						return 1 == i ? s : l(n, i - 1);
					default:
						throw new Error('Unknown normalization "' + r + '". Choose "unbiased" (default), "uncorrected", or "biased".')
					}
				}
				var u = n(r(20)),
				c = n(r(21)),
				f = n(r(23)),
				l = n(r(19)),
				p = o("variance", {
						"Array | Matrix": function (e) {
							return s(e, i)
						},
						"Array | Matrix, string": s,
						"...": function (e) {
							return s(e, i)
						}
					});
				return p.toTex = "\\mathrm{Var}\\left(${args}\\right)",
				p
			}
			var i = "unbiased",
			a = r(42);
			t.name = "var",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("acosh", {
						number: function (r) {
							return r >= 1 || t.predictable ? a(r) : r <= -1 ? new e.Complex(Math.log(Math.sqrt(r * r - 1) - r), Math.PI) : new e.Complex(r, 0).acosh()
						},
						Complex: function (e) {
							return e.acosh()
						},
						BigNumber: function (e) {
							return e.acosh()
						},
						"Array | Matrix": function (e) {
							return i(e, o)
						}
					});
				return o.toTex = {
					1: "\\cosh^{-1}\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = Math.acosh || function (e) {
				return Math.log(Math.sqrt(e * e - 1) + e)
			};
			t.name = "acosh",
			t.factory = n
		}, function (e, t, r) {
			function n(e) {
				var t = i.create(e);
				return t.create = n,
				t.import(r(156)),
				t
			}
			var i = r(149);
			e.exports = n()
		}, function (e, t, r) {
			e.exports = r(150)
		}, function (e, t, r) {
			var n = r(5).isFactory,
			i = r(151),
			a = r(90),
			o = r(154),
			s = r(155);
			t.create = function (e) {
				function t(e) {
					if (!n(e))
						throw new Error("Factory object with properties `type`, `name`, and `factory` expected");
					var i,
					a = r.indexOf(e);
					return a === -1 ? (i = e.math === !0 ? e.factory(c.type, f, t, c.typed, c) : e.factory(c.type, f, t, c.typed), r.push(e), u.push(i)) : i = u[a],
					i
				}
				if ("function" != typeof Object.create)
					throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");
				var r = [],
				u = [],
				c = a.mixin({});
				c.type = {},
				c.expression = {
					transform: {},
					mathWithTransform: {}
				},
				c.typed = i.create(c.type);
				var f = {
					epsilon: 1e-12,
					matrix: "Matrix",
					number: "number",
					precision: 64,
					predictable: !1,
					randomSeed: null
				};
				return c.import = t(o),
				c.config = t(s),
				c.expression.mathWithTransform.config = c.config,
				e && c.config(e),
				c
			}
		}, function (e, t, r) {
			var n = r(152),
			i = r(3).digits,
			a = r(71),
			o = r(58),
			s = function () {
				return s = n.create,
				n
			};
			t.create = function (e) {
				e.isNumber = function (e) {
					return "number" == typeof e
				},
				e.isComplex = function (t) {
					return e.Complex && t instanceof e.Complex || !1
				},
				e.isBigNumber = a,
				e.isFraction = function (t) {
					return e.Fraction && t instanceof e.Fraction || !1
				},
				e.isUnit = function (e) {
					return e && e.constructor.prototype.isUnit || !1
				},
				e.isString = function (e) {
					return "string" == typeof e
				},
				e.isArray = Array.isArray,
				e.isMatrix = o,
				e.isDenseMatrix = function (e) {
					return e && e.isDenseMatrix && e.constructor.prototype.isMatrix || !1
				},
				e.isSparseMatrix = function (e) {
					return e && e.isSparseMatrix && e.constructor.prototype.isMatrix || !1
				},
				e.isRange = function (e) {
					return e && e.constructor.prototype.isRange || !1
				},
				e.isIndex = function (e) {
					return e && e.constructor.prototype.isIndex || !1
				},
				e.isBoolean = function (e) {
					return "boolean" == typeof e
				},
				e.isResultSet = function (e) {
					return e && e.constructor.prototype.isResultSet || !1
				},
				e.isHelp = function (e) {
					return e && e.constructor.prototype.isHelp || !1
				},
				e.isFunction = function (e) {
					return "function" == typeof e
				},
				e.isDate = function (e) {
					return e instanceof Date
				},
				e.isRegExp = function (e) {
					return e instanceof RegExp
				},
				e.isObject = function (e) {
					return "object" == typeof e
				},
				e.isNull = function (e) {
					return null === e
				},
				e.isUndefined = function (e) {
					return void 0 === e
				},
				e.isAccessorNode = function (e) {
					return e && e.isAccessorNode && e.constructor.prototype.isNode || !1
				},
				e.isArrayNode = function (e) {
					return e && e.isArrayNode && e.constructor.prototype.isNode || !1
				},
				e.isAssignmentNode = function (e) {
					return e && e.isAssignmentNode && e.constructor.prototype.isNode || !1
				},
				e.isBlockNode = function (e) {
					return e && e.isBlockNode && e.constructor.prototype.isNode || !1
				},
				e.isConditionalNode = function (e) {
					return e && e.isConditionalNode && e.constructor.prototype.isNode || !1
				},
				e.isConstantNode = function (e) {
					return e && e.isConstantNode && e.constructor.prototype.isNode || !1
				},
				e.isFunctionAssignmentNode = function (e) {
					return e && e.isFunctionAssignmentNode && e.constructor.prototype.isNode || !1
				},
				e.isFunctionNode = function (e) {
					return e && e.isFunctionNode && e.constructor.prototype.isNode || !1
				},
				e.isIndexNode = function (e) {
					return e && e.isIndexNode && e.constructor.prototype.isNode || !1
				},
				e.isNode = function (e) {
					return e && e.isNode && e.constructor.prototype.isNode || !1
				},
				e.isObjectNode = function (e) {
					return e && e.isObjectNode && e.constructor.prototype.isNode || !1
				},
				e.isOperatorNode = function (e) {
					return e && e.isOperatorNode && e.constructor.prototype.isNode || !1
				},
				e.isParenthesisNode = function (e) {
					return e && e.isParenthesisNode && e.constructor.prototype.isNode || !1
				},
				e.isRangeNode = function (e) {
					return e && e.isRangeNode && e.constructor.prototype.isNode || !1
				},
				e.isSymbolNode = function (e) {
					return e && e.isSymbolNode && e.constructor.prototype.isNode || !1
				},
				e.isChain = function (e) {
					return e && e.constructor.prototype.isChain || !1
				};
				var t = s();
				return t.types = [{
						name: "number",
						test: e.isNumber
					}, {
						name: "Complex",
						test: e.isComplex
					}, {
						name: "BigNumber",
						test: e.isBigNumber
					}, {
						name: "Fraction",
						test: e.isFraction
					}, {
						name: "Unit",
						test: e.isUnit
					}, {
						name: "string",
						test: e.isString
					}, {
						name: "Array",
						test: e.isArray
					}, {
						name: "Matrix",
						test: e.isMatrix
					}, {
						name: "DenseMatrix",
						test: e.isDenseMatrix
					}, {
						name: "SparseMatrix",
						test: e.isSparseMatrix
					}, {
						name: "Range",
						test: e.isRange
					}, {
						name: "Index",
						test: e.isIndex
					}, {
						name: "boolean",
						test: e.isBoolean
					}, {
						name: "ResultSet",
						test: e.isResultSet
					}, {
						name: "Help",
						test: e.isHelp
					}, {
						name: "function",
						test: e.isFunction
					}, {
						name: "Date",
						test: e.isDate
					}, {
						name: "RegExp",
						test: e.isRegExp
					}, {
						name: "Object",
						test: e.isObject
					}, {
						name: "null",
						test: e.isNull
					}, {
						name: "undefined",
						test: e.isUndefined
					}, {
						name: "OperatorNode",
						test: e.isOperatorNode
					}, {
						name: "ConstantNode",
						test: e.isConstantNode
					}, {
						name: "SymbolNode",
						test: e.isSymbolNode
					}, {
						name: "ParenthesisNode",
						test: e.isParenthesisNode
					}, {
						name: "FunctionNode",
						test: e.isFunctionNode
					}, {
						name: "FunctionAssignmentNode",
						test: e.isFunctionAssignmentNode
					}, {
						name: "ArrayNode",
						test: e.isArrayNode
					}, {
						name: "AssignmentNode",
						test: e.isAssignmentNode
					}, {
						name: "BlockNode",
						test: e.isBlockNode
					}, {
						name: "ConditionalNode",
						test: e.isConditionalNode
					}, {
						name: "IndexNode",
						test: e.isIndexNode
					}, {
						name: "RangeNode",
						test: e.isRangeNode
					}, {
						name: "Node",
						test: e.isNode
					}
				],
				t.conversions = [{
						from: "number",
						to: "BigNumber",
						convert: function (t) {
							if (i(t) > 15)
								throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: " + t + "). Use function bignumber(x) to convert to BigNumber.");
							return new e.BigNumber(t)
						}
					}, {
						from: "number",
						to: "Complex",
						convert: function (t) {
							return new e.Complex(t, 0)
						}
					}, {
						from: "number",
						to: "string",
						convert: function (e) {
							return e + ""
						}
					}, {
						from: "BigNumber",
						to: "Complex",
						convert: function (t) {
							return new e.Complex(t.toNumber(), 0)
						}
					}, {
						from: "Fraction",
						to: "BigNumber",
						convert: function (e) {
							throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")
						}
					}, {
						from: "Fraction",
						to: "Complex",
						convert: function (t) {
							return new e.Complex(t.valueOf(), 0)
						}
					}, {
						from: "number",
						to: "Fraction",
						convert: function (t) {
							var r = new e.Fraction(t);
							if (r.valueOf() !== t)
								throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: " + t + "). Use function fraction(x) to convert to Fraction.");
							return new e.Fraction(t)
						}
					}, {
						from: "string",
						to: "number",
						convert: function (e) {
							var t = Number(e);
							if (isNaN(t))
								throw new Error('Cannot convert "' + e + '" to a number');
							return t
						}
					}, {
						from: "string",
						to: "BigNumber",
						convert: function (t) {
							try {
								return new e.BigNumber(t)
							} catch (e) {
								throw new Error('Cannot convert "' + t + '" to BigNumber')
							}
						}
					}, {
						from: "string",
						to: "Fraction",
						convert: function (t) {
							try {
								return new e.Fraction(t)
							} catch (e) {
								throw new Error('Cannot convert "' + t + '" to Fraction')
							}
						}
					}, {
						from: "string",
						to: "Complex",
						convert: function (t) {
							try {
								return new e.Complex(t)
							} catch (e) {
								throw new Error('Cannot convert "' + t + '" to Complex')
							}
						}
					}, {
						from: "boolean",
						to: "number",
						convert: function (e) {
							return +e
						}
					}, {
						from: "boolean",
						to: "BigNumber",
						convert: function (t) {
							return new e.BigNumber(+t)
						}
					}, {
						from: "boolean",
						to: "Fraction",
						convert: function (t) {
							return new e.Fraction(+t)
						}
					}, {
						from: "boolean",
						to: "string",
						convert: function (e) {
							return +e
						}
					}, {
						from: "null",
						to: "number",
						convert: function () {
							return 0
						}
					}, {
						from: "null",
						to: "string",
						convert: function () {
							return "null"
						}
					}, {
						from: "null",
						to: "BigNumber",
						convert: function () {
							return new e.BigNumber(0)
						}
					}, {
						from: "null",
						to: "Fraction",
						convert: function () {
							return new e.Fraction(0)
						}
					}, {
						from: "Array",
						to: "Matrix",
						convert: function (t) {
							return new e.DenseMatrix(t)
						}
					}, {
						from: "Matrix",
						to: "Array",
						convert: function (e) {
							return e.valueOf()
						}
					}
				],
				t
			}
		}, function (e, t, r) {
			"use strict";
			var n,
			i,
			a;
			!function (r, o) {
				i = [],
				n = o,
				a = "function" == typeof n ? n.apply(t, i) : n,
				!(void 0 !== a && (e.exports = a))
			}
			(this, function () {
				function e() {
					function t(e) {
						for (var t, r = 0; r < M.types.length; r++) {
							var n = M.types[r];
							if (n.name === e) {
								t = n.test;
								break
							}
						}
						if (!t) {
							var i;
							for (r = 0; r < M.types.length; r++)
								if (n = M.types[r], n.name.toLowerCase() == e.toLowerCase()) {
									i = n.name;
									break
								}
							throw new Error('Unknown type "' + e + '"' + (i ? '. Did you mean "' + i + '"?' : ""))
						}
						return t
					}
					function r(e) {
						for (var t = "", r = 0; r < e.length; r++) {
							var n = e[r];
							if (n.signatures && "" != n.name)
								if ("" == t)
									t = n.name;
								else if (t != n.name) {
									var i = new Error("Function names do not match (expected: " + t + ", actual: " + n.name + ")");
									throw i.data = {
										actual: n.name,
										expected: t
									},
									i
								}
						}
						return t
					}
					function n(e, t, r, n, i) {
						var a,
						o = d(n),
						s = i ? i.split(",") : null,
						u = e || "unnamed",
						c = s && v(s, "any"),
						f = {
							fn: e,
							index: r,
							actual: n,
							expected: s
						};
						a = s ? t > r && !c ? "Unexpected type of argument in function " + u + " (expected: " + s.join(" or ") + ", actual: " + o + ", index: " + r + ")" : "Too few arguments in function " + u + " (expected: " + s.join(" or ") + ", index: " + r + ")" : "Too many arguments in function " + u + " (expected: " + r + ", actual: " + t + ")";
						var l = new TypeError(a);
						return l.data = f,
						l
					}
					function i(e) {
						this.name = e || "refs",
						this.categories = {}
					}
					function a(e, t) {
						if ("string" == typeof e) {
							var r = e.trim(),
							n = "..." === r.substr(0, 3);
							if (n && (r = r.substr(3)), "" === r)
								this.types = ["any"];
							else {
								this.types = r.split("|");
								for (var i = 0; i < this.types.length; i++)
									this.types[i] = this.types[i].trim()
							}
						} else {
							if (!Array.isArray(e)) {
								if (e instanceof a)
									return e.clone();
								throw new Error("String or Array expected")
							}
							this.types = e
						}
						this.conversions = [],
						this.varArgs = n || t || !1,
						this.anyType = this.types.indexOf("any") !== -1
					}
					function o(e, t) {
						var r;
						if ("string" == typeof e)
							r = "" !== e ? e.split(",") : [];
						else {
							if (!Array.isArray(e))
								throw new Error("string or Array expected");
							r = e
						}
						this.params = new Array(r.length),
						this.anyType = !1,
						this.varArgs = !1;
						for (var n = 0; n < r.length; n++) {
							var i = new a(r[n]);
							if (this.params[n] = i, i.anyType && (this.anyType = !0), n === r.length - 1)
								this.varArgs = i.varArgs;
							else if (i.varArgs)
								throw new SyntaxError('Unexpected variable arguments operator "..."')
						}
						this.fn = t
					}
					function s(e, t, r, n) {
						this.path = e || [],
						this.param = e[e.length - 1] || null,
						this.signature = t || null,
						this.childs = r || [],
						this.fallThrough = n || !1
					}
					function u(e) {
						var t,
						r,
						n = {},
						i = [];
						for (var a in e)
							if (e.hasOwnProperty(a)) {
								var s = e[a];
								if (t = new o(a, s), t.ignore())
									continue;
								var u = t.expand();
								for (r = 0; r < u.length; r++) {
									var c = u[r],
									f = c.toString(),
									l = n[f];
									if (l) {
										var p = o.compare(c, l);
										if (p < 0)
											n[f] = c;
										else if (0 === p)
											throw new Error('Signature "' + f + '" is defined twice')
									} else
										n[f] = c
								}
							}
						for (f in n)
							n.hasOwnProperty(f) && i.push(n[f]);
						for (i.sort(function (e, t) {
								return o.compare(e, t)
							}), r = 0; r < i.length; r++)
							if (t = i[r], t.varArgs)
								for (var h = t.params.length - 1, m = t.params[h], d = 0; d < m.types.length; ) {
									if (m.conversions[d])
										for (var g = m.types[d], y = 0; y < i.length; y++) {
											var x = i[y],
											w = x.params[h];
											if (x !== t && w && v(w.types, g) && !w.conversions[h]) {
												m.types.splice(d, 1),
												m.conversions.splice(d, 1),
												d--;
												break
											}
										}
									d++
								}
						return i
					}
					function c(e) {
						for (var t = [], r = 0; r < e.length; r++)
							e[r].anyType && t.push(e[r]);
						return t
					}
					function f(e) {
						for (var t = {}, r = 0; r < e.length; r++) {
							var n = e[r];
							if (n.fn && !n.hasConversions()) {
								var i = n.params.join(",");
								t[i] = n.fn
							}
						}
						return t
					}
					function l(e, t, r) {
						var n,
						i,
						o,
						u = t.length,
						c = [];
						for (n = 0; n < e.length; n++)
							i = e[n], i.params.length !== u || o || (o = i), void 0 != i.params[u] && c.push(i);
						c.sort(function (e, t) {
							return a.compare(e.params[u], t.params[u])
						});
						var f = [];
						for (n = 0; n < c.length; n++) {
							i = c[n];
							var p = i.params[u],
							h = f.filter(function (e) {
									return e.param.overlapping(p)
								})[0];
							if (h) {
								if (h.param.varArgs)
									throw new Error('Conflicting types "' + h.param + '" and "' + p + '"');
								h.signatures.push(i)
							} else
								f.push({
									param: p,
									signatures: [i]
								})
						}
						var m = [];
						for (n = 0; n < r.length; n++)
							r[n].paramsStartWith(t) && m.push(r[n]);
						var d = !1;
						for (n = 0; n < m.length; n++)
							if (!v(e, m[n])) {
								d = !0;
								break
							}
						var g = new Array(f.length);
						for (n = 0; n < f.length; n++) {
							var y = f[n];
							g[n] = l(y.signatures, t.concat(y.param), m)
						}
						return new s(t, o, g, d)
					}
					function p(e) {
						for (var t = [], r = 0; r < e; r++)
							t[r] = "arg" + r;
						return t
					}
					function h(e, t) {
						var r = new i,
						a = u(t);
						if (0 == a.length)
							throw new Error("No signatures provided");
						var o = c(a),
						s = l(a, [], o),
						h = [],
						d = e || "",
						v = p(m(a));
						h.push("function " + d + "(" + v.join(", ") + ") {"),
						h.push('  "use strict";'),
						h.push("  var name = '" + d + "';"),
						h.push(s.toCode(r, "  ", !1)),
						h.push("}");
						var g = [r.toCode(), "return " + h.join("\n")].join("\n"),
						y = new Function(r.name, "createError", g),
						x = y(r, n);
						return x.signatures = f(a),
						x
					}
					function m(e) {
						for (var t = 0, r = 0; r < e.length; r++) {
							var n = e[r].params.length;
							n > t && (t = n)
						}
						return t
					}
					function d(e) {
						for (var t, r = 0; r < M.types.length; r++) {
							var n = M.types[r];
							if ("Object" === n.name)
								t = n;
							else if (n.test(e))
								return n.name
						}
						return t && t.test(e) ? t.name : "unknown"
					}
					function v(e, t) {
						return e.indexOf(t) !== -1
					}
					function g(e) {
						return e[e.length - 1]
					}
					function y(e, t) {
						if (!e.signatures)
							throw new TypeError("Function is no typed-function");
						var r;
						if ("string" == typeof t) {
							r = t.split(",");
							for (var n = 0; n < r.length; n++)
								r[n] = r[n].trim()
						} else {
							if (!Array.isArray(t))
								throw new TypeError("String array or a comma separated string expected");
							r = t
						}
						var i = r.join(","),
						a = e.signatures[i];
						if (a)
							return a;
						throw new TypeError("Signature not found (signature: " + (e.name || "unnamed") + "(" + r.join(", ") + "))")
					}
					function x(e, t) {
						var r = d(e);
						if (t === r)
							return e;
						for (var n = 0; n < M.conversions.length; n++) {
							var i = M.conversions[n];
							if (i.from === r && i.to === t)
								return i.convert(e)
						}
						throw new Error("Cannot convert from " + r + " to " + t)
					}
					i.prototype.add = function (e, t) {
						var r = t || "fn";
						this.categories[r] || (this.categories[r] = []);
						var n = this.categories[r].indexOf(e);
						return n == -1 && (n = this.categories[r].length, this.categories[r].push(e)),
						r + n
					},
					i.prototype.toCode = function () {
						var e = [],
						t = this.name + ".categories",
						r = this.categories;
						for (var n in r)
							if (r.hasOwnProperty(n))
								for (var i = r[n], a = 0; a < i.length; a++)
									e.push("var " + n + a + " = " + t + "['" + n + "'][" + a + "];");
						return e.join("\n")
					},
					a.compare = function (e, t) {
						if (e.anyType)
							return 1;
						if (t.anyType)
							return -1;
						if (v(e.types, "Object"))
							return 1;
						if (v(t.types, "Object"))
							return -1;
						if (e.hasConversions()) {
							if (t.hasConversions()) {
								var r,
								n,
								i;
								for (r = 0; r < e.conversions.length; r++)
									if (void 0 !== e.conversions[r]) {
										n = e.conversions[r];
										break
									}
								for (r = 0; r < t.conversions.length; r++)
									if (void 0 !== t.conversions[r]) {
										i = t.conversions[r];
										break
									}
								return M.conversions.indexOf(n) - M.conversions.indexOf(i)
							}
							return 1
						}
						if (t.hasConversions())
							return -1;
						var a,
						o;
						for (r = 0; r < M.types.length; r++)
							if (M.types[r].name === e.types[0]) {
								a = r;
								break
							}
						for (r = 0; r < M.types.length; r++)
							if (M.types[r].name === t.types[0]) {
								o = r;
								break
							}
						return a - o
					},
					a.prototype.overlapping = function (e) {
						for (var t = 0; t < this.types.length; t++)
							if (v(e.types, this.types[t]))
								return !0;
						return !1
					},
					a.prototype.matches = function (e) {
						return this.anyType || e.anyType || this.overlapping(e)
					},
					a.prototype.clone = function () {
						var e = new a(this.types.slice(), this.varArgs);
						return e.conversions = this.conversions.slice(),
						e
					},
					a.prototype.hasConversions = function () {
						return this.conversions.length > 0
					},
					a.prototype.contains = function (e) {
						for (var t = 0; t < this.types.length; t++)
							if (e[this.types[t]])
								return !0;
						return !1
					},
					a.prototype.toString = function (e) {
						for (var t = [], r = {}, n = 0; n < this.types.length; n++) {
							var i = this.conversions[n],
							a = e && i ? i.to : this.types[n];
							a in r || (r[a] = !0, t.push(a))
						}
						return (this.varArgs ? "..." : "") + t.join("|")
					},
					o.prototype.clone = function () {
						return new o(this.params.slice(), this.fn)
					},
					o.prototype.expand = function () {
						function e(r, n) {
							if (n.length < r.params.length) {
								var i,
								s,
								u,
								c = r.params[n.length];
								if (c.varArgs) {
									for (s = c.clone(), i = 0; i < M.conversions.length; i++)
										if (u = M.conversions[i], !v(c.types, u.from) && v(c.types, u.to)) {
											var f = s.types.length;
											s.types[f] = u.from,
											s.conversions[f] = u
										}
									e(r, n.concat(s))
								} else {
									for (i = 0; i < c.types.length; i++)
										e(r, n.concat(new a(c.types[i])));
									for (i = 0; i < M.conversions.length; i++)
										u = M.conversions[i], !v(c.types, u.from) && v(c.types, u.to) && (s = new a(u.from), s.conversions[0] = u, e(r, n.concat(s)))
								}
							} else
								t.push(new o(n, r.fn))
						}
						var t = [];
						return e(this, []),
						t
					},
					o.compare = function (e, t) {
						if (e.params.length > t.params.length)
							return 1;
						if (e.params.length < t.params.length)
							return -1;
						var r,
						n = e.params.length,
						i = 0,
						o = 0;
						for (r = 0; r < n; r++)
							e.params[r].hasConversions() && i++, t.params[r].hasConversions() && o++;
						if (i > o)
							return 1;
						if (i < o)
							return -1;
						for (r = 0; r < e.params.length; r++) {
							var s = a.compare(e.params[r], t.params[r]);
							if (0 !== s)
								return s
						}
						return 0
					},
					o.prototype.hasConversions = function () {
						for (var e = 0; e < this.params.length; e++)
							if (this.params[e].hasConversions())
								return !0;
						return !1
					},
					o.prototype.ignore = function () {
						for (var e = {}, t = 0; t < M.ignore.length; t++)
							e[M.ignore[t]] = !0;
						for (t = 0; t < this.params.length; t++)
							if (this.params[t].contains(e))
								return !0;
						return !1
					},
					o.prototype.paramsStartWith = function (e) {
						if (0 === e.length)
							return !0;
						for (var t = g(this.params), r = g(e), n = 0; n < e.length; n++) {
							var i = this.params[n] || (t.varArgs ? t : null),
							a = e[n] || (r.varArgs ? r : null);
							if (!i || !a || !i.matches(a))
								return !1
						}
						return !0
					},
					o.prototype.toCode = function (e, t) {
						for (var r = [], n = new Array(this.params.length), i = 0; i < this.params.length; i++) {
							var a = this.params[i],
							o = a.conversions[0];
							a.varArgs ? n[i] = "varArgs" : o ? n[i] = e.add(o.convert, "convert") + "(arg" + i + ")" : n[i] = "arg" + i
						}
						var s = this.fn ? e.add(this.fn, "signature") : void 0;
						return s ? t + "return " + s + "(" + n.join(", ") + "); // signature: " + this.params.join(", ") : r.join("\n")
					},
					o.prototype.toString = function () {
						return this.params.join(", ")
					},
					s.prototype.toCode = function (e, r) {
						var n = [];
						if (this.param) {
							var i = this.path.length - 1,
							a = this.param.conversions[0],
							o = "// type: " + (a ? a.from + " (convert to " + a.to + ")" : this.param);
							if (this.param.varArgs)
								if (this.param.anyType)
									n.push(r + "if (arguments.length > " + i + ") {"), n.push(r + "  var varArgs = [];"), n.push(r + "  for (var i = " + i + "; i < arguments.length; i++) {"), n.push(r + "    varArgs.push(arguments[i]);"), n.push(r + "  }"), n.push(this.signature.toCode(e, r + "  ")), n.push(r + "}");
								else {
									for (var s = function (r, n) {
										for (var i = [], a = 0; a < r.length; a++)
											i[a] = e.add(t(r[a]), "test") + "(" + n + ")";
										return i.join(" || ")
									}
										.bind(this), u = this.param.types, c = [], f = 0; f < u.length; f++)
										void 0 === this.param.conversions[f] && c.push(u[f]);
									n.push(r + "if (" + s(u, "arg" + i) + ") { " + o),
									n.push(r + "  var varArgs = [arg" + i + "];"),
									n.push(r + "  for (var i = " + (i + 1) + "; i < arguments.length; i++) {"),
									n.push(r + "    if (" + s(c, "arguments[i]") + ") {"),
									n.push(r + "      varArgs.push(arguments[i]);");
									for (var f = 0; f < u.length; f++) {
										var l = this.param.conversions[f];
										if (l) {
											var p = e.add(t(u[f]), "test"),
											h = e.add(l.convert, "convert");
											n.push(r + "    }"),
											n.push(r + "    else if (" + p + "(arguments[i])) {"),
											n.push(r + "      varArgs.push(" + h + "(arguments[i]));")
										}
									}
									n.push(r + "    } else {"),
									n.push(r + "      throw createError(name, arguments.length, i, arguments[i], '" + c.join(",") + "');"),
									n.push(r + "    }"),
									n.push(r + "  }"),
									n.push(this.signature.toCode(e, r + "  ")),
									n.push(r + "}")
								}
							else if (this.param.anyType)
								n.push(r + "// type: any"), n.push(this._innerCode(e, r));
							else {
								var m = this.param.types[0],
								p = "any" !== m ? e.add(t(m), "test") : null;
								n.push(r + "if (" + p + "(arg" + i + ")) { " + o),
								n.push(this._innerCode(e, r + "  ")),
								n.push(r + "}")
							}
						} else
							n.push(this._innerCode(e, r));
						return n.join("\n")
					},
					s.prototype._innerCode = function (e, t) {
						var r,
						n = [];
						for (this.signature && (n.push(t + "if (arguments.length === " + this.path.length + ") {"), n.push(this.signature.toCode(e, t + "  ")), n.push(t + "}")), r = 0; r < this.childs.length; r++)
							n.push(this.childs[r].toCode(e, t));
						if (!this.fallThrough || this.param && this.param.anyType) {
							var i = this._exceptions(e, t);
							i && n.push(i)
						}
						return n.join("\n")
					},
					s.prototype._exceptions = function (e, t) {
						var r = this.path.length;
						if (0 === this.childs.length)
							return [t + "if (arguments.length > " + r + ") {", t + "  throw createError(name, arguments.length, " + r + ", arguments[" + r + "]);", t + "}"].join("\n");
						for (var n = {}, i = [], a = 0; a < this.childs.length; a++) {
							var o = this.childs[a];
							if (o.param)
								for (var s = 0; s < o.param.types.length; s++) {
									var u = o.param.types[s];
									u in n || o.param.conversions[s] || (n[u] = !0, i.push(u))
								}
						}
						return t + "throw createError(name, arguments.length, " + r + ", arguments[" + r + "], '" + i.join(",") + "');"
					};
					var w = [{
							name: "number",
							test: function (e) {
								return "number" == typeof e
							}
						}, {
							name: "string",
							test: function (e) {
								return "string" == typeof e
							}
						}, {
							name: "boolean",
							test: function (e) {
								return "boolean" == typeof e
							}
						}, {
							name: "Function",
							test: function (e) {
								return "function" == typeof e
							}
						}, {
							name: "Array",
							test: Array.isArray
						}, {
							name: "Date",
							test: function (e) {
								return e instanceof Date
							}
						}, {
							name: "RegExp",
							test: function (e) {
								return e instanceof RegExp
							}
						}, {
							name: "Object",
							test: function (e) {
								return "object" == typeof e
							}
						}, {
							name: "null",
							test: function (e) {
								return null === e
							}
						}, {
							name: "undefined",
							test: function (e) {
								return void 0 === e
							}
						}
					],
					b = {},
					N = [],
					E = [],
					M = {
						config: b,
						types: w,
						conversions: N,
						ignore: E
					};
					return M = h("typed", {
							Object: function (e) {
								var t = [];
								for (var n in e)
									e.hasOwnProperty(n) && t.push(e[n]);
								var i = r(t);
								return h(i, e)
							},
							"string, Object": h,
							"...Function": function (e) {
								for (var t, n = r(e), i = {}, a = 0; a < e.length; a++) {
									var o = e[a];
									if ("object" != typeof o.signatures)
										throw t = new TypeError("Function is no typed-function (index: " + a + ")"), t.data = {
											index: a
										},
									t;
									for (var s in o.signatures)
										if (o.signatures.hasOwnProperty(s))
											if (i.hasOwnProperty(s)) {
												if (o.signatures[s] !== i[s])
													throw t = new Error('Signature "' + s + '" is defined twice'), t.data = {
														signature: s
													},
												t
											} else
												i[s] = o.signatures[s]
								}
								return h(n, i)
							}
						}),
					M.config = b,
					M.types = w,
					M.conversions = N,
					M.ignore = E,
					M.create = e,
					M.find = y,
					M.convert = x,
					M.addType = function (e) {
						if (!e || "string" != typeof e.name || "function" != typeof e.test)
							throw new TypeError("Object with properties {name: string, test: function} expected");
						M.types.push(e)
					},
					M.addConversion = function (e) {
						if (!e || "string" != typeof e.from || "string" != typeof e.to || "function" != typeof e.convert)
							throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");
						M.conversions.push(e)
					},
					M
				}
				return e()
			})
		}, function (e, t) {
			function r() {}
			r.prototype = {
				on: function (e, t, r) {
					var n = this.e || (this.e = {});
					return (n[e] || (n[e] = [])).push({
						fn: t,
						ctx: r
					}),
					this
				},
				once: function (e, t, r) {
					function n() {
						i.off(e, n),
						t.apply(r, arguments)
					}
					var i = this;
					return n._ = t,
					this.on(e, n, r)
				},
				emit: function (e) {
					var t = [].slice.call(arguments, 1),
					r = ((this.e || (this.e = {}))[e] || []).slice(),
					n = 0,
					i = r.length;
					for (n; n < i; n++)
						r[n].fn.apply(r[n].ctx, t);
					return this
				},
				off: function (e, t) {
					var r = this.e || (this.e = {}),
					n = r[e],
					i = [];
					if (n && t)
						for (var a = 0, o = n.length; a < o; a++)
							n[a].fn !== t && n[a].fn._ !== t && i.push(n[a]);
					return i.length ? r[e] = i : delete r[e],
					this
				}
			},
			e.exports = r
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, u) {
				function c(e, t) {
					var r = arguments.length;
					if (1 !== r && 2 !== r)
						throw new s("import", r, 1, 2);
					if (t || (t = {}), a(e))
						h(e, t);
					else if (Array.isArray(e))
						e.forEach(function (e) {
							c(e, t)
						});
					else if ("object" == typeof e) {
						for (var n in e)
							if (e.hasOwnProperty(n)) {
								var i = e[n];
								m(i) ? f(n, i, t) : a(e) ? h(e, t) : c(i, t)
							}
					} else if (!t.silent)
						throw new TypeError("Factory, Object, or Array expected")
				}
				function f(e, t, r) {
					if (r.wrap && "function" == typeof t && (t = p(t)), d(u[e]) && d(t))
						return t = r.override ? n(e, t.signatures) : n(u[e], t), u[e] = t, l(e, t), void u.emit("import", e, function () {
							return t
						});
					if (void 0 === u[e] || r.override)
						return u[e] = t, l(e, t), void u.emit("import", e, function () {
							return t
						});
					if (!r.silent)
						throw new Error('Cannot import "' + e + '": already exists')
				}
				function l(e, t) {
					t && "function" == typeof t.transform ? (u.expression.transform[e] = t.transform, v(e) && (u.expression.mathWithTransform[e] = t.transform)) : (delete u.expression.transform[e], v(e) && (u.expression.mathWithTransform[e] = t))
				}
				function p(e) {
					var t = function () {
						for (var t = [], r = 0, n = arguments.length; r < n; r++) {
							var i = arguments[r];
							t[r] = i && i.valueOf()
						}
						return e.apply(u, t)
					};
					return e.transform && (t.transform = e.transform),
					t
				}
				function h(e, t) {
					if ("string" == typeof e.name) {
						var a = e.name,
						s = a in u.expression.transform,
						c = e.path ? o(u, e.path) : u,
						f = c.hasOwnProperty(a) ? c[a] : void 0,
						l = function () {
							var i = r(e);
							if (i && "function" == typeof i.transform)
								throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');
							if (d(f) && d(i))
								return t.override || (i = n(f, i)), i;
							if (void 0 === f || t.override)
								return i;
							if (!t.silent)
								throw new Error('Cannot import "' + a + '": already exists')
						};
						e.lazy !== !1 ? (i(c, a, l), s || ("expression.transform" === e.path || g(e)) && i(u.expression.mathWithTransform, a, l)) : (c[a] = l(), s || ("expression.transform" === e.path || g(e)) && (u.expression.mathWithTransform[a] = l())),
						u.emit("import", a, l, e.path)
					} else
						r(e)
				}
				function m(t) {
					return "function" == typeof t || "number" == typeof t || "string" == typeof t || "boolean" == typeof t || null === t || t && e.isUnit(t) || t && e.isComplex(t) || t && e.isBigNumber(t) || t && e.isFraction(t) || t && e.isMatrix(t) || t && Array.isArray(t)
				}
				function d(e) {
					return "function" == typeof e && "object" == typeof e.signatures
				}
				function v(e) {
					return !y.hasOwnProperty(e)
				}
				function g(e) {
					return void 0 === e.path && !y.hasOwnProperty(e.name)
				}
				var y = {
					expression: !0,
					type: !0,
					docs: !0,
					error: !0,
					json: !0,
					chain: !0
				};
				return c
			}
			var i = r(5).lazy,
			a = r(5).isFactory,
			o = r(5).traverse,
			s = r(50);
			t.math = !0,
			t.name = "import",
			t.factory = n,
			t.lazy = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, i) {
				function a(e) {
					if (e) {
						var r = s.map(t, s.clone);
						o(e, "matrix", u),
						o(e, "number", c),
						s.deepExtend(t, e);
						var n = s.map(t, s.clone),
						a = s.map(e, s.clone);
						return i.emit("config", n, r, a),
						n
					}
					return s.map(t, s.clone)
				}
				var u = ["Matrix", "Array"],
				c = ["number", "BigNumber", "Fraction"];
				return a.MATRIX = u,
				a.NUMBER = c,
				a
			}
			function i(e, t) {
				return e.indexOf(t) !== -1
			}
			function a(e, t) {
				return e.map(function (e) {
					return e.toLowerCase()
				}).indexOf(t.toLowerCase())
			}
			function o(e, t, r) {
				if (void 0 !== e[t] && !i(r, e[t])) {
					var n = a(r, e[t]);
					n !== -1 ? (console.warn('Warning: Wrong casing for configuration option "' + t + '", should be "' + r[n] + '" instead of "' + e[t] + '".'), e[t] = r[n]) : console.warn('Warning: Unknown value "' + e[t] + '" for configuration option "' + t + '". Available options: ' + r.map(JSON.stringify).join(", ") + ".")
				}
			}
			var s = r(5);
			t.name = "config",
			t.math = !0,
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(157), r(189), r(191), r(403), r(546), r(548)]
		}, function (e, t, r) {
			e.exports = [r(158), r(162), r(163), r(167), r(170), r(173), r(74), r(181), r(182), r(183)]
		}, function (e, t, r) {
			e.exports = [r(159), r(161)]
		}, function (e, t, r) {
			function n(e, t, r, n, a) {
				var o = i.clone({
						precision: t.precision
					});
				return o.prototype.type = "BigNumber",
				o.prototype.isBigNumber = !0,
				o.prototype.toJSON = function () {
					return {
						mathjs: "BigNumber",
						value: this.toString()
					}
				},
				o.fromJSON = function (e) {
					return new o(e.value)
				},
				a.on("config", function (e, t) {
					e.precision !== t.precision && o.config({
						precision: e.precision
					})
				}),
				o
			}
			var i = r(160);
			t.name = "BigNumber",
			t.path = "type",
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			var n;
			!function (i) {
				"use strict";
				function a(e) {
					var t,
					r,
					n,
					i = e.length - 1,
					a = "",
					o = e[0];
					if (i > 0) {
						for (a += o, t = 1; t < i; t++)
							n = e[t] + "", r = Be - n.length, r && (a += v(r)), a += n;
						o = e[t],
						n = o + "",
						r = Be - n.length,
						r && (a += v(r))
					} else if (0 === o)
						return "0";
					for (; o % 10 === 0; )
						o /= 10;
					return a + o
				}
				function o(e, t, r) {
					if (e !== ~~e || e < t || e > r)
						throw Error(Me + e)
				}
				function s(e, t, r, n) {
					var i,
					a,
					o,
					s;
					for (a = e[0]; a >= 10; a /= 10)
						--t;
					return --t < 0 ? (t += Be, i = 0) : (i = Math.ceil((t + 1) / Be), t %= Be),
					a = _e(10, Be - t),
					s = e[i] % a | 0,
					null == n ? t < 3 ? (0 == t ? s = s / 100 | 0 : 1 == t && (s = s / 10 | 0), o = r < 4 && 99999 == s || r > 3 && 49999 == s || 5e4 == s || 0 == s) : o = (r < 4 && s + 1 == a || r > 3 && s + 1 == a / 2) && (e[i + 1] / a / 100 | 0) == _e(10, t - 2) - 1 || (s == a / 2 || 0 == s) && 0 == (e[i + 1] / a / 100 | 0) : t < 4 ? (0 == t ? s = s / 1e3 | 0 : 1 == t ? s = s / 100 | 0 : 2 == t && (s = s / 10 | 0), o = (n || r < 4) && 9999 == s || !n && r > 3 && 4999 == s) : o = ((n || r < 4) && s + 1 == a || !n && r > 3 && s + 1 == a / 2) && (e[i + 1] / a / 1e3 | 0) == _e(10, t - 3) - 1,
					o
				}
				function u(e, t, r) {
					for (var n, i, a = [0], o = 0, s = e.length; o < s; ) {
						for (i = a.length; i--; )
							a[i] *= t;
						for (a[0] += ye.indexOf(e.charAt(o++)), n = 0; n < a.length; n++)
							a[n] > r - 1 && (void 0 === a[n + 1] && (a[n + 1] = 0), a[n + 1] += a[n] / r | 0, a[n] %= r)
					}
					return a.reverse()
				}
				function c(e, t) {
					var r,
					n,
					i = t.d.length;
					i < 32 ? (r = Math.ceil(i / 3), n = Math.pow(4, -r).toString()) : (r = 16, n = "2.3283064365386962890625e-10"),
					e.precision += r,
					t = O(e, 1, t.times(n), new e(1));
					for (var a = r; a--; ) {
						var o = t.times(t);
						t = o.times(o).minus(o).times(8).plus(1)
					}
					return e.precision -= r,
					t
				}
				function f(e, t, r, n) {
					var i,
					a,
					o,
					s,
					u,
					c,
					f,
					l,
					p,
					h = e.constructor;
					e: if (null != t) {
						if (l = e.d, !l)
							return e;
						for (i = 1, s = l[0]; s >= 10; s /= 10)
							i++;
						if (a = t - i, a < 0)
							a += Be, o = t, f = l[p = 0], u = f / _e(10, i - o - 1) % 10 | 0;
						else if (p = Math.ceil((a + 1) / Be), s = l.length, p >= s) {
							if (!n)
								break e;
							for (; s++ <= p; )
								l.push(0);
							f = u = 0,
							i = 1,
							a %= Be,
							o = a - Be + 1
						} else {
							for (f = s = l[p], i = 1; s >= 10; s /= 10)
								i++;
							a %= Be,
							o = a - Be + i,
							u = o < 0 ? 0 : f / _e(10, i - o - 1) % 10 | 0
						}
						if (n = n || t < 0 || void 0 !== l[p + 1] || (o < 0 ? f : f % _e(10, i - o - 1)), c = r < 4 ? (u || n) && (0 == r || r == (e.s < 0 ? 3 : 2)) : u > 5 || 5 == u && (4 == r || n || 6 == r && (a > 0 ? o > 0 ? f / _e(10, i - o) : 0 : l[p - 1]) % 10 & 1 || r == (e.s < 0 ? 8 : 7)), t < 1 || !l[0])
							return l.length = 0, c ? (t -= e.e + 1, l[0] = _e(10, (Be - t % Be) % Be), e.e = -t || 0) : l[0] = e.e = 0, e;
						if (0 == a ? (l.length = p, s = 1, p--) : (l.length = p + 1, s = _e(10, Be - a), l[p] = o > 0 ? (f / _e(10, i - o) % _e(10, o) | 0) * s : 0), c)
							for (; ; ) {
								if (0 == p) {
									for (a = 1, o = l[0]; o >= 10; o /= 10)
										a++;
									for (o = l[0] += s, s = 1; o >= 10; o /= 10)
										s++;
									a != s && (e.e++, l[0] == Ie && (l[0] = 1));
									break
								}
								if (l[p] += s, l[p] != Ie)
									break;
								l[p--] = 0,
								s = 1
							}
						for (a = l.length; 0 === l[--a]; )
							l.pop()
					}
					return Ne && (e.e > h.maxE ? (e.d = null, e.e = NaN) : e.e < h.minE && (e.e = 0, e.d = [0])),
					e
				}
				function l(e, t, r) {
					if (!e.isFinite())
						return N(e);
					var n,
					i = e.e,
					o = a(e.d),
					s = o.length;
					return t ? (r && (n = r - s) > 0 ? o = o.charAt(0) + "." + o.slice(1) + v(n) : s > 1 && (o = o.charAt(0) + "." + o.slice(1)), o = o + (e.e < 0 ? "e" : "e+") + e.e) : i < 0 ? (o = "0." + v(-i - 1) + o, r && (n = r - s) > 0 && (o += v(n))) : i >= s ? (o += v(i + 1 - s), r && (n = r - i - 1) > 0 && (o = o + "." + v(n))) : ((n = i + 1) < s && (o = o.slice(0, n) + "." + o.slice(n)), r && (n = r - s) > 0 && (i + 1 === s && (o += "."), o += v(n))),
					o
				}
				function p(e, t) {
					var r = e[0];
					for (t *= Be; r >= 10; r /= 10)
						t++;
					return t
				}
				function h(e, t, r) {
					if (t > Re)
						throw Ne = !0, r && (e.precision = r), Error(Ae);
					return f(new e(xe), t, 1, !0)
				}
				function m(e, t, r) {
					if (t > Ue)
						throw Error(Ae);
					return f(new e(we), t, r, !0)
				}
				function d(e) {
					var t = e.length - 1,
					r = t * Be + 1;
					if (t = e[t]) {
						for (; t % 10 == 0; t /= 10)
							r--;
						for (t = e[0]; t >= 10; t /= 10)
							r++
					}
					return r
				}
				function v(e) {
					for (var t = ""; e--; )
						t += "0";
					return t
				}
				function g(e, t, r, n) {
					var i,
					a = new e(1),
					o = Math.ceil(n / Be + 4);
					for (Ne = !1; ; ) {
						if (r % 2 && (a = a.times(t), S(a.d, o) && (i = !0)), r = Te(r / 2), 0 === r) {
							r = a.d.length - 1,
							i && 0 === a.d[r] && ++a.d[r];
							break
						}
						t = t.times(t),
						S(t.d, o)
					}
					return Ne = !0,
					a
				}
				function y(e) {
					return 1 & e.d[e.d.length - 1]
				}
				function x(e, t, r) {
					for (var n, i = new e(t[0]), a = 0; ++a < t.length; ) {
						if (n = new e(t[a]), !n.s) {
							i = n;
							break
						}
						i[r](n) && (i = n)
					}
					return i
				}
				function w(e, t) {
					var r,
					n,
					i,
					o,
					u,
					c,
					l,
					p = 0,
					h = 0,
					m = 0,
					d = e.constructor,
					v = d.rounding,
					g = d.precision;
					if (!e.d || !e.d[0] || e.e > 17)
						return new d(e.d ? e.d[0] ? e.s < 0 ? 0 : 1 / 0 : 1 : e.s ? e.s < 0 ? 0 : e : NaN);
					for (null == t ? (Ne = !1, l = g) : l = t, c = new d(.03125); e.e > -2; )
						e = e.times(c), m += 5;
					for (n = Math.log(_e(2, m)) / Math.LN10 * 2 + 5 | 0, l += n, r = o = u = new d(1), d.precision = l; ; ) {
						if (o = f(o.times(e), l, 1), r = r.times(++h), c = u.plus(Le(o, r, l, 1)), a(c.d).slice(0, l) === a(u.d).slice(0, l)) {
							for (i = m; i--; )
								u = f(u.times(u), l, 1);
							if (null != t)
								return d.precision = g, u;
							if (!(p < 3 && s(u.d, l - n, v, p)))
								return f(u, d.precision = g, v, Ne = !0);
							d.precision = l += 10,
							r = o = c = new d(1),
							h = 0,
							p++
						}
						u = c
					}
				}
				function b(e, t) {
					var r,
					n,
					i,
					o,
					u,
					c,
					l,
					p,
					m,
					d,
					v,
					g = 1,
					y = 10,
					x = e,
					w = x.d,
					N = x.constructor,
					E = N.rounding,
					M = N.precision;
					if (x.s < 0 || !w || !w[0] || !x.e && 1 == w[0] && 1 == w.length)
						return new N(w && !w[0] ? -1 / 0 : 1 != x.s ? NaN : w ? 0 : x);
					if (null == t ? (Ne = !1, m = M) : m = t, N.precision = m += y, r = a(w), n = r.charAt(0), !(Math.abs(o = x.e) < 15e14))
						return p = h(N, m + 2, M).times(o + ""), x = b(new N(n + "." + r.slice(1)), m - y).plus(p), N.precision = M, null == t ? f(x, M, E, Ne = !0) : x;
					for (; n < 7 && 1 != n || 1 == n && r.charAt(1) > 3; )
						x = x.times(e), r = a(x.d), n = r.charAt(0), g++;
					for (o = x.e, n > 1 ? (x = new N("0." + r), o++) : x = new N(n + "." + r.slice(1)), d = x, l = u = x = Le(x.minus(1), x.plus(1), m, 1), v = f(x.times(x), m, 1), i = 3; ; ) {
						if (u = f(u.times(v), m, 1), p = l.plus(Le(u, new N(i), m, 1)), a(p.d).slice(0, m) === a(l.d).slice(0, m)) {
							if (l = l.times(2), 0 !== o && (l = l.plus(h(N, m + 2, M).times(o + ""))), l = Le(l, new N(g), m, 1), null != t)
								return N.precision = M, l;
							if (!s(l.d, m - y, E, c))
								return f(l, N.precision = M, E, Ne = !0);
							N.precision = m += y,
							p = u = x = Le(d.minus(1), d.plus(1), m, 1),
							v = f(x.times(x), m, 1),
							i = c = 1
						}
						l = p,
						i += 2
					}
				}
				function N(e) {
					return String(e.s * e.s / 0)
				}
				function E(e, t) {
					var r,
					n,
					i;
					for ((r = t.indexOf(".")) > -1 && (t = t.replace(".", "")), (n = t.search(/e/i)) > 0 ? (r < 0 && (r = n), r += +t.slice(n + 1), t = t.substring(0, n)) : r < 0 && (r = t.length), n = 0; 48 === t.charCodeAt(n); n++);
					for (i = t.length; 48 === t.charCodeAt(i - 1); --i);
					if (t = t.slice(n, i)) {
						if (i -= n, e.e = r = r - n - 1, e.d = [], n = (r + 1) % Be,
							r < 0 && (n += Be), n < i) {
							for (n && e.d.push(+t.slice(0, n)), i -= Be; n < i; )
								e.d.push(+t.slice(n, n += Be));
							t = t.slice(n),
							n = Be - t.length
						} else
							n -= i;
						for (; n--; )
							t += "0";
						e.d.push(+t),
						Ne && (e.e > e.constructor.maxE ? (e.d = null, e.e = NaN) : e.e < e.constructor.minE && (e.e = 0, e.d = [0]))
					} else
						e.e = 0, e.d = [0];
					return e
				}
				function M(e, t) {
					var r,
					n,
					i,
					a,
					o,
					s,
					c,
					f,
					l;
					if ("Infinity" === t || "NaN" === t)
						return +t || (e.s = NaN), e.e = NaN, e.d = null, e;
					if (Ce.test(t))
						r = 16, t = t.toLowerCase();
					else if (Se.test(t))
						r = 2;
					else {
						if (!ze.test(t))
							throw Error(Me + t);
						r = 8
					}
					for (a = t.search(/p/i), a > 0 ? (c = +t.slice(a + 1), t = t.substring(2, a)) : t = t.slice(2), a = t.indexOf("."), o = a >= 0, n = e.constructor, o && (t = t.replace(".", ""), s = t.length, a = s - a, i = g(n, new n(r), a, 2 * a)), f = u(t, r, Ie), l = f.length - 1, a = l; 0 === f[a]; --a)
						f.pop();
					return a < 0 ? new n(0 * e.s) : (e.e = p(f, l), e.d = f, Ne = !1, o && (e = Le(e, i, 4 * s)), c && (e = e.times(Math.abs(c) < 54 ? Math.pow(2, c) : be.pow(2, c))), Ne = !0, e)
				}
				function A(e, t) {
					var r,
					n = t.d.length;
					if (n < 3)
						return O(e, 2, t, t);
					r = 1.4 * Math.sqrt(n),
					r = r > 16 ? 16 : 0 | r,
					t = t.times(Math.pow(5, -r)),
					t = O(e, 2, t, t);
					for (var i, a = new e(5), o = new e(16), s = new e(20); r--; )
						i = t.times(t), t = t.times(a.plus(i.times(o.times(i).minus(s))));
					return t
				}
				function O(e, t, r, n, i) {
					var a,
					o,
					s,
					u,
					c = 1,
					f = e.precision,
					l = Math.ceil(f / Be);
					for (Ne = !1, u = r.times(r), s = new e(n); ; ) {
						if (o = Le(s.times(u), new e(t++ * t++), f, 1), s = i ? n.plus(o) : n.minus(o), n = Le(o.times(u), new e(t++ * t++), f, 1), o = s.plus(n), void 0 !== o.d[l]) {
							for (a = l; o.d[a] === s.d[a] && a--; );
							if (a == -1)
								break
						}
						a = s,
						s = n,
						n = o,
						o = a,
						c++
					}
					return Ne = !0,
					o.d.length = l + 1,
					o
				}
				function T(e, t) {
					var r,
					n = t.s < 0,
					i = m(e, e.precision, 1),
					a = i.times(.5);
					if (t = t.abs(), t.lte(a))
						return de = n ? 4 : 1, t;
					if (r = t.divToInt(i), r.isZero())
						de = n ? 3 : 2;
					else {
						if (t = t.minus(r.times(i)), t.lte(a))
							return de = y(r) ? n ? 2 : 3 : n ? 4 : 1, t;
						de = y(r) ? n ? 1 : 4 : n ? 3 : 2
					}
					return t.minus(i).abs()
				}
				function _(e, t, r, n) {
					var i,
					a,
					s,
					c,
					f,
					p,
					h,
					m,
					d,
					v = e.constructor,
					g = void 0 !== r;
					if (g ? (o(r, 1, ge), void 0 === n ? n = v.rounding : o(n, 0, 8)) : (r = v.precision, n = v.rounding), e.isFinite()) {
						for (h = l(e), s = h.indexOf("."), g ? (i = 2, 16 == t ? r = 4 * r - 3 : 8 == t && (r = 3 * r - 2)) : i = t, s >= 0 && (h = h.replace(".", ""), d = new v(1), d.e = h.length - s, d.d = u(l(d), 10, i), d.e = d.d.length), m = u(h, 10, i), a = f = m.length; 0 == m[--f]; )
							m.pop();
						if (m[0]) {
							if (s < 0 ? a-- : (e = new v(e), e.d = m, e.e = a, e = Le(e, d, r, n, 0, i), m = e.d, a = e.e, p = me), s = m[r], c = i / 2, p = p || void 0 !== m[r + 1], p = n < 4 ? (void 0 !== s || p) && (0 === n || n === (e.s < 0 ? 3 : 2)) : s > c || s === c && (4 === n || p || 6 === n && 1 & m[r - 1] || n === (e.s < 0 ? 8 : 7)), m.length = r, p)
								for (; ++m[--r] > i - 1; )
									m[r] = 0, r || (++a, m.unshift(1));
							for (f = m.length; !m[f - 1]; --f);
							for (s = 0, h = ""; s < f; s++)
								h += ye.charAt(m[s]);
							if (g) {
								if (f > 1)
									if (16 == t || 8 == t) {
										for (s = 16 == t ? 4 : 3, --f; f % s; f++)
											h += "0";
										for (m = u(h, i, t), f = m.length; !m[f - 1]; --f);
										for (s = 1, h = "1."; s < f; s++)
											h += ye.charAt(m[s])
									} else
										h = h.charAt(0) + "." + h.slice(1);
								h = h + (a < 0 ? "p" : "p+") + a
							} else if (a < 0) {
								for (; ++a; )
									h = "0" + h;
								h = "0." + h
							} else if (++a > f)
								for (a -= f; a--; )
									h += "0";
							else
								a < f && (h = h.slice(0, a) + "." + h.slice(a))
						} else
							h = g ? "0p+0" : "0";
						h = (16 == t ? "0x" : 2 == t ? "0b" : 8 == t ? "0o" : "") + h
					} else
						h = N(e);
					return e.s < 0 ? "-" + h : h
				}
				function S(e, t) {
					if (e.length > t)
						return e.length = t, !0
				}
				function C(e) {
					return new this(e).abs()
				}
				function z(e) {
					return new this(e).acos()
				}
				function k(e) {
					return new this(e).acosh()
				}
				function I(e, t) {
					return new this(e).plus(t)
				}
				function B(e) {
					return new this(e).asin()
				}
				function P(e) {
					return new this(e).asinh()
				}
				function R(e) {
					return new this(e).atan()
				}
				function U(e) {
					return new this(e).atanh()
				}
				function q(e, t) {
					e = new this(e),
					t = new this(t);
					var r,
					n = this.precision,
					i = this.rounding,
					a = n + 4;
					return e.s && t.s ? e.d || t.d ? !t.d || e.isZero() ? (r = t.s < 0 ? m(this, n, i) : new this(0), r.s = e.s) : !e.d || t.isZero() ? (r = m(this, a, 1).times(.5), r.s = e.s) : t.s < 0 ? (this.precision = a, this.rounding = 1, r = this.atan(Le(e, t, a, 1)), t = m(this, a, 1), this.precision = n, this.rounding = i, r = e.s < 0 ? r.minus(t) : r.plus(t)) : r = this.atan(Le(e, t, a, 1)) : (r = m(this, a, 1).times(t.s > 0 ? .25 : .75), r.s = e.s) : r = new this(NaN),
					r
				}
				function L(e) {
					return new this(e).cbrt()
				}
				function j(e) {
					return f(e = new this(e), e.e + 1, 2)
				}
				function F(e) {
					if (!e || "object" != typeof e)
						throw Error(Ee + "Object expected");
					var t,
					r,
					n,
					i = ["precision", 1, ge, "rounding", 0, 8, "toExpNeg", -ve, 0, "toExpPos", 0, ve, "maxE", 0, ve, "minE", -ve, 0, "modulo", 0, 9];
					for (t = 0; t < i.length; t += 3)
						if (void 0 !== (n = e[r = i[t]])) {
							if (!(Te(n) === n && n >= i[t + 1] && n <= i[t + 2]))
								throw Error(Me + r + ": " + n);
							this[r] = n
						}
					if (void 0 !== (n = e[r = "crypto"])) {
						if (n !== !0 && n !== !1 && 0 !== n && 1 !== n)
							throw Error(Me + r + ": " + n);
						if (n) {
							if ("undefined" == typeof crypto || !crypto || !crypto.getRandomValues && !crypto.randomBytes)
								throw Error(Oe);
							this[r] = !0
						} else
							this[r] = !1
					}
					return this
				}
				function D(e) {
					return new this(e).cos()
				}
				function H(e) {
					return new this(e).cosh()
				}
				function $(e) {
					function t(e) {
						var r,
						n,
						i,
						a = this;
						if (!(a instanceof t))
							return new t(e);
						if (a.constructor = t, e instanceof t)
							return a.s = e.s, a.e = e.e, void(a.d = (e = e.d) ? e.slice() : e);
						if (i = typeof e, "number" === i) {
							if (0 === e)
								return a.s = 1 / e < 0 ? -1 : 1, a.e = 0, void(a.d = [0]);
							if (e < 0 ? (e = -e, a.s = -1) : a.s = 1, e === ~~e && e < 1e7) {
								for (r = 0, n = e; n >= 10; n /= 10)
									r++;
								return a.e = r,
								void(a.d = [e])
							}
							return 0 * e !== 0 ? (e || (a.s = NaN), a.e = NaN, void(a.d = null)) : E(a, e.toString())
						}
						if ("string" !== i)
							throw Error(Me + e);
						return 45 === e.charCodeAt(0) ? (e = e.slice(1), a.s = -1) : a.s = 1,
						ke.test(e) ? E(a, e) : M(a, e)
					}
					var r,
					n,
					i;
					if (t.prototype = qe, t.ROUND_UP = 0, t.ROUND_DOWN = 1, t.ROUND_CEIL = 2, t.ROUND_FLOOR = 3, t.ROUND_HALF_UP = 4, t.ROUND_HALF_DOWN = 5, t.ROUND_HALF_EVEN = 6, t.ROUND_HALF_CEIL = 7, t.ROUND_HALF_FLOOR = 8, t.EUCLID = 9, t.config = t.set = F, t.clone = $, t.abs = C, t.acos = z, t.acosh = k, t.add = I, t.asin = B, t.asinh = P, t.atan = R, t.atanh = U, t.atan2 = q, t.cbrt = L, t.ceil = j, t.cos = D, t.cosh = H, t.div = G, t.exp = Z, t.floor = V, t.hypot = W, t.ln = Y, t.log = X, t.log10 = Q, t.log2 = J, t.max = K, t.min = ee, t.mod = te, t.mul = re, t.pow = ne, t.random = ie, t.round = ae, t.sign = oe, t.sin = se, t.sinh = ue, t.sqrt = ce, t.sub = fe, t.tan = le, t.tanh = pe, t.trunc = he, void 0 === e && (e = {}), e)
						for (i = ["precision", "rounding", "toExpNeg", "toExpPos", "maxE", "minE", "modulo", "crypto"], r = 0; r < i.length; )
							e.hasOwnProperty(n = i[r++]) || (e[n] = this[n]);
					return t.config(e),
					t
				}
				function G(e, t) {
					return new this(e).div(t)
				}
				function Z(e) {
					return new this(e).exp()
				}
				function V(e) {
					return f(e = new this(e), e.e + 1, 3)
				}
				function W() {
					var e,
					t,
					r = new this(0);
					for (Ne = !1, e = 0; e < arguments.length; )
						if (t = new this(arguments[e++]), t.d)
							r.d && (r = r.plus(t.times(t)));
						else {
							if (t.s)
								return Ne = !0, new this(1 / 0);
							r = t
						}
					return Ne = !0,
					r.sqrt()
				}
				function Y(e) {
					return new this(e).ln()
				}
				function X(e, t) {
					return new this(e).log(t)
				}
				function J(e) {
					return new this(e).log(2)
				}
				function Q(e) {
					return new this(e).log(10)
				}
				function K() {
					return x(this, arguments, "lt")
				}
				function ee() {
					return x(this, arguments, "gt")
				}
				function te(e, t) {
					return new this(e).mod(t)
				}
				function re(e, t) {
					return new this(e).mul(t)
				}
				function ne(e, t) {
					return new this(e).pow(t)
				}
				function ie(e) {
					var t,
					r,
					n,
					i,
					a = 0,
					s = new this(1),
					u = [];
					if (void 0 === e ? e = this.precision : o(e, 1, ge), n = Math.ceil(e / Be), this.crypto)
						if (crypto.getRandomValues)
							for (t = crypto.getRandomValues(new Uint32Array(n)); a < n; )
								i = t[a], i >= 429e7 ? t[a] = crypto.getRandomValues(new Uint32Array(1))[0] : u[a++] = i % 1e7;
						else {
							if (!crypto.randomBytes)
								throw Error(Oe);
							for (t = crypto.randomBytes(n *= 4); a < n; )
								i = t[a] + (t[a + 1] << 8) + (t[a + 2] << 16) + ((127 & t[a + 3]) << 24), i >= 214e7 ? crypto.randomBytes(4).copy(t, a) : (u.push(i % 1e7), a += 4);
							a = n / 4
						}
					else
						for (; a < n; )
							u[a++] = 1e7 * Math.random() | 0;
					for (n = u[--a], e %= Be, n && e && (i = _e(10, Be - e), u[a] = (n / i | 0) * i); 0 === u[a]; a--)
						u.pop();
					if (a < 0)
						r = 0, u = [0];
					else {
						for (r = -1; 0 === u[0]; r -= Be)
							u.shift();
						for (n = 1, i = u[0]; i >= 10; i /= 10)
							n++;
						n < Be && (r -= Be - n)
					}
					return s.e = r,
					s.d = u,
					s
				}
				function ae(e) {
					return f(e = new this(e), e.e + 1, this.rounding)
				}
				function oe(e) {
					return e = new this(e),
					e.d ? e.d[0] ? e.s : 0 * e.s : e.s || NaN
				}
				function se(e) {
					return new this(e).sin()
				}
				function ue(e) {
					return new this(e).sinh()
				}
				function ce(e) {
					return new this(e).sqrt()
				}
				function fe(e, t) {
					return new this(e).sub(t)
				}
				function le(e) {
					return new this(e).tan()
				}
				function pe(e) {
					return new this(e).tanh()
				}
				function he(e) {
					return f(e = new this(e), e.e + 1, 1)
				}
				var me,
				de,
				ve = 9e15,
				ge = 1e9,
				ye = "0123456789abcdef",
				xe = "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",
				we = "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",
				be = {
					precision: 20,
					rounding: 4,
					modulo: 1,
					toExpNeg: -7,
					toExpPos: 21,
					minE: -ve,
					maxE: ve,
					crypto: !1
				},
				Ne = !0,
				Ee = "[DecimalError] ",
				Me = Ee + "Invalid argument: ",
				Ae = Ee + "Precision limit exceeded",
				Oe = Ee + "crypto unavailable",
				Te = Math.floor,
				_e = Math.pow,
				Se = /^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,
				Ce = /^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,
				ze = /^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,
				ke = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,
				Ie = 1e7,
				Be = 7,
				Pe = 9007199254740991,
				Re = xe.length - 1,
				Ue = we.length - 1,
				qe = {};
				qe.absoluteValue = qe.abs = function () {
					var e = new this.constructor(this);
					return e.s < 0 && (e.s = 1),
					f(e)
				},
				qe.ceil = function () {
					return f(new this.constructor(this), this.e + 1, 2)
				},
				qe.comparedTo = qe.cmp = function (e) {
					var t,
					r,
					n,
					i,
					a = this,
					o = a.d,
					s = (e = new a.constructor(e)).d,
					u = a.s,
					c = e.s;
					if (!o || !s)
						return u && c ? u !== c ? u : o === s ? 0 : !o ^ u < 0 ? 1 : -1 : NaN;
					if (!o[0] || !s[0])
						return o[0] ? u : s[0] ? -c : 0;
					if (u !== c)
						return u;
					if (a.e !== e.e)
						return a.e > e.e ^ u < 0 ? 1 : -1;
					for (n = o.length, i = s.length, t = 0, r = n < i ? n : i; t < r; ++t)
						if (o[t] !== s[t])
							return o[t] > s[t] ^ u < 0 ? 1 : -1;
					return n === i ? 0 : n > i ^ u < 0 ? 1 : -1
				},
				qe.cosine = qe.cos = function () {
					var e,
					t,
					r = this,
					n = r.constructor;
					return r.d ? r.d[0] ? (e = n.precision, t = n.rounding, n.precision = e + Math.max(r.e, r.sd()) + Be, n.rounding = 1, r = c(n, T(n, r)), n.precision = e, n.rounding = t, f(2 == de || 3 == de ? r.neg() : r, e, t, !0)) : new n(1) : new n(NaN)
				},
				qe.cubeRoot = qe.cbrt = function () {
					var e,
					t,
					r,
					n,
					i,
					o,
					s,
					u,
					c,
					l,
					p = this,
					h = p.constructor;
					if (!p.isFinite() || p.isZero())
						return new h(p);
					for (Ne = !1, o = p.s * Math.pow(p.s * p, 1 / 3), o && Math.abs(o) != 1 / 0 ? n = new h(o.toString()) : (r = a(p.d), e = p.e, (o = (e - r.length + 1) % 3) && (r += 1 == o || o == -2 ? "0" : "00"), o = Math.pow(r, 1 / 3), e = Te((e + 1) / 3) - (e % 3 == (e < 0 ? -1 : 2)), o == 1 / 0 ? r = "5e" + e : (r = o.toExponential(), r = r.slice(0, r.indexOf("e") + 1) + e), n = new h(r), n.s = p.s), s = (e = h.precision) + 3; ; )
						if (u = n, c = u.times(u).times(u), l = c.plus(p), n = Le(l.plus(p).times(u), l.plus(c), s + 2, 1), a(u.d).slice(0, s) === (r = a(n.d)).slice(0, s)) {
							if (r = r.slice(s - 3, s + 1), "9999" != r && (i || "4999" != r)) {
								+r && (+r.slice(1) || "5" != r.charAt(0)) || (f(n, e + 1, 1), t = !n.times(n).times(n).eq(p));
								break
							}
							if (!i && (f(u, e + 1, 0), u.times(u).times(u).eq(p))) {
								n = u;
								break
							}
							s += 4,
							i = 1
						}
					return Ne = !0,
					f(n, e, h.rounding, t)
				},
				qe.decimalPlaces = qe.dp = function () {
					var e,
					t = this.d,
					r = NaN;
					if (t) {
						if (e = t.length - 1, r = (e - Te(this.e / Be)) * Be, e = t[e])
							for (; e % 10 == 0; e /= 10)
								r--;
						r < 0 && (r = 0)
					}
					return r
				},
				qe.dividedBy = qe.div = function (e) {
					return Le(this, new this.constructor(e))
				},
				qe.dividedToIntegerBy = qe.divToInt = function (e) {
					var t = this,
					r = t.constructor;
					return f(Le(t, new r(e), 0, 1, 1), r.precision, r.rounding)
				},
				qe.equals = qe.eq = function (e) {
					return 0 === this.cmp(e)
				},
				qe.floor = function () {
					return f(new this.constructor(this), this.e + 1, 3)
				},
				qe.greaterThan = qe.gt = function (e) {
					return this.cmp(e) > 0
				},
				qe.greaterThanOrEqualTo = qe.gte = function (e) {
					var t = this.cmp(e);
					return 1 == t || 0 === t
				},
				qe.hyperbolicCosine = qe.cosh = function () {
					var e,
					t,
					r,
					n,
					i,
					a = this,
					o = a.constructor,
					s = new o(1);
					if (!a.isFinite())
						return new o(a.s ? 1 / 0 : NaN);
					if (a.isZero())
						return s;
					r = o.precision,
					n = o.rounding,
					o.precision = r + Math.max(a.e, a.sd()) + 4,
					o.rounding = 1,
					i = a.d.length,
					i < 32 ? (e = Math.ceil(i / 3), t = Math.pow(4, -e).toString()) : (e = 16, t = "2.3283064365386962890625e-10"),
					a = O(o, 1, a.times(t), new o(1), !0);
					for (var u, c = e, l = new o(8); c--; )
						u = a.times(a), a = s.minus(u.times(l.minus(u.times(l))));
					return f(a, o.precision = r, o.rounding = n, !0)
				},
				qe.hyperbolicSine = qe.sinh = function () {
					var e,
					t,
					r,
					n,
					i = this,
					a = i.constructor;
					if (!i.isFinite() || i.isZero())
						return new a(i);
					if (t = a.precision, r = a.rounding, a.precision = t + Math.max(i.e, i.sd()) + 4, a.rounding = 1, n = i.d.length, n < 3)
						i = O(a, 2, i, i, !0);
					else {
						e = 1.4 * Math.sqrt(n),
						e = e > 16 ? 16 : 0 | e,
						i = i.times(Math.pow(5, -e)),
						i = O(a, 2, i, i, !0);
						for (var o, s = new a(5), u = new a(16), c = new a(20); e--; )
							o = i.times(i), i = i.times(s.plus(o.times(u.times(o).plus(c))))
					}
					return a.precision = t,
					a.rounding = r,
					f(i, t, r, !0)
				},
				qe.hyperbolicTangent = qe.tanh = function () {
					var e,
					t,
					r = this,
					n = r.constructor;
					return r.isFinite() ? r.isZero() ? new n(r) : (e = n.precision, t = n.rounding, n.precision = e + 7, n.rounding = 1, Le(r.sinh(), r.cosh(), n.precision = e, n.rounding = t)) : new n(r.s)
				},
				qe.inverseCosine = qe.acos = function () {
					var e,
					t = this,
					r = t.constructor,
					n = t.abs().cmp(1),
					i = r.precision,
					a = r.rounding;
					return n !== -1 ? 0 === n ? t.isNeg() ? m(r, i, a) : new r(0) : new r(NaN) : t.isZero() ? m(r, i + 4, a).times(.5) : (r.precision = i + 6, r.rounding = 1, t = t.asin(), e = m(r, i + 4, a).times(.5), r.precision = i, r.rounding = a, e.minus(t))
				},
				qe.inverseHyperbolicCosine = qe.acosh = function () {
					var e,
					t,
					r = this,
					n = r.constructor;
					return r.lte(1) ? new n(r.eq(1) ? 0 : NaN) : r.isFinite() ? (e = n.precision, t = n.rounding, n.precision = e + Math.max(Math.abs(r.e), r.sd()) + 4, n.rounding = 1, Ne = !1, r = r.times(r).minus(1).sqrt().plus(r), Ne = !0, n.precision = e, n.rounding = t, r.ln()) : new n(r)
				},
				qe.inverseHyperbolicSine = qe.asinh = function () {
					var e,
					t,
					r = this,
					n = r.constructor;
					return !r.isFinite() || r.isZero() ? new n(r) : (e = n.precision, t = n.rounding, n.precision = e + 2 * Math.max(Math.abs(r.e), r.sd()) + 6, n.rounding = 1, Ne = !1, r = r.times(r).plus(1).sqrt().plus(r), Ne = !0, n.precision = e, n.rounding = t, r.ln())
				},
				qe.inverseHyperbolicTangent = qe.atanh = function () {
					var e,
					t,
					r,
					n,
					i = this,
					a = i.constructor;
					return i.isFinite() ? i.e >= 0 ? new a(i.abs().eq(1) ? i.s / 0 : i.isZero() ? i : NaN) : (e = a.precision, t = a.rounding, n = i.sd(), Math.max(n, e) < 2 * -i.e - 1 ? f(new a(i), e, t, !0) : (a.precision = r = n - i.e, i = Le(i.plus(1), new a(1).minus(i), r + e, 1), a.precision = e + 4, a.rounding = 1, i = i.ln(), a.precision = e, a.rounding = t, i.times(.5))) : new a(NaN)
				},
				qe.inverseSine = qe.asin = function () {
					var e,
					t,
					r,
					n,
					i = this,
					a = i.constructor;
					return i.isZero() ? new a(i) : (t = i.abs().cmp(1), r = a.precision, n = a.rounding, t !== -1 ? 0 === t ? (e = m(a, r + 4, n).times(.5), e.s = i.s, e) : new a(NaN) : (a.precision = r + 6, a.rounding = 1, i = i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(), a.precision = r, a.rounding = n, i.times(2)))
				},
				qe.inverseTangent = qe.atan = function () {
					var e,
					t,
					r,
					n,
					i,
					a,
					o,
					s,
					u,
					c = this,
					l = c.constructor,
					p = l.precision,
					h = l.rounding;
					if (c.isFinite()) {
						if (c.isZero())
							return new l(c);
						if (c.abs().eq(1) && p + 4 <= Ue)
							return o = m(l, p + 4, h).times(.25), o.s = c.s, o
					} else {
						if (!c.s)
							return new l(NaN);
						if (p + 4 <= Ue)
							return o = m(l, p + 4, h).times(.5), o.s = c.s, o
					}
					for (l.precision = s = p + 10, l.rounding = 1, r = Math.min(28, s / Be + 2 | 0), e = r; e; --e)
						c = c.div(c.times(c).plus(1).sqrt().plus(1));
					for (Ne = !1, t = Math.ceil(s / Be), n = 1, u = c.times(c), o = new l(c), i = c; e !== -1; )
						if (i = i.times(u), a = o.minus(i.div(n += 2)), i = i.times(u), o = a.plus(i.div(n += 2)), void 0 !== o.d[t])
							for (e = t; o.d[e] === a.d[e] && e--; );
					return r && (o = o.times(2 << r - 1)),
					Ne = !0,
					f(o, l.precision = p, l.rounding = h, !0)
				},
				qe.isFinite = function () {
					return !!this.d
				},
				qe.isInteger = qe.isInt = function () {
					return !!this.d && Te(this.e / Be) > this.d.length - 2
				},
				qe.isNaN = function () {
					return !this.s
				},
				qe.isNegative = qe.isNeg = function () {
					return this.s < 0
				},
				qe.isPositive = qe.isPos = function () {
					return this.s > 0
				},
				qe.isZero = function () {
					return !!this.d && 0 === this.d[0]
				},
				qe.lessThan = qe.lt = function (e) {
					return this.cmp(e) < 0
				},
				qe.lessThanOrEqualTo = qe.lte = function (e) {
					return this.cmp(e) < 1
				},
				qe.logarithm = qe.log = function (e) {
					var t,
					r,
					n,
					i,
					o,
					u,
					c,
					l,
					p = this,
					m = p.constructor,
					d = m.precision,
					v = m.rounding,
					g = 5;
					if (null == e)
						e = new m(10), t = !0;
					else {
						if (e = new m(e), r = e.d, e.s < 0 || !r || !r[0] || e.eq(1))
							return new m(NaN);
						t = e.eq(10)
					}
					if (r = p.d, p.s < 0 || !r || !r[0] || p.eq(1))
						return new m(r && !r[0] ? -1 / 0 : 1 != p.s ? NaN : r ? 0 : 1 / 0);
					if (t)
						if (r.length > 1)
							o = !0;
						else {
							for (i = r[0]; i % 10 === 0; )
								i /= 10;
							o = 1 !== i
						}
					if (Ne = !1, c = d + g, u = b(p, c), n = t ? h(m, c + 10) : b(e, c), l = Le(u, n, c, 1), s(l.d, i = d, v))
						do
							if (c += 10, u = b(p, c), n = t ? h(m, c + 10) : b(e, c), l = Le(u, n, c, 1), !o) {
								+a(l.d).slice(i + 1, i + 15) + 1 == 1e14 && (l = f(l, d + 1, 0));
								break
							}
						while (s(l.d, i += 10, v));
					return Ne = !0,
					f(l, d, v)
				},
				qe.minus = qe.sub = function (e) {
					var t,
					r,
					n,
					i,
					a,
					o,
					s,
					u,
					c,
					l,
					h,
					m,
					d = this,
					v = d.constructor;
					if (e = new v(e), !d.d || !e.d)
						return d.s && e.s ? d.d ? e.s = -e.s : e = new v(e.d || d.s !== e.s ? d : NaN) : e = new v(NaN), e;
					if (d.s != e.s)
						return e.s = -e.s, d.plus(e);
					if (c = d.d, m = e.d, s = v.precision, u = v.rounding, !c[0] || !m[0]) {
						if (m[0])
							e.s = -e.s;
						else {
							if (!c[0])
								return new v(3 === u ? -0 : 0);
							e = new v(d)
						}
						return Ne ? f(e, s, u) : e
					}
					if (r = Te(e.e / Be), l = Te(d.e / Be), c = c.slice(), a = l - r) {
						for (h = a < 0, h ? (t = c, a = -a, o = m.length) : (t = m, r = l, o = c.length), n = Math.max(Math.ceil(s / Be), o) + 2, a > n && (a = n, t.length = 1), t.reverse(), n = a; n--; )
							t.push(0);
						t.reverse()
					} else {
						for (n = c.length, o = m.length, h = n < o, h && (o = n), n = 0; n < o; n++)
							if (c[n] != m[n]) {
								h = c[n] < m[n];
								break
							}
						a = 0
					}
					for (h && (t = c, c = m, m = t, e.s = -e.s), o = c.length, n = m.length - o; n > 0; --n)
						c[o++] = 0;
					for (n = m.length; n > a; ) {
						if (c[--n] < m[n]) {
							for (i = n; i && 0 === c[--i]; )
								c[i] = Ie - 1;
							--c[i],
							c[n] += Ie
						}
						c[n] -= m[n]
					}
					for (; 0 === c[--o]; )
						c.pop();
					for (; 0 === c[0]; c.shift())
						--r;
					return c[0] ? (e.d = c, e.e = p(c, r), Ne ? f(e, s, u) : e) : new v(3 === u ? -0 : 0)
				},
				qe.modulo = qe.mod = function (e) {
					var t,
					r = this,
					n = r.constructor;
					return e = new n(e),
					!r.d || !e.s || e.d && !e.d[0] ? new n(NaN) : !e.d || r.d && !r.d[0] ? f(new n(r), n.precision, n.rounding) : (Ne = !1, 9 == n.modulo ? (t = Le(r, e.abs(), 0, 3, 1), t.s *= e.s) : t = Le(r, e, 0, n.modulo, 1), t = t.times(e), Ne = !0, r.minus(t))
				},
				qe.naturalExponential = qe.exp = function () {
					return w(this)
				},
				qe.naturalLogarithm = qe.ln = function () {
					return b(this)
				},
				qe.negated = qe.neg = function () {
					var e = new this.constructor(this);
					return e.s = -e.s,
					f(e)
				},
				qe.plus = qe.add = function (e) {
					var t,
					r,
					n,
					i,
					a,
					o,
					s,
					u,
					c,
					l,
					h = this,
					m = h.constructor;
					if (e = new m(e), !h.d || !e.d)
						return h.s && e.s ? h.d || (e = new m(e.d || h.s === e.s ? h : NaN)) : e = new m(NaN), e;
					if (h.s != e.s)
						return e.s = -e.s, h.minus(e);
					if (c = h.d, l = e.d, s = m.precision, u = m.rounding, !c[0] || !l[0])
						return l[0] || (e = new m(h)), Ne ? f(e, s, u) : e;
					if (a = Te(h.e / Be), n = Te(e.e / Be), c = c.slice(), i = a - n) {
						for (i < 0 ? (r = c, i = -i, o = l.length) : (r = l, n = a, o = c.length), a = Math.ceil(s / Be), o = a > o ? a + 1 : o + 1, i > o && (i = o, r.length = 1), r.reverse(); i--; )
							r.push(0);
						r.reverse()
					}
					for (o = c.length, i = l.length, o - i < 0 && (i = o, r = l, l = c, c = r), t = 0; i; )
						t = (c[--i] = c[i] + l[i] + t) / Ie | 0, c[i] %= Ie;
					for (t && (c.unshift(t), ++n), o = c.length; 0 == c[--o]; )
						c.pop();
					return e.d = c,
					e.e = p(c, n),
					Ne ? f(e, s, u) : e
				},
				qe.precision = qe.sd = function (e) {
					var t,
					r = this;
					if (void 0 !== e && e !== !!e && 1 !== e && 0 !== e)
						throw Error(Me + e);
					return r.d ? (t = d(r.d), e && r.e + 1 > t && (t = r.e + 1)) : t = NaN,
					t
				},
				qe.round = function () {
					var e = this,
					t = e.constructor;
					return f(new t(e), e.e + 1, t.rounding)
				},
				qe.sine = qe.sin = function () {
					var e,
					t,
					r = this,
					n = r.constructor;
					return r.isFinite() ? r.isZero() ? new n(r) : (e = n.precision, t = n.rounding, n.precision = e + Math.max(r.e, r.sd()) + Be, n.rounding = 1, r = A(n, T(n, r)), n.precision = e, n.rounding = t, f(de > 2 ? r.neg() : r, e, t, !0)) : new n(NaN)
				},
				qe.squareRoot = qe.sqrt = function () {
					var e,
					t,
					r,
					n,
					i,
					o,
					s = this,
					u = s.d,
					c = s.e,
					l = s.s,
					p = s.constructor;
					if (1 !== l || !u || !u[0])
						return new p(!l || l < 0 && (!u || u[0]) ? NaN : u ? s : 1 / 0);
					for (Ne = !1, l = Math.sqrt(+s), 0 == l || l == 1 / 0 ? (t = a(u), (t.length + c) % 2 == 0 && (t += "0"), l = Math.sqrt(t), c = Te((c + 1) / 2) - (c < 0 || c % 2), l == 1 / 0 ? t = "1e" + c : (t = l.toExponential(), t = t.slice(0, t.indexOf("e") + 1) + c), n = new p(t)) : n = new p(l.toString()), r = (c = p.precision) + 3; ; )
						if (o = n, n = o.plus(Le(s, o, r + 2, 1)).times(.5), a(o.d).slice(0, r) === (t = a(n.d)).slice(0, r)) {
							if (t = t.slice(r - 3, r + 1), "9999" != t && (i || "4999" != t)) {
								+t && (+t.slice(1) || "5" != t.charAt(0)) || (f(n, c + 1, 1), e = !n.times(n).eq(s));
								break
							}
							if (!i && (f(o, c + 1, 0), o.times(o).eq(s))) {
								n = o;
								break
							}
							r += 4,
							i = 1
						}
					return Ne = !0,
					f(n, c, p.rounding, e)
				},
				qe.tangent = qe.tan = function () {
					var e,
					t,
					r = this,
					n = r.constructor;
					return r.isFinite() ? r.isZero() ? new n(r) : (e = n.precision, t = n.rounding, n.precision = e + 10, n.rounding = 1, r = r.sin(), r.s = 1, r = Le(r, new n(1).minus(r.times(r)).sqrt(), e + 10, 0), n.precision = e, n.rounding = t, f(2 == de || 4 == de ? r.neg() : r, e, t, !0)) : new n(NaN)
				},
				qe.times = qe.mul = function (e) {
					var t,
					r,
					n,
					i,
					a,
					o,
					s,
					u,
					c,
					l = this,
					h = l.constructor,
					m = l.d,
					d = (e = new h(e)).d;
					if (e.s *= l.s, !(m && m[0] && d && d[0]))
						return new h(!e.s || m && !m[0] && !d || d && !d[0] && !m ? NaN : m && d ? 0 * e.s : e.s / 0);
					for (r = Te(l.e / Be) + Te(e.e / Be), u = m.length, c = d.length, u < c && (a = m, m = d, d = a, o = u, u = c, c = o), a = [], o = u + c, n = o; n--; )
						a.push(0);
					for (n = c; --n >= 0; ) {
						for (t = 0, i = u + n; i > n; )
							s = a[i] + d[n] * m[i - n - 1] + t, a[i--] = s % Ie | 0, t = s / Ie | 0;
						a[i] = (a[i] + t) % Ie | 0
					}
					for (; !a[--o]; )
						a.pop();
					return t ? ++r : a.shift(),
					e.d = a,
					e.e = p(a, r),
					Ne ? f(e, h.precision, h.rounding) : e
				},
				qe.toBinary = function (e, t) {
					return _(this, 2, e, t)
				},
				qe.toDecimalPlaces = qe.toDP = function (e, t) {
					var r = this,
					n = r.constructor;
					return r = new n(r),
					void 0 === e ? r : (o(e, 0, ge), void 0 === t ? t = n.rounding : o(t, 0, 8), f(r, e + r.e + 1, t))
				},
				qe.toExponential = function (e, t) {
					var r,
					n = this,
					i = n.constructor;
					return void 0 === e ? r = l(n, !0) : (o(e, 0, ge), void 0 === t ? t = i.rounding : o(t, 0, 8), n = f(new i(n), e + 1, t), r = l(n, !0, e + 1)),
					n.isNeg() && !n.isZero() ? "-" + r : r
				},
				qe.toFixed = function (e, t) {
					var r,
					n,
					i = this,
					a = i.constructor;
					return void 0 === e ? r = l(i) : (o(e, 0, ge), void 0 === t ? t = a.rounding : o(t, 0, 8), n = f(new a(i), e + i.e + 1, t), r = l(n, !1, e + n.e + 1)),
					i.isNeg() && !i.isZero() ? "-" + r : r
				},
				qe.toFraction = function (e) {
					var t,
					r,
					n,
					i,
					o,
					s,
					u,
					c,
					f,
					l,
					p,
					h,
					m = this,
					v = m.d,
					g = m.constructor;
					if (!v)
						return new g(m);
					if (f = r = new g(1), n = c = new g(0), t = new g(n), o = t.e = d(v) - m.e - 1, s = o % Be, t.d[0] = _e(10, s < 0 ? Be + s : s), null == e)
						e = o > 0 ? t : f;
					else {
						if (u = new g(e), !u.isInt() || u.lt(f))
							throw Error(Me + u);
						e = u.gt(t) ? o > 0 ? t : f : u
					}
					for (Ne = !1, u = new g(a(v)), l = g.precision, g.precision = o = v.length * Be * 2; p = Le(u, t, 0, 1, 1), i = r.plus(p.times(n)), 1 != i.cmp(e); )
						r = n, n = i, i = f, f = c.plus(p.times(i)), c = i, i = t, t = u.minus(p.times(i)), u = i;
					return i = Le(e.minus(r), n, 0, 1, 1),
					c = c.plus(i.times(f)),
					r = r.plus(i.times(n)),
					c.s = f.s = m.s,
					h = Le(f, n, o, 1).minus(m).abs().cmp(Le(c, r, o, 1).minus(m).abs()) < 1 ? [f, n] : [c, r],
					g.precision = l,
					Ne = !0,
					h
				},
				qe.toHexadecimal = qe.toHex = function (e, t) {
					return _(this, 16, e, t)
				},
				qe.toNearest = function (e, t) {
					var r = this,
					n = r.constructor;
					if (r = new n(r), null == e) {
						if (!r.d)
							return r;
						e = new n(1),
						t = n.rounding
					} else {
						if (e = new n(e), void 0 !== t && o(t, 0, 8), !r.d)
							return e.s ? r : e;
						if (!e.d)
							return e.s && (e.s = r.s), e
					}
					return e.d[0] ? (Ne = !1, t < 4 && (t = [4, 5, 7, 8][t]), r = Le(r, e, 0, t, 1).times(e), Ne = !0, f(r)) : (e.s = r.s, r = e),
					r
				},
				qe.toNumber = function () {
					return +this
				},
				qe.toOctal = function (e, t) {
					return _(this, 8, e, t)
				},
				qe.toPower = qe.pow = function (e) {
					var t,
					r,
					n,
					i,
					o,
					u,
					c = this,
					l = c.constructor,
					p =  + (e = new l(e));
					if (!(c.d && e.d && c.d[0] && e.d[0]))
						return new l(_e(+c, p));
					if (c = new l(c), c.eq(1))
						return c;
					if (n = l.precision, o = l.rounding, e.eq(1))
						return f(c, n, o);
					if (t = Te(e.e / Be), t >= e.d.length - 1 && (r = p < 0 ? -p : p) <= Pe)
						return i = g(l, c, r, n), e.s < 0 ? new l(1).div(i) : f(i, n, o);
					if (u = c.s, u < 0) {
						if (t < e.d.length - 1)
							return new l(NaN);
						if (0 == (1 & e.d[t]) && (u = 1), 0 == c.e && 1 == c.d[0] && 1 == c.d.length)
							return c.s = u, c
					}
					return r = _e(+c, p),
					t = 0 != r && isFinite(r) ? new l(r + "").e : Te(p * (Math.log("0." + a(c.d)) / Math.LN10 + c.e + 1)),
					t > l.maxE + 1 || t < l.minE - 1 ? new l(t > 0 ? u / 0 : 0) : (Ne = !1, l.rounding = c.s = 1, r = Math.min(12, (t + "").length), i = w(e.times(b(c, n + r)), n), i.d && (i = f(i, n + 5, 1), s(i.d, n, o) && (t = n + 10, i = f(w(e.times(b(c, t + r)), t), t + 5, 1), +a(i.d).slice(n + 1, n + 15) + 1 == 1e14 && (i = f(i, n + 1, 0)))), i.s = u, Ne = !0, l.rounding = o, f(i, n, o))
				},
				qe.toPrecision = function (e, t) {
					var r,
					n = this,
					i = n.constructor;
					return void 0 === e ? r = l(n, n.e <= i.toExpNeg || n.e >= i.toExpPos) : (o(e, 1, ge), void 0 === t ? t = i.rounding : o(t, 0, 8), n = f(new i(n), e, t), r = l(n, e <= n.e || n.e <= i.toExpNeg, e)),
					n.isNeg() && !n.isZero() ? "-" + r : r
				},
				qe.toSignificantDigits = qe.toSD = function (e, t) {
					var r = this,
					n = r.constructor;
					return void 0 === e ? (e = n.precision, t = n.rounding) : (o(e, 1, ge), void 0 === t ? t = n.rounding : o(t, 0, 8)),
					f(new n(r), e, t)
				},
				qe.toString = function () {
					var e = this,
					t = e.constructor,
					r = l(e, e.e <= t.toExpNeg || e.e >= t.toExpPos);
					return e.isNeg() && !e.isZero() ? "-" + r : r
				},
				qe.truncated = qe.trunc = function () {
					return f(new this.constructor(this), this.e + 1, 1)
				},
				qe.valueOf = qe.toJSON = function () {
					var e = this,
					t = e.constructor,
					r = l(e, e.e <= t.toExpNeg || e.e >= t.toExpPos);
					return e.isNeg() ? "-" + r : r
				};
				var Le = function () {
					function e(e, t, r) {
						var n,
						i = 0,
						a = e.length;
						for (e = e.slice(); a--; )
							n = e[a] * t + i, e[a] = n % r | 0, i = n / r | 0;
						return i && e.unshift(i),
						e
					}
					function t(e, t, r, n) {
						var i,
						a;
						if (r != n)
							a = r > n ? 1 : -1;
						else
							for (i = a = 0; i < r; i++)
								if (e[i] != t[i]) {
									a = e[i] > t[i] ? 1 : -1;
									break
								}
						return a
					}
					function r(e, t, r, n) {
						for (var i = 0; r--; )
							e[r] -= i, i = e[r] < t[r] ? 1 : 0, e[r] = i * n + e[r] - t[r];
						for (; !e[0] && e.length > 1; )
							e.shift()
					}
					return function (n, i, a, o, s, u) {
						var c,
						l,
						p,
						h,
						m,
						d,
						v,
						g,
						y,
						x,
						w,
						b,
						N,
						E,
						M,
						A,
						O,
						T,
						_,
						S,
						C = n.constructor,
						z = n.s == i.s ? 1 : -1,
						k = n.d,
						I = i.d;
						if (!(k && k[0] && I && I[0]))
							return new C(n.s && i.s && (k ? !I || k[0] != I[0] : I) ? k && 0 == k[0] || !I ? 0 * z : z / 0 : NaN);
						for (u ? (m = 1, l = n.e - i.e) : (u = Ie, m = Be, l = Te(n.e / m) - Te(i.e / m)), _ = I.length, O = k.length, y = new C(z), x = y.d = [], p = 0; I[p] == (k[p] || 0); p++);
						if (I[p] > (k[p] || 0) && l--, null == a ? (E = a = C.precision, o = C.rounding) : E = s ? a + (n.e - i.e) + 1 : a, E < 0)
							x.push(1), d = !0;
						else {
							if (E = E / m + 2 | 0, p = 0, 1 == _) {
								for (h = 0, I = I[0], E++; (p < O || h) && E--; p++)
									M = h * u + (k[p] || 0), x[p] = M / I | 0, h = M % I | 0;
								d = h || p < O
							} else {
								for (h = u / (I[0] + 1) | 0, h > 1 && (I = e(I, h, u), k = e(k, h, u), _ = I.length, O = k.length), A = _, w = k.slice(0, _), b = w.length; b < _; )
									w[b++] = 0;
								S = I.slice(),
								S.unshift(0),
								T = I[0],
								I[1] >= u / 2 && ++T;
								do
									h = 0, c = t(I, w, _, b), c < 0 ? (N = w[0], _ != b && (N = N * u + (w[1] || 0)), h = N / T | 0, h > 1 ? (h >= u && (h = u - 1), v = e(I, h, u), g = v.length, b = w.length, c = t(v, w, g, b), 1 == c && (h--, r(v, _ < g ? S : I, g, u))) : (0 == h && (c = h = 1), v = I.slice()), g = v.length, g < b && v.unshift(0), r(w, v, b, u), c == -1 && (b = w.length, c = t(I, w, _, b), c < 1 && (h++, r(w, _ < b ? S : I, b, u))), b = w.length) : 0 === c && (h++, w = [0]), x[p++] = h, c && w[0] ? w[b++] = k[A] || 0 : (w = [k[A]], b = 1);
								while ((A++ < O || void 0 !== w[0]) && E--);
								d = void 0 !== w[0]
							}
							x[0] || x.shift()
						}
						if (1 == m)
							y.e = l, me = d;
						else {
							for (p = 1, h = x[0]; h >= 10; h /= 10)
								p++;
							y.e = p + l * m - 1,
							f(y, s ? a + y.e + 1 : a, o, d)
						}
						return y
					}
				}
				();
				be = $(be),
				xe = new be(xe),
				we = new be(we),
				n = function () {
					return be
				}
				.call(t, r, t, e),
				!(void 0 !== n && (e.exports = n))
			}
			(this)
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("bignumber", {
						"": function () {
							return new e.BigNumber(0)
						},
						number: function (t) {
							return new e.BigNumber(t + "")
						},
						string: function (t) {
							return new e.BigNumber(t)
						},
						BigNumber: function (e) {
							return e
						},
						Fraction: function (t) {
							return new e.BigNumber(t.n).div(t.d)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					0: "0",
					1: "\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "bignumber",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("bool", {
						"": function () {
							return !1
						},
						boolean: function (e) {
							return e
						},
						number: function (e) {
							return !!e
						},
						BigNumber: function (e) {
							return !e.isZero()
						},
						string: function (e) {
							var t = e.toLowerCase();
							if ("true" === t)
								return !0;
							if ("false" === t)
								return !1;
							var r = Number(e);
							if ("" != e && !isNaN(r))
								return !!r;
							throw new Error('Cannot convert "' + e + '" to a boolean')
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			t.name = "boolean",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(164), r(166)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, o) {
				function s(t) {
					if (!(this instanceof s))
						throw new SyntaxError("Constructor must be called with the new operator");
					e.isChain(t) ? this.value = t.value : this.value = t
				}
				function u(e, t) {
					"function" == typeof t && (s.prototype[e] = f(t))
				}
				function c(e, t) {
					a(s.prototype, e, function () {
						var e = t();
						if ("function" == typeof e)
							return f(e)
					})
				}
				function f(e) {
					return function () {
						for (var t = [this.value], r = 0; r < arguments.length; r++)
							t[r + 1] = arguments[r];
						return new s(e.apply(e, t))
					}
				}
				return s.prototype.type = "Chain",
				s.prototype.isChain = !0,
				s.prototype.done = function () {
					return this.value
				},
				s.prototype.valueOf = function () {
					return this.value
				},
				s.prototype.toString = function () {
					return i(this.value)
				},
				s.createProxy = function (e, t) {
					if ("string" == typeof e)
						u(e, t);
					else
						for (var r in e)
							e.hasOwnProperty(r) && u(r, e[r])
				},
				s.createProxy(o),
				o.on("import", function (e, t, r) {
					void 0 === r && c(e, t)
				}),
				s
			}
			var i = r(9).format,
			a = r(5).lazy;
			t.name = "Chain",
			t.path = "type",
			t.factory = n,
			t.math = !0,
			t.lazy = !1
		}, function (e, t) {
			t.format = function (e, r) {
				if ("function" == typeof r)
					return r(e);
				if (!e.isFinite())
					return e.isNaN() ? "NaN" : e.gt(0) ? "Infinity" : "-Infinity";
				var n = "auto",
				i = void 0;
				switch (void 0 !== r && (r.notation && (n = r.notation), "number" == typeof r ? i = r : r.precision && (i = r.precision)), n) {
				case "fixed":
					return t.toFixed(e, i);
				case "exponential":
					return t.toExponential(e, i);
				case "auto":
					var a = .001,
					o = 1e5;
					r && r.exponential && (void 0 !== r.exponential.lower && (a = r.exponential.lower), void 0 !== r.exponential.upper && (o = r.exponential.upper));
					({
						toExpNeg: e.constructor.toExpNeg,
						toExpPos: e.constructor.toExpPos
					});
					if (e.constructor.config({
							toExpNeg: Math.round(Math.log(a) / Math.LN10),
							toExpPos: Math.round(Math.log(o) / Math.LN10)
						}), e.isZero())
						return "0";
					var s,
					u = e.abs();
					return s = u.gte(a) && u.lt(o) ? e.toSignificantDigits(i).toFixed() : t.toExponential(e, i),
					s.replace(/((\.\d*?)(0+))($|e)/, function () {
						var e = arguments[2],
						t = arguments[4];
						return "." !== e ? e + t : t
					});
				default:
					throw new Error('Unknown notation "' + n + '". Choose "auto", "exponential", or "fixed".')
				}
			},
			t.toExponential = function (e, t) {
				return void 0 !== t ? e.toExponential(t - 1) : e.toExponential()
			},
			t.toFixed = function (e, t) {
				return e.toFixed(t || 0)
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				return n("chain", {
					"": function () {
						return new e.Chain
					},
					any: function (t) {
						return new e.Chain(t)
					}
				})
			}
			t.name = "chain",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(91), r(169)]
		}, function (e, t, r) {
			var n,
			i;
			/**
			 * @license Complex.js v2.0.3 11/02/2016
			 *
			 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
			 * Dual licensed under the MIT or GPL Version 2 licenses.
			 **/
			!function (r) {
				"use strict";
				function a(e, t) {
					var r = Math.abs(e),
					n = Math.abs(t);
					return 0 === e ? Math.log(n) : 0 === t ? Math.log(r) : r < 3e3 && n < 3e3 ? .5 * Math.log(e * e + t * t) : Math.log(e / Math.cos(Math.atan2(t, e)))
				}
				function o(e, t) {
					return this instanceof o ? (p(e, t), this.re = s.re, void(this.im = s.im)) : new o(e, t)
				}
				var s = {
					re: 0,
					im: 0
				},
				u = function (e) {
					return .5 * (Math.exp(e) + Math.exp(-e))
				},
				c = function (e) {
					return .5 * (Math.exp(e) - Math.exp(-e))
				},
				f = function (e, t) {
					var r = Math.abs(e),
					n = Math.abs(t);
					return r < 3e3 && n < 3e3 ? Math.sqrt(r * r + n * n) : (r < n ? (r = n, n = e / t) : n = t / e, r * Math.sqrt(1 + n * n))
				},
				l = function () {
					throw SyntaxError("Invalid Param")
				},
				p = function (e, t) {
					if (void 0 === e || null === e)
						s.re = s.im = 0;
					else if (void 0 !== t)
						s.re = e, s.im = t;
					else
						switch (typeof e) {
						case "object":
							"im" in e && "re" in e ? (s.re = e.re, s.im = e.im) : "abs" in e && "arg" in e ? (s.re = e.abs * Math.cos(e.arg), s.im = e.abs * Math.sin(e.arg)) : "r" in e && "phi" in e ? (s.re = e.r * Math.cos(e.phi), s.im = e.r * Math.sin(e.phi)) : 2 === e.length ? (s.re = e[0], s.im = e[1]) : l();
							break;
						case "string":
							s.im = s.re = 0;
							var r = e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),
							n = 1,
							i = 0;
							null === r && l();
							for (var a = 0; a < r.length; a++) {
								var o = r[a];
								" " === o || "\t" === o || "\n" === o || ("+" === o ? n++ : "-" === o ? i++ : "i" === o || "I" === o ? (n + i === 0 && l(), " " === r[a + 1] || isNaN(r[a + 1]) ? s.im += parseFloat((i % 2 ? "-" : "") + "1") : (s.im += parseFloat((i % 2 ? "-" : "") + r[a + 1]), a++), n = i = 0) : ((n + i === 0 || isNaN(o)) && l(), "i" === r[a + 1] || "I" === r[a + 1] ? (s.im += parseFloat((i % 2 ? "-" : "") + o), a++) : s.re += parseFloat((i % 2 ? "-" : "") + o), n = i = 0))
							}
							n + i > 0 && l();
							break;
						case "number":
							s.im = 0,
							s.re = e;
							break;
						default:
							l()
						}
					isNaN(s.re) || isNaN(s.im)
				};
				o.prototype = {
					re: 0,
					im: 0,
					sign: function () {
						var e = this.abs();
						return new o(this.re / e, this.im / e)
					},
					add: function (e, t) {
						return p(e, t),
						new o(this.re + s.re, this.im + s.im)
					},
					sub: function (e, t) {
						return p(e, t),
						new o(this.re - s.re, this.im - s.im)
					},
					mul: function (e, t) {
						return p(e, t),
						0 === s.im && 0 === this.im ? new o(this.re * s.re, 0) : new o(this.re * s.re - this.im * s.im, this.re * s.im + this.im * s.re)
					},
					div: function (e, t) {
						p(e, t),
						e = this.re,
						t = this.im;
						var r,
						n,
						i = s.re,
						a = s.im;
						return 0 === a ? 0 === i ? new o(0 !== e ? e / 0 : 0, 0 !== t ? t / 0 : 0) : new o(e / i, t / i) : Math.abs(i) < Math.abs(a) ? (n = i / a, r = i * n + a, new o((e * n + t) / r, (t * n - e) / r)) : (n = a / i, r = a * n + i, new o((e + t * n) / r, (t - e * n) / r))
					},
					pow: function (e, t) {
						if (p(e, t), e = this.re, t = this.im, 0 === e && 0 === t)
							return o.ZERO;
						if (0 === s.im) {
							if (0 === t && e >= 0)
								return new o(Math.pow(e, s.re), 0);
							if (0 === e)
								switch ((s.re % 4 + 4) % 4) {
								case 0:
									return new o(Math.pow(t, s.re), 0);
								case 1:
									return new o(0, Math.pow(t, s.re));
								case 2:
									return new o(-Math.pow(t, s.re), 0);
								case 3:
									return new o(0, -Math.pow(t, s.re))
								}
						}
						var r = Math.atan2(t, e),
						n = a(e, t);
						return e = Math.exp(s.re * n - s.im * r),
						t = s.im * n + s.re * r,
						new o(e * Math.cos(t), e * Math.sin(t))
					},
					sqrt: function () {
						var e,
						t,
						r = this.re,
						n = this.im,
						i = this.abs();
						if (r >= 0) {
							if (0 === n)
								return new o(Math.sqrt(r), 0);
							e = .5 * Math.sqrt(2 * (i + r))
						} else
							e = Math.abs(n) / Math.sqrt(2 * (i - r));
						return t = r <= 0 ? .5 * Math.sqrt(2 * (i - r)) : Math.abs(n) / Math.sqrt(2 * (i + r)),
						new o(e, n < 0 ? -t : t)
					},
					exp: function () {
						var e = Math.exp(this.re);
						return 0 === this.im,
						new o(e * Math.cos(this.im), e * Math.sin(this.im))
					},
					log: function () {
						var e = this.re,
						t = this.im;
						return new o(a(e, t), Math.atan2(t, e))
					},
					abs: function () {
						return f(this.re, this.im)
					},
					arg: function () {
						return Math.atan2(this.im, this.re)
					},
					sin: function () {
						var e = this.re,
						t = this.im;
						return new o(Math.sin(e) * u(t), Math.cos(e) * c(t))
					},
					cos: function () {
						var e = this.re,
						t = this.im;
						return new o(Math.cos(e) * u(t), -Math.sin(e) * c(t))
					},
					tan: function () {
						var e = 2 * this.re,
						t = 2 * this.im,
						r = Math.cos(e) + u(t);
						return new o(Math.sin(e) / r, c(t) / r)
					},
					cot: function () {
						var e = 2 * this.re,
						t = 2 * this.im,
						r = Math.cos(e) - u(t);
						return new o(-Math.sin(e) / r, c(t) / r)
					},
					sec: function () {
						var e = this.re,
						t = this.im,
						r = .5 * u(2 * t) + .5 * Math.cos(2 * e);
						return new o(Math.cos(e) * u(t) / r, Math.sin(e) * c(t) / r)
					},
					csc: function () {
						var e = this.re,
						t = this.im,
						r = .5 * u(2 * t) - .5 * Math.cos(2 * e);
						return new o(Math.sin(e) * u(t) / r, -Math.cos(e) * c(t) / r)
					},
					asin: function () {
						var e = this.re,
						t = this.im,
						r = new o(t * t - e * e + 1, -2 * e * t).sqrt(),
						n = new o(r.re - t, r.im + e).log();
						return new o(n.im, -n.re)
					},
					acos: function () {
						var e = this.re,
						t = this.im,
						r = new o(t * t - e * e + 1, -2 * e * t).sqrt(),
						n = new o(r.re - t, r.im + e).log();
						return new o(Math.PI / 2 - n.im, n.re)
					},
					atan: function () {
						var e = this.re,
						t = this.im;
						if (0 === e) {
							if (1 === t)
								return new o(0, 1 / 0);
							if (t === -1)
								return new o(0,  - (1 / 0))
						}
						var r = e * e + (1 - t) * (1 - t),
						n = new o((1 - t * t - e * e) / r, -2 * e / r).log();
						return new o( - .5 * n.im, .5 * n.re)
					},
					acot: function () {
						var e = this.re,
						t = this.im;
						if (0 === t)
							return new o(Math.atan2(1, e), 0);
						var r = e * e + t * t;
						return 0 !== r ? new o(e / r, -t / r).atan() : new o(0 !== e ? e / 0 : 0, 0 !== t ? -t / 0 : 0).atan()
					},
					asec: function () {
						var e = this.re,
						t = this.im;
						if (0 === e && 0 === t)
							return new o(0, 1 / 0);
						var r = e * e + t * t;
						return 0 !== r ? new o(e / r, -t / r).acos() : new o(0 !== e ? e / 0 : 0, 0 !== t ? -t / 0 : 0).acos()
					},
					acsc: function () {
						var e = this.re,
						t = this.im;
						if (0 === e && 0 === t)
							return new o(Math.PI / 2, 1 / 0);
						var r = e * e + t * t;
						return 0 !== r ? new o(e / r, -t / r).asin() : new o(0 !== e ? e / 0 : 0, 0 !== t ? -t / 0 : 0).asin()
					},
					sinh: function () {
						var e = this.re,
						t = this.im;
						return new o(c(e) * Math.cos(t), u(e) * Math.sin(t))
					},
					cosh: function () {
						var e = this.re,
						t = this.im;
						return new o(u(e) * Math.cos(t), c(e) * Math.sin(t))
					},
					tanh: function () {
						var e = 2 * this.re,
						t = 2 * this.im,
						r = u(e) + Math.cos(t);
						return new o(c(e) / r, Math.sin(t) / r)
					},
					coth: function () {
						var e = 2 * this.re,
						t = 2 * this.im,
						r = u(e) - Math.cos(t);
						return new o(c(e) / r, -Math.sin(t) / r)
					},
					csch: function () {
						var e = this.re,
						t = this.im,
						r = Math.cos(2 * t) - u(2 * e);
						return new o(-2 * c(e) * Math.cos(t) / r, 2 * u(e) * Math.sin(t) / r)
					},
					sech: function () {
						var e = this.re,
						t = this.im,
						r = Math.cos(2 * t) + u(2 * e);
						return new o(2 * u(e) * Math.cos(t) / r, -2 * c(e) * Math.sin(t) / r)
					},
					asinh: function () {
						var e = this.im;
						this.im = -this.re,
						this.re = e;
						var t = this.asin();
						return this.re = -this.im,
						this.im = e,
						e = t.re,
						t.re = -t.im,
						t.im = e,
						t
					},
					acosh: function () {
						var e,
						t = this.acos();
						return t.im <= 0 ? (e = t.re, t.re = -t.im, t.im = e) : (e = t.im, t.im = -t.re, t.re = e),
						t
					},
					atanh: function () {
						var e = this.re,
						t = this.im,
						r = e > 1 && 0 === t,
						n = 1 - e,
						i = 1 + e,
						s = n * n + t * t,
						u = 0 !== s ? new o((i * n - t * t) / s, (t * n + i * t) / s) : new o(e !== -1 ? e / 0 : 0, 0 !== t ? t / 0 : 0),
						c = u.re;
						return u.re = a(u.re, u.im) / 2,
						u.im = Math.atan2(u.im, c) / 2,
						r && (u.im = -u.im),
						u
					},
					acoth: function () {
						var e = this.re,
						t = this.im;
						if (0 === e && 0 === t)
							return new o(0, Math.PI / 2);
						var r = e * e + t * t;
						return 0 !== r ? new o(e / r, -t / r).atanh() : new o(0 !== e ? e / 0 : 0, 0 !== t ? -t / 0 : 0).atanh()
					},
					acsch: function () {
						var e = this.re,
						t = this.im;
						if (0 === t)
							return new o(0 !== e ? Math.log(e + Math.sqrt(e * e + 1)) : 1 / 0, 0);
						var r = e * e + t * t;
						return 0 !== r ? new o(e / r, -t / r).asinh() : new o(0 !== e ? e / 0 : 0, 0 !== t ? -t / 0 : 0).asinh()
					},
					asech: function () {
						var e = this.re,
						t = this.im;
						if (0 === e && 0 === t)
							return new o(1 / 0, 0);
						var r = e * e + t * t;
						return 0 !== r ? new o(e / r, -t / r).acosh() : new o(0 !== e ? e / 0 : 0, 0 !== t ? -t / 0 : 0).acosh()
					},
					inverse: function () {
						var e = this.re,
						t = this.im,
						r = e * e + t * t;
						return new o(0 !== e ? e / r : 0, 0 !== t ? -t / r : 0)
					},
					conjugate: function () {
						return new o(this.re, -this.im)
					},
					neg: function () {
						return new o(-this.re, -this.im)
					},
					ceil: function (e) {
						return e = Math.pow(10, e || 0),
						new o(Math.ceil(this.re * e) / e, Math.ceil(this.im * e) / e)
					},
					floor: function (e) {
						return e = Math.pow(10, e || 0),
						new o(Math.floor(this.re * e) / e, Math.floor(this.im * e) / e)
					},
					round: function (e) {
						return e = Math.pow(10, e || 0),
						new o(Math.round(this.re * e) / e, Math.round(this.im * e) / e)
					},
					equals: function (e, t) {
						return p(e, t),
						Math.abs(s.re - this.re) <= o.EPSILON && Math.abs(s.im - this.im) <= o.EPSILON
					},
					clone: function () {
						return new o(this.re, this.im)
					},
					toString: function () {
						var e = this.re,
						t = this.im,
						r = "";
						return isNaN(e) || isNaN(t) ? "NaN" : (0 !== e && (r += e), 0 !== t && (0 !== e ? r += t < 0 ? " - " : " + " : t < 0 && (r += "-"), t = Math.abs(t), 1 !== t && (r += t), r += "i"), r ? r : "0")
					},
					toVector: function () {
						return [this.re, this.im]
					},
					valueOf: function () {
						return 0 === this.im ? this.re : null
					},
					isNaN: function () {
						return isNaN(this.re) || isNaN(this.im)
					},
					isFinite: function () {
						return isFinite(this.re) && isFinite(this.im)
					}
				},
				o.ZERO = new o(0, 0),
				o.ONE = new o(1, 0),
				o.I = new o(0, 1),
				o.PI = new o(Math.PI, 0),
				o.E = new o(Math.E, 0),
				o.EPSILON = 1e-16,
				n = [],
				i = function () {
					return o
				}
				.apply(t, n),
				!(void 0 !== i && (e.exports = i))
			}
			(this)
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = r(4),
				s = a("complex", {
						"": function () {
							return e.Complex.ZERO
						},
						number: function (t) {
							return new e.Complex(t, 0)
						},
						"number, number": function (t, r) {
							return new e.Complex(t, r)
						},
						"BigNumber, BigNumber": function (t, r) {
							return new e.Complex(t.toNumber(), r.toNumber())
						},
						Complex: function (e) {
							return e.clone()
						},
						string: function (t) {
							return e.Complex(t)
						},
						Object: function (t) {
							if ("re" in t && "im" in t)
								return new e.Complex(t.re, t.im);
							if ("r" in t && "phi" in t)
								return new e.Complex(t);
							throw new Error("Expected object with either properties re and im, or properties r and phi.")
						},
						"Array | Matrix": function (e) {
							return i(e, s)
						}
					});
				return s.toTex = {
					0: "0",
					1: "\\left(${args[0]}\\right)",
					2: "\\left(\\left(${args[0]}\\right)+" + o.symbols.i + "\\cdot\\left(${args[1]}\\right)\\right)"
				},
				s
			}
			var i = r(1);
			t.name = "complex",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(171), r(92)]
		}, function (e, t, r) {
			function n(e, t, r, n) {
				return i
			}
			var i = r(172);
			i.prototype.type = "Fraction",
			i.prototype.isFraction = !0,
			i.prototype.toJSON = function () {
				return {
					mathjs: "Fraction",
					n: this.s * this.n,
					d: this.d
				}
			},
			i.fromJSON = function (e) {
				return new i(e)
			},
			t.name = "Fraction",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			var n,
			i;
			/**
			 * @license Fraction.js v4.0.2 09/09/2015
			 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
			 *
			 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
			 * Dual licensed under the MIT or GPL Version 2 licenses.
			 **/
			!function (r) {
				"use strict";
				function a(e) {
					var t = function () {
						var t = Error.apply(this, arguments);
						t.name = this.name = e,
						this.stack = t.stack,
						this.message = t.message
					},
					r = function () {};
					return r.prototype = Error.prototype,
					t.prototype = new r,
					t
				}
				function o(e, t) {
					return isNaN(e = parseInt(e, 10)) && s(),
					e * t
				}
				function s() {
					throw new p
				}
				function u(e, t) {
					return this instanceof u ? (h(e, t), e = u.REDUCE ? g(f.d, f.n) : 1, this.s = f.s, this.n = f.n / e, void(this.d = f.d / e)) : new u(e, t)
				}
				var c = 2e3,
				f = {
					s: 1,
					n: 0,
					d: 1
				},
				l = u.DivisionByZero = a("DivisionByZero"),
				p = u.InvalidParameter = a("InvalidParameter"),
				h = function (e, t) {
					var r,
					n = 0,
					i = 1,
					a = 1,
					u = 0,
					c = 0,
					p = 0,
					h = 1,
					m = 1,
					d = 0,
					v = 1,
					g = 1,
					y = 1,
					x = 1e7;
					if (void 0 === e || null === e);
					else if (void 0 !== t)
						n = e, i = t, a = n * i;
					else
						switch (typeof e) {
						case "object":
							"d" in e && "n" in e ? (n = e.n, i = e.d, "s" in e && (n *= e.s)) : 0 in e ? (n = e[0], 1 in e && (i = e[1])) : s(),
							a = n * i;
							break;
						case "number":
							if (e < 0 && (a = e, e = -e), e % 1 === 0)
								n = e;
							else if (e > 0) {
								for (e >= 1 && (m = Math.pow(10, Math.floor(1 + Math.log(e) / Math.LN10)), e /= m); v <= x && y <= x; ) {
									if (r = (d + g) / (v + y), e === r) {
										v + y <= x ? (n = d + g, i = v + y) : y > v ? (n = g, i = y) : (n = d, i = v);
										break
									}
									e > r ? (d += g, v += y) : (g += d, y += v),
									v > x ? (n = g, i = y) : (n = d, i = v)
								}
								n *= m
							} else (isNaN(e) || isNaN(t)) && (i = n = NaN);
							break;
						case "string":
							if (v = e.match(/\d+|./g), "-" === v[d] ? (a = -1, d++) : "+" === v[d] && d++, v.length === d + 1 ? c = o(v[d++], a) : "." === v[d + 1] || "." === v[d] ? ("." !== v[d] && (u = o(v[d++], a)), d++, (d + 1 === v.length || "(" === v[d + 1] && ")" === v[d + 3] || "'" === v[d + 1] && "'" === v[d + 3]) && (c = o(v[d], a), h = Math.pow(10, v[d].length), d++), ("(" === v[d] && ")" === v[d + 2] || "'" === v[d] && "'" === v[d + 2]) && (p = o(v[d + 1], a), m = Math.pow(10, v[d + 1].length) - 1, d += 3)) : "/" === v[d + 1] || ":" === v[d + 1] ? (c = o(v[d], a), h = o(v[d + 2], 1), d += 3) : "/" === v[d + 3] && " " === v[d + 1] && (u = o(v[d], a), c = o(v[d + 2], a), h = o(v[d + 4], 1), d += 5), v.length <= d) {
								i = h * m,
								a = n = p + i * u + m * c;
								break
							}
						default:
							s()
						}
					if (0 === i)
						throw new l;
					f.s = a < 0 ? -1 : 1,
					f.n = Math.abs(n),
					f.d = Math.abs(i)
				},
				m = function (e, t, r) {
					for (var n = 1; t > 0; e = e * e % r, t >>= 1)
						1 & t && (n = n * e % r);
					return n
				},
				d = function (e, t) {
					for (; t % 2 === 0; t /= 2);
					for (; t % 5 === 0; t /= 5);
					if (1 === t)
						return 0;
					for (var r = 10 % t, n = 1; 1 !== r; n++)
						if (r = 10 * r % t, n > c)
							return 0;
					return n
				},
				v = function (e, t, r) {
					for (var n = 1, i = m(10, r, t), a = 0; a < 300; a++) {
						if (n === i)
							return a;
						n = 10 * n % t,
						i = 10 * i % t
					}
					return 0
				},
				g = function (e, t) {
					if (!e)
						return t;
					if (!t)
						return e;
					for (; ; ) {
						if (e %= t, !e)
							return t;
						if (t %= e, !t)
							return e
					}
				};
				u.REDUCE = 1,
				u.prototype = {
					s: 1,
					n: 0,
					d: 1,
					abs: function () {
						return new u(this.n, this.d)
					},
					neg: function () {
						return new u(-this.s * this.n, this.d)
					},
					add: function (e, t) {
						return h(e, t),
						new u(this.s * this.n * f.d + f.s * this.d * f.n, this.d * f.d)
					},
					sub: function (e, t) {
						return h(e, t),
						new u(this.s * this.n * f.d - f.s * this.d * f.n, this.d * f.d)
					},
					mul: function (e, t) {
						return h(e, t),
						new u(this.s * f.s * this.n * f.n, this.d * f.d)
					},
					div: function (e, t) {
						return h(e, t),
						new u(this.s * f.s * this.n * f.d, this.d * f.n)
					},
					clone: function () {
						return new u(this)
					},
					mod: function (e, t) {
						return isNaN(this.n) || isNaN(this.d) ? new u(NaN) : void 0 === e ? new u(this.s * this.n % this.d, 1) : (h(e, t), 0 === f.n && 0 === this.d && u(0, 0), new u(this.s * f.d * this.n % (f.n * this.d), f.d * this.d))
					},
					gcd: function (e, t) {
						return h(e, t),
						new u(g(f.n, this.n), f.d * this.d / g(f.d, this.d))
					},
					lcm: function (e, t) {
						return h(e, t),
						0 === f.n && 0 === this.n ? new u : new u(f.n * this.n / g(f.n, this.n), g(f.d, this.d))
					},
					ceil: function (e) {
						return e = Math.pow(10, e || 0),
						isNaN(this.n) || isNaN(this.d) ? new u(NaN) : new u(Math.ceil(e * this.s * this.n / this.d), e)
					},
					floor: function (e) {
						return e = Math.pow(10, e || 0),
						isNaN(this.n) || isNaN(this.d) ? new u(NaN) : new u(Math.floor(e * this.s * this.n / this.d), e)
					},
					round: function (e) {
						return e = Math.pow(10, e || 0),
						isNaN(this.n) || isNaN(this.d) ? new u(NaN) : new u(Math.round(e * this.s * this.n / this.d), e)
					},
					inverse: function () {
						return new u(this.s * this.d, this.n)
					},
					pow: function (e) {
						return e < 0 ? new u(Math.pow(this.s * this.d, -e), Math.pow(this.n, -e)) : new u(Math.pow(this.s * this.n, e), Math.pow(this.d, e))
					},
					equals: function (e, t) {
						return h(e, t),
						this.s * this.n * f.d === f.s * f.n * this.d
					},
					compare: function (e, t) {
						h(e, t);
						var r = this.s * this.n * f.d - f.s * f.n * this.d;
						return (0 < r) - (r < 0)
					},
					divisible: function (e, t) {
						return h(e, t),
						!(!(f.n * this.d) || this.n * f.d % (f.n * this.d))
					},
					valueOf: function () {
						return this.s * this.n / this.d
					},
					toFraction: function (e) {
						var t,
						r = "",
						n = this.n,
						i = this.d;
						return this.s < 0 && (r += "-"),
						1 === i ? r += n : (e && (t = Math.floor(n / i)) > 0 && (r += t, r += " ", n %= i), r += n, r += "/", r += i),
						r
					},
					toLatex: function (e) {
						var t,
						r = "",
						n = this.n,
						i = this.d;
						return this.s < 0 && (r += "-"),
						1 === i ? r += n : (e && (t = Math.floor(n / i)) > 0 && (r += t, n %= i), r += "\\frac{", r += n, r += "}{", r += i, r += "}"),
						r
					},
					toContinued: function () {
						var e,
						t = this.n,
						r = this.d,
						n = [];
						do
							n.push(Math.floor(t / r)), e = t % r, t = r, r = e;
						while (1 !== t);
						return n
					},
					toString: function () {
						var e,
						t = this.n,
						r = this.d;
						if (isNaN(t) || isNaN(r))
							return "NaN";
						u.REDUCE || (e = g(t, r), t /= e, r /= e);
						var n = 15,
						i = d(t, r),
						a = v(t, r, i),
						o = this.s === -1 ? "-" : "";
						if (o += t / r | 0, t %= r, t *= 10, t && (o += "."), i) {
							for (var s = a; s--; )
								o += t / r | 0, t %= r, t *= 10;
							o += "(";
							for (var s = i; s--; )
								o += t / r | 0, t %= r, t *= 10;
							o += ")"
						} else
							for (var s = n; t && s--; )
								o += t / r | 0, t %= r, t *= 10;
						return o
					}
				},
				n = [],
				i = function () {
					return u
				}
				.apply(t, n),
				!(void 0 !== i && (e.exports = i))
			}
			(this)
		}, function (e, t, r) {
			e.exports = [r(72), r(43), r(175), r(176), r(177), r(178), r(27), r(93), r(179), r(0), r(180)]
		}, function (e, t, r) {
			"use strict";
			t.isBoolean = function (e) {
				return "boolean" == typeof e
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, d) {
				function v(t, r) {
					if (!(this instanceof v))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (r && !h(r))
						throw new Error("Invalid datatype: " + r);
					if (e.isMatrix(t))
						x(this, t, r);
					else if (t && f(t.index) && f(t.ptr) && f(t.size))
						this._values = t.values, this._index = t.index, this._ptr = t.ptr, this._size = t.size, this._datatype = r || t.datatype;
					else if (f(t))
						w(this, t, r);
					else {
						if (t)
							throw new TypeError("Unsupported type of data (" + i.types.type(t) + ")");
						this._values = [],
						this._index = [],
						this._ptr = [0],
						this._size = [0, 0],
						this._datatype = r
					}
				}
				var g = n(r(72)),
				y = n(r(11)),
				x = function (e, t, r) {
					"SparseMatrix" === t.type ? (e._values = t._values ? s.clone(t._values) : void 0, e._index = s.clone(t._index), e._ptr = s.clone(t._ptr), e._size = s.clone(t._size), e._datatype = r || t._datatype) : w(e, t.valueOf(), r || t._datatype)
				},
				w = function (e, t, r) {
					e._values = [],
					e._index = [],
					e._ptr = [],
					e._datatype = r;
					var n = t.length,
					i = 0,
					a = y,
					o = 0;
					if (h(r) && (a = d.find(y, [r, r]) || y, o = d.convert(0, r)), n > 0) {
						var s = 0;
						do {
							e._ptr.push(e._index.length);
							for (var u = 0; u < n; u++) {
								var c = t[u];
								if (f(c)) {
									if (0 === s && i < c.length && (i = c.length), s < c.length) {
										var l = c[s];
										a(l, o) || (e._values.push(l), e._index.push(u))
									}
								} else
									0 === s && i < 1 && (i = 1), a(c, o) || (e._values.push(c), e._index.push(u))
							}
							s++
						} while (s < i)
					}
					e._ptr.push(e._index.length),
					e._size = [n, i]
				};
				v.prototype = new g,
				v.prototype.type = "SparseMatrix",
				v.prototype.isSparseMatrix = !0,
				v.prototype.storage = function () {
					return "sparse"
				},
				v.prototype.datatype = function () {
					return this._datatype
				},
				v.prototype.create = function (e, t) {
					return new v(e, t)
				},
				v.prototype.density = function () {
					var e = this._size[0],
					t = this._size[1];
					return 0 !== e && 0 !== t ? this._index.length / (e * t) : 0
				},
				v.prototype.subset = function (e, t, r) {
					if (!this._values)
						throw new Error("Cannot invoke subset on a Pattern only matrix");
					switch (arguments.length) {
					case 1:
						return b(this, e);
					case 2:
					case 3:
						return N(this, e, t, r);
					default:
						throw new SyntaxError("Wrong number of arguments")
					}
				};
				var b = function (t, r) {
					if (!e.isIndex(r))
						throw new TypeError("Invalid index");
					var n = r.isScalar();
					if (n)
						return t.get(r.min());
					var i = r.size();
					if (i.length != t._size.length)
						throw new a(i.length, t._size.length);
					var o,
					s,
					u,
					c,
					f = r.min(),
					l = r.max();
					for (o = 0, s = t._size.length; o < s; o++)
						m(f[o], t._size[o]), m(l[o], t._size[o]);
					var p = t._values,
					h = t._index,
					d = t._ptr,
					g = r.dimension(0),
					y = r.dimension(1),
					x = [],
					w = [];
					g.forEach(function (e, t) {
						w[e] = t[0],
						x[e] = !0
					});
					var b = p ? [] : void 0,
					N = [],
					E = [];
					return y.forEach(function (e) {
						for (E.push(N.length), u = d[e], c = d[e + 1]; u < c; u++)
							o = h[u], x[o] === !0 && (N.push(w[o]), b && b.push(p[u]))
					}),
					E.push(N.length),
					new v({
						values: b,
						index: N,
						ptr: E,
						size: i,
						datatype: t._datatype
					})
				},
				N = function (t, r, n, i) {
					if (!r || r.isIndex !== !0)
						throw new TypeError("Invalid index");
					var u,
					c = r.size(),
					f = r.isScalar();
					if (e.isMatrix(n) ? (u = n.size(), n = n.toArray()) : u = o.size(n), f) {
						if (0 !== u.length)
							throw new TypeError("Scalar expected");
						t.set(r.min(), n, i)
					} else {
						if (1 !== c.length && 2 !== c.length)
							throw new a(c.length, t._size.length, "<");
						if (u.length < c.length) {
							for (var l = 0, p = 0; 1 === c[l] && 1 === u[l]; )
								l++;
							for (; 1 === c[l]; )
								p++, l++;
							n = o.unsqueeze(n, c.length, p, u)
						}
						if (!s.deepEqual(c, u))
							throw new a(c, u, ">");
						for (var h = r.min()[0], m = r.min()[1], d = u[0], v = u[1], g = 0; g < d; g++)
							for (var y = 0; y < v; y++) {
								var x = n[g][y];
								t.set([g + h, y + m], x, i)
							}
					}
					return t
				};
				v.prototype.get = function (e) {
					if (!f(e))
						throw new TypeError("Array expected");
					if (e.length != this._size.length)
						throw new a(e.length, this._size.length);
					if (!this._values)
						throw new Error("Cannot invoke get on a Pattern only matrix");
					var t = e[0],
					r = e[1];
					m(t, this._size[0]),
					m(r, this._size[1]);
					var n = E(t, this._ptr[r], this._ptr[r + 1], this._index);
					return n < this._ptr[r + 1] && this._index[n] === t ? this._values[n] : 0
				},
				v.prototype.set = function (e, t, r) {
					if (!f(e))
						throw new TypeError("Array expected");
					if (e.length != this._size.length)
						throw new a(e.length, this._size.length);
					if (!this._values)
						throw new Error("Cannot invoke set on a Pattern only matrix");
					var n = e[0],
					i = e[1],
					o = this._size[0],
					s = this._size[1],
					u = y,
					c = 0;
					h(this._datatype) && (u = d.find(y, [this._datatype, this._datatype]) || y, c = d.convert(0, this._datatype)),
					(n > o - 1 || i > s - 1) && (O(this, Math.max(n + 1, o), Math.max(i + 1, s), r), o = this._size[0], s = this._size[1]),
					m(n, o),
					m(i, s);
					var l = E(n, this._ptr[i], this._ptr[i + 1], this._index);
					return l < this._ptr[i + 1] && this._index[l] === n ? u(t, c) ? M(l, i, this._values, this._index, this._ptr) : this._values[l] = t : A(l, n, i, t, this._values, this._index, this._ptr),
					this
				};
				var E = function (e, t, r, n) {
					if (r - t === 0)
						return r;
					for (var i = t; i < r; i++)
						if (n[i] === e)
							return i;
					return t
				},
				M = function (e, t, r, n, i) {
					r.splice(e, 1),
					n.splice(e, 1);
					for (var a = t + 1; a < i.length; a++)
						i[a]--
				},
				A = function (e, t, r, n, i, a, o) {
					i.splice(e, 0, n),
					a.splice(e, 0, t);
					for (var s = r + 1; s < o.length; s++)
						o[s]++
				};
				v.prototype.resize = function (e, t, r) {
					if (!f(e))
						throw new TypeError("Array expected");
					if (2 !== e.length)
						throw new Error("Only two dimensions matrix are supported");
					e.forEach(function (t) {
						if (!c.isNumber(t) || !c.isInteger(t) || t < 0)
							throw new TypeError("Invalid size, must contain positive integers (size: " + u.format(e) + ")")
					});
					var n = r ? this.clone() : this;
					return O(n, e[0], e[1], t)
				};
				var O = function (e, t, r, n) {
					var i = n || 0,
					a = y,
					o = 0;
					h(e._datatype) && (a = d.find(y, [e._datatype, e._datatype]) || y, o = d.convert(0, e._datatype), i = d.convert(i, e._datatype));
					var s,
					u,
					c,
					f = !a(i, o),
					l = e._size[0],
					p = e._size[1];
					if (r > p) {
						for (u = p; u < r; u++)
							if (e._ptr[u] = e._values.length, f)
								for (s = 0; s < l; s++)
									e._values.push(i), e._index.push(s);
						e._ptr[r] = e._values.length
					} else
						r < p && (e._ptr.splice(r + 1, p - r), e._values.splice(e._ptr[r], e._values.length), e._index.splice(e._ptr[r], e._index.length));
					if (p = r, t > l) {
						if (f) {
							var m = 0;
							for (u = 0; u < p; u++) {
								e._ptr[u] = e._ptr[u] + m,
								c = e._ptr[u + 1] + m;
								var v = 0;
								for (s = l; s < t; s++, v++)
									e._values.splice(c + v, 0, i), e._index.splice(c + v, 0, s), m++
							}
							e._ptr[p] = e._values.length
						}
					} else if (t < l) {
						var g = 0;
						for (u = 0; u < p; u++) {
							e._ptr[u] = e._ptr[u] - g;
							var x = e._ptr[u],
							w = e._ptr[u + 1] - g;
							for (c = x; c < w; c++)
								s = e._index[c], s > t - 1 && (e._values.splice(c, 1), e._index.splice(c, 1), g++)
						}
						e._ptr[u] = e._values.length
					}
					return e._size[0] = t,
					e._size[1] = r,
					e
				};
				v.prototype.reshape = function (e, t) {
					if (!f(e))
						throw new TypeError("Array expected");
					if (2 !== e.length)
						throw new Error("Sparse matrices can only be reshaped in two dimensions");
					if (e.forEach(function (t) {
							if (!c.isNumber(t) || !c.isInteger(t) || t < 0)
								throw new TypeError("Invalid size, must contain positive integers (size: " + u.format(e) + ")")
							}), this._size[0] * this._size[1] !== e[0] * e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");
					var r = t ? this.clone() : this;
					if (this._size[0] === e[0] && this._size[1] === e[1])
						return r;
					for (var n = [], i = 0; i < r._ptr.length; i++)
						for (var a = 0; a < r._ptr[i + 1] - r._ptr[i]; a++)
							n.push(i);
					for (var o = r._values.slice(), s = r._index.slice(), i = 0; i < r._index.length; i++) {
						var l = s[i],
						p = n[i],
						h = l * r._size[1] + p;
						n[i] = h % e[1],
						s[i] = Math.floor(h / e[1])
					}
					r._values.length = 0,
					r._index.length = 0,
					r._ptr.length = e[1] + 1,
					r._size = e.slice();
					for (var i = 0; i < r._ptr.length; i++)
						r._ptr[i] = 0;
					for (var m = 0; m < o.length; m++) {
						var i = s[m],
						a = n[m],
						d = o[m],
						v = E(i, r._ptr[a], r._ptr[a + 1], r._index);
						A(v, i, a, d, r._values, r._index, r._ptr)
					}
					return r
				},
				v.prototype.clone = function () {
					var e = new v({
							values: this._values ? s.clone(this._values) : void 0,
							index: s.clone(this._index),
							ptr: s.clone(this._ptr),
							size: s.clone(this._size),
							datatype: this._datatype
						});
					return e
				},
				v.prototype.size = function () {
					return this._size.slice(0)
				},
				v.prototype.map = function (e, t) {
					if (!this._values)
						throw new Error("Cannot invoke map on a Pattern only matrix");
					var r = this,
					n = this._size[0],
					i = this._size[1],
					a = function (t, n, i) {
						return e(t, [n, i], r)
					};
					return T(this, 0, n - 1, 0, i - 1, a, t)
				};
				var T = function (e, t, r, n, i, a, o) {
					var s = [],
					u = [],
					c = [],
					f = y,
					l = 0;
					h(e._datatype) && (f = d.find(y, [e._datatype, e._datatype]) || y, l = d.convert(0, e._datatype));
					for (var p = function (e, t, r) {
						e = a(e, t, r),
						f(e, l) || (s.push(e), u.push(t))
					}, m = n; m <= i; m++) {
						c.push(s.length);
						for (var g = e._ptr[m], x = e._ptr[m + 1], w = t, b = g; b < x; b++) {
							var N = e._index[b];
							if (N >= t && N <= r) {
								if (!o)
									for (var E = w; E < N; E++)
										p(0, E - t, m - n);
								p(e._values[b], N - t, m - n)
							}
							w = N + 1
						}
						if (!o)
							for (var M = w; M <= r; M++)
								p(0, M - t, m - n)
					}
					return c.push(s.length),
					new v({
						values: s,
						index: u,
						ptr: c,
						size: [r - t + 1, i - n + 1]
					})
				};
				v.prototype.forEach = function (e, t) {
					if (!this._values)
						throw new Error("Cannot invoke forEach on a Pattern only matrix");
					for (var r = this, n = this._size[0], i = this._size[1], a = 0; a < i; a++) {
						for (var o = this._ptr[a], s = this._ptr[a + 1], u = 0, c = o; c < s; c++) {
							var f = this._index[c];
							if (!t)
								for (var l = u; l < f; l++)
									e(0, [l, a], r);
							e(this._values[c], [f, a], r),
							u = f + 1
						}
						if (!t)
							for (var p = u; p < n; p++)
								e(0, [p, a], r)
					}
				},
				v.prototype.toArray = function () {
					return _(this._values, this._index, this._ptr, this._size, !0)
				},
				v.prototype.valueOf = function () {
					return _(this._values, this._index, this._ptr, this._size, !1)
				};
				var _ = function (e, t, r, n, i) {
					var a,
					o,
					u = n[0],
					c = n[1],
					f = [];
					for (a = 0; a < u; a++)
						for (f[a] = [], o = 0; o < c; o++)
							f[a][o] = 0;
					for (o = 0; o < c; o++)
						for (var l = r[o], p = r[o + 1], h = l; h < p; h++)
							a = t[h], f[a][o] = e ? i ? s.clone(e[h]) : e[h] : 1;
					return f
				};
				return v.prototype.format = function (e) {
					for (var t = this._size[0], r = this._size[1], n = this.density(), i = "Sparse Matrix [" + u.format(t, e) + " x " + u.format(r, e) + "] density: " + u.format(n, e) + "\n", a = 0; a < r; a++)
						for (var o = this._ptr[a], s = this._ptr[a + 1], c = o; c < s; c++) {
							var f = this._index[c];
							i += "\n    (" + u.format(f, e) + ", " + u.format(a, e) + ") ==> " + (this._values ? u.format(this._values[c], e) : "X")
						}
					return i
				},
				v.prototype.toString = function () {
					return u.format(this.toArray())
				},
				v.prototype.toJSON = function () {
					return {
						mathjs: "SparseMatrix",
						values: this._values,
						index: this._index,
						ptr: this._ptr,
						size: this._size,
						datatype: this._datatype
					}
				},
				v.prototype.diagonal = function (t) {
					if (t) {
						if (e.isBigNumber(t) && (t = t.toNumber()), !l(t) || !p(t))
							throw new TypeError("The parameter k must be an integer number")
					} else
						t = 0;
					var r = t > 0 ? t : 0,
					n = t < 0 ? -t : 0,
					i = this._size[0],
					a = this._size[1],
					o = Math.min(i - n, a - r),
					s = [],
					u = [],
					c = [];
					c[0] = 0;
					for (var f = r; f < a && s.length < o; f++)
						for (var h = this._ptr[f], m = this._ptr[f + 1], d = h; d < m; d++) {
							var g = this._index[d];
							if (g === f - r + n) {
								s.push(this._values[d]),
								u[s.length - 1] = g - n;
								break
							}
						}
					return c.push(s.length),
					new v({
						values: s,
						index: u,
						ptr: c,
						size: [o, 1]
					})
				},
				v.fromJSON = function (e) {
					return new v(e)
				},
				v.diagonal = function (t, r, n, i, a) {
					if (!f(t))
						throw new TypeError("Array expected, size parameter");
					if (2 !== t.length)
						throw new Error("Only two dimensions matrix are supported");
					if (t = t.map(function (t) {
								if (e.isBigNumber(t) && (t = t.toNumber()), !l(t) || !p(t) || t < 1)
									throw new Error("Size values must be positive integers");
									return t
								}), n) {
							if (e.isBigNumber(n) && (n = n.toNumber()), !l(n) || !p(n))
								throw new TypeError("The parameter k must be an integer number")
						}
					else
						n = 0;
					var o = y,
					s = 0;
					h(a) && (o = d.find(y, [a, a]) || y, s = d.convert(0, a));
					var u,
					c = n > 0 ? n : 0,
					m = n < 0 ? -n : 0,
					g = t[0],
					x = t[1],
					w = Math.min(g - m, x - c);
					if (f(r)) {
						if (r.length !== w)
							throw new Error("Invalid value array length");
						u = function (e) {
							return r[e]
						}
					} else if (e.isMatrix(r)) {
						var b = r.size();
						if (1 !== b.length || b[0] !== w)
							throw new Error("Invalid matrix length");
						u = function (e) {
							return r.get([e])
						}
					} else
						u = function () {
							return r
						};
					for (var N = [], E = [], M = [], A = 0; A < x; A++) {
						M.push(N.length);
						var O = A - c;
						if (O >= 0 && O < w) {
							var T = u(O);
							o(T, s) || (E.push(O + m), N.push(T))
						}
					}
					return M.push(N.length),
					new v({
						values: N,
						index: E,
						ptr: M,
						size: [g, x]
					})
				},
				v.prototype.swapRows = function (e, t) {
					if (!(l(e) && p(e) && l(t) && p(t)))
						throw new Error("Row index must be positive integers");
					if (2 !== this._size.length)
						throw new Error("Only two dimensional matrix is supported");
					return m(e, this._size[0]),
					m(t, this._size[0]),
					v._swapRows(e, t, this._size[1], this._values, this._index, this._ptr),
					this
				},
				v._forEachRow = function (e, t, r, n, i) {
					for (var a = n[e], o = n[e + 1], s = a; s < o; s++)
						i(r[s], t[s])
				},
				v._swapRows = function (e, t, r, n, i, a) {
					for (var o = 0; o < r; o++) {
						var s = a[o],
						u = a[o + 1],
						c = E(e, s, u, i),
						f = E(t, s, u, i);
						if (c < u && f < u && i[c] === e && i[f] === t) {
							if (n) {
								var l = n[c];
								n[c] = n[f],
								n[f] = l
							}
						} else if (c < u && i[c] === e && (f >= u || i[f] !== t)) {
							var p = n ? n[c] : void 0;
							i.splice(f, 0, t),
							n && n.splice(f, 0, p),
							i.splice(f <= c ? c + 1 : c, 1),
							n && n.splice(f <= c ? c + 1 : c, 1)
						} else if (f < u && i[f] === t && (c >= u || i[c] !== e)) {
							var h = n ? n[f] : void 0;
							i.splice(c, 0, e),
							n && n.splice(c, 0, h),
							i.splice(c <= f ? f + 1 : f, 1),
							n && n.splice(c <= f ? f + 1 : f, 1)
						}
					}
				},
				e.Matrix._storage.sparse = v,
				v
			}
			var i = r(25),
			a = r(10),
			o = i.array,
			s = i.object,
			u = i.string,
			c = i.number,
			f = Array.isArray,
			l = c.isNumber,
			p = c.isInteger,
			h = u.isString,
			m = o.validateIndex;
			t.name = "SparseMatrix",
			t.path = "type",
			t.factory = n,
			t.lazy = !1
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				function i() {
					if (!(this instanceof i))
						throw new SyntaxError("Constructor must be called with the new operator");
					this._values = [],
					this._heap = new e.FibonacciHeap
				}
				var a = n(r(18)),
				o = n(r(11));
				return i.prototype.type = "Spa",
				i.prototype.isSpa = !0,
				i.prototype.set = function (e, t) {
					if (this._values[e])
						this._values[e].value = t;
					else {
						var r = this._heap.insert(e, t);
						this._values[e] = r
					}
				},
				i.prototype.get = function (e) {
					var t = this._values[e];
					return t ? t.value : 0
				},
				i.prototype.accumulate = function (e, t) {
					var r = this._values[e];
					r ? r.value = a(r.value, t) : (r = this._heap.insert(e, t), this._values[e] = r)
				},
				i.prototype.forEach = function (e, t, r) {
					var n = this._heap,
					i = this._values,
					a = [],
					s = n.extractMinimum();
					for (s && a.push(s); s && s.key <= t; )
						s.key >= e && (o(s.value, 0) || r(s.key, s.value, this)), s = n.extractMinimum(), s && a.push(s);
					for (var u = 0; u < a.length; u++) {
						var c = a[u];
						s = n.insert(c.key, c.value),
						i[s.key] = s
					}
				},
				i.prototype.swap = function (e, t) {
					var r = this._values[e],
					n = this._values[t];
					if (!r && n)
						r = this._heap.insert(e, n.value), this._heap.remove(n), this._values[e] = r, this._values[t] = void 0;
					else if (r && !n)
						n = this._heap.insert(t, r.value), this._heap.remove(r), this._values[t] = n, this._values[e] = void 0;
					else if (r && n) {
						var i = r.value;
						r.value = n.value,
						n.value = i
					}
				},
				i
			}
			t.name = "Spa",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a() {
					if (!(this instanceof a))
						throw new SyntaxError("Constructor must be called with the new operator");
					this._minimum = null,
					this._size = 0
				}
				var o = n(r(44)),
				s = n(r(34)),
				u = 1 / Math.log((1 + Math.sqrt(5)) / 2);
				a.prototype.type = "FibonacciHeap",
				a.prototype.isFibonacciHeap = !0,
				a.prototype.insert = function (e, t) {
					var r = {
						key: e,
						value: t,
						degree: 0
					};
					if (this._minimum) {
						var n = this._minimum;
						r.left = n,
						r.right = n.right,
						n.right = r,
						r.right.left = r,
						o(e, n.key) && (this._minimum = r)
					} else
						r.left = r, r.right = r, this._minimum = r;
					return this._size++,
					r
				},
				a.prototype.size = function () {
					return this._size
				},
				a.prototype.clear = function () {
					this._minimum = null,
					this._size = 0
				},
				a.prototype.isEmpty = function () {
					return 0 === this._size
				},
				a.prototype.extractMinimum = function () {
					var e = this._minimum;
					if (null === e)
						return e;
					for (var t = this._minimum, r = e.degree, n = e.child; r > 0; ) {
						var i = n.right;
						n.left.right = n.right,
						n.right.left = n.left,
						n.left = t,
						n.right = t.right,
						t.right = n,
						n.right.left = n,
						n.parent = null,
						n = i,
						r--
					}
					return e.left.right = e.right,
					e.right.left = e.left,
					e == e.right ? t = null : (t = e.right, t = h(t, this._size)),
					this._size--,
					this._minimum = t,
					e
				},
				a.prototype.remove = function (e) {
					this._minimum = c(this._minimum, e, -1),
					this.extractMinimum()
				};
				var c = function (e, t, r) {
					t.key = r;
					var n = t.parent;
					return n && o(t.key, n.key) && (f(e, t, n), l(e, n)),
					o(t.key, e.key) && (e = t),
					e
				},
				f = function (e, t, r) {
					t.left.right = t.right,
					t.right.left = t.left,
					r.degree--,
					r.child == t && (r.child = t.right),
					0 === r.degree && (r.child = null),
					t.left = e,
					t.right = e.right,
					e.right = t,
					t.right.left = t,
					t.parent = null,
					t.mark = !1
				},
				l = function (e, t) {
					var r = t.parent;
					r && (t.mark ? (f(e, t, r), l(r)) : t.mark = !0)
				},
				p = function (e, t) {
					e.left.right = e.right,
					e.right.left = e.left,
					e.parent = t,
					t.child ? (e.left = t.child, e.right = t.child.right, t.child.right = e, e.right.left = e) : (t.child = e, e.right = e, e.left = e),
					t.degree++,
					e.mark = !1
				},
				h = function (e, t) {
					var r = Math.floor(Math.log(t) * u) + 1,
					n = new Array(r),
					i = 0,
					a = e;
					if (a)
						for (i++, a = a.right; a !== e; )
							i++, a = a.right;
					for (var c; i > 0; ) {
						for (var f = a.degree, l = a.right; ; ) {
							if (c = n[f], !c)
								break;
							if (s(a.key, c.key)) {
								var h = c;
								c = a,
								a = h
							}
							p(c, a),
							n[f] = null,
							f++
						}
						n[f] = a,
						a = l,
						i--
					}
					e = null;
					for (var m = 0; m < r; m++)
						c = n[m], c && (e ? (c.left.right = c.right, c.right.left = c.left, c.left = e, c.right = e.right, e.right = c, c.right.left = c, o(c.key, e.key) && (e = c)) : e = c);
					return e
				};
				return a
			}
			t.name = "FibonacciHeap",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				function a(t, r) {
					if (!(this instanceof a))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (r && !u(r))
						throw new Error("Invalid datatype: " + r);
					if (e.isMatrix(t) || s(t)) {
						var n = new c(t, r);
						this._data = n._data,
						this._size = n._size,
						this._datatype = n._datatype,
						this._min = null,
						this._max = null
					} else if (t && s(t.data) && s(t.size))
						this._data = t.data, this._size = t.size, this._datatype = t.datatype, this._min = "undefined" != typeof t.min ? t.min : null, this._max = "undefined" != typeof t.max ? t.max : null;
					else {
						if (t)
							throw new TypeError("Unsupported type of data (" + i.types.type(t) + ")");
						this._data = [],
						this._size = [0],
						this._datatype = r,
						this._min = null,
						this._max = null
					}
				}
				var c = n(r(43)),
				f = n(r(44));
				return a.prototype = new c,
				a.prototype.type = "ImmutableDenseMatrix",
				a.prototype.isImmutableDenseMatrix = !0,
				a.prototype.subset = function (t) {
					switch (arguments.length) {
					case 1:
						var r = c.prototype.subset.call(this, t);
						return e.isMatrix(r) ? new a({
							data: r._data,
							size: r._size,
							datatype: r._datatype
						}) : r;
					case 2:
					case 3:
						throw new Error("Cannot invoke set subset on an Immutable Matrix instance");
					default:
						throw new SyntaxError("Wrong number of arguments")
					}
				},
				a.prototype.set = function () {
					throw new Error("Cannot invoke set on an Immutable Matrix instance")
				},
				a.prototype.resize = function () {
					throw new Error("Cannot invoke resize on an Immutable Matrix instance")
				},
				a.prototype.reshape = function () {
					throw new Error("Cannot invoke reshape on an Immutable Matrix instance")
				},
				a.prototype.clone = function () {
					var e = new a({
							data: o.clone(this._data),
							size: o.clone(this._size),
							datatype: this._datatype
						});
					return e
				},
				a.prototype.toJSON = function () {
					return {
						mathjs: "ImmutableDenseMatrix",
						data: this._data,
						size: this._size,
						datatype: this._datatype
					}
				},
				a.fromJSON = function (e) {
					return new a(e)
				},
				a.prototype.swapRows = function () {
					throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")
				},
				a.prototype.min = function () {
					if (null === this._min) {
						var e = null;
						this.forEach(function (t) {
							(null === e || f(t, e)) && (e = t)
						}),
						this._min = null !== e ? e : void 0
					}
					return this._min
				},
				a.prototype.max = function () {
					if (null === this._max) {
						var e = null;
						this.forEach(function (t) {
							(null === e || f(e, t)) && (e = t)
						}),
						this._max = null !== e ? e : void 0
					}
					return this._max
				},
				a
			}
			var i = r(25),
			a = i.string,
			o = i.object,
			s = Array.isArray,
			u = a.isString;
			t.name = "ImmutableDenseMatrix",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				return n("index", {
					"...number | string | BigNumber | Range | Array | Matrix": function (t) {
						var r = t.map(function (t) {
								return e.isBigNumber(t) ? t.toNumber() : Array.isArray(t) || e.isMatrix(t) ? t.map(function (t) {
									return e.isBigNumber(t) ? t.toNumber() : t
								}) : t
							}),
						n = new e.Index;
						return e.Index.apply(n, r),
						n
					}
				})
			}
			t.name = "index",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var i = e.SparseMatrix,
				a = n("sparse", {
						"": function () {
							return new i([])
						},
						string: function (e) {
							return new i([], e)
						},
						"Array | Matrix": function (e) {
							return new i(e)
						},
						"Array | Matrix, string": function (e, t) {
							return new i(e, t)
						}
					});
				return a.toTex = {
					0: "\\begin{bsparse}\\end{bsparse}",
					1: "\\left(${args[0]}\\right)"
				},
				a
			}
			t.name = "sparse",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(94)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("string", {
						"": function () {
							return ""
						},
						number: a.format,
						null: function (e) {
							return "null"
						},
						boolean: function (e) {
							return e + ""
						},
						string: function (e) {
							return e
						},
						"Array | Matrix": function (e) {
							return i(e, o)
						},
						any: function (e) {
							return String(e)
						}
					});
				return o.toTex = {
					0: '\\mathtt{""}',
					1: "\\mathrm{string}\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = r(3);
			t.name = "string",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(184), r(185), r(186), r(187), r(188)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s, u) {
				function c(t, r) {
					if (!(this instanceof c))
						throw new Error("Constructor must be called with the new operator");
					if (void 0 != t && !C(t) && !e.isComplex(t))
						throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");
					if (void 0 != r && ("string" != typeof r || "" === r))
						throw new TypeError("Second parameter in Unit constructor must be a string");
					if (void 0 != r) {
						var n = c.parse(r);
						this.units = n.units,
						this.dimensions = n.dimensions
					} else {
						this.units = [{
								unit: $,
								prefix: L.NONE,
								power: 0
							}
						],
						this.dimensions = [];
						for (var i = 0; i < F.length; i++)
							this.dimensions[i] = 0
					}
					this.value = void 0 != t ? this._normalize(t) : null,
					this.fixPrefix = !1,
					this.isUnitListSimplified = !0
				}
				function f() {
					for (; " " == U || "\t" == U; )
						h()
				}
				function l(e) {
					return e >= "0" && e <= "9" || "." == e
				}
				function p(e) {
					return e >= "0" && e <= "9"
				}
				function h() {
					R++,
					U = P.charAt(R)
				}
				function m(e) {
					R = e,
					U = P.charAt(R)
				}
				function d() {
					var e,
					t = "";
					if (e = R, "+" == U ? h() : "-" == U && (t += U, h()), !l(U))
						return m(e), null;
					if ("." == U) {
						if (t += U, h(), !p(U))
							return m(e), null
					} else {
						for (; p(U); )
							t += U, h();
						"." == U && (t += U, h())
					}
					for (; p(U); )
						t += U, h();
					if ("E" == U || "e" == U) {
						var r = "",
						n = R;
						if (r += U, h(), "+" != U && "-" != U || (r += U, h()), !p(U))
							return m(n), t;
						for (t += r; p(U); )
							t += U, h()
					}
					return t
				}
				function v() {
					for (var e = "", t = P.charCodeAt(R); t >= 48 && t <= 57 || t >= 65 && t <= 90 || t >= 97 && t <= 122; )
						e += U, h(), t = P.charCodeAt(R);
					return t = e.charCodeAt(0),
					t >= 65 && t <= 90 || t >= 97 && t <= 122 ? e || null : null
				}
				function g(e) {
					return U === e ? (h(), e) : null
				}
				function y(e) {
					if (G.hasOwnProperty(e)) {
						var t = G[e],
						r = t.prefixes[""];
						return {
							unit: t,
							prefix: r
						}
					}
					for (var n in G)
						if (G.hasOwnProperty(n) && i(e, n)) {
							var t = G[n],
							a = e.length - n.length,
							o = e.substring(0, a),
							r = t.prefixes.hasOwnProperty(o) ? t.prefixes[o] : void 0;
							if (void 0 !== r)
								return {
									unit: t,
									prefix: r
								}
						}
					return null
				}
				function x(t) {
					if ("BigNumber" === t.number) {
						var r = o.pi(e.BigNumber);
						G.rad.value = new e.BigNumber(1),
						G.deg.value = r.div(180),
						G.grad.value = r.div(200),
						G.cycle.value = r.times(2),
						G.arcsec.value = r.div(648e3),
						G.arcmin.value = r.div(10800)
					} else
						G.rad.value = 1, G.deg.value = Math.PI / 180, G.grad.value = Math.PI / 200, G.cycle.value = 2 * Math.PI, G.arcsec.value = Math.PI / 648e3, G.arcmin.value = Math.PI / 10800
				}
				function w(e) {
					for (var t = 0; t < e.length; t++) {
						var r = e.charAt(t),
						n = function (e) {
							return /^[a-zA-Z]$/.test(e)
						},
						i = function (e) {
							return e >= "0" && e <= "9"
						};
						if (0 === t && !n(r))
							throw new Error('Invalid unit name (must begin with alpha character): "' + e + '"');
						if (t > 0 && !n(r) && !i(r))
							throw new Error('Invalid unit name (only alphanumeric characters are allowed): "' + e + '"')
					}
				}
				var b = n(r(20)),
				N = n(r(21)),
				E = n(r(23)),
				M = n(r(19)),
				A = n(r(45)),
				O = n(r(29)),
				T = n(r(96)),
				_ = n(r(97)),
				S = n(r(30)),
				C = n(r(75)),
				z = n(r(98)),
				k = n(r(76)),
				I = n(r(74)),
				B = n(r(91));
				c.prototype.type = "Unit",
				c.prototype.isUnit = !0;
				var P,
				R,
				U;
				c.parse = function (r, n) {
					if (n = n || {}, P = r, R = -1, U = "", "string" != typeof P)
						throw new TypeError("Invalid argument in Unit.parse, string expected");
					var i = new c;
					i.units = [],
					h(),
					f();
					var a = d(),
					o = null;
					a && (o = "BigNumber" === t.number ? new e.BigNumber(a) : "Fraction" === t.number ? new e.Fraction(a) : parseFloat(a)),
					f();
					for (var s = 1, u = !1, l = [], p = 1; ; ) {
						for (f(); "(" === U; )
							l.push(s), p *= s, s = 1, h(), f();
						if (!U)
							break;
						var m = U,
						x = v();
						if (null == x)
							throw new SyntaxError('Unexpected "' + m + '" in "' + P + '" at index ' + R.toString());
						var w = y(x);
						if (null == w)
							throw new SyntaxError('Unit "' + x + '" not found.');
						var b = s * p;
						if (f(), g("^")) {
							f();
							var N = d();
							if (null == N)
								throw new SyntaxError('In "' + r + '", "^" must be followed by a floating-point number');
							b *= N
						}
						i.units.push({
							unit: w.unit,
							prefix: w.prefix,
							power: b
						});
						for (var E = 0; E < F.length; E++)
							i.dimensions[E] += (w.unit.dimensions[E] || 0) * b;
						for (f(); ")" === U; ) {
							if (0 === l.length)
								throw new SyntaxError('Unmatched ")" in "' + P + '" at index ' + R.toString());
							p /= l.pop(),
							h(),
							f()
						}
						if (u = !1, g("*") ? (s = 1, u = !0) : g("/") ? (s = -1, u = !0) : s = 1, w.unit.base) {
							var M = w.unit.base.key;
							V.auto[M] = {
								unit: w.unit,
								prefix: w.prefix
							}
						}
					}
					if (f(), U)
						throw new SyntaxError('Could not parse: "' + r + '"');
					if (u)
						throw new SyntaxError('Trailing characters: "' + r + '"');
					if (0 !== l.length)
						throw new SyntaxError('Unmatched "(" in "' + P + '"');
					if (0 == i.units.length && !n.allowNoUnits)
						throw new SyntaxError('"' + r + '" contains no units');
					return i.value = void 0 != o ? i._normalize(o) : null,
					i
				},
				c.prototype.clone = function () {
					var e = new c;
					e.fixPrefix = this.fixPrefix,
					e.isUnitListSimplified = this.isUnitListSimplified,
					e.value = a(this.value),
					e.dimensions = this.dimensions.slice(0),
					e.units = [];
					for (var t = 0; t < this.units.length; t++) {
						e.units[t] = {};
						for (var r in this.units[t])
							this.units[t].hasOwnProperty(r) && (e.units[t][r] = this.units[t][r])
					}
					return e
				},
				c.prototype._isDerived = function () {
					return 0 !== this.units.length && (this.units.length > 1 || Math.abs(this.units[0].power - 1) > 1e-15)
				},
				c.prototype._normalize = function (e) {
					var t,
					r,
					n,
					i,
					a;
					if (null == e || 0 === this.units.length)
						return e;
					if (this._isDerived()) {
						var o = e;
						a = c._getNumberConverter(k(e));
						for (var s = 0; s < this.units.length; s++)
							t = a(this.units[s].unit.value), i = a(this.units[s].prefix.value), n = a(this.units[s].power), o = E(o, A(E(t, i), n));
						return o
					}
					return a = c._getNumberConverter(k(e)),
					t = a(this.units[0].unit.value),
					r = a(this.units[0].unit.offset),
					i = a(this.units[0].prefix.value),
					E(b(e, r), E(t, i))
				},
				c.prototype._denormalize = function (e, t) {
					var r,
					n,
					i,
					a,
					o;
					if (null == e || 0 === this.units.length)
						return e;
					if (this._isDerived()) {
						var s = e;
						o = c._getNumberConverter(k(e));
						for (var u = 0; u < this.units.length; u++)
							r = o(this.units[u].unit.value), a = o(this.units[u].prefix.value), i = o(this.units[u].power), s = M(s, A(E(r, a), i));
						return s
					}
					return o = c._getNumberConverter(k(e)),
					r = o(this.units[0].unit.value),
					a = o(this.units[0].prefix.value),
					n = o(this.units[0].unit.offset),
					void 0 == t ? N(M(M(e, r), a), n) : N(M(M(e, r), t), n)
				},
				c.isValuelessUnit = function (e) {
					return null != y(e)
				},
				c.prototype.hasBase = function (e) {
					if ("string" == typeof e && (e = D[e]), !e)
						return !1;
					for (var t = 0; t < F.length; t++)
						if (Math.abs((this.dimensions[t] || 0) - (e.dimensions[t] || 0)) > 1e-12)
							return !1;
					return !0
				},
				c.prototype.equalBase = function (e) {
					for (var t = 0; t < F.length; t++)
						if (Math.abs((this.dimensions[t] || 0) - (e.dimensions[t] || 0)) > 1e-12)
							return !1;
					return !0
				},
				c.prototype.equals = function (e) {
					return this.equalBase(e) && S(this.value, e.value)
				},
				c.prototype.multiply = function (e) {
					for (var t = this.clone(), r = 0; r < F.length; r++)
						t.dimensions[r] = (this.dimensions[r] || 0) + (e.dimensions[r] || 0);
					for (var r = 0; r < e.units.length; r++) {
						var n = {};
						for (var i in e.units[r])
							n[i] = e.units[r][i];
						t.units.push(n)
					}
					if (null != this.value || null != e.value) {
						var a = null == this.value ? this._normalize(1) : this.value,
						o = null == e.value ? e._normalize(1) : e.value;
						t.value = E(a, o)
					} else
						t.value = null;
					return t.isUnitListSimplified = !1,
					q(t)
				},
				c.prototype.divide = function (e) {
					for (var t = this.clone(), r = 0; r < F.length; r++)
						t.dimensions[r] = (this.dimensions[r] || 0) - (e.dimensions[r] || 0);
					for (var r = 0; r < e.units.length; r++) {
						var n = {};
						for (var i in e.units[r])
							n[i] = e.units[r][i];
						n.power = -n.power,
						t.units.push(n)
					}
					if (null != this.value || null != e.value) {
						var a = null == this.value ? this._normalize(1) : this.value,
						o = null == e.value ? e._normalize(1) : e.value;
						t.value = M(a, o)
					} else
						t.value = null;
					return t.isUnitListSimplified = !1,
					q(t)
				},
				c.prototype.pow = function (e) {
					for (var t = this.clone(), r = 0; r < F.length; r++)
						t.dimensions[r] = (this.dimensions[r] || 0) * e;
					for (var r = 0; r < t.units.length; r++)
						t.units[r].power *= e;
					return null != t.value ? t.value = A(t.value, e) : t.value = null,
					t.isUnitListSimplified = !1,
					q(t)
				};
				var q = function (e) {
					return e.equalBase(D.NONE) && null !== e.value && !t.predictable ? e.value : e
				};
				c.prototype.abs = function () {
					var e = this.clone();
					e.value = O(e.value);
					for (var t in e.units)
						"VA" !== e.units[t].unit.name && "VAR" !== e.units[t].unit.name || (e.units[t].unit = G.W);
					return e
				},
				c.prototype.to = function (t) {
					var r,
					n = null == this.value ? this._normalize(1) : this.value;
					if ("string" == typeof t) {
						if (r = c.parse(t), !this.equalBase(r))
							throw new Error("Units do not match");
						if (null !== r.value)
							throw new Error("Cannot convert to a unit with a value");
						return r.value = a(n),
						r.fixPrefix = !0,
						r.isUnitListSimplified = !0,
						r
					}
					if (e.isUnit(t)) {
						if (!this.equalBase(t))
							throw new Error("Units do not match");
						if (null !== t.value)
							throw new Error("Cannot convert to a unit with a value");
						return r = t.clone(),
						r.value = a(n),
						r.fixPrefix = !0,
						r.isUnitListSimplified = !0,
						r
					}
					throw new Error("String or Unit expected as parameter")
				},
				c.prototype.toNumber = function (e) {
					return I(this.toNumeric(e))
				},
				c.prototype.toNumeric = function (e) {
					var t = this;
					return e && (t = this.to(e)),
					t.simplifyUnitListLazy(),
					t._isDerived() ? t._denormalize(t.value) : t._denormalize(t.value, t.units[0].prefix.value)
				},
				c.prototype.toString = function () {
					return this.format()
				},
				c.prototype.toJSON = function () {
					return {
						mathjs: "Unit",
						value: this._denormalize(this.value),
						unit: this.formatUnits(),
						fixPrefix: this.fixPrefix
					}
				},
				c.fromJSON = function (e) {
					var t = new c(e.value, e.unit);
					return t.fixPrefix = e.fixPrefix || !1,
					t
				},
				c.prototype.valueOf = c.prototype.toString,
				c.prototype.simplifyUnitListLazy = function () {
					if (!this.isUnitListSimplified && null != this.value) {
						var e,
						t = [];
						for (var r in W)
							if (this.hasBase(D[r])) {
								e = r;
								break
							}
						if ("NONE" === e)
							this.units = [];
						else {
							var n;
							e && W.hasOwnProperty(e) && (n = W[e]);
							if (n)
								this.units = [{
										unit: n.unit,
										prefix: n.prefix,
										power: 1
									}
								];
							else {
								for (var i = !1, a = 0; a < F.length; a++) {
									var o = F[a];
									Math.abs(this.dimensions[a] || 0) > 1e-12 && (W.hasOwnProperty(o) ? t.push({
											unit: W[o].unit,
											prefix: W[o].prefix,
											power: this.dimensions[a] || 0
										}) : i = !0)
								}
								t.length < this.units.length && !i && (this.units = t)
							}
						}
						this.isUnitListSimplified = !0
					}
				},
				c.prototype.toSI = function () {
					for (var e = this.clone(), t = [], r = 0; r < F.length; r++) {
						var n = F[r];
						if (Math.abs(e.dimensions[r] || 0) > 1e-12) {
							if (!V.si.hasOwnProperty(n))
								throw new Error("Cannot express custom unit " + n + " in SI units");
							t.push({
								unit: V.si[n].unit,
								prefix: V.si[n].prefix,
								power: e.dimensions[r] || 0
							})
						}
					}
					return e.units = t,
					e.isUnitListSimplified = !0,
					e
				},
				c.prototype.formatUnits = function () {
					this.simplifyUnitListLazy();
					for (var e = "", t = "", r = 0, n = 0, i = 0; i < this.units.length; i++)
						this.units[i].power > 0 ? (r++, e += " " + this.units[i].prefix.name + this.units[i].unit.name, Math.abs(this.units[i].power - 1) > 1e-15 && (e += "^" + this.units[i].power)) : this.units[i].power < 0 && n++;
					if (n > 0)
						for (var i = 0; i < this.units.length; i++)
							this.units[i].power < 0 && (r > 0 ? (t += " " + this.units[i].prefix.name + this.units[i].unit.name, Math.abs(this.units[i].power + 1) > 1e-15 && (t += "^" + -this.units[i].power)) : (t += " " + this.units[i].prefix.name + this.units[i].unit.name, t += "^" + this.units[i].power));
					e = e.substr(1),
					t = t.substr(1),
					r > 1 && n > 0 && (e = "(" + e + ")"),
					n > 1 && r > 0 && (t = "(" + t + ")");
					var a = e;
					return r > 0 && n > 0 && (a += " / "),
					a += t
				},
				c.prototype.format = function (t) {
					this.simplifyUnitListLazy();
					var r = !1,
					n = !0;
					"undefined" != typeof this.value && null !== this.value && e.isComplex(this.value) && (r = Math.abs(this.value.re) < 1e-14, n = Math.abs(this.value.im) < 1e-14);
					for (var i in this.units)
						this.units[i].unit && ("VA" === this.units[i].unit.name && r ? this.units[i].unit = G.VAR : "VAR" !== this.units[i].unit.name || r || (this.units[i].unit = G.VA));
					1 !== this.units.length || this.fixPrefix || Math.abs(this.units[0].power - Math.round(this.units[0].power)) < 1e-14 && (this.units[0].prefix = this._bestPrefix());
					var a = this._denormalize(this.value),
					o = null !== this.value ? z(a, t || {}) : "",
					s = this.formatUnits();
					return this.value && e.isComplex(this.value) && (o = "(" + o + ")"),
					s.length > 0 && o.length > 0 && (o += " "),
					o += s
				},
				c.prototype._bestPrefix = function () {
					if (1 !== this.units.length)
						throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");
					if (Math.abs(this.units[0].power - Math.round(this.units[0].power)) >= 1e-14)
						throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");
					var e = O(this.value),
					t = O(this.units[0].unit.value),
					r = this.units[0].prefix;
					if (0 === e)
						return r;
					var n = this.units[0].power,
					i = Math.log(e / Math.pow(r.value * t, n)) / Math.LN10 - 1.2;
					if (i > -2.200001 && i < 1.800001)
						return r;
					i = Math.abs(i);
					var a = this.units[0].unit.prefixes;
					for (var o in a)
						if (a.hasOwnProperty(o)) {
							var s = a[o];
							if (s.scientific) {
								var u = Math.abs(Math.log(e / Math.pow(s.value * t, n)) / Math.LN10 - 1.2);
								(u < i || u === i && s.name.length < r.name.length) && (r = s, i = u)
							}
						}
					return r
				},
				c.prototype.splitUnit = function (e) {
					for (var t = this.clone(), r = [], n = 0; n < e.length && (t = t.to(e[n]), n != e.length - 1); n++) {
						var i,
						a = t.toNumeric(),
						o = _(a),
						s = S(o, a);
						i = s ? o : T(t.toNumeric());
						var u = new c(i, e[n].toString());
						r.push(u),
						t = N(t, u)
					}
					for (var f = 0, n = 0; n < r.length; n++)
						f = b(f, r[n].value);
					return S(f, this.value) && (t.value = 0),
					r.push(t),
					r
				};
				var L = {
					NONE: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						}
					},
					SHORT: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						da: {
							name: "da",
							value: 10,
							scientific: !1
						},
						h: {
							name: "h",
							value: 100,
							scientific: !1
						},
						k: {
							name: "k",
							value: 1e3,
							scientific: !0
						},
						M: {
							name: "M",
							value: 1e6,
							scientific: !0
						},
						G: {
							name: "G",
							value: 1e9,
							scientific: !0
						},
						T: {
							name: "T",
							value: 1e12,
							scientific: !0
						},
						P: {
							name: "P",
							value: 1e15,
							scientific: !0
						},
						E: {
							name: "E",
							value: 1e18,
							scientific: !0
						},
						Z: {
							name: "Z",
							value: 1e21,
							scientific: !0
						},
						Y: {
							name: "Y",
							value: 1e24,
							scientific: !0
						},
						d: {
							name: "d",
							value: .1,
							scientific: !1
						},
						c: {
							name: "c",
							value: .01,
							scientific: !1
						},
						m: {
							name: "m",
							value: .001,
							scientific: !0
						},
						u: {
							name: "u",
							value: 1e-6,
							scientific: !0
						},
						n: {
							name: "n",
							value: 1e-9,
							scientific: !0
						},
						p: {
							name: "p",
							value: 1e-12,
							scientific: !0
						},
						f: {
							name: "f",
							value: 1e-15,
							scientific: !0
						},
						a: {
							name: "a",
							value: 1e-18,
							scientific: !0
						},
						z: {
							name: "z",
							value: 1e-21,
							scientific: !0
						},
						y: {
							name: "y",
							value: 1e-24,
							scientific: !0
						}
					},
					LONG: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						deca: {
							name: "deca",
							value: 10,
							scientific: !1
						},
						hecto: {
							name: "hecto",
							value: 100,
							scientific: !1
						},
						kilo: {
							name: "kilo",
							value: 1e3,
							scientific: !0
						},
						mega: {
							name: "mega",
							value: 1e6,
							scientific: !0
						},
						giga: {
							name: "giga",
							value: 1e9,
							scientific: !0
						},
						tera: {
							name: "tera",
							value: 1e12,
							scientific: !0
						},
						peta: {
							name: "peta",
							value: 1e15,
							scientific: !0
						},
						exa: {
							name: "exa",
							value: 1e18,
							scientific: !0
						},
						zetta: {
							name: "zetta",
							value: 1e21,
							scientific: !0
						},
						yotta: {
							name: "yotta",
							value: 1e24,
							scientific: !0
						},
						deci: {
							name: "deci",
							value: .1,
							scientific: !1
						},
						centi: {
							name: "centi",
							value: .01,
							scientific: !1
						},
						milli: {
							name: "milli",
							value: .001,
							scientific: !0
						},
						micro: {
							name: "micro",
							value: 1e-6,
							scientific: !0
						},
						nano: {
							name: "nano",
							value: 1e-9,
							scientific: !0
						},
						pico: {
							name: "pico",
							value: 1e-12,
							scientific: !0
						},
						femto: {
							name: "femto",
							value: 1e-15,
							scientific: !0
						},
						atto: {
							name: "atto",
							value: 1e-18,
							scientific: !0
						},
						zepto: {
							name: "zepto",
							value: 1e-21,
							scientific: !0
						},
						yocto: {
							name: "yocto",
							value: 1e-24,
							scientific: !0
						}
					},
					SQUARED: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						da: {
							name: "da",
							value: 100,
							scientific: !1
						},
						h: {
							name: "h",
							value: 1e4,
							scientific: !1
						},
						k: {
							name: "k",
							value: 1e6,
							scientific: !0
						},
						M: {
							name: "M",
							value: 1e12,
							scientific: !0
						},
						G: {
							name: "G",
							value: 1e18,
							scientific: !0
						},
						T: {
							name: "T",
							value: 1e24,
							scientific: !0
						},
						P: {
							name: "P",
							value: 1e30,
							scientific: !0
						},
						E: {
							name: "E",
							value: 1e36,
							scientific: !0
						},
						Z: {
							name: "Z",
							value: 1e42,
							scientific: !0
						},
						Y: {
							name: "Y",
							value: 1e48,
							scientific: !0
						},
						d: {
							name: "d",
							value: .01,
							scientific: !1
						},
						c: {
							name: "c",
							value: 1e-4,
							scientific: !1
						},
						m: {
							name: "m",
							value: 1e-6,
							scientific: !0
						},
						u: {
							name: "u",
							value: 1e-12,
							scientific: !0
						},
						n: {
							name: "n",
							value: 1e-18,
							scientific: !0
						},
						p: {
							name: "p",
							value: 1e-24,
							scientific: !0
						},
						f: {
							name: "f",
							value: 1e-30,
							scientific: !0
						},
						a: {
							name: "a",
							value: 1e-36,
							scientific: !0
						},
						z: {
							name: "z",
							value: 1e-42,
							scientific: !0
						},
						y: {
							name: "y",
							value: 1e-48,
							scientific: !0
						}
					},
					CUBIC: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						da: {
							name: "da",
							value: 1e3,
							scientific: !1
						},
						h: {
							name: "h",
							value: 1e6,
							scientific: !1
						},
						k: {
							name: "k",
							value: 1e9,
							scientific: !0
						},
						M: {
							name: "M",
							value: 1e18,
							scientific: !0
						},
						G: {
							name: "G",
							value: 1e27,
							scientific: !0
						},
						T: {
							name: "T",
							value: 1e36,
							scientific: !0
						},
						P: {
							name: "P",
							value: 1e45,
							scientific: !0
						},
						E: {
							name: "E",
							value: 1e54,
							scientific: !0
						},
						Z: {
							name: "Z",
							value: 1e63,
							scientific: !0
						},
						Y: {
							name: "Y",
							value: 1e72,
							scientific: !0
						},
						d: {
							name: "d",
							value: .001,
							scientific: !1
						},
						c: {
							name: "c",
							value: 1e-6,
							scientific: !1
						},
						m: {
							name: "m",
							value: 1e-9,
							scientific: !0
						},
						u: {
							name: "u",
							value: 1e-18,
							scientific: !0
						},
						n: {
							name: "n",
							value: 1e-27,
							scientific: !0
						},
						p: {
							name: "p",
							value: 1e-36,
							scientific: !0
						},
						f: {
							name: "f",
							value: 1e-45,
							scientific: !0
						},
						a: {
							name: "a",
							value: 1e-54,
							scientific: !0
						},
						z: {
							name: "z",
							value: 1e-63,
							scientific: !0
						},
						y: {
							name: "y",
							value: 1e-72,
							scientific: !0
						}
					},
					BINARY_SHORT: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						k: {
							name: "k",
							value: 1e3,
							scientific: !0
						},
						M: {
							name: "M",
							value: 1e6,
							scientific: !0
						},
						G: {
							name: "G",
							value: 1e9,
							scientific: !0
						},
						T: {
							name: "T",
							value: 1e12,
							scientific: !0
						},
						P: {
							name: "P",
							value: 1e15,
							scientific: !0
						},
						E: {
							name: "E",
							value: 1e18,
							scientific: !0
						},
						Z: {
							name: "Z",
							value: 1e21,
							scientific: !0
						},
						Y: {
							name: "Y",
							value: 1e24,
							scientific: !0
						},
						Ki: {
							name: "Ki",
							value: 1024,
							scientific: !0
						},
						Mi: {
							name: "Mi",
							value: Math.pow(1024, 2),
							scientific: !0
						},
						Gi: {
							name: "Gi",
							value: Math.pow(1024, 3),
							scientific: !0
						},
						Ti: {
							name: "Ti",
							value: Math.pow(1024, 4),
							scientific: !0
						},
						Pi: {
							name: "Pi",
							value: Math.pow(1024, 5),
							scientific: !0
						},
						Ei: {
							name: "Ei",
							value: Math.pow(1024, 6),
							scientific: !0
						},
						Zi: {
							name: "Zi",
							value: Math.pow(1024, 7),
							scientific: !0
						},
						Yi: {
							name: "Yi",
							value: Math.pow(1024, 8),
							scientific: !0
						}
					},
					BINARY_LONG: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						kilo: {
							name: "kilo",
							value: 1e3,
							scientific: !0
						},
						mega: {
							name: "mega",
							value: 1e6,
							scientific: !0
						},
						giga: {
							name: "giga",
							value: 1e9,
							scientific: !0
						},
						tera: {
							name: "tera",
							value: 1e12,
							scientific: !0
						},
						peta: {
							name: "peta",
							value: 1e15,
							scientific: !0
						},
						exa: {
							name: "exa",
							value: 1e18,
							scientific: !0
						},
						zetta: {
							name: "zetta",
							value: 1e21,
							scientific: !0
						},
						yotta: {
							name: "yotta",
							value: 1e24,
							scientific: !0
						},
						kibi: {
							name: "kibi",
							value: 1024,
							scientific: !0
						},
						mebi: {
							name: "mebi",
							value: Math.pow(1024, 2),
							scientific: !0
						},
						gibi: {
							name: "gibi",
							value: Math.pow(1024, 3),
							scientific: !0
						},
						tebi: {
							name: "tebi",
							value: Math.pow(1024, 4),
							scientific: !0
						},
						pebi: {
							name: "pebi",
							value: Math.pow(1024, 5),
							scientific: !0
						},
						exi: {
							name: "exi",
							value: Math.pow(1024, 6),
							scientific: !0
						},
						zebi: {
							name: "zebi",
							value: Math.pow(1024, 7),
							scientific: !0
						},
						yobi: {
							name: "yobi",
							value: Math.pow(1024, 8),
							scientific: !0
						}
					},
					BTU: {
						"": {
							name: "",
							value: 1,
							scientific: !0
						},
						MM: {
							name: "MM",
							value: 1e6,
							scientific: !0
						}
					}
				};
				L.SHORTLONG = {};
				for (var j in L.SHORT)
					L.SHORT.hasOwnProperty(j) && (L.SHORTLONG[j] = L.SHORT[j]);
				for (var j in L.LONG)
					L.LONG.hasOwnProperty(j) && (L.SHORTLONG[j] = L.LONG[j]);
				var F = ["MASS", "LENGTH", "TIME", "CURRENT", "TEMPERATURE", "LUMINOUS_INTENSITY", "AMOUNT_OF_SUBSTANCE", "ANGLE", "BIT"],
				D = {
					NONE: {
						dimensions: [0, 0, 0, 0, 0, 0, 0, 0, 0]
					},
					MASS: {
						dimensions: [1, 0, 0, 0, 0, 0, 0, 0, 0]
					},
					LENGTH: {
						dimensions: [0, 1, 0, 0, 0, 0, 0, 0, 0]
					},
					TIME: {
						dimensions: [0, 0, 1, 0, 0, 0, 0, 0, 0]
					},
					CURRENT: {
						dimensions: [0, 0, 0, 1, 0, 0, 0, 0, 0]
					},
					TEMPERATURE: {
						dimensions: [0, 0, 0, 0, 1, 0, 0, 0, 0]
					},
					LUMINOUS_INTENSITY: {
						dimensions: [0, 0, 0, 0, 0, 1, 0, 0, 0]
					},
					AMOUNT_OF_SUBSTANCE: {
						dimensions: [0, 0, 0, 0, 0, 0, 1, 0, 0]
					},
					FORCE: {
						dimensions: [1, 1, -2, 0, 0, 0, 0, 0, 0]
					},
					SURFACE: {
						dimensions: [0, 2, 0, 0, 0, 0, 0, 0, 0]
					},
					VOLUME: {
						dimensions: [0, 3, 0, 0, 0, 0, 0, 0, 0]
					},
					ENERGY: {
						dimensions: [1, 2, -2, 0, 0, 0, 0, 0, 0]
					},
					POWER: {
						dimensions: [1, 2, -3, 0, 0, 0, 0, 0, 0]
					},
					PRESSURE: {
						dimensions: [1, -1, -2, 0, 0, 0, 0, 0, 0]
					},
					ELECTRIC_CHARGE: {
						dimensions: [0, 0, 1, 1, 0, 0, 0, 0, 0]
					},
					ELECTRIC_CAPACITANCE: {
						dimensions: [-1, -2, 4, 2, 0, 0, 0, 0, 0]
					},
					ELECTRIC_POTENTIAL: {
						dimensions: [1, 2, -3, -1, 0, 0, 0, 0, 0]
					},
					ELECTRIC_RESISTANCE: {
						dimensions: [1, 2, -3, -2, 0, 0, 0, 0, 0]
					},
					ELECTRIC_INDUCTANCE: {
						dimensions: [1, 2, -2, -2, 0, 0, 0, 0, 0]
					},
					ELECTRIC_CONDUCTANCE: {
						dimensions: [-1, -2, 3, 2, 0, 0, 0, 0, 0]
					},
					MAGNETIC_FLUX: {
						dimensions: [1, 2, -2, -1, 0, 0, 0, 0, 0]
					},
					MAGNETIC_FLUX_DENSITY: {
						dimensions: [1, 0, -2, -1, 0, 0, 0, 0, 0]
					},
					FREQUENCY: {
						dimensions: [0, 0, -1, 0, 0, 0, 0, 0, 0]
					},
					ANGLE: {
						dimensions: [0, 0, 0, 0, 0, 0, 0, 1, 0]
					},
					BIT: {
						dimensions: [0, 0, 0, 0, 0, 0, 0, 0, 1]
					}
				};
				for (var j in D)
					D[j].key = j;
				var H = {},
				$ = {
					name: "",
					base: H,
					value: 1,
					offset: 0,
					dimensions: [0, 0, 0, 0, 0, 0, 0, 0, 0]
				},
				G = {
					meter: {
						name: "meter",
						base: D.LENGTH,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					inch: {
						name: "inch",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .0254,
						offset: 0
					},
					foot: {
						name: "foot",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .3048,
						offset: 0
					},
					yard: {
						name: "yard",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .9144,
						offset: 0
					},
					mile: {
						name: "mile",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 1609.344,
						offset: 0
					},
					link: {
						name: "link",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .201168,
						offset: 0
					},
					rod: {
						name: "rod",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 5.02921,
						offset: 0
					},
					chain: {
						name: "chain",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 20.1168,
						offset: 0
					},
					angstrom: {
						name: "angstrom",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 1e-10,
						offset: 0
					},
					m: {
						name: "m",
						base: D.LENGTH,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					in: {
						name: "in",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .0254,
						offset: 0
					},
					ft: {
						name: "ft",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .3048,
						offset: 0
					},
					yd: {
						name: "yd",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .9144,
						offset: 0
					},
					mi: {
						name: "mi",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 1609.344,
						offset: 0
					},
					li: {
						name: "li",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: .201168,
						offset: 0
					},
					rd: {
						name: "rd",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 5.02921,
						offset: 0
					},
					ch: {
						name: "ch",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 20.1168,
						offset: 0
					},
					mil: {
						name: "mil",
						base: D.LENGTH,
						prefixes: L.NONE,
						value: 254e-7,
						offset: 0
					},
					m2: {
						name: "m2",
						base: D.SURFACE,
						prefixes: L.SQUARED,
						value: 1,
						offset: 0
					},
					sqin: {
						name: "sqin",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 64516e-8,
						offset: 0
					},
					sqft: {
						name: "sqft",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: .09290304,
						offset: 0
					},
					sqyd: {
						name: "sqyd",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: .83612736,
						offset: 0
					},
					sqmi: {
						name: "sqmi",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 2589988.110336,
						offset: 0
					},
					sqrd: {
						name: "sqrd",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 25.29295,
						offset: 0
					},
					sqch: {
						name: "sqch",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 404.6873,
						offset: 0
					},
					sqmil: {
						name: "sqmil",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 6.4516e-10,
						offset: 0
					},
					acre: {
						name: "acre",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 4046.86,
						offset: 0
					},
					hectare: {
						name: "hectare",
						base: D.SURFACE,
						prefixes: L.NONE,
						value: 1e4,
						offset: 0
					},
					m3: {
						name: "m3",
						base: D.VOLUME,
						prefixes: L.CUBIC,
						value: 1,
						offset: 0
					},
					L: {
						name: "L",
						base: D.VOLUME,
						prefixes: L.SHORT,
						value: .001,
						offset: 0
					},
					l: {
						name: "l",
						base: D.VOLUME,
						prefixes: L.SHORT,
						value: .001,
						offset: 0
					},
					litre: {
						name: "litre",
						base: D.VOLUME,
						prefixes: L.LONG,
						value: .001,
						offset: 0
					},
					cuin: {
						name: "cuin",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 16387064e-12,
						offset: 0
					},
					cuft: {
						name: "cuft",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .028316846592,
						offset: 0
					},
					cuyd: {
						name: "cuyd",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .764554857984,
						offset: 0
					},
					teaspoon: {
						name: "teaspoon",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 5e-6,
						offset: 0
					},
					tablespoon: {
						name: "tablespoon",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 15e-6,
						offset: 0
					},
					drop: {
						name: "drop",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 5e-8,
						offset: 0
					},
					gtt: {
						name: "gtt",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 5e-8,
						offset: 0
					},
					minim: {
						name: "minim",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 6.161152e-8,
						offset: 0
					},
					fluiddram: {
						name: "fluiddram",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 36966911e-13,
						offset: 0
					},
					fluidounce: {
						name: "fluidounce",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 2957353e-11,
						offset: 0
					},
					gill: {
						name: "gill",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0001182941,
						offset: 0
					},
					cc: {
						name: "cc",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 1e-6,
						offset: 0
					},
					cup: {
						name: "cup",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0002365882,
						offset: 0
					},
					pint: {
						name: "pint",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0004731765,
						offset: 0
					},
					quart: {
						name: "quart",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0009463529,
						offset: 0
					},
					gallon: {
						name: "gallon",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .003785412,
						offset: 0
					},
					beerbarrel: {
						name: "beerbarrel",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .1173478,
						offset: 0
					},
					oilbarrel: {
						name: "oilbarrel",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .1589873,
						offset: 0
					},
					hogshead: {
						name: "hogshead",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .238481,
						offset: 0
					},
					fldr: {
						name: "fldr",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 36966911e-13,
						offset: 0
					},
					floz: {
						name: "floz",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: 2957353e-11,
						offset: 0
					},
					gi: {
						name: "gi",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0001182941,
						offset: 0
					},
					cp: {
						name: "cp",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0002365882,
						offset: 0
					},
					pt: {
						name: "pt",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0004731765,
						offset: 0
					},
					qt: {
						name: "qt",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .0009463529,
						offset: 0
					},
					gal: {
						name: "gal",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .003785412,
						offset: 0
					},
					bbl: {
						name: "bbl",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .1173478,
						offset: 0
					},
					obl: {
						name: "obl",
						base: D.VOLUME,
						prefixes: L.NONE,
						value: .1589873,
						offset: 0
					},
					g: {
						name: "g",
						base: D.MASS,
						prefixes: L.SHORT,
						value: .001,
						offset: 0
					},
					gram: {
						name: "gram",
						base: D.MASS,
						prefixes: L.LONG,
						value: .001,
						offset: 0
					},
					ton: {
						name: "ton",
						base: D.MASS,
						prefixes: L.SHORT,
						value: 907.18474,
						offset: 0
					},
					tonne: {
						name: "tonne",
						base: D.MASS,
						prefixes: L.SHORT,
						value: 1e3,
						offset: 0
					},
					grain: {
						name: "grain",
						base: D.MASS,
						prefixes: L.NONE,
						value: 6479891e-11,
						offset: 0
					},
					dram: {
						name: "dram",
						base: D.MASS,
						prefixes: L.NONE,
						value: .0017718451953125,
						offset: 0
					},
					ounce: {
						name: "ounce",
						base: D.MASS,
						prefixes: L.NONE,
						value: .028349523125,
						offset: 0
					},
					poundmass: {
						name: "poundmass",
						base: D.MASS,
						prefixes: L.NONE,
						value: .45359237,
						offset: 0
					},
					hundredweight: {
						name: "hundredweight",
						base: D.MASS,
						prefixes: L.NONE,
						value: 45.359237,
						offset: 0
					},
					stick: {
						name: "stick",
						base: D.MASS,
						prefixes: L.NONE,
						value: .115,
						offset: 0
					},
					stone: {
						name: "stone",
						base: D.MASS,
						prefixes: L.NONE,
						value: 6.35029318,
						offset: 0
					},
					gr: {
						name: "gr",
						base: D.MASS,
						prefixes: L.NONE,
						value: 6479891e-11,
						offset: 0
					},
					dr: {
						name: "dr",
						base: D.MASS,
						prefixes: L.NONE,
						value: .0017718451953125,
						offset: 0
					},
					oz: {
						name: "oz",
						base: D.MASS,
						prefixes: L.NONE,
						value: .028349523125,
						offset: 0
					},
					lbm: {
						name: "lbm",
						base: D.MASS,
						prefixes: L.NONE,
						value: .45359237,
						offset: 0
					},
					cwt: {
						name: "cwt",
						base: D.MASS,
						prefixes: L.NONE,
						value: 45.359237,
						offset: 0
					},
					s: {
						name: "s",
						base: D.TIME,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					min: {
						name: "min",
						base: D.TIME,
						prefixes: L.NONE,
						value: 60,
						offset: 0
					},
					h: {
						name: "h",
						base: D.TIME,
						prefixes: L.NONE,
						value: 3600,
						offset: 0
					},
					second: {
						name: "second",
						base: D.TIME,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					sec: {
						name: "sec",
						base: D.TIME,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					minute: {
						name: "minute",
						base: D.TIME,
						prefixes: L.NONE,
						value: 60,
						offset: 0
					},
					hour: {
						name: "hour",
						base: D.TIME,
						prefixes: L.NONE,
						value: 3600,
						offset: 0
					},
					day: {
						name: "day",
						base: D.TIME,
						prefixes: L.NONE,
						value: 86400,
						offset: 0
					},
					week: {
						name: "week",
						base: D.TIME,
						prefixes: L.NONE,
						value: 604800,
						offset: 0
					},
					month: {
						name: "month",
						base: D.TIME,
						prefixes: L.NONE,
						value: 2629800,
						offset: 0
					},
					year: {
						name: "year",
						base: D.TIME,
						prefixes: L.NONE,
						value: 31557600,
						offset: 0
					},
					decade: {
						name: "year",
						base: D.TIME,
						prefixes: L.NONE,
						value: 315576e3,
						offset: 0
					},
					century: {
						name: "century",
						base: D.TIME,
						prefixes: L.NONE,
						value: 315576e4,
						offset: 0
					},
					millennium: {
						name: "millennium",
						base: D.TIME,
						prefixes: L.NONE,
						value: 315576e5,
						offset: 0
					},
					hertz: {
						name: "Hertz",
						base: D.FREQUENCY,
						prefixes: L.LONG,
						value: 1,
						offset: 0,
						reciprocal: !0
					},
					Hz: {
						name: "Hz",
						base: D.FREQUENCY,
						prefixes: L.SHORT,
						value: 1,
						offset: 0,
						reciprocal: !0
					},
					rad: {
						name: "rad",
						base: D.ANGLE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					deg: {
						name: "deg",
						base: D.ANGLE,
						prefixes: L.LONG,
						value: null,
						offset: 0
					},
					grad: {
						name: "grad",
						base: D.ANGLE,
						prefixes: L.LONG,
						value: null,
						offset: 0
					},
					cycle: {
						name: "cycle",
						base: D.ANGLE,
						prefixes: L.NONE,
						value: null,
						offset: 0
					},
					arcsec: {
						name: "arcsec",
						base: D.ANGLE,
						prefixes: L.NONE,
						value: null,
						offset: 0
					},
					arcmin: {
						name: "arcmin",
						base: D.ANGLE,
						prefixes: L.NONE,
						value: null,
						offset: 0
					},
					A: {
						name: "A",
						base: D.CURRENT,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					ampere: {
						name: "ampere",
						base: D.CURRENT,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					K: {
						name: "K",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1,
						offset: 0
					},
					degC: {
						name: "degC",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1,
						offset: 273.15
					},
					degF: {
						name: "degF",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1 / 1.8,
						offset: 459.67
					},
					degR: {
						name: "degR",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1 / 1.8,
						offset: 0
					},
					kelvin: {
						name: "kelvin",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1,
						offset: 0
					},
					celsius: {
						name: "celsius",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1,
						offset: 273.15
					},
					fahrenheit: {
						name: "fahrenheit",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1 / 1.8,
						offset: 459.67
					},
					rankine: {
						name: "rankine",
						base: D.TEMPERATURE,
						prefixes: L.NONE,
						value: 1 / 1.8,
						offset: 0
					},
					mol: {
						name: "mol",
						base: D.AMOUNT_OF_SUBSTANCE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					mole: {
						name: "mole",
						base: D.AMOUNT_OF_SUBSTANCE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					cd: {
						name: "cd",
						base: D.LUMINOUS_INTENSITY,
						prefixes: L.NONE,
						value: 1,
						offset: 0
					},
					candela: {
						name: "candela",
						base: D.LUMINOUS_INTENSITY,
						prefixes: L.NONE,
						value: 1,
						offset: 0
					},
					N: {
						name: "N",
						base: D.FORCE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					newton: {
						name: "newton",
						base: D.FORCE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					dyn: {
						name: "dyn",
						base: D.FORCE,
						prefixes: L.SHORT,
						value: 1e-5,
						offset: 0
					},
					dyne: {
						name: "dyne",
						base: D.FORCE,
						prefixes: L.LONG,
						value: 1e-5,
						offset: 0
					},
					lbf: {
						name: "lbf",
						base: D.FORCE,
						prefixes: L.NONE,
						value: 4.4482216152605,
						offset: 0
					},
					poundforce: {
						name: "poundforce",
						base: D.FORCE,
						prefixes: L.NONE,
						value: 4.4482216152605,
						offset: 0
					},
					kip: {
						name: "kip",
						base: D.FORCE,
						prefixes: L.LONG,
						value: 4448.2216,
						offset: 0
					},
					J: {
						name: "J",
						base: D.ENERGY,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					joule: {
						name: "joule",
						base: D.ENERGY,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					erg: {
						name: "erg",
						base: D.ENERGY,
						prefixes: L.NONE,
						value: 1e-7,
						offset: 0
					},
					Wh: {
						name: "Wh",
						base: D.ENERGY,
						prefixes: L.SHORT,
						value: 3600,
						offset: 0
					},
					BTU: {
						name: "BTU",
						base: D.ENERGY,
						prefixes: L.BTU,
						value: 1055.05585262,
						offset: 0
					},
					eV: {
						name: "eV",
						base: D.ENERGY,
						prefixes: L.SHORT,
						value: 1.602176565e-19,
						offset: 0
					},
					electronvolt: {
						name: "electronvolt",
						base: D.ENERGY,
						prefixes: L.LONG,
						value: 1.602176565e-19,
						offset: 0
					},
					W: {
						name: "W",
						base: D.POWER,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					watt: {
						name: "W",
						base: D.POWER,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					hp: {
						name: "hp",
						base: D.POWER,
						prefixes: L.NONE,
						value: 745.6998715386,
						offset: 0
					},
					VAR: {
						name: "VAR",
						base: D.POWER,
						prefixes: L.SHORT,
						value: B.I,
						offset: 0
					},
					VA: {
						name: "VA",
						base: D.POWER,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					Pa: {
						name: "Pa",
						base: D.PRESSURE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					psi: {
						name: "psi",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 6894.75729276459,
						offset: 0
					},
					atm: {
						name: "atm",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 101325,
						offset: 0
					},
					bar: {
						name: "bar",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 1e5,
						offset: 0
					},
					torr: {
						name: "torr",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 133.322,
						offset: 0
					},
					mmHg: {
						name: "mmHg",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 133.322,
						offset: 0
					},
					mmH2O: {
						name: "mmH2O",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 9.80665,
						offset: 0
					},
					cmH2O: {
						name: "cmH2O",
						base: D.PRESSURE,
						prefixes: L.NONE,
						value: 98.0665,
						offset: 0
					},
					coulomb: {
						name: "coulomb",
						base: D.ELECTRIC_CHARGE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					C: {
						name: "C",
						base: D.ELECTRIC_CHARGE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					farad: {
						name: "farad",
						base: D.ELECTRIC_CAPACITANCE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					F: {
						name: "F",
						base: D.ELECTRIC_CAPACITANCE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					volt: {
						name: "volt",
						base: D.ELECTRIC_POTENTIAL,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					V: {
						name: "V",
						base: D.ELECTRIC_POTENTIAL,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					ohm: {
						name: "ohm",
						base: D.ELECTRIC_RESISTANCE,
						prefixes: L.SHORTLONG,
						value: 1,
						offset: 0
					},
					henry: {
						name: "henry",
						base: D.ELECTRIC_INDUCTANCE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					H: {
						name: "H",
						base: D.ELECTRIC_INDUCTANCE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					siemens: {
						name: "siemens",
						base: D.ELECTRIC_CONDUCTANCE,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					S: {
						name: "S",
						base: D.ELECTRIC_CONDUCTANCE,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					weber: {
						name: "weber",
						base: D.MAGNETIC_FLUX,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					Wb: {
						name: "Wb",
						base: D.MAGNETIC_FLUX,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					tesla: {
						name: "tesla",
						base: D.MAGNETIC_FLUX_DENSITY,
						prefixes: L.LONG,
						value: 1,
						offset: 0
					},
					T: {
						name: "T",
						base: D.MAGNETIC_FLUX_DENSITY,
						prefixes: L.SHORT,
						value: 1,
						offset: 0
					},
					b: {
						name: "b",
						base: D.BIT,
						prefixes: L.BINARY_SHORT,
						value: 1,
						offset: 0
					},
					bits: {
						name: "bits",
						base: D.BIT,
						prefixes: L.BINARY_LONG,
						value: 1,
						offset: 0
					},
					B: {
						name: "B",
						base: D.BIT,
						prefixes: L.BINARY_SHORT,
						value: 8,
						offset: 0
					},
					bytes: {
						name: "bytes",
						base: D.BIT,
						prefixes: L.BINARY_LONG,
						value: 8,
						offset: 0
					}
				},
				Z = {
					meters: "meter",
					inches: "inch",
					feet: "foot",
					yards: "yard",
					miles: "mile",
					links: "link",
					rods: "rod",
					chains: "chain",
					angstroms: "angstrom",
					lt: "l",
					litres: "litre",
					liter: "litre",
					liters: "litre",
					teaspoons: "teaspoon",
					tablespoons: "tablespoon",
					minims: "minim",
					fluiddrams: "fluiddram",
					fluidounces: "fluidounce",
					gills: "gill",
					cups: "cup",
					pints: "pint",
					quarts: "quart",
					gallons: "gallon",
					beerbarrels: "beerbarrel",
					oilbarrels: "oilbarrel",
					hogsheads: "hogshead",
					gtts: "gtt",
					grams: "gram",
					tons: "ton",
					tonnes: "tonne",
					grains: "grain",
					drams: "dram",
					ounces: "ounce",
					poundmasses: "poundmass",
					hundredweights: "hundredweight",
					sticks: "stick",
					lb: "lbm",
					lbs: "lbm",
					kips: "kip",
					acres: "acre",
					hectares: "hectare",
					sqfeet: "sqft",
					sqyard: "sqyd",
					sqmile: "sqmi",
					sqmiles: "sqmi",
					mmhg: "mmHg",
					mmh2o: "mmH2O",
					cmh2o: "cmH2O",
					seconds: "second",
					secs: "second",
					minutes: "minute",
					mins: "minute",
					hours: "hour",
					hr: "hour",
					hrs: "hour",
					days: "day",
					weeks: "week",
					months: "month",
					years: "year",
					hertz: "hertz",
					radians: "rad",
					degree: "deg",
					degrees: "deg",
					gradian: "grad",
					gradians: "grad",
					cycles: "cycle",
					arcsecond: "arcsec",
					arcseconds: "arcsec",
					arcminute: "arcmin",
					arcminutes: "arcmin",
					BTUs: "BTU",
					watts: "watt",
					joules: "joule",
					amperes: "ampere",
					coulombs: "coulomb",
					volts: "volt",
					ohms: "ohm",
					farads: "farad",
					webers: "weber",
					teslas: "tesla",
					electronvolts: "electronvolt",
					moles: "mole"
				};
				x(t),
				u.on("config", function (e, t) {
					e.number !== t.number && x(e)
				});
				var V = {
					si: {
						NONE: {
							unit: $,
							prefix: L.NONE[""]
						},
						LENGTH: {
							unit: G.m,
							prefix: L.SHORT[""]
						},
						MASS: {
							unit: G.g,
							prefix: L.SHORT.k
						},
						TIME: {
							unit: G.s,
							prefix: L.SHORT[""]
						},
						CURRENT: {
							unit: G.A,
							prefix: L.SHORT[""]
						},
						TEMPERATURE: {
							unit: G.K,
							prefix: L.SHORT[""]
						},
						LUMINOUS_INTENSITY: {
							unit: G.cd,
							prefix: L.SHORT[""]
						},
						AMOUNT_OF_SUBSTANCE: {
							unit: G.mol,
							prefix: L.SHORT[""]
						},
						ANGLE: {
							unit: G.rad,
							prefix: L.SHORT[""]
						},
						BIT: {
							unit: G.bit,
							prefix: L.SHORT[""]
						},
						FORCE: {
							unit: G.N,
							prefix: L.SHORT[""]
						},
						ENERGY: {
							unit: G.J,
							prefix: L.SHORT[""]
						},
						POWER: {
							unit: G.W,
							prefix: L.SHORT[""]
						},
						PRESSURE: {
							unit: G.Pa,
							prefix: L.SHORT[""]
						},
						ELECTRIC_CHARGE: {
							unit: G.C,
							prefix: L.SHORT[""]
						},
						ELECTRIC_CAPACITANCE: {
							unit: G.F,
							prefix: L.SHORT[""]
						},
						ELECTRIC_POTENTIAL: {
							unit: G.V,
							prefix: L.SHORT[""]
						},
						ELECTRIC_RESISTANCE: {
							unit: G.ohm,
							prefix: L.SHORT[""]
						},
						ELECTRIC_INDUCTANCE: {
							unit: G.H,
							prefix: L.SHORT[""]
						},
						ELECTRIC_CONDUCTANCE: {
							unit: G.S,
							prefix: L.SHORT[""]
						},
						MAGNETIC_FLUX: {
							unit: G.Wb,
							prefix: L.SHORT[""]
						},
						MAGNETIC_FLUX_DENSITY: {
							unit: G.T,
							prefix: L.SHORT[""]
						},
						FREQUENCY: {
							unit: G.Hz,
							prefix: L.SHORT[""]
						}
					}
				};
				V.cgs = JSON.parse(JSON.stringify(V.si)),
				V.cgs.LENGTH = {
					unit: G.m,
					prefix: L.SHORT.c
				},
				V.cgs.MASS = {
					unit: G.g,
					prefix: L.SHORT[""]
				},
				V.cgs.FORCE = {
					unit: G.dyn,
					prefix: L.SHORT[""]
				},
				V.cgs.ENERGY = {
					unit: G.erg,
					prefix: L.NONE[""]
				},
				V.us = JSON.parse(JSON.stringify(V.si)),
				V.us.LENGTH = {
					unit: G.ft,
					prefix: L.NONE[""]
				},
				V.us.MASS = {
					unit: G.lbm,
					prefix: L.NONE[""]
				},
				V.us.TEMPERATURE = {
					unit: G.degF,
					prefix: L.NONE[""]
				},
				V.us.FORCE = {
					unit: G.lbf,
					prefix: L.NONE[""]
				},
				V.us.ENERGY = {
					unit: G.BTU,
					prefix: L.BTU[""]
				},
				V.us.POWER = {
					unit: G.hp,
					prefix: L.NONE[""]
				},
				V.us.PRESSURE = {
					unit: G.psi,
					prefix: L.NONE[""]
				},
				V.auto = JSON.parse(JSON.stringify(V.si));
				var W = V.auto;
				c.setUnitSystem = function (e) {
					if (!V.hasOwnProperty(e))
						throw new Error("Unit system " + e + " does not exist. Choices are: " + Object.keys(V).join(", "));
					W = V[e]
				},
				c.getUnitSystem = function () {
					for (var e in V)
						if (V[e] === W)
							return e
				},
				c.typeConverters = {
					BigNumber: function (t) {
						return new e.BigNumber(t + "")
					},
					Fraction: function (t) {
						return new e.Fraction(t)
					},
					Complex: function (e) {
						return e
					},
					number: function (e) {
						return e
					}
				},
				c._getNumberConverter = function (e) {
					if (!c.typeConverters[e])
						throw new TypeError('Unsupported type "' + e + '"');
					return c.typeConverters[e]
				};
				for (var j in G) {
					var Y = G[j];
					Y.dimensions = Y.base.dimensions
				}
				for (var X in Z)
					if (Z.hasOwnProperty(X)) {
						var Y = G[Z[X]],
						J = {};
						for (var j in Y)
							Y.hasOwnProperty(j) && (J[j] = Y[j]);
						J.name = X,
						G[X] = J
					}
				return c.createUnit = function (e, t) {
					if ("object" != typeof e)
						throw new TypeError("createUnit expects first parameter to be of type 'Object'");
					if (t && t.override)
						for (var r in e)
							if (e.hasOwnProperty(r) && c.deleteUnit(r), e[r].aliases)
								for (var n = 0; n < e[r].aliases.length; n++)
									c.deleteUnit(e[r].aliases[n]);
					var i;
					for (var r in e)
						e.hasOwnProperty(r) && (i = c.createUnitSingle(r, e[r]));
					return i
				},
				c.createUnitSingle = function (e, t, r) {
					if ("undefined" != typeof t && null !== t || (t = {}), "string" != typeof e)
						throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");
					if (G.hasOwnProperty(e))
						throw new Error('Cannot create unit "' + e + '": a unit with that name already exists');
					w(e);
					var n,
					i,
					a = null,
					o = [],
					s = 0;
					if (t && "Unit" === t.type)
						a = t.clone();
					else if ("string" == typeof t)
						"" !== t && (n = t);
					else {
						if ("object" != typeof t)
							throw new TypeError('Cannot create unit "' + e + '" from "' + t.toString() + '": expecting "string" or "Unit" or "Object"');
						n = t.definition,
						i = t.prefixes,
						s = t.offset,
						t.aliases && (o = t.aliases.valueOf())
					}
					if (o)
						for (var u = 0; u < o.length; u++)
							if (G.hasOwnProperty(o[u]))
								throw new Error('Cannot create alias "' + o[u] + '": a unit with that name already exists');
					if (n && "string" == typeof n && !a)
						try {
							a = c.parse(n, {
									allowNoUnits: !0
								})
						} catch (t) {
							throw t.message = 'Could not create unit "' + e + '" from "' + n + '": ' + t.message,
							t
						}
					else
						n && "Unit" === n.type && (a = n.clone());
					o = o || [],
					s = s || 0,
					i = i && i.toUpperCase ? L[i.toUpperCase()] || L.NONE : L.NONE;
					var f = {};
					if (a) {
						f = {
							name: e,
							value: a.value,
							dimensions: a.dimensions.slice(0),
							prefixes: i,
							offset: s
						};
						var l = !1;
						for (var u in D)
							if (D.hasOwnProperty(u)) {
								for (var p = !0, h = 0; h < F.length; h++)
									if (Math.abs((f.dimensions[h] || 0) - (D[u].dimensions[h] || 0)) > 1e-12) {
										p = !1;
										break
									}
								if (p) {
									l = !0;
									break
								}
							}
						if (!l) {
							var m = e + "_STUFF",
							d = {
								dimensions: a.dimensions.slice(0)
							};
							d.key = m,
							D[m] = d,
							W[m] = {
								unit: f,
								prefix: L.NONE[""]
							},
							f.base = m
						}
					} else {
						var m = e + "_STUFF";
						if (F.indexOf(m) >= 0)
							throw new Error('Cannot create new base unit "' + e + '": a base unit with that name already exists (and cannot be overridden)');
						F.push(m);
						for (var v in D)
							D.hasOwnProperty(v) && (D[v].dimensions[F.length - 1] = 0);
						for (var d = {
								dimensions: []
							}, u = 0; u < F.length; u++)
							d.dimensions[u] = 0;
						d.dimensions[F.length - 1] = 1,
						d.key = m,
						D[m] = d,
						f = {
							name: e,
							value: 1,
							dimensions: D[m].dimensions.slice(0),
							prefixes: i,
							offset: s,
							base: m
						},
						W[m] = {
							unit: f,
							prefix: L.NONE[""]
						}
					}
					c.UNITS[e] = f;
					for (var u = 0; u < o.length; u++) {
						var g = o[u],
						y = {};
						for (var x in f)
							f.hasOwnProperty(x) && (y[x] = f[x]);
						y.name = g,
						c.UNITS[g] = y
					}
					return new c(null, e)
				},
				c.deleteUnit = function (e) {
					delete c.UNITS[e]
				},
				c.PREFIXES = L,
				c.BASE_DIMENSIONS = F,
				c.BASE_UNITS = D,
				c.UNIT_SYSTEMS = V,
				c.UNITS = G,
				c
			}
			var i = r(9).endsWith,
			a = r(5).clone,
			o = r(95);
			t.name = "Unit",
			t.path = "type",
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("unit", {
						Unit: function (e) {
							return e.clone()
						},
						string: function (t) {
							return e.Unit.isValuelessUnit(t) ? new e.Unit(null, t) : e.Unit.parse(t)
						},
						"number | BigNumber | Fraction | Complex, string": function (t, r) {
							return new e.Unit(t, r)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\left(${args[0]}\\right)",
					2: "\\left(\\left(${args[0]}\\right)${args[1]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "unit",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var i = n("createUnit", {
						"Object, Object": function (t, r) {
							return e.Unit.createUnit(t, r)
						},
						Object: function (t) {
							return e.Unit.createUnit(t, {})
						},
						"string, Unit | string | Object, Object": function (t, r, n) {
							var i = {};
							return i[t] = r,
							e.Unit.createUnit(i, n)
						},
						"string, Unit | string | Object": function (t, r) {
							var n = {};
							return n[t] = r,
							e.Unit.createUnit(n, {})
						},
						string: function (t) {
							var r = {};
							return r[t] = {},
							e.Unit.createUnit(r, {})
						}
					});
				return i
			}
			r(1);
			t.name = "createUnit",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var i = n("splitUnit", {
						"Unit, Array": function (e, t) {
							return e.splitUnit(t)
						}
					});
				return i
			}
			r(1);
			t.name = "splitUnit",
			t.factory = n
		}, function (e, t, r) {
			function n(e, t, r, n, a) {
				function o(t) {
					var r = e.Unit.parse(t);
					return r.fixPrefix = !0,
					r
				}
				i(a, "speedOfLight", function () {
					return o("299792458 m s^-1")
				}),
				i(a, "gravitationConstant", function () {
					return o("6.6738480e-11 m^3 kg^-1 s^-2")
				}),
				i(a, "planckConstant", function () {
					return o("6.626069311e-34 J s")
				}),
				i(a, "reducedPlanckConstant", function () {
					return o("1.05457172647e-34 J s")
				}),
				i(a, "magneticConstant", function () {
					return o("1.2566370614e-6 N A^-2")
				}),
				i(a, "electricConstant", function () {
					return o("8.854187817e-12 F m^-1")
				}),
				i(a, "vacuumImpedance", function () {
					return o("376.730313461 ohm")
				}),
				i(a, "coulomb", function () {
					return o("8.9875517873681764e9 N m^2 C^-2")
				}),
				i(a, "elementaryCharge", function () {
					return o("1.60217656535e-19 C")
				}),
				i(a, "bohrMagneton", function () {
					return o("9.2740096820e-24 J T^-1")
				}),
				i(a, "conductanceQuantum", function () {
					return o("7.748091734625e-5 S")
				}),
				i(a, "inverseConductanceQuantum", function () {
					return o("12906.403721742 ohm")
				}),
				i(a, "magneticFluxQuantum", function () {
					return o("2.06783375846e-15 Wb")
				}),
				i(a, "nuclearMagneton", function () {
					return o("5.0507835311e-27 J T^-1")
				}),
				i(a, "klitzing", function () {
					return o("25812.807443484 ohm")
				}),
				i(a, "bohrRadius", function () {
					return o("5.291772109217e-11 m")
				}),
				i(a, "classicalElectronRadius", function () {
					return o("2.817940326727e-15 m")
				}),
				i(a, "electronMass", function () {
					return o("9.1093829140e-31 kg")
				}),
				i(a, "fermiCoupling", function () {
					return o("1.1663645e-5 GeV^-2")
				}),
				i(a, "fineStructure", function () {
					return .007297352569824
				}),
				i(a, "hartreeEnergy", function () {
					return o("4.3597443419e-18 J")
				}),
				i(a, "protonMass", function () {
					return o("1.67262177774e-27 kg")
				}),
				i(a, "deuteronMass", function () {
					return o("3.3435830926e-27 kg")
				}),
				i(a, "neutronMass", function () {
					return o("1.6749271613e-27 kg")
				}),
				i(a, "quantumOfCirculation", function () {
					return o("3.636947552024e-4 m^2 s^-1")
				}),
				i(a, "rydberg", function () {
					return o("10973731.56853955 m^-1")
				}),
				i(a, "thomsonCrossSection", function () {
					return o("6.65245873413e-29 m^2")
				}),
				i(a, "weakMixingAngle", function () {
					return .222321
				}),
				i(a, "efimovFactor", function () {
					return 22.7
				}),
				i(a, "atomicMass", function () {
					return o("1.66053892173e-27 kg")
				}),
				i(a, "avogadro", function () {
					return o("6.0221412927e23 mol^-1")
				}),
				i(a, "boltzmann", function () {
					return o("1.380648813e-23 J K^-1")
				}),
				i(a, "faraday", function () {
					return o("96485.336521 C mol^-1")
				}),
				i(a, "firstRadiation", function () {
					return o("3.7417715317e-16 W m^2")
				}),
				i(a, "loschmidt", function () {
					return o("2.686780524e25 m^-3")
				}),
				i(a, "gasConstant", function () {
					return o("8.314462175 J K^-1 mol^-1")
				}),
				i(a, "molarPlanckConstant", function () {
					return o("3.990312717628e-10 J s mol^-1")
				}),
				i(a, "molarVolume", function () {
					return o("2.241396820e-10 m^3 mol^-1")
				}),
				i(a, "sackurTetrode", function () {
					return -1.164870823
				}),
				i(a, "secondRadiation", function () {
					return o("1.438777013e-2 m K")
				}),
				i(a, "stefanBoltzmann", function () {
					return o("5.67037321e-8 W m^-2 K^-4")
				}),
				i(a, "wienDisplacement", function () {
					return o("2.897772126e-3 m K")
				}),
				i(a, "molarMass", function () {
					return o("1e-3 kg mol^-1")
				}),
				i(a, "molarMassC12", function () {
					return o("1.2e-2 kg mol^-1")
				}),
				i(a, "gravity", function () {
					return o("9.80665 m s^-2")
				}),
				i(a, "planckLength", function () {
					return o("1.61619997e-35 m")
				}),
				i(a, "planckMass", function () {
					return o("2.1765113e-8 kg")
				}),
				i(a, "planckTime", function () {
					return o("5.3910632e-44 s")
				}),
				i(a, "planckCharge", function () {
					return o("1.87554595641e-18 C")
				}),
				i(a, "planckTemperature", function () {
					return o("1.41683385e+32 K")
				})
			}
			function i(e, t, r) {
				a(e, t, r),
				a(e.expression.mathWithTransform, t, r)
			}
			var a = r(5).lazy;
			t.factory = n,
			t.lazy = !1,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			function n(e, t, o, u, c) {
				c.on("config", function (r, i) {
					r.number !== i.number && n(e, t, o, u, c)
				}),
				i(c, "true", !0),
				i(c, "false", !1),
				i(c, "null", null),
				i(c, "uninitialized", r(2).UNINITIALIZED),
				"BigNumber" === t.number ? (i(c, "Infinity", new e.BigNumber(1 / 0)), i(c, "NaN", new e.BigNumber(NaN)), a(c, "pi", function () {
						return s.pi(e.BigNumber)
					}), a(c, "tau", function () {
						return s.tau(e.BigNumber)
					}), a(c, "e", function () {
						return s.e(e.BigNumber)
					}), a(c, "phi", function () {
						return s.phi(e.BigNumber)
					}), a(c, "E", function () {
						return c.e
					}), a(c, "LN2", function () {
						return new e.BigNumber(2).ln()
					}), a(c, "LN10", function () {
						return new e.BigNumber(10).ln()
					}), a(c, "LOG2E", function () {
						return new e.BigNumber(1).div(new e.BigNumber(2).ln())
					}), a(c, "LOG10E", function () {
						return new e.BigNumber(1).div(new e.BigNumber(10).ln())
					}), a(c, "PI", function () {
						return c.pi
					}), a(c, "SQRT1_2", function () {
						return new e.BigNumber("0.5").sqrt()
					}), a(c, "SQRT2", function () {
						return new e.BigNumber(2).sqrt()
					})) : (i(c, "Infinity", 1 / 0), i(c, "NaN", NaN), i(c, "pi", Math.PI), i(c, "tau", 2 * Math.PI), i(c, "e", Math.E), i(c, "phi", 1.618033988749895), i(c, "E", c.e), i(c, "LN2", Math.LN2), i(c, "LN10", Math.LN10), i(c, "LOG2E", Math.LOG2E), i(c, "LOG10E", Math.LOG10E), i(c, "PI", c.pi), i(c, "SQRT1_2", Math.SQRT1_2), i(c, "SQRT2", Math.SQRT2)),
				i(c, "i", e.Complex.I),
				i(c, "version", r(190))
			}
			function i(e, t, r) {
				e[t] = r,
				e.expression.mathWithTransform[t] = r
			}
			function a(e, t, r) {
				o.lazy(e, t, r),
				o.lazy(e.expression.mathWithTransform, t, r)
			}
			var o = r(5),
			s = r(95);
			t.factory = n,
			t.lazy = !1,
			t.math = !0
		}, function (e, t) {
			e.exports = "3.16.4"
		}, function (e, t, r) {
			e.exports = [r(99), r(383), r(389), r(391), r(402), r(39), r(111)]
		}, function (e, t) {
			e.exports = {
				name: "bignumber",
				category: "Construction",
				syntax: ["bignumber(x)"],
				description: "Create a big number from a number or string.",
				examples: ["0.1 + 0.2", "bignumber(0.1) + bignumber(0.2)", 'bignumber("7.2")', 'bignumber("7.2e500")', "bignumber([0.1, 0.2, 0.3])"],
				seealso: ["boolean", "complex", "fraction", "index", "matrix", "string", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "boolean",
				category: "Construction",
				syntax: ["x", "boolean(x)"],
				description: "Convert a string or number into a boolean.",
				examples: ["boolean(0)", "boolean(1)", "boolean(3)", 'boolean("true")', 'boolean("false")', "boolean([1, 0, 1, 1])"],
				seealso: ["bignumber", "complex", "index", "matrix", "number", "string", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "complex",
				category: "Construction",
				syntax: ["complex()", "complex(re, im)", "complex(string)"],
				description: "Create a complex number.",
				examples: ["complex()", "complex(2, 3)", 'complex("7 - 2i")'],
				seealso: ["bignumber", "boolean", "index", "matrix", "number", "string", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "createUnit",
				category: "Construction",
				syntax: ["createUnit(definitions)", "createUnit(name, definition)"],
				description: "Create a user-defined unit and register it with the Unit type.",
				examples: ['createUnit("foo")', 'createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})', 'createUnit("mph", "1 mile/hour")'],
				seealso: ["unit", "splitUnit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "fraction",
				category: "Construction",
				syntax: ["fraction(num)", "fraction(num,den)"],
				description: "Create a fraction from a number or from a numerator and denominator.",
				examples: ["fraction(0.125)", "fraction(1, 3) + fraction(2, 5)"],
				seealso: ["bignumber", "boolean", "complex", "index", "matrix", "string", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "index",
				category: "Construction",
				syntax: ["[start]", "[start:end]", "[start:step:end]", "[start1, start 2, ...]", "[start1:end1, start2:end2, ...]", "[start1:step1:end1, start2:step2:end2, ...]"],
				description: "Create an index to get or replace a subset of a matrix",
				examples: ["[]", "[1, 2, 3]", "A = [1, 2, 3; 4, 5, 6]", "A[1, :]", "A[1, 2] = 50", "A[0:2, 0:2] = ones(2, 2)"],
				seealso: ["bignumber", "boolean", "complex", "matrix,", "number", "range", "string", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "matrix",
				category: "Construction",
				syntax: ["[]", "[a1, b1, ...; a2, b2, ...]", "matrix()", 'matrix("dense")', "matrix([...])"],
				description: "Create a matrix.",
				examples: ["[]", "[1, 2, 3]", "[1, 2, 3; 4, 5, 6]", "matrix()", "matrix([3, 4])", 'matrix([3, 4; 5, 6], "sparse")', 'matrix([3, 4; 5, 6], "sparse", "number")'],
				seealso: ["bignumber", "boolean", "complex", "index", "number", "string", "unit", "sparse"]
			}
		}, function (e, t) {
			e.exports = {
				name: "number",
				category: "Construction",
				syntax: ["x", "number(x)", "number(unit, valuelessUnit)"],
				description: "Create a number or convert a string or boolean into a number.",
				examples: ["2", "2e3", "4.05", "number(2)", 'number("7.2")', "number(true)", "number([true, false, true, true])", 'number(unit("52cm"), "m")'],
				seealso: ["bignumber", "boolean", "complex", "fraction", "index", "matrix", "string", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sparse",
				category: "Construction",
				syntax: ["sparse()", "sparse([a1, b1, ...; a1, b2, ...])", 'sparse([a1, b1, ...; a1, b2, ...], "number")'],
				description: "Create a sparse matrix.",
				examples: ["sparse()", "sparse([3, 4; 5, 6])", 'sparse([3, 0; 5, 0], "number")'],
				seealso: ["bignumber", "boolean", "complex", "index", "number", "string", "unit", "matrix"]
			}
		}, function (e, t) {
			e.exports = {
				name: "splitUnit",
				category: "Construction",
				syntax: ["splitUnit(unit: Unit, parts: Unit[])"],
				description: "Split a unit in an array of units whose sum is equal to the original unit.",
				examples: ['splitUnit(1 m, ["feet", "inch"])'],
				seealso: ["unit", "createUnit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "string",
				category: "Construction",
				syntax: ['"text"', "string(x)"],
				description: "Create a string or convert a value to a string",
				examples: ['"Hello World!"', "string(4.2)", "string(3 + 2i)"],
				seealso: ["bignumber", "boolean", "complex", "index", "matrix", "number", "unit"]
			}
		}, function (e, t) {
			e.exports = {
				name: "unit",
				category: "Construction",
				syntax: ["value unit", "unit(value, unit)", "unit(string)"],
				description: "Create a unit.",
				examples: ["5.5 mm", "3 inch", 'unit(7.1, "kilogram")', 'unit("23 deg")'],
				seealso: ["bignumber", "boolean", "complex", "index", "matrix", "number", "string"]
			}
		}, function (e, t) {
			e.exports = {
				name: "false",
				category: "Constants",
				syntax: ["false"],
				description: "Boolean value false",
				examples: ["false"],
				seealso: ["true"]
			}
		}, function (e, t) {
			e.exports = {
				name: "i",
				category: "Constants",
				syntax: ["i"],
				description: "Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",
				examples: ["i", "i * i", "sqrt(-1)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "Infinity",
				category: "Constants",
				syntax: ["Infinity"],
				description: "Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",
				examples: ["Infinity", "1 / 0"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "LN2",
				category: "Constants",
				syntax: ["LN2"],
				description: "Returns the natural logarithm of 2, approximately equal to 0.693",
				examples: ["LN2", "log(2)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "LN10",
				category: "Constants",
				syntax: ["LN10"],
				description: "Returns the natural logarithm of 10, approximately equal to 2.302",
				examples: ["LN10", "log(10)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "LOG2E",
				category: "Constants",
				syntax: ["LOG2E"],
				description: "Returns the base-2 logarithm of E, approximately equal to 1.442",
				examples: ["LOG2E", "log(e, 2)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "LOG10E",
				category: "Constants",
				syntax: ["LOG10E"],
				description: "Returns the base-10 logarithm of E, approximately equal to 0.434",
				examples: ["LOG10E", "log(e, 10)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "NaN",
				category: "Constants",
				syntax: ["NaN"],
				description: "Not a number",
				examples: ["NaN", "0 / 0"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "null",
				category: "Constants",
				syntax: ["null"],
				description: "Value null",
				examples: ["null"],
				seealso: ["true", "false"]
			}
		}, function (e, t) {
			e.exports = {
				name: "phi",
				category: "Constants",
				syntax: ["phi"],
				description: "Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",
				examples: ["phi"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "SQRT1_2",
				category: "Constants",
				syntax: ["SQRT1_2"],
				description: "Returns the square root of 1/2, approximately equal to 0.707",
				examples: ["SQRT1_2", "sqrt(1/2)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "SQRT2",
				category: "Constants",
				syntax: ["SQRT2"],
				description: "Returns the square root of 2, approximately equal to 1.414",
				examples: ["SQRT2", "sqrt(2)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "tau",
				category: "Constants",
				syntax: ["tau"],
				description: "Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",
				examples: ["tau", "2 * pi"],
				seealso: ["pi"]
			}
		}, function (e, t) {
			e.exports = {
				name: "true",
				category: "Constants",
				syntax: ["true"],
				description: "Boolean value true",
				examples: ["true"],
				seealso: ["false"]
			}
		}, function (e, t) {
			e.exports = {
				name: "version",
				category: "Constants",
				syntax: ["version"],
				description: "A string with the version number of math.js",
				examples: ["version"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "derivative",
				category: "Algebra",
				syntax: ["derivative(expr, variable)", "derivative(expr, variable, {simplify: boolean})"],
				description: "Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",
				examples: ['derivative("2x^3", "x")', 'derivative("2x^3", "x", {simplify: false})', 'derivative("2x^2 + 3x + 4", "x")', 'derivative("sin(2x)", "x")', 'f = parse("x^2 + x")', 'x = parse("x")', "df = derivative(f, x)", "df.eval({x: 3})"],
				seealso: ["simplify", "parse", "eval"]
			}
		}, function (e, t) {
			e.exports = {
				name: "lsolve",
				category: "Algebra",
				syntax: ["x=lsolve(L, b)"],
				description: "Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",
				examples: ["a = [-2, 3; 2, 1]", "b = [11, 9]", "x = lsolve(a, b)"],
				seealso: ["lup", "lusolve", "usolve", "matrix", "sparse"]
			}
		}, function (e, t) {
			e.exports = {
				name: "lup",
				category: "Algebra",
				syntax: ["lup(m)"],
				description: "Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",
				examples: ["lup([[2, 1], [1, 4]])", "lup(matrix([[2, 1], [1, 4]]))", "lup(sparse([[2, 1], [1, 4]]))"],
				seealso: ["lusolve", "lsolve", "usolve", "matrix", "sparse", "slu", "qr"]
			}
		}, function (e, t) {
			e.exports = {
				name: "lusolve",
				category: "Algebra",
				syntax: ["x=lusolve(A, b)", "x=lusolve(lu, b)"],
				description: "Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",
				examples: ["a = [-2, 3; 2, 1]", "b = [11, 9]", "x = lusolve(a, b)"],
				seealso: ["lup", "slu", "lsolve", "usolve", "matrix", "sparse"]
			}
		}, function (e, t) {
			e.exports = {
				name: "simplify",
				category: "Algebra",
				syntax: ["simplify(expr)", "simplify(expr, rules)"],
				description: "Simplify an expression tree.",
				examples: ['simplify("3 + 2 / 4")', 'simplify("2x + x")', 'f = parse("x * (x + 2 + x)")', "simplified = simplify(f)", "simplified.eval({x: 2})"],
				seealso: ["derivative", "parse", "eval"]
			}
		}, function (e, t) {
			e.exports = {
				name: "slu",
				category: "Algebra",
				syntax: ["slu(A, order, threshold)"],
				description: "Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",
				examples: ["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],
				seealso: ["lusolve", "lsolve", "usolve", "matrix", "sparse", "lup", "qr"]
			}
		}, function (e, t) {
			e.exports = {
				name: "usolve",
				category: "Algebra",
				syntax: ["x=usolve(U, b)"],
				description: "Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",
				examples: ["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],
				seealso: ["lup", "lusolve", "lsolve", "matrix", "sparse"]
			}
		}, function (e, t) {
			e.exports = {
				name: "qr",
				category: "Algebra",
				syntax: ["qr(A)"],
				description: "Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",
				examples: ["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],
				seealso: ["lup", "slu", "matrix"]
			}
		}, function (e, t) {
			e.exports = {
				name: "abs",
				category: "Arithmetic",
				syntax: ["abs(x)"],
				description: "Compute the absolute value.",
				examples: ["abs(3.5)", "abs(-4.2)"],
				seealso: ["sign"]
			}
		}, function (e, t) {
			e.exports = {
				name: "add",
				category: "Operators",
				syntax: ["x + y", "add(x, y)"],
				description: "Add two values.",
				examples: ["a = 2.1 + 3.6", "a - 3.6", "3 + 2i", "3 cm + 2 inch", '"2.3" + "4"'],
				seealso: ["subtract"]
			}
		}, function (e, t) {
			e.exports = {
				name: "cbrt",
				category: "Arithmetic",
				syntax: ["cbrt(x)", "cbrt(x, allRoots)"],
				description: "Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",
				examples: ["cbrt(64)", "cube(4)", "cbrt(-8)", "cbrt(2 + 3i)", "cbrt(8i)", "cbrt(8i, true)", "cbrt(27 m^3)"],
				seealso: ["square", "sqrt", "cube", "multiply"]
			}
		}, function (e, t) {
			e.exports = {
				name: "ceil",
				category: "Arithmetic",
				syntax: ["ceil(x)"],
				description: "Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",
				examples: ["ceil(3.2)", "ceil(3.8)", "ceil(-4.2)"],
				seealso: ["floor", "fix", "round"]
			}
		}, function (e, t) {
			e.exports = {
				name: "cube",
				category: "Arithmetic",
				syntax: ["cube(x)"],
				description: "Compute the cube of a value. The cube of x is x * x * x.",
				examples: ["cube(2)", "2^3", "2 * 2 * 2"],
				seealso: ["multiply", "square", "pow"]
			}
		}, function (e, t) {
			e.exports = {
				name: "divide",
				category: "Operators",
				syntax: ["x / y", "divide(x, y)"],
				description: "Divide two values.",
				examples: ["a = 2 / 3", "a * 3", "4.5 / 2", "3 + 4 / 2", "(3 + 4) / 2", "18 km / 4.5"],
				seealso: ["multiply"]
			}
		}, function (e, t) {
			e.exports = {
				name: "dotDivide",
				category: "Operators",
				syntax: ["x ./ y", "dotDivide(x, y)"],
				description: "Divide two values element wise.",
				examples: ["a = [1, 2, 3; 4, 5, 6]", "b = [2, 1, 1; 3, 2, 5]", "a ./ b"],
				seealso: ["multiply", "dotMultiply", "divide"]
			}
		}, function (e, t) {
			e.exports = {
				name: "dotMultiply",
				category: "Operators",
				syntax: ["x .* y", "dotMultiply(x, y)"],
				description: "Multiply two values element wise.",
				examples: ["a = [1, 2, 3; 4, 5, 6]", "b = [2, 1, 1; 3, 2, 5]", "a .* b"],
				seealso: ["multiply", "divide", "dotDivide"]
			}
		}, function (e, t) {
			e.exports = {
				name: "dotpow",
				category: "Operators",
				syntax: ["x .^ y", "dotpow(x, y)"],
				description: "Calculates the power of x to y element wise.",
				examples: ["a = [1, 2, 3; 4, 5, 6]", "a .^ 2"],
				seealso: ["pow"]
			}
		}, function (e, t) {
			e.exports = {
				name: "exp",
				category: "Arithmetic",
				syntax: ["exp(x)"],
				description: "Calculate the exponent of a value.",
				examples: ["exp(1.3)", "e ^ 1.3", "log(exp(1.3))", "x = 2.4", "(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],
				seealso: ["pow", "log"]
			}
		}, function (e, t) {
			e.exports = {
				name: "fix",
				category: "Arithmetic",
				syntax: ["fix(x)"],
				description: "Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",
				examples: ["fix(3.2)", "fix(3.8)", "fix(-4.2)", "fix(-4.8)"],
				seealso: ["ceil", "floor", "round"]
			}
		}, function (e, t) {
			e.exports = {
				name: "floor",
				category: "Arithmetic",
				syntax: ["floor(x)"],
				description: "Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",
				examples: ["floor(3.2)", "floor(3.8)", "floor(-4.2)"],
				seealso: ["ceil", "fix", "round"]
			}
		}, function (e, t) {
			e.exports = {
				name: "gcd",
				category: "Arithmetic",
				syntax: ["gcd(a, b)", "gcd(a, b, c, ...)"],
				description: "Compute the greatest common divisor.",
				examples: ["gcd(8, 12)", "gcd(-4, 6)", "gcd(25, 15, -10)"],
				seealso: ["lcm", "xgcd"]
			}
		}, function (e, t) {
			e.exports = {
				name: "hypot",
				category: "Arithmetic",
				syntax: ["hypot(a, b, c, ...)", "hypot([a, b, c, ...])"],
				description: "Calculate the hypotenusa of a list with values. ",
				examples: ["hypot(3, 4)", "sqrt(3^2 + 4^2)", "hypot(-2)", "hypot([3, 4, 5])"],
				seealso: ["abs", "norm"]
			}
		}, function (e, t) {
			e.exports = {
				name: "lcm",
				category: "Arithmetic",
				syntax: ["lcm(x, y)"],
				description: "Compute the least common multiple.",
				examples: ["lcm(4, 6)", "lcm(6, 21)", "lcm(6, 21, 5)"],
				seealso: ["gcd"]
			}
		}, function (e, t) {
			e.exports = {
				name: "log",
				category: "Arithmetic",
				syntax: ["log(x)", "log(x, base)"],
				description: "Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",
				examples: ["log(3.5)", "a = log(2.4)", "exp(a)", "10 ^ 4", "log(10000, 10)", "log(10000) / log(10)", "b = log(1024, 2)", "2 ^ b"],
				seealso: ["exp", "log10"]
			}
		}, function (e, t) {
			e.exports = {
				name: "log10",
				category: "Arithmetic",
				syntax: ["log10(x)"],
				description: "Compute the 10-base logarithm of a value.",
				examples: ["log10(0.00001)", "log10(10000)", "10 ^ 4", "log(10000) / log(10)", "log(10000, 10)"],
				seealso: ["exp", "log"]
			}
		}, function (e, t) {
			e.exports = {
				name: "mod",
				category: "Operators",
				syntax: ["x % y", "x mod y", "mod(x, y)"],
				description: "Calculates the modulus, the remainder of an integer division.",
				examples: ["7 % 3", "11 % 2", "10 mod 4", "isOdd(x) = x % 2", "isOdd(2)", "isOdd(3)"],
				seealso: ["divide"]
			}
		}, function (e, t) {
			e.exports = {
				name: "multiply",
				category: "Operators",
				syntax: ["x * y", "multiply(x, y)"],
				description: "multiply two values.",
				examples: ["a = 2.1 * 3.4", "a / 3.4", "2 * 3 + 4", "2 * (3 + 4)", "3 * 2.1 km"],
				seealso: ["divide"]
			}
		}, function (e, t) {
			e.exports = {
				name: "norm",
				category: "Arithmetic",
				syntax: ["norm(x)", "norm(x, p)"],
				description: "Calculate the norm of a number, vector or matrix.",
				examples: ["abs(-3.5)", "norm(-3.5)", "norm(3 - 4i)", "norm([1, 2, -3], Infinity)", "norm([1, 2, -3], -Infinity)", "norm([3, 4], 2)", "norm([[1, 2], [3, 4]], 1)", 'norm([[1, 2], [3, 4]], "inf")', 'norm([[1, 2], [3, 4]], "fro")']
			}
		}, function (e, t) {
			e.exports = {
				name: "nthRoot",
				category: "Arithmetic",
				syntax: ["nthRoot(a)", "nthRoot(a, root)"],
				description: 'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',
				examples: ["4 ^ 3", "nthRoot(64, 3)", "nthRoot(9, 2)", "sqrt(9)"],
				seealso: ["sqrt", "pow"]
			}
		}, function (e, t) {
			e.exports = {
				name: "pow",
				category: "Operators",
				syntax: ["x ^ y", "pow(x, y)"],
				description: "Calculates the power of x to y, x^y.",
				examples: ["2^3", "2*2*2", "1 + e ^ (pi * i)"],
				seealso: ["multiply"]
			}
		}, function (e, t) {
			e.exports = {
				name: "round",
				category: "Arithmetic",
				syntax: ["round(x)", "round(x, n)"],
				description: "round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",
				examples: ["round(3.2)", "round(3.8)", "round(-4.2)", "round(-4.8)", "round(pi, 3)", "round(123.45678, 2)"],
				seealso: ["ceil", "floor", "fix"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sign",
				category: "Arithmetic",
				syntax: ["sign(x)"],
				description: "Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",
				examples: ["sign(3.5)", "sign(-4.2)", "sign(0)"],
				seealso: ["abs"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sqrt",
				category: "Arithmetic",
				syntax: ["sqrt(x)"],
				description: "Compute the square root value. If x = y * y, then y is the square root of x.",
				examples: ["sqrt(25)", "5 * 5", "sqrt(-1)"],
				seealso: ["square", "multiply"]
			}
		}, function (e, t) {
			e.exports = {
				name: "square",
				category: "Arithmetic",
				syntax: ["square(x)"],
				description: "Compute the square of a value. The square of x is x * x.",
				examples: ["square(3)", "sqrt(9)", "3^2", "3 * 3"],
				seealso: ["multiply", "pow", "sqrt", "cube"]
			}
		}, function (e, t) {
			e.exports = {
				name: "subtract",
				category: "Operators",
				syntax: ["x - y", "subtract(x, y)"],
				description: "subtract two values.",
				examples: ["a = 5.3 - 2", "a + 2", "2/3 - 1/6", "2 * 3 - 3", "2.1 km - 500m"],
				seealso: ["add"]
			}
		}, function (e, t) {
			e.exports = {
				name: "unaryMinus",
				category: "Operators",
				syntax: ["-x", "unaryMinus(x)"],
				description: "Inverse the sign of a value. Converts booleans and strings to numbers.",
				examples: ["-4.5", "-(-5.6)", '-"22"'],
				seealso: ["add", "subtract", "unaryPlus"]
			}
		}, function (e, t) {
			e.exports = {
				name: "unaryPlus",
				category: "Operators",
				syntax: ["+x", "unaryPlus(x)"],
				description: "Converts booleans and strings to numbers.",
				examples: ["+true", '+"2"'],
				seealso: ["add", "subtract", "unaryMinus"]
			}
		}, function (e, t) {
			e.exports = {
				name: "xgcd",
				category: "Arithmetic",
				syntax: ["xgcd(a, b)"],
				description: "Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",
				examples: ["xgcd(8, 12)", "gcd(8, 12)", "xgcd(36163, 21199)"],
				seealso: ["gcd", "lcm"]
			}
		}, function (e, t) {
			e.exports = {
				name: "bitAnd",
				category: "Bitwise",
				syntax: ["x & y", "bitAnd(x, y)"],
				description: "Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",
				examples: ["5 & 3", "bitAnd(53, 131)", "[1, 12, 31] & 42"],
				seealso: ["bitNot", "bitOr", "bitXor", "leftShift", "rightArithShift", "rightLogShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "bitNot",
				category: "Bitwise",
				syntax: ["~x", "bitNot(x)"],
				description: "Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",
				examples: ["~1", "~2", "bitNot([2, -3, 4])"],
				seealso: ["bitAnd", "bitOr", "bitXor", "leftShift", "rightArithShift", "rightLogShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "bitOr",
				category: "Bitwise",
				syntax: ["x | y", "bitOr(x, y)"],
				description: "Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",
				examples: ["5 | 3", "bitOr([1, 2, 3], 4)"],
				seealso: ["bitAnd", "bitNot", "bitXor", "leftShift", "rightArithShift", "rightLogShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "bitXor",
				category: "Bitwise",
				syntax: ["bitXor(x, y)"],
				description: "Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",
				examples: ["bitOr(1, 2)", "bitXor([2, 3, 4], 4)"],
				seealso: ["bitAnd", "bitNot", "bitOr", "leftShift", "rightArithShift", "rightLogShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "leftShift",
				category: "Bitwise",
				syntax: ["x << y", "leftShift(x, y)"],
				description: "Bitwise left logical shift of a value x by y number of bits.",
				examples: ["4 << 1", "8 >> 1"],
				seealso: ["bitAnd", "bitNot", "bitOr", "bitXor", "rightArithShift", "rightLogShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "rightArithShift",
				category: "Bitwise",
				syntax: ["x >> y", "rightArithShift(x, y)"],
				description: "Bitwise right arithmetic shift of a value x by y number of bits.",
				examples: ["8 >> 1", "4 << 1", "-12 >> 2"],
				seealso: ["bitAnd", "bitNot", "bitOr", "bitXor", "leftShift", "rightLogShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "rightLogShift",
				category: "Bitwise",
				syntax: ["x >>> y", "rightLogShift(x, y)"],
				description: "Bitwise right logical shift of a value x by y number of bits.",
				examples: ["8 >>> 1", "4 << 1", "-12 >>> 2"],
				seealso: ["bitAnd", "bitNot", "bitOr", "bitXor", "leftShift", "rightArithShift"]
			}
		}, function (e, t) {
			e.exports = {
				name: "bellNumbers",
				category: "Combinatorics",
				syntax: ["bellNumbers(n)"],
				description: "The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",
				examples: ["bellNumbers(3)", "bellNumbers(8)"],
				seealso: ["stirlingS2"]
			}
		}, function (e, t) {
			e.exports = {
				name: "catalan",
				category: "Combinatorics",
				syntax: ["catalan(n)"],
				description: "The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",
				examples: ["catalan(3)", "catalan(8)"],
				seealso: ["bellNumbers"]
			}
		}, function (e, t) {
			e.exports = {
				name: "composition",
				category: "Combinatorics",
				syntax: ["composition(n, k)"],
				description: "The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",
				examples: ["composition(5, 3)"],
				seealso: ["combinations"]
			}
		}, function (e, t) {
			e.exports = {
				name: "stirlingS2",
				category: "Combinatorics",
				syntax: ["stirlingS2(n, k)"],
				description: "he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",
				examples: ["stirlingS2(5, 3)"],
				seealso: ["bellNumbers"]
			}
		}, function (e, t) {
			e.exports = {
				name: "config",
				category: "Core",
				syntax: ["config()", "config(options)"],
				description: "Get configuration or change configuration.",
				examples: ["config()", "1/3 + 1/4", 'config({number: "Fraction"})', "1/3 + 1/4"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "import",
				category: "Core",
				syntax: ["import(functions)", "import(functions, options)"],
				description: "Import functions or constants from an object.",
				examples: ["import({myFn: f(x)=x^2, myConstant: 32 })", "myFn(2)", "myConstant"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "typed",
				category: "Core",
				syntax: ["typed(signatures)", "typed(name, signatures)"],
				description: "Create a typed function.",
				examples: ['double = typed({ "number, number": f(x)=x+x })', "double(2)", 'double("hello")'],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "arg",
				category: "Complex",
				syntax: ["arg(x)"],
				description: "Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",
				examples: ["arg(2 + 2i)", "atan2(3, 2)", "arg(2 + 3i)"],
				seealso: ["re", "im", "conj", "abs"]
			}
		}, function (e, t) {
			e.exports = {
				name: "conj",
				category: "Complex",
				syntax: ["conj(x)"],
				description: "Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",
				examples: ["conj(2 + 3i)", "conj(2 - 3i)", "conj(-5.2i)"],
				seealso: ["re", "im", "abs", "arg"]
			}
		}, function (e, t) {
			e.exports = {
				name: "re",
				category: "Complex",
				syntax: ["re(x)"],
				description: "Get the real part of a complex number.",
				examples: ["re(2 + 3i)", "im(2 + 3i)", "re(-5.2i)", "re(2.4)"],
				seealso: ["im", "conj", "abs", "arg"]
			}
		}, function (e, t) {
			e.exports = {
				name: "im",
				category: "Complex",
				syntax: ["im(x)"],
				description: "Get the imaginary part of a complex number.",
				examples: ["im(2 + 3i)", "re(2 + 3i)", "im(-5.2i)", "im(2.4)"],
				seealso: ["re", "conj", "abs", "arg"]
			}
		}, function (e, t) {
			e.exports = {
				name: "eval",
				category: "Expression",
				syntax: ["eval(expression)", "eval([expr1, expr2, expr3, ...])"],
				description: "Evaluate an expression or an array with expressions.",
				examples: ['eval("2 + 3")', 'eval("sqrt(" + 4 + ")")'],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "help",
				category: "Expression",
				syntax: ["help(object)", "help(string)"],
				description: "Display documentation on a function or data type.",
				examples: ["help(sqrt)", 'help("complex")'],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "distance",
				category: "Geometry",
				syntax: ["distance([x1, y1], [x2, y2])", "distance([[x1, y1], [x2, y2])"],
				description: "Calculates the Euclidean distance between two points.",
				examples: ["distance([0,0], [4,4])", "distance([[0,0], [4,4]])"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "intersect",
				category: "Geometry",
				syntax: ["intersect(expr1, expr2, expr3, expr4)", "intersect(expr1, expr2, expr3)"],
				description: "Computes the intersection point of lines and/or planes.",
				examples: ["intersect([0, 0], [10, 10], [10, 0], [0, 10])", "intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "and",
				category: "Logical",
				syntax: ["x and y", "and(x, y)"],
				description: "Logical and. Test whether two values are both defined with a nonzero/nonempty value.",
				examples: ["true and false", "true and true", "2 and 4"],
				seealso: ["not", "or", "xor"]
			}
		}, function (e, t) {
			e.exports = {
				name: "not",
				category: "Logical",
				syntax: ["not x", "not(x)"],
				description: "Logical not. Flips the boolean value of given argument.",
				examples: ["not true", "not false", "not 2", "not 0"],
				seealso: ["and", "or", "xor"]
			}
		}, function (e, t) {
			e.exports = {
				name: "or",
				category: "Logical",
				syntax: ["x or y", "or(x, y)"],
				description: "Logical or. Test if at least one value is defined with a nonzero/nonempty value.",
				examples: ["true or false", "false or false", "0 or 4"],
				seealso: ["not", "and", "xor"]
			}
		}, function (e, t) {
			e.exports = {
				name: "xor",
				category: "Logical",
				syntax: ["x xor y", "xor(x, y)"],
				description: "Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",
				examples: ["true xor false", "false xor false", "true xor true", "0 xor 4"],
				seealso: ["not", "and", "or"]
			}
		}, function (e, t) {
			e.exports = {
				name: "concat",
				category: "Matrix",
				syntax: ["concat(A, B, C, ...)", "concat(A, B, C, ..., dim)"],
				description: "Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",
				examples: ["A = [1, 2; 5, 6]", "B = [3, 4; 7, 8]", "concat(A, B)", "concat(A, B, 1)", "concat(A, B, 2)"],
				seealso: ["det", "diag", "eye", "inv", "ones", "range", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "cross",
				category: "Matrix",
				syntax: ["cross(A, B)"],
				description: "Calculate the cross product for two vectors in three dimensional space.",
				examples: ["cross([1, 1, 0],  [0, 1, 1])", "cross([3, -3, 1], [4, 9, 2])", "cross([2, 3, 4],  [5, 6, 7])"],
				seealso: ["multiply", "dot"]
			}
		}, function (e, t) {
			e.exports = {
				name: "det",
				category: "Matrix",
				syntax: ["det(x)"],
				description: "Calculate the determinant of a matrix",
				examples: ["det([1, 2; 3, 4])", "det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],
				seealso: ["concat", "diag", "eye", "inv", "ones", "range", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "diag",
				category: "Matrix",
				syntax: ["diag(x)", "diag(x, k)"],
				description: "Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",
				examples: ["diag(1:3)", "diag(1:3, 1)", "a = [1, 2, 3; 4, 5, 6; 7, 8, 9]", "diag(a)"],
				seealso: ["concat", "det", "eye", "inv", "ones", "range", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "dot",
				category: "Matrix",
				syntax: ["dot(A, B)", "A * B"],
				description: "Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",
				examples: ["dot([2, 4, 1], [2, 2, 3])", "[2, 4, 1] * [2, 2, 3]"],
				seealso: ["multiply", "cross"]
			}
		}, function (e, t) {
			e.exports = {
				name: "eye",
				category: "Matrix",
				syntax: ["eye(n)", "eye(m, n)", "eye([m, n])"],
				description: "Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",
				examples: ["eye(3)", "eye(3, 5)", "a = [1, 2, 3; 4, 5, 6]", "eye(size(a))"],
				seealso: ["concat", "det", "diag", "inv", "ones", "range", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "filter",
				category: "Matrix",
				syntax: ["filter(x, test)"],
				description: "Filter items in a matrix.",
				examples: ["isPositive(x) = x > 0", "filter([6, -2, -1, 4, 3], isPositive)", "filter([6, -2, 0, 1, 0], x != 0)"],
				seealso: ["sort", "map", "forEach"]
			}
		}, function (e, t) {
			e.exports = {
				name: "flatten",
				category: "Matrix",
				syntax: ["flatten(x)"],
				description: "Flatten a multi dimensional matrix into a single dimensional matrix.",
				examples: ["a = [1, 2, 3; 4, 5, 6]", "size(a)", "b = flatten(a)", "size(b)"],
				seealso: ["concat", "resize", "size", "squeeze"]
			}
		}, function (e, t) {
			e.exports = {
				name: "forEach",
				category: "Matrix",
				syntax: ["forEach(x, callback)"],
				description: "Iterates over all elements of a matrix/array, and executes the given callback function.",
				examples: ["forEach([1, 2, 3], function(val) { console.log(val) })"],
				seealso: ["map", "sort", "filter"]
			}
		}, function (e, t) {
			e.exports = {
				name: "inv",
				category: "Matrix",
				syntax: ["inv(x)"],
				description: "Calculate the inverse of a matrix",
				examples: ["inv([1, 2; 3, 4])", "inv(4)", "1 / 4"],
				seealso: ["concat", "det", "diag", "eye", "ones", "range", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "kron",
				category: "Matrix",
				syntax: ["kron(x, y)"],
				description: "Calculates the kronecker product of 2 matrices or vectors.",
				examples: ["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])", "kron([1,1], [2,3,4])"],
				seealso: ["multiply", "dot", "cross"]
			}
		}, function (e, t) {
			e.exports = {
				name: "map",
				category: "Matrix",
				syntax: ["map(x, callback)"],
				description: "Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",
				examples: ["map([1, 2, 3], square)"],
				seealso: ["filter", "forEach"]
			}
		}, function (e, t) {
			e.exports = {
				name: "ones",
				category: "Matrix",
				syntax: ["ones(m)", "ones(m, n)", "ones(m, n, p, ...)", "ones([m])", "ones([m, n])", "ones([m, n, p, ...])"],
				description: "Create a matrix containing ones.",
				examples: ["ones(3)", "ones(3, 5)", "ones([2,3]) * 4.5", "a = [1, 2, 3; 4, 5, 6]", "ones(size(a))"],
				seealso: ["concat", "det", "diag", "eye", "inv", "range", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "partitionSelect",
				category: "Matrix",
				syntax: ["partitionSelect(x, k)", "partitionSelect(x, k, compare)"],
				description: "Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",
				examples: ["partitionSelect([5, 10, 1], 2)", 'partitionSelect(["C", "B", "A", "D"], 1)'],
				seealso: ["sort"]
			}
		}, function (e, t) {
			e.exports = {
				name: "range",
				category: "Type",
				syntax: ["start:end", "start:step:end", "range(start, end)", "range(start, end, step)", "range(string)"],
				description: "Create a range. Lower bound of the range is included, upper bound is excluded.",
				examples: ["1:5", "3:-1:-3", "range(3, 7)", "range(0, 12, 2)", 'range("4:10")', "a = [1, 2, 3, 4; 5, 6, 7, 8]", "a[1:2, 1:2]"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "size", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "resize",
				category: "Matrix",
				syntax: ["resize(x, size)", "resize(x, size, defaultValue)"],
				description: "Resize a matrix.",
				examples: ["resize([1,2,3,4,5], [3])", "resize([1,2,3], [5])", "resize([1,2,3], [5], -1)", "resize(2, [2, 3])", 'resize("hello", [8], "!")'],
				seealso: ["size", "subset", "squeeze", "reshape"]
			}
		}, function (e, t) {
			e.exports = {
				name: "reshape",
				category: "Matrix",
				syntax: ["reshape(x, sizes)"],
				description: "Reshape a multi dimensional array to fit the specified dimensions.",
				examples: ["reshape([1, 2, 3, 4, 5, 6], [2, 3])", "reshape([[1, 2], [3, 4]], [1, 4])", "reshape([[1, 2], [3, 4]], [4])"],
				seealso: ["size", "squeeze", "resize"]
			}
		}, function (e, t) {
			e.exports = {
				name: "size",
				category: "Matrix",
				syntax: ["size(x)"],
				description: "Calculate the size of a matrix.",
				examples: ["size(2.3)", 'size("hello world")', "a = [1, 2; 3, 4; 5, 6]", "size(a)", "size(1:6)"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "range", "squeeze", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sort",
				category: "Matrix",
				syntax: ["sort(x)", "sort(x, compare)"],
				description: 'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',
				examples: ["sort([5, 10, 1])", 'sort(["C", "B", "A", "D"])', "sortByLength(a, b) = size(a)[1] - size(b)[1]", 'sort(["Langdon", "Tom", "Sara"], sortByLength)', 'sort(["10", "1", "2"], "natural")'],
				seealso: ["map", "filter", "forEach"]
			}
		}, function (e, t) {
			e.exports = {
				name: "squeeze",
				category: "Matrix",
				syntax: ["squeeze(x)"],
				description: "Remove inner and outer singleton dimensions from a matrix.",
				examples: ["a = zeros(3,2,1)", "size(squeeze(a))", "b = zeros(1,1,3)", "size(squeeze(b))"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "range", "size", "subset", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "subset",
				category: "Matrix",
				syntax: ["value(index)", "value(index) = replacement", "subset(value, [index])", "subset(value, [index], replacement)"],
				description: "Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",
				examples: ["d = [1, 2; 3, 4]", "e = []", "e[1, 1:2] = [5, 6]", "e[2, :] = [7, 8]", "f = d * e", "f[2, 1]", "f[:, 1]"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "range", "size", "squeeze", "trace", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "trace",
				category: "Matrix",
				syntax: ["trace(A)"],
				description: "Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",
				examples: ["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]", "trace(A)"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "range", "size", "squeeze", "subset", "transpose", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "transpose",
				category: "Matrix",
				syntax: ["x'", "transpose(x)"],
				description: "Transpose a matrix",
				examples: ["a = [1, 2, 3; 4, 5, 6]", "a'", "transpose(a)"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "range", "size", "squeeze", "subset", "trace", "zeros"]
			}
		}, function (e, t) {
			e.exports = {
				name: "zeros",
				category: "Matrix",
				syntax: ["zeros(m)", "zeros(m, n)", "zeros(m, n, p, ...)", "zeros([m])", "zeros([m, n])", "zeros([m, n, p, ...])"],
				description: "Create a matrix containing zeros.",
				examples: ["zeros(3)", "zeros(3, 5)", "a = [1, 2, 3; 4, 5, 6]", "zeros(size(a))"],
				seealso: ["concat", "det", "diag", "eye", "inv", "ones", "range", "size", "squeeze", "subset", "trace", "transpose"]
			}
		}, function (e, t) {
			e.exports = {
				name: "combinations",
				category: "Probability",
				syntax: ["combinations(n, k)"],
				description: "Compute the number of combinations of n items taken k at a time",
				examples: ["combinations(7, 5)"],
				seealso: ["permutations", "factorial"]
			}
		}, function (e, t) {
			e.exports = {
				name: "factorial",
				category: "Probability",
				syntax: ["n!", "factorial(n)"],
				description: "Compute the factorial of a value",
				examples: ["5!", "5 * 4 * 3 * 2 * 1", "3!"],
				seealso: ["combinations", "permutations", "gamma"]
			}
		}, function (e, t) {
			e.exports = {
				name: "gamma",
				category: "Probability",
				syntax: ["gamma(n)"],
				description: "Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",
				examples: ["gamma(4)", "3!", "gamma(1/2)", "sqrt(pi)"],
				seealso: ["factorial"]
			}
		}, function (e, t) {
			e.exports = {
				name: "kldivergence",
				category: "Probability",
				syntax: ["kldivergence(x, y)"],
				description: "Calculate the Kullback-Leibler (KL) divergence  between two distributions.",
				examples: ["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "multinomial",
				category: "Probability",
				syntax: ["multinomial(A)"],
				description: "Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",
				examples: ["multinomial([1, 2, 1])"],
				seealso: ["combinations", "factorial"]
			}
		}, function (e, t) {
			e.exports = {
				name: "permutations",
				category: "Probability",
				syntax: ["permutations(n)", "permutations(n, k)"],
				description: "Compute the number of permutations of n items taken k at a time",
				examples: ["permutations(5)", "permutations(5, 3)"],
				seealso: ["combinations", "factorial"]
			}
		}, function (e, t) {
			e.exports = {
				name: "pickRandom",
				category: "Probability",
				syntax: ["pickRandom(array)", "pickRandom(array, number)", "pickRandom(array, weights)", "pickRandom(array, number, weights)", "pickRandom(array, weights, number)"],
				description: "Pick a random entry from a given array.",
				examples: ["pickRandom(0:10)", "pickRandom([1, 3, 1, 6])", "pickRandom([1, 3, 1, 6], 2)", "pickRandom([1, 3, 1, 6], [2, 3, 2, 1])", "pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])", "pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],
				seealso: ["random", "randomInt"]
			}
		}, function (e, t) {
			e.exports = {
				name: "random",
				category: "Probability",
				syntax: ["random()", "random(max)", "random(min, max)", "random(size)", "random(size, max)", "random(size, min, max)"],
				description: "Return a random number.",
				examples: ["random()", "random(10, 20)", "random([2, 3])"],
				seealso: ["pickRandom", "randomInt"]
			}
		}, function (e, t) {
			e.exports = {
				name: "randomInt",
				category: "Probability",
				syntax: ["randomInt(max)", "randomInt(min, max)", "randomInt(size)", "randomInt(size, max)", "randomInt(size, min, max)"],
				description: "Return a random integer number",
				examples: ["randomInt(10, 20)", "randomInt([2, 3], 10)"],
				seealso: ["pickRandom", "random"]
			}
		}, function (e, t) {
			e.exports = {
				name: "compare",
				category: "Relational",
				syntax: ["compare(x, y)"],
				description: "Compare two values. Returns 1 if x is larger than y, -1 if x is smaller than y, and 0 if x and y are equal.",
				examples: ["compare(2, 3)", "compare(3, 2)", "compare(2, 2)", "compare(5cm, 40mm)", "compare(2, [1, 2, 3])"],
				seealso: ["equal", "unequal", "smaller", "smallerEq", "largerEq", "compareNatural"]
			}
		}, function (e, t) {
			e.exports = {
				name: "compareNatural",
				category: "Relational",
				syntax: ["compareNatural(x, y)"],
				description: "Compare two values of any type in a deterministic, natural way.",
				examples: ["compareNatural(2, 3)", "compareNatural(3, 2)", "compareNatural(2, 2)", "compareNatural(5cm, 40mm)", 'compareNatural("2", "10")', "compareNatural(2 + 3i, 2 + 4i)", "compareNatural([1, 2, 4], [1, 2, 3])", "compareNatural([1, 5], [1, 2, 3])", "compareNatural([1, 2], [1, 2])", "compareNatural({a: 2}, {a: 4})"],
				seealso: ["equal", "unequal", "smaller", "smallerEq", "largerEq", "compare"]
			}
		}, function (e, t) {
			e.exports = {
				name: "deepEqual",
				category: "Relational",
				syntax: ["deepEqual(x, y)"],
				description: "Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",
				examples: ["deepEqual([1,3,4], [1,3,4])", "deepEqual([1,3,4], [1,3])"],
				seealso: ["equal", "unequal", "smaller", "larger", "smallerEq", "largerEq", "compare"]
			}
		}, function (e, t) {
			e.exports = {
				name: "equal",
				category: "Relational",
				syntax: ["x == y", "equal(x, y)"],
				description: "Check equality of two values. Returns true if the values are equal, and false if not.",
				examples: ["2+2 == 3", "2+2 == 4", "a = 3.2", "b = 6-2.8", "a == b", "50cm == 0.5m"],
				seealso: ["unequal", "smaller", "larger", "smallerEq", "largerEq", "compare", "deepEqual"]
			}
		}, function (e, t) {
			e.exports = {
				name: "larger",
				category: "Relational",
				syntax: ["x > y", "larger(x, y)"],
				description: "Check if value x is larger than y. Returns true if x is larger than y, and false if not.",
				examples: ["2 > 3", "5 > 2*2", "a = 3.3", "b = 6-2.8", "(a > b)", "(b < a)", "5 cm > 2 inch"],
				seealso: ["equal", "unequal", "smaller", "smallerEq", "largerEq", "compare"]
			}
		}, function (e, t) {
			e.exports = {
				name: "largerEq",
				category: "Relational",
				syntax: ["x >= y", "largerEq(x, y)"],
				description: "Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",
				examples: ["2 >= 1+1", "2 > 1+1", "a = 3.2", "b = 6-2.8", "(a >= b)"],
				seealso: ["equal", "unequal", "smallerEq", "smaller", "compare"]
			}
		}, function (e, t) {
			e.exports = {
				name: "smaller",
				category: "Relational",
				syntax: ["x < y", "smaller(x, y)"],
				description: "Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",
				examples: ["2 < 3", "5 < 2*2", "a = 3.3", "b = 6-2.8", "(a < b)", "5 cm < 2 inch"],
				seealso: ["equal", "unequal", "larger", "smallerEq", "largerEq", "compare"]
			}
		}, function (e, t) {
			e.exports = {
				name: "smallerEq",
				category: "Relational",
				syntax: ["x <= y", "smallerEq(x, y)"],
				description: "Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",
				examples: ["2 <= 1+1", "2 < 1+1", "a = 3.2", "b = 6-2.8", "(a <= b)"],
				seealso: ["equal", "unequal", "larger", "smaller", "largerEq", "compare"]
			}
		}, function (e, t) {
			e.exports = {
				name: "unequal",
				category: "Relational",
				syntax: ["x != y", "unequal(x, y)"],
				description: "Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",
				examples: ["2+2 != 3", "2+2 != 4", "a = 3.2", "b = 6-2.8", "a != b", "50cm != 0.5m", "5 cm != 2 inch"],
				seealso: ["equal", "smaller", "larger", "smallerEq", "largerEq", "compare", "deepEqual"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setCartesian",
				category: "Set",
				syntax: ["setCartesian(set1, set2)"],
				description: "Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",
				examples: ["setCartesian([1, 2], [3, 4])"],
				seealso: ["setUnion", "setIntersect", "setDifference", "setPowerset"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setDifference",
				category: "Set",
				syntax: ["setDifference(set1, set2)"],
				description: "Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",
				examples: ["setDifference([1, 2, 3, 4], [3, 4, 5, 6])", "setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],
				seealso: ["setUnion", "setIntersect", "setSymDifference"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setDistinct",
				category: "Set",
				syntax: ["setDistinct(set)"],
				description: "Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",
				examples: ["setDistinct([1, 1, 1, 2, 2, 3])"],
				seealso: ["setMultiplicity"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setIntersect",
				category: "Set",
				syntax: ["setIntersect(set1, set2)"],
				description: "Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",
				examples: ["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])", "setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],
				seealso: ["setUnion", "setDifference"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setIsSubset",
				category: "Set",
				syntax: ["setIsSubset(set1, set2)"],
				description: "Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",
				examples: ["setIsSubset([1, 2], [3, 4, 5, 6])", "setIsSubset([3, 4], [3, 4, 5, 6])"],
				seealso: ["setUnion", "setIntersect", "setDifference"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setMultiplicity",
				category: "Set",
				syntax: ["setMultiplicity(element, set)"],
				description: "Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",
				examples: ["setMultiplicity(1, [1, 2, 2, 4])", "setMultiplicity(2, [1, 2, 2, 4])"],
				seealso: ["setDistinct", "setSize"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setPowerset",
				category: "Set",
				syntax: ["setPowerset(set)"],
				description: "Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",
				examples: ["setPowerset([1, 2, 3])"],
				seealso: ["setCartesian"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setSize",
				category: "Set",
				syntax: ["setSize(set)", "setSize(set, unique)"],
				description: 'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',
				examples: ["setSize([1, 2, 2, 4])", "setSize([1, 2, 2, 4], true)"],
				seealso: ["setUnion", "setIntersect", "setDifference"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setSymDifference",
				category: "Set",
				syntax: ["setSymDifference(set1, set2)"],
				description: "Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",
				examples: ["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])", "setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],
				seealso: ["setUnion", "setIntersect", "setDifference"]
			}
		}, function (e, t) {
			e.exports = {
				name: "setUnion",
				category: "Set",
				syntax: ["setUnion(set1, set2)"],
				description: "Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",
				examples: ["setUnion([1, 2, 3, 4], [3, 4, 5, 6])", "setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],
				seealso: ["setIntersect", "setDifference"]
			}
		}, function (e, t) {
			e.exports = {
				name: "erf",
				category: "Special",
				syntax: ["erf(x)"],
				description: "Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",
				examples: ["erf(0.2)", "erf(-0.5)", "erf(4)"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "mad",
				category: "Statistics",
				syntax: ["mad(a, b, c, ...)", "mad(A)"],
				description: "Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",
				examples: ["mad(10, 20, 30)", "mad([1, 2, 3])"],
				seealso: ["mean", "median", "std", "abs"]
			}
		}, function (e, t) {
			e.exports = {
				name: "max",
				category: "Statistics",
				syntax: ["max(a, b, c, ...)", "max(A)", "max(A, dim)"],
				description: "Compute the maximum value of a list of values.",
				examples: ["max(2, 3, 4, 1)", "max([2, 3, 4, 1])", "max([2, 5; 4, 3])", "max([2, 5; 4, 3], 1)", "max([2, 5; 4, 3], 2)", "max(2.7, 7.1, -4.5, 2.0, 4.1)", "min(2.7, 7.1, -4.5, 2.0, 4.1)"],
				seealso: ["mean", "median", "min", "prod", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "mean",
				category: "Statistics",
				syntax: ["mean(a, b, c, ...)", "mean(A)", "mean(A, dim)"],
				description: "Compute the arithmetic mean of a list of values.",
				examples: ["mean(2, 3, 4, 1)", "mean([2, 3, 4, 1])", "mean([2, 5; 4, 3])", "mean([2, 5; 4, 3], 1)", "mean([2, 5; 4, 3], 2)", "mean([1.0, 2.7, 3.2, 4.0])"],
				seealso: ["max", "median", "min", "prod", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "median",
				category: "Statistics",
				syntax: ["median(a, b, c, ...)", "median(A)"],
				description: "Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",
				examples: ["median(5, 2, 7)", "median([3, -1, 5, 7])"],
				seealso: ["max", "mean", "min", "prod", "std", "sum", "var", "quantileSeq"]
			}
		}, function (e, t) {
			e.exports = {
				name: "min",
				category: "Statistics",
				syntax: ["min(a, b, c, ...)", "min(A)", "min(A, dim)"],
				description: "Compute the minimum value of a list of values.",
				examples: ["min(2, 3, 4, 1)", "min([2, 3, 4, 1])", "min([2, 5; 4, 3])", "min([2, 5; 4, 3], 1)", "min([2, 5; 4, 3], 2)", "min(2.7, 7.1, -4.5, 2.0, 4.1)", "max(2.7, 7.1, -4.5, 2.0, 4.1)"],
				seealso: ["max", "mean", "median", "prod", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "mode",
				category: "Statistics",
				syntax: ["mode(a, b, c, ...)", "mode(A)", "mode(A, a, b, B, c, ...)"],
				description: "Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",
				examples: ["mode(2, 1, 4, 3, 1)", "mode([1, 2.7, 3.2, 4, 2.7])", "mode(1, 4, 6, 1, 6)"],
				seealso: ["max", "mean", "min", "median", "prod", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "prod",
				category: "Statistics",
				syntax: ["prod(a, b, c, ...)", "prod(A)"],
				description: "Compute the product of all values.",
				examples: ["prod(2, 3, 4)", "prod([2, 3, 4])", "prod([2, 5; 4, 3])"],
				seealso: ["max", "mean", "min", "median", "min", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "quantileSeq",
				category: "Statistics",
				syntax: ["quantileSeq(A, prob[, sorted])", "quantileSeq(A, [prob1, prob2, ...][, sorted])", "quantileSeq(A, N[, sorted])"],
				description: "Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",
				examples: ["quantileSeq([3, -1, 5, 7], 0.5)", "quantileSeq([3, -1, 5, 7], [1/3, 2/3])", "quantileSeq([3, -1, 5, 7], 2)", "quantileSeq([-1, 3, 5, 7], 0.5, true)"],
				seealso: ["mean", "median", "min", "max", "prod", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "std",
				category: "Statistics",
				syntax: ["std(a, b, c, ...)", "std(A)", "std(A, normalization)"],
				description: 'Compute the standard deviation of all values, defined as std(A) = sqrt(var(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',
				examples: ["std(2, 4, 6)", "std([2, 4, 6, 8])", 'std([2, 4, 6, 8], "uncorrected")', 'std([2, 4, 6, 8], "biased")', "std([1, 2, 3; 4, 5, 6])"],
				seealso: ["max", "mean", "min", "median", "min", "prod", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sum",
				category: "Statistics",
				syntax: ["sum(a, b, c, ...)", "sum(A)"],
				description: "Compute the sum of all values.",
				examples: ["sum(2, 3, 4, 1)", "sum([2, 3, 4, 1])", "sum([2, 5; 4, 3])"],
				seealso: ["max", "mean", "median", "min", "prod", "std", "sum", "var"]
			}
		}, function (e, t) {
			e.exports = {
				name: "var",
				category: "Statistics",
				syntax: ["var(a, b, c, ...)", "var(A)", "var(A, normalization)"],
				description: 'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',
				examples: ["var(2, 4, 6)", "var([2, 4, 6, 8])", 'var([2, 4, 6, 8], "uncorrected")', 'var([2, 4, 6, 8], "biased")', "var([1, 2, 3; 4, 5, 6])"],
				seealso: ["max", "mean", "min", "median", "min", "prod", "std", "sum"]
			}
		}, function (e, t) {
			e.exports = {
				name: "acos",
				category: "Trigonometry",
				syntax: ["acos(x)"],
				description: "Compute the inverse cosine of a value in radians.",
				examples: ["acos(0.5)", "acos(cos(2.3))"],
				seealso: ["cos", "atan", "asin"]
			}
		}, function (e, t) {
			e.exports = {
				name: "acosh",
				category: "Trigonometry",
				syntax: ["acosh(x)"],
				description: "Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",
				examples: ["acosh(1.5)"],
				seealso: ["cosh", "asinh", "atanh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "acot",
				category: "Trigonometry",
				syntax: ["acot(x)"],
				description: "Calculate the inverse cotangent of a value.",
				examples: ["acot(0.5)", "acot(cot(0.5))", "acot(2)"],
				seealso: ["cot", "atan"]
			}
		}, function (e, t) {
			e.exports = {
				name: "acoth",
				category: "Trigonometry",
				syntax: ["acoth(x)"],
				description: "Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",
				examples: ["acoth(2)", "acoth(0.5)"],
				seealso: ["acsch", "asech"]
			}
		}, function (e, t) {
			e.exports = {
				name: "acsc",
				category: "Trigonometry",
				syntax: ["acsc(x)"],
				description: "Calculate the inverse cotangent of a value.",
				examples: ["acsc(2)", "acsc(csc(0.5))", "acsc(0.5)"],
				seealso: ["csc", "asin", "asec"]
			}
		}, function (e, t) {
			e.exports = {
				name: "acsch",
				category: "Trigonometry",
				syntax: ["acsch(x)"],
				description: "Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",
				examples: ["acsch(0.5)"],
				seealso: ["asech", "acoth"]
			}
		}, function (e, t) {
			e.exports = {
				name: "asec",
				category: "Trigonometry",
				syntax: ["asec(x)"],
				description: "Calculate the inverse secant of a value.",
				examples: ["asec(0.5)", "asec(sec(0.5))", "asec(2)"],
				seealso: ["acos", "acot", "acsc"]
			}
		}, function (e, t) {
			e.exports = {
				name: "asech",
				category: "Trigonometry",
				syntax: ["asech(x)"],
				description: "Calculate the inverse secant of a value.",
				examples: ["asech(0.5)"],
				seealso: ["acsch", "acoth"]
			}
		}, function (e, t) {
			e.exports = {
				name: "asin",
				category: "Trigonometry",
				syntax: ["asin(x)"],
				description: "Compute the inverse sine of a value in radians.",
				examples: ["asin(0.5)", "asin(sin(0.5))"],
				seealso: ["sin", "acos", "atan"]
			}
		}, function (e, t) {
			e.exports = {
				name: "asinh",
				category: "Trigonometry",
				syntax: ["asinh(x)"],
				description: "Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",
				examples: ["asinh(0.5)"],
				seealso: ["acosh", "atanh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "atan",
				category: "Trigonometry",
				syntax: ["atan(x)"],
				description: "Compute the inverse tangent of a value in radians.",
				examples: ["atan(0.5)", "atan(tan(0.5))"],
				seealso: ["tan", "acos", "asin"]
			}
		}, function (e, t) {
			e.exports = {
				name: "atanh",
				category: "Trigonometry",
				syntax: ["atanh(x)"],
				description: "Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",
				examples: ["atanh(0.5)"],
				seealso: ["acosh", "asinh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "atan2",
				category: "Trigonometry",
				syntax: ["atan2(y, x)"],
				description: "Computes the principal value of the arc tangent of y/x in radians.",
				examples: ["atan2(2, 2) / pi", "angle = 60 deg in rad", "x = cos(angle)", "y = sin(angle)", "atan2(y, x)"],
				seealso: ["sin", "cos", "tan"]
			}
		}, function (e, t) {
			e.exports = {
				name: "cos",
				category: "Trigonometry",
				syntax: ["cos(x)"],
				description: "Compute the cosine of x in radians.",
				examples: ["cos(2)", "cos(pi / 4) ^ 2", "cos(180 deg)", "cos(60 deg)", "sin(0.2)^2 + cos(0.2)^2"],
				seealso: ["acos", "sin", "tan"]
			}
		}, function (e, t) {
			e.exports = {
				name: "cosh",
				category: "Trigonometry",
				syntax: ["cosh(x)"],
				description: "Compute the hyperbolic cosine of x in radians.",
				examples: ["cosh(0.5)"],
				seealso: ["sinh", "tanh", "coth"]
			}
		}, function (e, t) {
			e.exports = {
				name: "cot",
				category: "Trigonometry",
				syntax: ["cot(x)"],
				description: "Compute the cotangent of x in radians. Defined as 1/tan(x)",
				examples: ["cot(2)", "1 / tan(2)"],
				seealso: ["sec", "csc", "tan"]
			}
		}, function (e, t) {
			e.exports = {
				name: "coth",
				category: "Trigonometry",
				syntax: ["coth(x)"],
				description: "Compute the hyperbolic cotangent of x in radians.",
				examples: ["coth(2)", "1 / tanh(2)"],
				seealso: ["sech", "csch", "tanh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "csc",
				category: "Trigonometry",
				syntax: ["csc(x)"],
				description: "Compute the cosecant of x in radians. Defined as 1/sin(x)",
				examples: ["csc(2)", "1 / sin(2)"],
				seealso: ["sec", "cot", "sin"]
			}
		}, function (e, t) {
			e.exports = {
				name: "csch",
				category: "Trigonometry",
				syntax: ["csch(x)"],
				description: "Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",
				examples: ["csch(2)", "1 / sinh(2)"],
				seealso: ["sech", "coth", "sinh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sec",
				category: "Trigonometry",
				syntax: ["sec(x)"],
				description: "Compute the secant of x in radians. Defined as 1/cos(x)",
				examples: ["sec(2)", "1 / cos(2)"],
				seealso: ["cot", "csc", "cos"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sech",
				category: "Trigonometry",
				syntax: ["sech(x)"],
				description: "Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",
				examples: ["sech(2)", "1 / cosh(2)"],
				seealso: ["coth", "csch", "cosh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sin",
				category: "Trigonometry",
				syntax: ["sin(x)"],
				description: "Compute the sine of x in radians.",
				examples: ["sin(2)", "sin(pi / 4) ^ 2", "sin(90 deg)", "sin(30 deg)", "sin(0.2)^2 + cos(0.2)^2"],
				seealso: ["asin", "cos", "tan"]
			}
		}, function (e, t) {
			e.exports = {
				name: "sinh",
				category: "Trigonometry",
				syntax: ["sinh(x)"],
				description: "Compute the hyperbolic sine of x in radians.",
				examples: ["sinh(0.5)"],
				seealso: ["cosh", "tanh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "tan",
				category: "Trigonometry",
				syntax: ["tan(x)"],
				description: "Compute the tangent of x in radians.",
				examples: ["tan(0.5)", "sin(0.5) / cos(0.5)", "tan(pi / 4)", "tan(45 deg)"],
				seealso: ["atan", "sin", "cos"]
			}
		}, function (e, t) {
			e.exports = {
				name: "tanh",
				category: "Trigonometry",
				syntax: ["tanh(x)"],
				description: "Compute the hyperbolic tangent of x in radians.",
				examples: ["tanh(0.5)", "sinh(0.5) / cosh(0.5)"],
				seealso: ["sinh", "cosh"]
			}
		}, function (e, t) {
			e.exports = {
				name: "to",
				category: "Units",
				syntax: ["x to unit", "to(x, unit)"],
				description: "Change the unit of a value.",
				examples: ["5 inch to cm", "3.2kg to g", "16 bytes in bits"],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "clone",
				category: "Utils",
				syntax: ["clone(x)"],
				description: "Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",
				examples: ["clone(3.5)", "clone(2 - 4i)", "clone(45 deg)", "clone([1, 2; 3, 4])", 'clone("hello world")'],
				seealso: []
			}
		}, function (e, t) {
			e.exports = {
				name: "format",
				category: "Utils",
				syntax: ["format(value)", "format(value, precision)"],
				description: "Format a value of any type as string.",
				examples: ["format(2.3)", "format(3 - 4i)", "format([])", "format(pi, 3)"],
				seealso: ["print"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isNaN",
				category: "Utils",
				syntax: ["isNaN(x)"],
				description: "Test whether a value is NaN (not a number)",
				examples: ["isNaN(2)", "isNaN(0 / 0)", "isNaN(NaN)", "isNaN(Infinity)"],
				seealso: ["isNegative", "isNumeric", "isPositive", "isZero"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isInteger",
				category: "Utils",
				syntax: ["isInteger(x)"],
				description: "Test whether a value is an integer number.",
				examples: ["isInteger(2)", "isInteger(3.5)", "isInteger([3, 0.5, -2])"],
				seealso: ["isNegative", "isNumeric", "isPositive", "isZero"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isNegative",
				category: "Utils",
				syntax: ["isNegative(x)"],
				description: "Test whether a value is negative: smaller than zero.",
				examples: ["isNegative(2)", "isNegative(0)", "isNegative(-4)", "isNegative([3, 0.5, -2])"],
				seealso: ["isInteger", "isNumeric", "isPositive", "isZero"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isNumeric",
				category: "Utils",
				syntax: ["isNumeric(x)"],
				description: "Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",
				examples: ["isNumeric(2)", "isNumeric(0)", "isNumeric(bignumber(500))", "isNumeric(fraction(0.125))", 'isNumeric("3")', "isNumeric(2 + 3i)", 'isNumeric([2.3, "foo", false])'],
				seealso: ["isInteger", "isZero", "isNegative", "isPositive", "isNaN"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isPositive",
				category: "Utils",
				syntax: ["isPositive(x)"],
				description: "Test whether a value is positive: larger than zero.",
				examples: ["isPositive(2)", "isPositive(0)", "isPositive(-4)", "isPositive([3, 0.5, -2])"],
				seealso: ["isInteger", "isNumeric", "isNegative", "isZero"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isPrime",
				category: "Utils",
				syntax: ["isPrime(x)"],
				description: "Test whether a value is prime: has no divisors other than itself and one.",
				examples: ["isPrime(3)", "isPrime(-2)", "isPrime([2, 17, 100])"],
				seealso: ["isInteger", "isNumeric", "isNegative", "isZero"]
			}
		}, function (e, t) {
			e.exports = {
				name: "isZero",
				category: "Utils",
				syntax: ["isZero(x)"],
				description: "Test whether a value is zero.",
				examples: ["isZero(2)", "isZero(0)", "isZero(-4)", "isZero([3, 0, -2, 0])"],
				seealso: ["isInteger", "isNumeric", "isNegative", "isPositive"]
			}
		}, function (e, t) {
			e.exports = {
				name: "typeof",
				category: "Utils",
				syntax: ["typeof(x)"],
				description: "Get the type of a variable.",
				examples: ["typeof(3.5)", "typeof(2 - 4i)", "typeof(45 deg)", 'typeof("hello world")'],
				seealso: []
			}
		}, function (e, t, r) {
			e.exports = [r(384), r(386), r(387), r(388), r(110)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(39));
				return a("compile", {
					string: function (e) {
						return o(e).compile()
					},
					"Array | Matrix": function (e) {
						return i(e, function (e) {
							return o(e).compile()
						})
					}
				})
			}
			var i = r(1);
			t.name = "compile",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(22)),
				u = n(r(0));
				return function (e, t, r) {
					try {
						if (Array.isArray(e))
							return u(e).subset(t, r).valueOf();
						if (e && "function" == typeof e.subset)
							return e.subset(t, r);
						if ("string" == typeof e)
							return s(e, t, r);
						if ("object" == typeof e) {
							if (!t.isObjectProperty())
								throw TypeError("Cannot apply a numeric index as object property");
							return a(e, t.getObjectProperty(), r),
							e
						}
						throw new TypeError("Cannot apply index: unsupported type of object")
					} catch (e) {
						throw i(e)
					}
				}
			}
			var i = r(41).transform,
			a = r(13).setSafeProperty;
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(39));
				return a("compile", {
					string: function (e) {
						var t = {};
						return o(e).compile().eval(t)
					},
					"string, Object": function (e, t) {
						return o(e).compile().eval(t)
					},
					"Array | Matrix": function (e) {
						var t = {};
						return i(e, function (e) {
							return o(e).compile().eval(t)
						})
					},
					"Array | Matrix, Object": function (e, t) {
						return i(e, function (e) {
							return o(e).compile().eval(t)
						})
					}
				})
			}
			var i = r(1);
			t.name = "eval",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a, o) {
				var s = n(r(99));
				return a("help", {
					any: function (t) {
						var r,
						n = t;
						if ("string" != typeof t)
							for (r in o)
								if (o.hasOwnProperty(r) && t === o[r]) {
									n = r;
									break
								}
						var a = i(s, n);
						if (!a)
							throw new Error('No documentation found on "' + n + '"');
						return new e.Help(a)
					}
				})
			}
			var i = r(13).getSafeProperty;
			t.math = !0,
			t.name = "help",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(39));
				return i("parse", {
					"string | Array | Matrix": a,
					"string | Array | Matrix, Object": a
				})
			}
			t.name = "parse",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(102), r(80), r(104), r(105), r(106), r(53), r(78), r(107), r(54), r(14), r(109), r(62), r(63), r(79), r(40), r(390)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function i() {
					throw new Error("UpdateNode is deprecated. Use AssignmentNode instead.")
				}
				return i
			}
			t.name = "UpdateNode",
			t.path = "expression.node",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(392), r(393), r(394), r(395), r(396), r(397), r(398), r(399), r(400), r(401)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(64));
				return a("concat", {
					"...any": function (t) {
						var r = t.length - 1,
						n = t[r];
						e.isNumber(n) ? t[r] = n - 1 : e.isBigNumber(n) && (t[r] = n.minus(1));
						try {
							return o.apply(null, t)
						} catch (e) {
							throw i(e)
						}
					}
				})
			}
			var i = r(41).transform;
			t.name = "concat",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function s(t, r, n) {
					var i,
					a;
					return t[0] && (i = t[0].compile().eval(n)),
					t[1] && (a = e.isSymbolNode(t[1]) || e.isFunctionAssignmentNode(t[1]) ? t[1].compile().eval(n) : u(t[1], r, n)),
					f(i, a)
				}
				var u = n(r(81)),
				c = n(r(0));
				s.rawArgs = !0;
				var f = a("filter", {
						"Array, function": i,
						"Matrix, function": function (e, t) {
							return c(i(e.toArray(), t))
						},
						"Array, RegExp": o,
						"Matrix, RegExp": function (e, t) {
							return c(o(e.toArray(), t))
						}
					});
				return f.toTex = void 0,
				s
			}
			function i(e, t) {
				var r = s(t);
				return a(e, function (e, n, i) {
					return 1 === r ? t(e) : 2 === r ? t(e, [n + 1]) : t(e, [n + 1], i)
				})
			}
			var a = r(2).filter,
			o = r(2).filterRegExp,
			s = r(32).maxArgumentCount;
			t.name = "filter",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r, n) {
					var i,
					a;
					return t[0] && (i = t[0].compile().eval(n)),
					t[1] && (a = e.isSymbolNode(t[1]) || e.isFunctionAssignmentNode(t[1]) ? t[1].compile().eval(n) : u(t[1], r, n)),
					c(i, a)
				}
				var u = n(r(81));
				s.rawArgs = !0;
				var c = o("forEach", {
						"Array | Matrix, function": function (e, t) {
							var r = i(t),
							n = function (i, o) {
								Array.isArray(i) ? a(i, function (e, t) {
									n(e, o.concat(t + 1))
								}) : 1 === r ? t(i) : 2 === r ? t(i, o) : t(i, o, e)
							};
							n(e.valueOf(), [])
						}
					});
				return s
			}
			var i = r(32).maxArgumentCount,
			a = r(2).forEach;
			t.name = "forEach",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r) {
				return function () {
					for (var t = [], r = 0, n = arguments.length; r < n; r++) {
						var i = arguments[r];
						if (e.isRange(i))
							i.start--, i.end -= i.step > 0 ? 0 : 2;
						else if (i && i.isSet === !0)
							i = i.map(function (e) {
									return e - 1
								});
						else if (e.isArray(i) || e.isMatrix(i))
							i = i.map(function (e) {
									return e - 1
								});
						else if (e.isNumber(i))
							i--;
						else if (e.isBigNumber(i))
							i = i.toNumber() - 1;
						else if ("string" != typeof i)
							throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");
						t[r] = i
					}
					var a = new e.Index;
					return e.Index.apply(a, t),
					a
				}
			}
			t.name = "index",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(t, r, n) {
					var i,
					a;
					return t[0] && (i = t[0].compile().eval(n)),
					t[1] && (a = e.isSymbolNode(t[1]) || e.isFunctionAssignmentNode(t[1]) ? t[1].compile().eval(n) : s(t[1], r, n)),
					c(i, a)
				}
				var s = n(r(81)),
				u = n(r(0));
				o.rawArgs = !0;
				var c = a("map", {
						"Array, function": function (e, t) {
							return i(e, t, e)
						},
						"Matrix, function": function (e, t) {
							return u(i(e.valueOf(), t, e))
						}
					});
				return o
			}
			function i(e, t, r) {
				function n(e, a) {
					return Array.isArray(e) ? o(e, function (e, t) {
						return n(e, a.concat(t + 1))
					}) : 1 === i ? t(e) : 2 === i ? t(e, a) : t(e, a, r)
				}
				var i = a(t);
				return n(e, [])
			}
			var a = r(32).maxArgumentCount,
			o = r(2).map;
			t.name = "map",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(112));
				return o("max", {
					"...any": function (t) {
						if (2 == t.length && a(t[0])) {
							var r = t[1];
							e.isNumber(r) ? t[1] = r - 1 : e.isBigNumber(r) && (t[1] = r.minus(1))
						}
						try {
							return s.apply(null, t)
						} catch (e) {
							throw i(e)
						}
					}
				})
			}
			var i = r(41).transform,
			a = r(46);
			t.name = "max",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(113));
				return o("mean", {
					"...any": function (t) {
						if (2 == t.length && a(t[0])) {
							var r = t[1];
							e.isNumber(r) ? t[1] = r - 1 : e.isBigNumber(r) && (t[1] = r.minus(1))
						}
						try {
							return s.apply(null, t)
						} catch (e) {
							throw i(e)
						}
					}
				})
			}
			var i = r(41).transform,
			a = r(46);
			t.name = "mean",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(116));
				return o("min", {
					"...any": function (t) {
						if (2 == t.length && a(t[0])) {
							var r = t[1];
							e.isNumber(r) ? t[1] = r - 1 : e.isBigNumber(r) && (t[1] = r.minus(1))
						}
						try {
							return s.apply(null, t)
						} catch (e) {
							throw i(e)
						}
					}
				})
			}
			var i = r(41).transform,
			a = r(46);
			t.name = "min",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(117));
				return i("range", {
					"...any": function (e) {
						var t = e.length - 1,
						r = e[t];
						return "boolean" != typeof r && e.push(!0),
						a.apply(null, e)
					}
				})
			}
			t.name = "range",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(22));
				return a("subset", {
					"...any": function (e) {
						try {
							return o.apply(null, e)
						} catch (e) {
							throw i(e)
						}
					}
				})
			}
			var i = r(41).transform;
			t.name = "subset",
			t.path = "expression.transform",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(e) {
					if (!(this instanceof s))
						throw new SyntaxError("Constructor must be called with the new operator");
					if (!e)
						throw new Error('Argument "doc" missing');
					this.doc = e
				}
				var u = n(r(110))();
				return s.prototype.type = "Help",
				s.prototype.isHelp = !0,
				s.prototype.toString = function () {
					var t = this.doc || {},
					r = "\n";
					if (t.name && (r += "Name: " + t.name + "\n\n"), t.category && (r += "Category: " + t.category + "\n\n"), t.description && (r += "Description:\n    " + t.description + "\n\n"), t.syntax && (r += "Syntax:\n    " + t.syntax.join("\n    ") + "\n\n"), t.examples) {
						r += "Examples:\n";
						for (var n = 0; n < t.examples.length; n++) {
							var i = t.examples[n];
							r += "    " + i + "\n";
							var o;
							try {
								o = u.eval(i)
							} catch (e) {
								o = e
							}
							void 0 === o || e.isHelp(o) || (r += "        " + a.format(o, {
									precision: 14
								}) + "\n")
						}
						r += "\n"
					}
					return t.seealso && t.seealso.length && (r += "See also: " + t.seealso.join(", ") + "\n"),
					r
				},
				s.prototype.toJSON = function () {
					var e = i.clone(this.doc);
					return e.mathjs = "Help",
					e
				},
				s.fromJSON = function (e) {
					var t = {};
					for (var r in e)
						"mathjs" !== r && (t[r] = e[r]);
					return new s(t)
				},
				s.prototype.valueOf = s.prototype.toString,
				s
			}
			var i = r(5),
			a = r(9);
			t.name = "Help",
			t.path = "type",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(404), r(425), r(444), r(457), r(461), r(465), r(468), r(472), r(485), r(495), r(498), r(506), r(508), r(514), r(516), r(541), r(543)]
		}, function (e, t, r) {
			e.exports = [r(405), r(118), r(409), r(124), r(125), r(130), r(423), r(131)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e) {
					if ("log" != e.name && "nthRoot" != e.name || 2 != e.args.length) {
						for (var t = 0; t < e.args.length; ++t)
							e.args[t] = new u(0);
						throw e.compile().eval(),
						new Error("Expected TypeError, but none found")
					}
				}
				var o = n(r(39)),
				s = n(r(118)),
				u = n(r(53)),
				c = n(r(54)),
				f = n(r(62)),
				l = n(r(63)),
				p = n(r(40)),
				h = i("derivative", {
						"Node, SymbolNode, Object": function (e, t, r) {
							var n = {};
							d(n, e, t.name);
							var i = v(e, n);
							return r.simplify ? s(i) : i
						},
						"Node, SymbolNode": function (e, t) {
							return h(e, t, {
								simplify: !0
							})
						},
						"string, SymbolNode": function (e, t) {
							return h(o(e), t)
						},
						"string, SymbolNode, Object": function (e, t, r) {
							return h(o(e), t, r)
						},
						"string, string": function (e, t) {
							return h(o(e), o(t))
						},
						"string, string, Object": function (e, t, r) {
							return h(o(e), o(t), r)
						},
						"Node, string": function (e, t) {
							return h(e, o(t))
						},
						"Node, string, Object": function (e, t, r) {
							return h(e, o(t), r)
						}
					});
				h._simplify = !0,
				h.toTex = function (e) {
					return m.apply(null, e.args)
				};
				var m = i("_derivTex", {
						"Node, SymbolNode": function (e, t) {
							return m(e.toString(), t.toString(), 1)
						},
						"Node, SymbolNode, ConstantNode": function (e, t, r) {
							return m(e.toString(), t.name, r.value)
						},
						"string, string, number": function (e, t, r) {
							var n;
							return n = 1 === r ? "{d\\over d" + t + "}" : "{d^{" + r + "}\\over d" + t + "^{" + r + "}}",
							n + "\\left[" + e + "\\right]"
						}
					}),
				d = i("constTag", {
						"Object, ConstantNode, string": function (e, t) {
							return e[t] = !0
						},
						"Object, SymbolNode, string": function (e, t, r) {
							return t.name != r && (e[t] = !0)
						},
						"Object, ParenthesisNode, string": function (e, t, r) {
							return d(e, t.content, r)
						},
						"Object, FunctionAssignmentNode, string": function (e, t, r) {
							return t.params.indexOf(r) == -1 ? e[t] = !0 : d(e, t.expr, r)
						},
						"Object, FunctionNode | OperatorNode, string": function (e, t, r) {
							if (0 != t.args.length) {
								for (var n = d(e, t.args[0], r), i = 1; i < t.args.length; ++i)
									n = d(e, t.args[i], r) && n;
								if (n)
									return e[t] = !0
							}
							return !1
						}
					}),
				v = i("_derivative", {
						"ConstantNode, Object": function (e) {
							return new u("0", e.valueType)
						},
						"SymbolNode, Object": function (e, r) {
							return void 0 !== r[e] ? new u("0", t.number) : new u("1", t.number)
						},
						"ParenthesisNode, Object": function (e, t) {
							return new l(v(e.content, t))
						},
						"FunctionAssignmentNode, Object": function (e, r) {
							return void 0 !== r[e] ? new u("0", t.number) : v(e.expr, r)
						},
						"FunctionNode, Object": function (e, r) {
							if (1 != e.args.length && a(e), void 0 !== r[e])
								return new u("0", t.number);
							var n,
							i,
							o = e.args[0],
							s = !1,
							l = !1;
							switch (e.name) {
							case "cbrt":
								s = !0,
								i = new f("*", "multiply", [new u("3", t.number), new f("^", "pow", [o, new f("/", "divide", [new u("2", t.number), new u("3", t.number)])])]);
								break;
							case "sqrt":
							case "nthRoot":
								if (1 == e.args.length) {
									s = !0,
									i = new f("*", "multiply", [new u("2", t.number), new c("sqrt", [o])]);
									break
								}
								return n = new f("/", "divide", [new u("1", t.number), e.args[1]]),
								r[n] = r[e.args[1]],
								v(new f("^", "pow", [o, n]), r);
							case "log10":
								n = new u("10", t.number);
							case "log":
								if (n || 1 != e.args.length) {
									if (!n && void 0 === r[e.args[1]])
										return v(new f("/", "divide", [new c("log", [o]), new c("log", [e.args[1]])]), r);
									i = new f("*", "multiply", [o.clone(), new c("log", [n || e.args[1]])])
								} else
									i = o.clone();
								s = !0;
								break;
							case "exp":
								i = new c("exp", [o.clone()]);
								break;
							case "sin":
								i = new c("cos", [o.clone()]);
								break;
							case "cos":
								i = new f("-", "unaryMinus", [new c("sin", [o.clone()])]);
								break;
							case "tan":
								i = new f("^", "pow", [new c("sec", [o.clone()]), new u("2", t.number)]);
								break;
							case "sec":
								i = new f("*", "multiply", [e, new c("tan", [o.clone()])]);
								break;
							case "csc":
								l = !0,
								i = new f("*", "multiply", [e, new c("cot", [o.clone()])]);
								break;
							case "cot":
								l = !0,
								i = new f("^", "pow", [new c("csc", [o.clone()]), new u("2", t.number)]);
								break;
							case "asin":
								s = !0,
								i = new c("sqrt", [new f("-", "subtract", [new u("1", t.number), new f("^", "pow", [o.clone(), new u("2", t.number)])])]);
								break;
							case "acos":
								s = !0,
								l = !0,
								i = new c("sqrt", [new f("-", "subtract", [new u("1", t.number), new f("^", "pow", [o.clone(), new u("2", t.number)])])]);
								break;
							case "atan":
								s = !0,
								i = new f("+", "add", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)]);
								break;
							case "asec":
								s = !0,
								i = new f("*", "multiply", [new c("abs", [o.clone()]), new c("sqrt", [new f("-", "subtract", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)])])]);
								break;
							case "acsc":
								s = !0,
								l = !0,
								i = new f("*", "multiply", [new c("abs", [o.clone()]), new c("sqrt", [new f("-", "subtract", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)])])]);
								break;
							case "acot":
								s = !0,
								l = !0,
								i = new f("+", "add", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)]);
								break;
							case "sinh":
								i = new c("cosh", [o.clone()]);
								break;
							case "cosh":
								i = new c("sinh", [o.clone()]);
								break;
							case "tanh":
								i = new f("^", "pow", [new c("sech", [o.clone()]), new u("2", t.number)]);
								break;
							case "sech":
								l = !0,
								i = new f("*", "multiply", [e, new c("tanh", [o.clone()])]);
								break;
							case "csch":
								l = !0,
								i = new f("*", "multiply", [e, new c("coth", [o.clone()])]);
								break;
							case "coth":
								l = !0,
								i = new f("^", "pow", [new c("csch", [o.clone()]), new u("2", t.number)]);
								break;
							case "asinh":
								s = !0,
								i = new c("sqrt", [new f("+", "add", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)])]);
								break;
							case "acosh":
								s = !0,
								i = new c("sqrt", [new f("-", "subtract", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)])]);
								break;
							case "atanh":
								s = !0,
								i = new f("-", "subtract", [new u("1", t.number), new f("^", "pow", [o.clone(), new u("2", t.number)])]);
								break;
							case "asech":
								s = !0,
								l = !0,
								i = new f("*", "multiply", [o.clone(), new c("sqrt", [new f("-", "subtract", [new u("1", t.number), new f("^", "pow", [o.clone(), new u("2", t.number)])])])]);
								break;
							case "acsch":
								s = !0,
								l = !0,
								i = new f("*", "multiply", [new c("abs", [o.clone()]), new c("sqrt", [new f("+", "add", [new f("^", "pow", [o.clone(), new u("2", t.number)]), new u("1", t.number)])])]);
								break;
							case "acoth":
								s = !0,
								l = !0,
								i = new f("-", "subtract", [new u("1", t.number), new f("^", "pow", [o.clone(), new u("2", t.number)])]);
								break;
							case "abs":
								i = new f("/", "divide", [new c(new p("abs"), [o.clone()]), o.clone()]);
								break;
							case "gamma":
							default:
								throw new Error('Function "' + e.name + '" not supported by derivative')
							}
							var h,
							m;
							s ? (h = "/", m = "divide") : (h = "*", m = "multiply");
							var d = v(o, r);
							return l && (d = new f("-", "unaryMinus", [d])),
							new f(h, m, [d, i])
						},
						"OperatorNode, Object": function (r, n) {
							if (void 0 !== n[r])
								return new u("0", t.number);
							var i = r.args[0],
							a = r.args[1];
							switch (r.op) {
							case "+":
							case "-":
								return 1 == r.args.length ? new f(r.op, r.fn, [v(i, n)]) : new f(r.op, r.fn, [v(i, n), v(a, n)]);
							case "*":
								if (void 0 !== n[i] || void 0 !== n[a]) {
									var o = void 0 !== n[i] ? [i.clone(), v(a, n)] : [a.clone(), v(i, n)];
									return new f("*", "multiply", o)
								}
								return new f("+", "add", [new f("*", "multiply", [v(i, n), a.clone()]), new f("*", "multiply", [i.clone(), v(a, n)])]);
							case "/":
								return void 0 !== n[a] ? new f("/", "divide", [v(i, n), a]) : void 0 !== n[i] ? new f("*", "multiply", [new f("-", "unaryMinus", [i]), new f("/", "divide", [v(a, n), new f("^", "pow", [a.clone(), new u("2", t.number)])])]) : new f("/", "divide", [new f("-", "subtract", [new f("*", "multiply", [v(i, n), a.clone()]), new f("*", "multiply", [i.clone(), v(a, n)])]), new f("^", "pow", [a.clone(), new u("2", t.number)])]);
							case "^":
								if (void 0 !== n[i])
									return !e.isConstantNode(i) || "0" !== i.value && "1" !== i.value ? new f("*", "multiply", [r, new f("*", "multiply", [new c("log", [i.clone()]), v(a.clone(), n)])]) : new u("0", t.number);
								if (void 0 !== n[a]) {
									if (e.isConstantNode(a)) {
										var s = a.value;
										if ("0" === s)
											return new u("0", t.number);
										if ("1" === s)
											return v(i, n)
									}
									var l = new f("^", "pow", [i.clone(), new f("-", "subtract", [a, new u("1", t.number)])]);
									return new f("*", "multiply", [a.clone(), new f("*", "multiply", [v(i, n), l])])
								}
								return new f("*", "multiply", [new f("^", "pow", [i.clone(), a.clone()]), new f("+", "add", [new f("*", "multiply", [v(i, n), new f("/", "divide", [a.clone(), i.clone()])]), new f("*", "multiply", [v(a, n), new c("log", [i.clone()])])])]);
							case "%":
							case "mod":
							default:
								throw new Error('Operator "' + r.op + '" not supported by derivative')
							}
						}
					});
				return h
			}
			t.name = "derivative",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i, a) {
				function o(t) {
					var r = p(t);
					return e.isNode(r) ? r : w(r)
				}
				function s(t, r) {
					try {
						return b(a[t].apply(null, r))
					} catch (n) {
						return r = r.map(function (t) {
								return e.isFraction(t) ? t.valueOf() : t
							}),
						b(a[t].apply(null, r))
					}
				}
				function u(e) {
					if (isFinite(e)) {
						var t = a.fraction(e);
						if (t.valueOf() === e)
							return t
					}
					return e
				}
				function c(e) {
					return new x("-", "unaryMinus", [e])
				}
				function f(e) {
					var t,
					r = e.s * e.n;
					return t = r < 0 ? new x("-", "unaryMinus", [new y(-r)]) : new y(r),
					1 === e.d ? t : new x("/", "divide", [t, new y(e.d)])
				}
				function l(t, r, n) {
					return r.reduce(function (r, i) {
						if (e.isNode(r) || e.isNode(i))
							e.isNode(r) ? e.isNode(i) || (i = w(i)) : r = w(r);
						else {
							try {
								return s(t, [r, i])
							} catch (e) {}
							r = w(r),
							i = w(i)
						}
						return n([r, i])
					})
				}
				function p(t) {
					switch (t.type) {
					case "SymbolNode":
						return t;
					case "ConstantNode":
						return "number" === t.valueType ? b(t.value) : t;
					case "FunctionNode":
						if (a[t.name] && a[t.name].rawArgs)
							return t;
					case "OperatorNode":
						var r,
						n,
						i = t.fn.toString(),
						o = g(t);
						if (1 === t.args.length)
							r = [p(t.args[0])], n = e.isNode(r[0]) ? o(r) : s(i, r);
						else if (d(t))
							if (r = v(t), r = r.map(p), m(i)) {
								for (var u = [], c = [], f = 0; f < r.length; f++)
									e.isNode(r[f]) ? c.push(r[f]) : u.push(r[f]);
								u.length > 1 ? (n = l(i, u, o), c.unshift(n), n = l(i, c, o)) : n = l(i, r, o)
							} else
								n = l(i, r, o);
						else
							r = t.args.map(p), n = l(i, r, o);
						return n;
					case "ParenthesisNode":
						return p(t.content);
					case "AccessorNode":
					case "ArrayNode":
					case "AssignmentNode":
					case "BlockNode":
					case "FunctionAssignmentNode":
					case "IndexNode":
					case "ObjectNode":
					case "RangeNode":
					case "UpdateNode":
					case "ConditionalNode":
					default:
						throw "Unimplemented node type in simplifyConstant: " + t.type
					}
				}
				var h = n(r(119)),
				m = h.isCommutative,
				d = h.isAssociative,
				v = h.allChildren,
				g = h.createMakeNodeFunction,
				y = a.expression.node.ConstantNode,
				x = a.expression.node.OperatorNode,
				w = i({
						Fraction: f,
						number: function (e) {
							return e < 0 ? c(new y(-e)) : new y(e)
						},
						BigNumber: function (e) {
							return e < 0 ? c(new y(e.negated().toString(), "number")) : new y(e.toString(), "number")
						},
						Complex: function (e) {
							throw "Cannot convert Complex number to Node"
						}
					}),
				b = i({
						string: function (e) {
							return "BigNumber" === t.number ? a.bignumber(e) : "Fraction" === t.number ? a.fraction(e) : u(parseFloat(e))
						},
						Fraction: function (e) {
							return e
						},
						BigNumber: function (e) {
							return e
						},
						number: function (e) {
							return u(e)
						},
						Complex: function (e) {
							return 0 !== e.im ? e : u(e.re)
						}
					});
				return o
			}
			r(3).digits;
			t.math = !0,
			t.name = "simplifyConstant",
			t.path = "algebra.simplify",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, i) {
				function a(t) {
					if (e.isOperatorNode(t) && t.args.length <= 2) {
						var r = a(t.args[0]),
						n = t.args[1] && a(t.args[1]);
						if ("+" === t.op) {
							if (1 === t.args.length)
								return t.args[0];
							if (e.isConstantNode(r)) {
								if ("0" === r.value)
									return n;
								if (e.isConstantNode(n) && r.value && r.value.length < 5 && n.value && n.value.length < 5)
									return new o(Number(r.value) + Number(n.value))
							}
							return e.isConstantNode(n) && "0" === n.value ? r : 2 === t.args.length && e.isOperatorNode(n) && "-" === n.op && "unaryMinus" === n.fn ? new s("-", "subtract", [r, n.args[0]]) : new s(t.op, t.fn, n ? [r, n] : [r])
						}
						if ("-" === t.op) {
							if (e.isConstantNode(r) && n) {
								if (e.isConstantNode(n) && r.value && r.value.length < 5 && n.value && n.value.length < 5)
									return new o(Number(r.value) - Number(n.value));
								if ("0" === r.value)
									return new s("-", "unaryMinus", [n])
							}
							if ("subtract" === t.fn && 2 === t.args.length)
								return e.isConstantNode(n) && "0" === n.value ? r : e.isOperatorNode(n) && "unaryMinus" === n.fn ? a(new s("+", "add", [r, n.args[0]])) : new s(t.op, t.fn, [r, n]);
							if ("unaryMinus" === t.fn)
								return e.isOperatorNode(r) && "unaryMinus" === r.fn ? r.args[0] : new s(t.op, t.fn, [r]);
							throw new Error("never happens")
						}
						if ("*" === t.op) {
							if (e.isConstantNode(r)) {
								if ("0" === r.value)
									return c;
								if ("1" === r.value)
									return n;
								if (e.isConstantNode(n) && r.value && r.value.length < 5 && n.value && n.value.length < 5)
									return new o(Number(r.value) * Number(n.value))
							}
							if (e.isConstantNode(n)) {
								if ("0" === n.value)
									return c;
								if ("1" === n.value)
									return r;
								if (e.isOperatorNode(r) && r.op === t.op) {
									var l = r.args[0];
									if (e.isConstantNode(l) && n.value && n.value.length < 5 && l.value && l.value.length < 5) {
										var p = new o(Number(r.args[0].value) * Number(n.value));
										return new s(t.op, t.fn, [p, r.args[1]])
									}
								}
								return new s(t.op, t.fn, [n, r])
							}
							return new s(t.op, t.fn, [r, n])
						}
						if ("/" === t.op) {
							if (e.isConstantNode(r)) {
								if ("0" === r.value)
									return c;
								if (e.isConstantNode(n) && r.value && r.value.length < 5 && ("1" === n.value || "2" === n.value || "4" === n.value))
									return new o(Number(r.value) / Number(n.value))
							}
							return new s(t.op, t.fn, [r, n])
						}
						if ("^" === t.op) {
							if (e.isConstantNode(n)) {
								if ("0" === n.value)
									return f;
								if ("1" === n.value)
									return r;
								if (e.isConstantNode(n) && r.value && r.value.length < 5 && n.value && n.value.length < 2)
									return new o(i.pow(Number(r.value), Number(n.value)))
							}
							return new s(t.op, t.fn, [r, n])
						}
					} else {
						if (e.isParenthesisNode(t)) {
							var h = a(t.content);
							return e.isParenthesisNode(h) || e.isSymbolNode(h) || e.isConstantNode(h) ? h : new ParenthesisNode(h)
						}
						if (e.isFunctionNode(t)) {
							var m = t.args.map(a);
							return 1 === m.length && e.isParenthesisNode(m[0]) && (m[0] = m[0].content),
							new u(a(t.fn), m)
						}
					}
					return t
				}
				var o = i.expression.node.ConstantNode,
				s = i.expression.node.OperatorNode,
				u = i.expression.node.FunctionNode,
				c = new o(0),
				f = new o(1);
				return a
			}
			t.math = !0,
			t.name = "simplifyCore",
			t.path = "algebra.simplify",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, i) {
				function a(t, r) {
					if (!r)
						return t;
					if (e.isSymbolNode(t)) {
						var n = r[t.name];
						if (n instanceof o)
							return a(n, r);
						if ("number" == typeof n)
							return i.parse(String(n))
					} else {
						if (e.isOperatorNode(t)) {
							var f = t.args.map(function (e) {
									return a(e, r)
								});
							return new s(t.op, t.fn, f)
						}
						if (e.isParenthesisNode(t))
							return new c(a(t.content, r));
						if (e.isFunctionNode(t)) {
							var f = t.args.map(function (e) {
									return a(e, r)
								});
							return new u(t.name, f)
						}
					}
					return t
				}
				var o = i.expression.node.Node,
				s = i.expression.node.OperatorNode,
				u = i.expression.node.FunctionNode,
				c = i.expression.node.ParenthesisNode;
				return a
			}
			t.math = !0,
			t.name = "resolve",
			t.path = "algebra.simplify",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(38)),
				s = n(r(61)),
				u = (n(r(120)), n(r(82))),
				c = (n(r(55)), n(r(121))),
				f = (n(r(29)), n(r(122))),
				l = n(r(56)),
				p = n(r(123)),
				h = n(r(37)),
				m = n(r(20)),
				d = n(r(19)),
				v = n(r(23)),
				g = n(r(21)),
				y = i("qr", {
						DenseMatrix: function (e) {
							return x(e)
						},
						SparseMatrix: function (e) {
							return w(e)
						},
						Array: function (e) {
							var t = a(e),
							r = x(t);
							return {
								Q: r.Q.valueOf(),
								R: r.R.valueOf()
							}
						}
					}),
				x = function (e) {
					var t,
					r,
					n,
					i = e._size[0],
					a = e._size[1],
					y = s([i], "dense"),
					x = y._data,
					w = e.clone(),
					b = w._data,
					N = o([i], "");
					for (n = 0; n < Math.min(a, i); ++n) {
						var E = b[n][n],
						M = h(f(E)),
						A = p(M),
						O = 0;
						for (t = n; t < i; t++)
							O = m(O, v(b[t][n], p(b[t][n])));
						var T = v(M, l(O));
						if (!u(T)) {
							var _ = g(E, T);
							for (N[n] = 1, t = n + 1; t < i; t++)
								N[t] = d(b[t][n], _);
							var S,
							C = h(p(d(_, T)));
							for (r = n; r < a; r++) {
								for (S = 0, t = n; t < i; t++)
									S = m(S, v(p(N[t]), b[t][r]));
								for (S = v(S, C), t = n; t < i; t++)
									b[t][r] = v(g(b[t][r], v(N[t], S)), A)
							}
							for (t = 0; t < i; t++) {
								for (S = 0, r = n; r < i; r++)
									S = m(S, v(x[t][r], N[r]));
								for (S = v(S, C), r = n; r < i; ++r)
									x[t][r] = d(g(x[t][r], v(S, p(N[r]))), A)
							}
						}
					}
					for (t = 0; t < i; ++t)
						for (r = 0; r < t && r < a; ++r) {
							if (c(0, d(b[t][r], 1e5)))
								throw new Error("math.qr(): unknown error - R is not lower triangular (element (" + t + ", " + r + ")  = " + b[t][r] + ")");
							b[t][r] = v(b[t][r], 0)
						}
					return {
						Q: y,
						R: w,
						toString: function () {
							return "Q: " + this.Q.toString() + "\nR: " + this.R.toString()
						}
					}
				},
				w = function (e) {
					throw new Error("qr not implemented for sparse matrices yet")
				};
				return y
			}
			t.name = "qr",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(411)),
				a = n(r(413)),
				o = n(r(414)),
				s = n(r(415)),
				u = n(r(416)),
				c = function (e, t, r) {
					var n,
					c = t._ptr,
					l = t._size,
					p = l[1],
					h = {};
					if (h.q = i(e, t), e && !h.q)
						return null;
					if (r) {
						var m = e ? a(t, null, h.q, 0) : t;
						h.parent = o(m, 1);
						var d = s(h.parent, p);
						if (h.cp = u(m, h.parent, d, 1), m && h.parent && h.cp && f(m, h))
							for (h.unz = 0, n = 0; n < p; n++)
								h.unz += h.cp[n]
					} else
						h.unz = 4 * c[p] + p, h.lnz = h.unz;
					return h
				},
				f = function (e, t) {
					var r = e._ptr,
					n = e._index,
					i = e._size,
					a = i[0],
					o = i[1];
					t.pinv = [],
					t.leftmost = [];
					var s,
					u,
					c,
					f,
					l,
					p = t.parent,
					h = t.pinv,
					m = t.leftmost,
					d = [],
					v = 0,
					g = a,
					y = a + o,
					x = a + 2 * o;
					for (u = 0; u < o; u++)
						d[g + u] = -1, d[y + u] = -1, d[x + u] = 0;
					for (s = 0; s < a; s++)
						m[s] = -1;
					for (u = o - 1; u >= 0; u--)
						for (f = r[u], l = r[u + 1], c = f; c < l; c++)
							m[n[c]] = u;
					for (s = a - 1; s >= 0; s--)
						h[s] = -1, u = m[s], u != -1 && (0 === d[x + u]++ && (d[y + u] = s), d[v + s] = d[g + u], d[g + u] = s);
					for (t.lnz = 0, t.m2 = a, u = 0; u < o; u++)
						if (s = d[g + u], t.lnz++, s < 0 && (s = t.m2++), h[s] = u, !(--x[u] <= 0)) {
							t.lnz += d[x + u];
							var w = p[u];
							w != -1 && (0 === d[x + w] && (d[y + w] = d[y + u]), d[v + d[y + u]] = d[g + w], d[g + w] = d[v + s], d[x + w] += d[x + u])
						}
					for (s = 0; s < a; s++)
						h[s] < 0 && (h[s] = u++);
					return !0
				};
				return c
			}
			t.name = "cs_sqr",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(83)),
				a = n(r(412)),
				o = n(r(126)),
				s = n(r(18)),
				u = n(r(12)),
				c = n(r(67)),
				f = function (e, t) {
					if (!t || e <= 0 || e > 3)
						return null;
					var r = t._size,
					n = r[0],
					s = r[1],
					u = 0,
					c = Math.max(16, 10 * Math.sqrt(s));
					c = Math.min(s - 2, c);
					var f = l(e, t, n, s, c);
					a(f, d, null);
					for (var v, g, y, x, w, b, N, E, M, A, O, T, _, S, C, z, k = f._index, I = f._ptr, B = I[s], P = [], R = [], U = 0, q = s + 1, L = 2 * (s + 1), j = 3 * (s + 1), F = 4 * (s + 1), D = 5 * (s + 1), H = 6 * (s + 1), $ = 7 * (s + 1), G = P, Z = p(s, I, R, U, j, G, L, $, q, H, F, D), V = h(s, I, R, D, F, H, c, q, j, G, L), W = 0; V < s; ) {
						for (y = -1; W < s && (y = R[j + W]) == -1; W++);
						R[L + y] != -1 && (G[R[L + y]] = -1),
						R[j + W] = R[L + y];
						var Y = R[F + y],
						X = R[q + y];
						V += X;
						var J = 0;
						R[q + y] = -X;
						var Q = I[y],
						K = 0 === Y ? Q : B,
						ee = K;
						for (x = 1; x <= Y + 1; x++) {
							for (x > Y ? (b = y, N = Q, E = R[U + y] - Y) : (b = k[Q++], N = I[b], E = R[U + b]), w = 1; w <= E; w++)
								v = k[N++], (M = R[q + v]) <= 0 || (J += M, R[q + v] = -M, k[ee++] = v, R[L + v] != -1 && (G[R[L + v]] = G[v]), G[v] != -1 ? R[L + G[v]] = R[L + v] : R[j + R[D + v]] = R[L + v]);
							b != y && (I[b] = i(y), R[H + b] = 0)
						}
						for (0 !== Y && (B = ee), R[D + y] = J, I[y] = K, R[U + y] = ee - K, R[F + y] = -2, Z = m(Z, u, R, H, s), A = K; A < ee; A++)
							if (v = k[A], !((O = R[F + v]) <= 0)) {
								M = -R[q + v];
								var te = Z - M;
								for (Q = I[v], T = I[v] + O - 1; Q <= T; Q++)
									b = k[Q], R[H + b] >= Z ? R[H + b] -= M : 0 !== R[H + b] && (R[H + b] = R[D + b] + te)
							}
						for (A = K; A < ee; A++) {
							for (v = k[A], T = I[v], _ = T + R[F + v] - 1, S = T, C = 0, z = 0, Q = T; Q <= _; Q++)
								if (b = k[Q], 0 !== R[H + b]) {
									var re = R[H + b] - Z;
									re > 0 ? (z += re, k[S++] = b, C += b) : (I[b] = i(y), R[H + b] = 0)
								}
							R[F + v] = S - T + 1;
							var ne = S,
							ie = T + R[U + v];
							for (Q = _ + 1; Q < ie; Q++) {
								g = k[Q];
								var ae = R[q + g];
								ae <= 0 || (z += ae, k[S++] = g, C += g)
							}
							0 === z ? (I[v] = i(y), M = -R[q + v], J -= M, X += M, V += M, R[q + v] = 0, R[F + v] = -1) : (R[D + v] = Math.min(R[D + v], z), k[S] = k[ne], k[ne] = k[T], k[T] = y, R[U + v] = S - T + 1, C = (C < 0 ? -C : C) % s, R[L + v] = R[$ + C], R[$ + C] = v, G[v] = C)
						}
						for (R[D + y] = J, u = Math.max(u, J), Z = m(Z + u, u, R, H, s), A = K; A < ee; A++)
							if (v = k[A], !(R[q + v] >= 0))
								for (C = G[v], v = R[$ + C], R[$ + C] = -1; v != -1 && R[L + v] != -1; v = R[L + v], Z++) {
									for (E = R[U + v], O = R[F + v], Q = I[v] + 1; Q <= I[v] + E - 1; Q++)
										R[H + k[Q]] = Z;
									var oe = v;
									for (g = R[L + v]; g != -1; ) {
										var se = R[U + g] === E && R[F + g] === O;
										for (Q = I[g] + 1; se && Q <= I[g] + E - 1; Q++)
											R[H + k[Q]] != Z && (se = 0);
										se ? (I[g] = i(v), R[q + v] += R[q + g], R[q + g] = 0, R[F + g] = -1, g = R[L + g], R[L + oe] = g) : (oe = g, g = R[L + g])
									}
								}
						for (Q = K, A = K; A < ee; A++)
							v = k[A], (M = -R[q + v]) <= 0 || (R[q + v] = M, z = R[D + v] + J - M, z = Math.min(z, s - V - M), R[j + z] != -1 && (G[R[j + z]] = v), R[L + v] = R[j + z], G[v] = -1, R[j + z] = v, W = Math.min(W, z), R[D + v] = z, k[Q++] = v);
						R[q + y] = X,
						0 === (R[U + y] = Q - K) && (I[y] = -1, R[H + y] = 0),
						0 !== Y && (B = Q)
					}
					for (v = 0; v < s; v++)
						I[v] = i(I[v]);
					for (g = 0; g <= s; g++)
						R[j + g] = -1;
					for (g = s; g >= 0; g--)
						R[q + g] > 0 || (R[L + g] = R[j + I[g]], R[j + I[g]] = g);
					for (b = s; b >= 0; b--)
						R[q + b] <= 0 || I[b] != -1 && (R[L + b] = R[j + I[b]], R[j + I[b]] = b);
					for (y = 0, v = 0; v <= s; v++)
						I[v] == -1 && (y = o(v, y, R, j, L, P, H));
					return P.splice(P.length - 1, 1),
					P
				},
				l = function (e, t, r, n, i) {
					var a = c(t);
					if (1 === e && n === r)
						return s(t, a);
					if (2 == e) {
						for (var o = a._index, f = a._ptr, l = 0, p = 0; p < r; p++) {
							var h = f[p];
							if (f[p] = l, !(f[p + 1] - h > i))
								for (var m = f[p + 1]; h < m; h++)
									o[l++] = o[h]
						}
						return f[r] = l,
						t = c(a),
						u(a, t)
					}
					return u(a, t)
				},
				p = function (e, t, r, n, i, a, o, s, u, c, f, l) {
					for (var p = 0; p < e; p++)
						r[n + p] = t[p + 1] - t[p];
					r[n + e] = 0;
					for (var h = 0; h <= e; h++)
						r[i + h] = -1, a[h] = -1, r[o + h] = -1, r[s + h] = -1, r[u + h] = 1, r[c + h] = 1, r[f + h] = 0, r[l + h] = r[n + h];
					var d = m(0, 0, r, c, e);
					return r[f + e] = -2,
					t[e] = -1,
					r[c + e] = 0,
					d
				},
				h = function (e, t, r, n, a, o, s, u, c, f, l) {
					for (var p = 0, h = 0; h < e; h++) {
						var m = r[n + h];
						if (0 === m)
							r[a + h] = -2, p++, t[h] = -1, r[o + h] = 0;
						else if (m > s)
							r[u + h] = 0, r[a + h] = -1, p++, t[h] = i(e), r[u + e]++;
						else {
							var d = r[c + m];
							d != -1 && (f[d] = h),
							r[l + h] = r[c + m],
							r[c + m] = h
						}
					}
					return p
				},
				m = function (e, t, r, n, i) {
					if (e < 2 || e + t < 0) {
						for (var a = 0; a < i; a++)
							0 !== r[n + a] && (r[n + a] = 1);
						e = 2
					}
					return e
				},
				d = function (e, t) {
					return e != t
				};
				return f
			}
			t.name = "cs_amd",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e, t, r) {
					for (var n = e._values, i = e._index, a = e._ptr, o = e._size, s = o[1], u = 0, c = 0; c < s; c++) {
						var f = a[c];
						for (a[c] = u; f < a[c + 1]; f++)
							t(i[f], c, n ? n[f] : 1, r) && (i[u] = i[f], n && (n[u] = n[f]), u++)
					}
					return a[s] = u,
					i.splice(u, i.length - u),
					n && n.splice(u, n.length - u),
					u
				};
				return e
			}
			t.name = "cs_fkeep",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e) {
				var t = e.SparseMatrix,
				r = function (e, r, n, i) {
					for (var a = e._values, o = e._index, s = e._ptr, u = e._size, c = e._datatype, f = u[0], l = u[1], p = i && e._values ? [] : null, h = [], m = [], d = 0, v = 0; v < l; v++) {
						m[v] = d;
						for (var g = n ? n[v] : v, y = s[g], x = s[g + 1], w = y; w < x; w++) {
							var b = r ? r[o[w]] : o[w];
							h[d] = b,
							p && (p[d] = a[w]),
							d++
						}
					}
					return m[l] = d,
					new t({
						values: p,
						index: h,
						ptr: m,
						size: [f, l],
						datatype: c
					})
				};
				return r
			}
			t.name = "cs_permute",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e, t) {
					if (!e)
						return null;
					var r,
					n,
					i = e._index,
					a = e._ptr,
					o = e._size,
					s = o[0],
					u = o[1],
					c = [],
					f = [],
					l = 0,
					p = u;
					if (t)
						for (r = 0; r < s; r++)
							f[p + r] = -1;
					for (var h = 0; h < u; h++) {
						c[h] = -1,
						f[l + h] = -1;
						for (var m = a[h], d = a[h + 1], v = m; v < d; v++) {
							var g = i[v];
							for (r = t ? f[p + g] : g; r != -1 && r < h; r = n)
								n = f[l + r], f[l + r] = h, n == -1 && (c[r] = h);
							t && (f[p + g] = h)
						}
					}
					return c
				};
				return e
			}
			t.name = "cs_etree",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(126)),
				a = function (e, t) {
					if (!e)
						return null;
					var r,
					n = 0,
					a = [],
					o = [],
					s = 0,
					u = t,
					c = 2 * t;
					for (r = 0; r < t; r++)
						o[s + r] = -1;
					for (r = t - 1; r >= 0; r--)
						e[r] != -1 && (o[u + r] = o[s + e[r]], o[s + e[r]] = r);
					for (r = 0; r < t; r++)
						e[r] == -1 && (n = i(r, n, o, s, u, a, c));
					return a
				};
				return a
			}
			t.name = "cs_post",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(67)),
				a = n(r(417)),
				o = function (e, t, r, n) {
					if (!e || !t || !r)
						return null;
					var o,
					s,
					u,
					c,
					f,
					l,
					p,
					h = e._size,
					m = h[0],
					d = h[1],
					v = 4 * d + (n ? d + m + 1 : 0),
					g = [],
					y = 0,
					x = d,
					w = 2 * d,
					b = 3 * d,
					N = 4 * d,
					E = 5 * d + 1;
					for (u = 0; u < v; u++)
						g[u] = -1;
					var M = [],
					A = i(e),
					O = A._index,
					T = A._ptr;
					for (u = 0; u < d; u++)
						for (s = r[u], M[s] = g[b + s] == -1 ? 1 : 0; s != -1 && g[b + s] == -1; s = t[s])
							g[b + s] = u;
					if (n) {
						for (u = 0; u < d; u++)
							g[r[u]] = u;
						for (o = 0; o < m; o++) {
							for (u = d, l = T[o], p = T[o + 1], f = l; f < p; f++)
								u = Math.min(u, g[O[f]]);
							g[E + o] = g[N + u],
							g[N + u] = o
						}
					}
					for (o = 0; o < d; o++)
						g[y + o] = o;
					for (u = 0; u < d; u++) {
						for (s = r[u], t[s] != -1 && M[t[s]]--, c = n ? g[N + u] : s; c != -1; c = n ? g[E + c] : -1)
							for (f = T[c]; f < T[c + 1]; f++) {
								o = O[f];
								var _ = a(o, s, g, b, x, w, y);
								_.jleaf >= 1 && M[s]++,
								2 == _.jleaf && M[_.q]--
							}
						t[s] != -1 && (g[y + s] = t[s])
					}
					for (s = 0; s < d; s++)
						t[s] != -1 && (M[t[s]] += M[s]);
					return M
				};
				return o
			}
			t.name = "cs_counts",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e, t, r, n, i, a, o) {
					var s,
					u,
					c,
					f,
					l = 0;
					if (e <= t || r[n + t] <= r[i + e])
						return -1;
					if (r[i + e] = r[n + t], c = r[a + e], r[a + e] = t, c === -1)
						l = 1, f = e;
					else {
						for (l = 2, f = c; f != r[o + f]; f = r[o + f]);
						for (s = c; s != f; s = u)
							u = r[o + s], r[o + s] = f
					}
					return {
						jleaf: l,
						q: f
					}
				};
				return e
			}
			t.name = "cs_leaf",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(29)),
				a = n(r(19)),
				o = n(r(12)),
				s = n(r(34)),
				u = n(r(127)),
				c = n(r(419)),
				f = e.SparseMatrix,
				l = function (e, t, r) {
					if (!e)
						return null;
					var n,
					l = e._size,
					p = l[1],
					h = 100,
					m = 100;
					t && (n = t.q, h = t.lnz || h, m = t.unz || m);
					var d,
					v,
					g = [],
					y = [],
					x = [],
					w = new f({
							values: g,
							index: y,
							ptr: x,
							size: [p, p]
						}),
					b = [],
					N = [],
					E = [],
					M = new f({
							values: b,
							index: N,
							ptr: E,
							size: [p, p]
						}),
					A = [],
					O = [],
					T = [];
					for (d = 0; d < p; d++)
						O[d] = 0, A[d] = -1, x[d + 1] = 0;
					h = 0,
					m = 0;
					for (var _ = 0; _ < p; _++) {
						x[_] = h,
						E[_] = m;
						var S = n ? n[_] : _,
						C = c(w, e, S, T, O, A, 1),
						z = -1,
						k = -1;
						for (v = C; v < p; v++)
							if (d = T[v], A[d] < 0) {
								var I = i(O[d]);
								s(I, k) && (k = I, z = d)
							} else
								N[m] = A[d], b[m++] = O[d];
						if (z == -1 || k <= 0)
							return null;
						A[S] < 0 && u(i(O[S]), o(k, r)) && (z = S);
						var B = O[z];
						for (N[m] = _, b[m++] = B, A[z] = _, y[h] = z, g[h++] = 1, v = C; v < p; v++)
							d = T[v], A[d] < 0 && (y[h] = d, g[h++] = a(O[d], B)), O[d] = 0
					}
					for (x[p] = h, E[p] = m, v = 0; v < h; v++)
						y[v] = A[y[v]];
					return g.splice(h, g.length - h),
					y.splice(h, y.length - h),
					b.splice(m, b.length - m),
					N.splice(m, N.length - m), {
						L: w,
						U: M,
						pinv: A
					}
				};
				return l
			}
			t.name = "cs_lu",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(19)),
				a = n(r(12)),
				o = n(r(21)),
				s = n(r(420)),
				u = function (e, t, r, n, u, c, f) {
					var l,
					p,
					h,
					m,
					d = e._values,
					v = e._index,
					g = e._ptr,
					y = e._size,
					x = y[1],
					w = t._values,
					b = t._index,
					N = t._ptr,
					E = s(e, t, r, n, c);
					for (l = E; l < x; l++)
						u[n[l]] = 0;
					for (p = N[r], h = N[r + 1], l = p; l < h; l++)
						u[b[l]] = w[l];
					for (var M = E; M < x; M++) {
						var A = n[M],
						O = c ? c[A] : A;
						if (!(O < 0))
							for (p = g[O], h = g[O + 1], u[A] = i(u[A], d[f ? p : h - 1]), l = f ? p + 1 : p, m = f ? h : h - 1; l < m; l++) {
								var T = v[l];
								u[T] = o(u[T], a(d[l], u[A]))
							}
					}
					return E
				};
				return u
			}
			t.name = "cs_spsolve",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(421)),
				a = n(r(128)),
				o = n(r(129)),
				s = function (e, t, r, n, s) {
					var u,
					c,
					f,
					l = e._ptr,
					p = e._size,
					h = t._index,
					m = t._ptr,
					d = p[1],
					v = d;
					for (c = m[r], f = m[r + 1], u = c; u < f; u++) {
						var g = h[u];
						a(l, g) || (v = i(g, e, v, n, s))
					}
					for (u = v; u < d; u++)
						o(l, n[u]);
					return v
				};
				return s
			}
			t.name = "cs_reach",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(128)),
				a = n(r(129)),
				o = n(r(422)),
				s = function (e, t, r, n, s) {
					var u,
					c,
					f,
					l = t._index,
					p = t._ptr,
					h = t._size,
					m = h[1],
					d = 0;
					for (n[0] = e; d >= 0; ) {
						e = n[d];
						var v = s ? s[e] : e;
						i(p, e) || (a(p, e), n[m + d] = v < 0 ? 0 : o(p[v]));
						var g = 1;
						for (c = n[m + d], f = v < 0 ? 0 : o(p[v + 1]); c < f; c++)
							if (u = l[c], !i(p, u)) {
								n[m + d] = c,
								n[++d] = u,
								g = 0;
								break
							}
						g && (d--, n[--r] = e)
					}
					return r
				};
				return s
			}
			t.name = "cs_dfs",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n) {
				var i = n(r(83)),
				a = function (e) {
					return e < 0 ? i(e) : e
				};
				return a
			}
			t.name = "cs_unflip",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(0)),
				s = n(r(124)),
				u = n(r(125)),
				c = n(r(424)),
				f = n(r(84)),
				l = n(r(131)),
				p = n(r(130)),
				h = a("lusolve", {
						"Array, Array | Matrix": function (e, t) {
							e = o(e);
							var r = s(e),
							n = d(r.L, r.U, r.p, null, t);
							return n.valueOf()
						},
						"DenseMatrix, Array | Matrix": function (e, t) {
							var r = s(e);
							return d(r.L, r.U, r.p, null, t)
						},
						"SparseMatrix, Array | Matrix": function (e, t) {
							var r = s(e);
							return d(r.L, r.U, r.p, null, t)
						},
						"SparseMatrix, Array | Matrix, number, number": function (e, t, r, n) {
							var i = u(e, r, n);
							return d(i.L, i.U, i.p, i.q, t)
						},
						"Object, Array | Matrix": function (e, t) {
							return d(e.L, e.U, e.p, e.q, t)
						}
					}),
				m = function (t) {
					if (e.isMatrix(t))
						return t;
					if (i(t))
						return o(t);
					throw new TypeError("Invalid Matrix LU decomposition")
				},
				d = function (e, t, r, n, i) {
					e = m(e),
					t = m(t),
					i = f(e, i, !1),
					r && (i._data = c(r, i._data));
					var a = p(e, i),
					o = l(t, a);
					return n && (o._data = c(n, o._data)),
					o
				};
				return h
			}
			var i = Array.isArray;
			t.name = "lusolve",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n() {
				var e = function (e, t, r) {
					var n,
					r = t.length,
					i = [];
					if (e)
						for (n = 0; n < r; n++)
							i[e[n]] = t[n];
					else
						for (n = 0; n < r; n++)
							i[n] = t[n];
					return i
				};
				return e
			}
			t.name = "cs_ipvec",
			t.path = "sparse",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(29), r(18), r(20), r(426), r(427), r(428), r(47), r(132), r(429), r(430), r(431), r(96), r(432), r(433), r(434), r(435), r(134), r(437), r(438), r(12), r(439), r(440), r(45), r(97), r(122), r(56), r(441), r(21), r(37), r(442), r(443)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(r, n) {
					var i = r.arg() / 3,
					o = r.abs(),
					s = new e.Complex(a(o), 0).mul(new e.Complex(0, i).exp());
					if (n) {
						var u = [s, new e.Complex(a(o), 0).mul(new e.Complex(0, i + 2 * Math.PI / 3).exp()), new e.Complex(a(o), 0).mul(new e.Complex(0, i - 2 * Math.PI / 3).exp())];
						return "Array" === t.matrix ? u : l(u)
					}
					return s
				}
				function u(t) {
					if (t.value && e.isComplex(t.value)) {
						var r = t.clone();
						return r.value = 1,
						r = r.pow(1 / 3),
						r.value = s(t.value),
						r
					}
					var n = f(t.value);
					n && (t.value = c(t.value));
					var i;
					i = e.isBigNumber(t.value) ? new e.BigNumber(1).div(3) : e.isFraction(t.value) ? new e.Fraction(1, 3) : 1 / 3;
					var r = t.pow(i);
					return n && (r.value = c(r.value)),
					r
				}
				var c = n(r(37)),
				f = n(r(57)),
				l = n(r(0)),
				p = o("cbrt", {
						number: a,
						Complex: s,
						"Complex, boolean": s,
						BigNumber: function (e) {
							return e.cbrt();
						},
						Unit: u,
						"Array | Matrix": function (e) {
							return i(e, p, !0)
						}
					});
				return p.toTex = {
					1: "\\sqrt[3]{${args[0]}}"
				},
				p
			}
			var i = r(1),
			a = Math.cbrt || function (e) {
				if (0 === e)
					return e;
				var t,
				r = e < 0;
				return r && (e = -e),
				isFinite(e) ? (t = Math.exp(Math.log(e) / 3), t = (e / (t * t) + 2 * t) / 3) : t = e,
				r ? -t : t
			};
			t.name = "cbrt",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("ceil", {
						number: Math.ceil,
						Complex: function (e) {
							return e.ceil()
						},
						BigNumber: function (e) {
							return e.ceil()
						},
						Fraction: function (e) {
							return e.ceil()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\left\\lceil${args[0]}\\right\\rceil"
				},
				a
			}
			var i = r(1);
			t.name = "ceil",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("cube", {
						number: function (e) {
							return e * e * e
						},
						Complex: function (e) {
							return e.mul(e).mul(e)
						},
						BigNumber: function (e) {
							return e.times(e).times(e)
						},
						Fraction: function (e) {
							return e.pow(3)
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						},
						Unit: function (e) {
							return e.pow(3)
						}
					});
				return a.toTex = {
					1: "\\left(${args[0]}\\right)^3"
				},
				a
			}
			var i = r(1);
			t.name = "cube",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(23)),
				s = r(4),
				u = n(r(24)),
				c = n(r(133)),
				f = n(r(17)),
				l = n(r(8)),
				p = n(r(6)),
				h = i("dotMultiply", {
						"any, any": o,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, o, !1);
									break;
								default:
									r = u(t, e, o, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, o, !1);
									break;
								default:
									r = l(e, t, o)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return h(a(e), a(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return h(a(e), t)
						},
						"Matrix, Array": function (e, t) {
							return h(e, a(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, o, !1);
								break;
							default:
								r = p(e, t, o, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, o, !0);
								break;
							default:
								r = p(t, e, o, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(a(e), t, o, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(a(t), e, o, !0).valueOf()
						}
					});
				return h.toTex = {
					2: "\\left(${args[0]}" + s.operators.dotMultiply + "${args[1]}\\right)"
				},
				h
			}
			t.name = "dotMultiply",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(45)),
				s = r(4),
				u = n(r(15)),
				c = n(r(26)),
				f = n(r(17)),
				l = n(r(16)),
				p = n(r(8)),
				h = n(r(6)),
				m = i("dotPow", {
						"any, any": o,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, o, !1);
									break;
								default:
									r = u(t, e, o, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, o, !1);
									break;
								default:
									r = p(e, t, o)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(a(e), a(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(a(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, a(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, m, !1);
								break;
							default:
								r = h(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = l(t, e, m, !0);
								break;
							default:
								r = h(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return h(a(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return h(a(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + s.operators.dotPow + "${args[1]}\\right)"
				},
				m
			}
			t.name = "dotPow",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("exp", {
						number: Math.exp,
						Complex: function (e) {
							return e.exp()
						},
						BigNumber: function (e) {
							return e.exp()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\exp\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "exp",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("floor", {
						number: Math.floor,
						Complex: function (e) {
							return e.floor()
						},
						BigNumber: function (e) {
							return e.floor()
						},
						Fraction: function (e) {
							return e.floor()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\left\\lfloor${args[0]}\\right\\rfloor"
				},
				a
			}
			var i = r(1);
			t.name = "floor",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(t, r) {
					if (!t.isInt() || !r.isInt())
						throw new Error("Parameters in function gcd must be integer numbers");
					for (var n = new e.BigNumber(0); !r.isZero(); ) {
						var i = t.mod(r);
						t = r,
						r = i
					}
					return t.lt(n) ? t.neg() : t
				}
				var s = n(r(0)),
				u = n(r(33)),
				c = n(r(73)),
				f = n(r(36)),
				l = n(r(8)),
				p = n(r(6)),
				h = a("gcd", {
						"number, number": i,
						"BigNumber, BigNumber": o,
						"Fraction, Fraction": function (e, t) {
							return e.gcd(t)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, h);
									break;
								default:
									r = u(t, e, h, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, h, !1);
									break;
								default:
									r = l(e, t, h)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return h(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return h(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return h(e, s(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, h, !1);
								break;
							default:
								r = p(e, t, h, !1)
							}
							return r
						},
						"number | BigNumber, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, h, !0);
								break;
							default:
								r = p(t, e, h, !0)
							}
							return r
						},
						"Array, number | BigNumber": function (e, t) {
							return p(s(e), t, h, !1).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return p(s(t), e, h, !0).valueOf()
						},
						"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber": function (e, t, r) {
							for (var n = h(e, t), i = 0; i < r.length; i++)
								n = h(n, r[i]);
							return n
						}
					});
				return h.toTex = "\\gcd\\left(${args}\\right)",
				h
			}
			function i(e, t) {
				if (!a(e) || !a(t))
					throw new Error("Parameters in function gcd must be integer numbers");
				for (var r; 0 != t; )
					r = e % t, e = t, t = r;
				return e < 0 ? -e : e
			}
			var a = r(3).isInteger;
			t.name = "gcd",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e) {
					for (var t = 0, r = 0, n = 0; n < e.length; n++) {
						var i = s(e[n]);
						p(r, i) ? (t = f(t, f(c(r, i), c(r, i))), t = u(t, 1), r = i) : t = u(t, h(i) ? f(c(i, r), c(i, r)) : i)
					}
					return f(r, l(t))
				}
				var s = n(r(29)),
				u = n(r(20)),
				c = n(r(19)),
				f = n(r(23)),
				l = n(r(56)),
				p = n(r(44)),
				h = n(r(55)),
				m = a("hypot", {
						"... number | BigNumber": o,
						Array: function (e) {
							return m.apply(m, i(e))
						},
						Matrix: function (e) {
							return m.apply(m, i(e.toArray()))
						}
					});
				return m.toTex = "\\hypot\\left(${args}\\right)",
				m
			}
			var i = r(2).flatten;
			t.name = "hypot",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(t, r) {
					if (!t.isInt() || !r.isInt())
						throw new Error("Parameters in function lcm must be integer numbers");
					if (t.isZero() || r.isZero())
						return new e.BigNumber(0);
					for (var n = t.times(r); !r.isZero(); ) {
						var i = r;
						r = t.mod(i),
						t = i
					}
					return n.div(t).abs()
				}
				var s = n(r(0)),
				u = n(r(24)),
				c = n(r(68)),
				f = n(r(17)),
				l = n(r(8)),
				p = n(r(6)),
				h = a("lcm", {
						"number, number": i,
						"BigNumber, BigNumber": o,
						"Fraction, Fraction": function (e, t) {
							return e.lcm(t)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, h);
									break;
								default:
									r = u(t, e, h, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, h, !1);
									break;
								default:
									r = l(e, t, h)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return h(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return h(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return h(e, s(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, h, !1);
								break;
							default:
								r = p(e, t, h, !1)
							}
							return r
						},
						"number | BigNumber, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, h, !0);
								break;
							default:
								r = p(t, e, h, !0)
							}
							return r
						},
						"Array, number | BigNumber": function (e, t) {
							return p(s(e), t, h, !1).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return p(s(t), e, h, !0).valueOf()
						},
						"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber": function (e, t, r) {
							for (var n = h(e, t), i = 0; i < r.length; i++)
								n = h(n, r[i]);
							return n
						}
					});
				return h.toTex = void 0,
				h
			}
			function i(e, t) {
				if (!a(e) || !a(t))
					throw new Error("Parameters in function lcm must be integer numbers");
				if (0 == e || 0 == t)
					return 0;
				for (var r, n = e * t; 0 != t; )
					r = t, t = e % r, e = r;
				return Math.abs(n / e)
			}
			var a = r(3).isInteger;
			t.name = "lcm",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			e.exports = function (e, t, r, n, i, a, o, s, u, c, f) {
				var l,
				p,
				h,
				m,
				d = e._values,
				v = e._index,
				g = e._ptr,
				y = o._index;
				if (n)
					for (p = g[t], h = g[t + 1], l = p; l < h; l++)
						m = v[l], r[m] !== a ? (r[m] = a, y.push(m), c ? (n[m] = u ? s(d[l], f) : s(f, d[l]), i[m] = a) : n[m] = d[l]) : (n[m] = u ? s(d[l], n[m]) : s(n[m], d[l]), i[m] = a);
				else
					for (p = g[t], h = g[t + 1], l = p; l < h; l++)
						m = v[l], r[m] !== a ? (r[m] = a, y.push(m)) : i[m] = a
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("log10", {
						number: function (r) {
							return r >= 0 || t.predictable ? a(r) : new e.Complex(r, 0).log().div(Math.LN10)
						},
						Complex: function (t) {
							return new e.Complex(t).log().div(Math.LN10)
						},
						BigNumber: function (r) {
							return !r.isNegative() || t.predictable ? r.log() : new e.Complex(r.toNumber(), 0).log().div(Math.LN10)
						},
						"Array | Matrix": function (e) {
							return i(e, o)
						}
					});
				return o.toTex = {
					1: "\\log_{10}\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = Math.log10 || function (e) {
				return Math.log(e) / Math.LN10
			};
			t.name = "log10",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e, t) {
					if (t > 0)
						return e - t * Math.floor(e / t);
					if (0 === t)
						return e;
					throw new Error("Cannot calculate mod for a negative divisor")
				}
				var o = n(r(0)),
				s = r(4),
				u = n(r(24)),
				c = n(r(15)),
				f = n(r(60)),
				l = n(r(17)),
				p = n(r(16)),
				h = n(r(8)),
				m = n(r(6)),
				d = i("mod", {
						"number, number": a,
						"BigNumber, BigNumber": function (e, t) {
							return t.isZero() ? e : e.mod(t)
						},
						"Fraction, Fraction": function (e, t) {
							return e.mod(t)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, d, !1);
									break;
								default:
									r = u(t, e, d, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, d, !1);
									break;
								default:
									r = h(e, t, d)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return d(o(e), o(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return d(o(e), t)
						},
						"Matrix, Array": function (e, t) {
							return d(e, o(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = l(e, t, d, !1);
								break;
							default:
								r = m(e, t, d, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = p(t, e, d, !0);
								break;
							default:
								r = m(t, e, d, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return m(o(e), t, d, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return m(o(t), e, d, !0).valueOf()
						}
					});
				return d.toTex = {
					2: "\\left(${args[0]}" + s.operators.mod + "${args[1]}\\right)"
				},
				d
			}
			t.name = "mod",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e, t) {
					var r = e.size();
					if (1 == r.length) {
						if (t === Number.POSITIVE_INFINITY || "inf" === t) {
							var n = 0;
							return e.forEach(function (e) {
								var t = o(e);
								p(t, n) && (n = t)
							}, !0),
							n
						}
						if (t === Number.NEGATIVE_INFINITY || "-inf" === t) {
							var i;
							return e.forEach(function (e) {
								var t = o(e);
								i && !h(t, i) || (i = t)
							}, !0),
							i || 0
						}
						if ("fro" === t)
							return a(e, 2);
						if ("number" == typeof t && !isNaN(t)) {
							if (!l(t, 0)) {
								var m = 0;
								return e.forEach(function (e) {
									m = s(u(o(e), t), m)
								}, !0),
								u(m, 1 / t)
							}
							return Number.POSITIVE_INFINITY
						}
						throw new Error("Unsupported parameter value")
					}
					if (2 == r.length) {
						if (1 === t) {
							var g = [],
							y = 0;
							return e.forEach(function (e, t) {
								var r = t[1],
								n = s(g[r] || 0, o(e));
								p(n, y) && (y = n),
								g[r] = n
							}, !0),
							y
						}
						if (t === Number.POSITIVE_INFINITY || "inf" === t) {
							var x = [],
							w = 0;
							return e.forEach(function (e, t) {
								var r = t[0],
								n = s(x[r] || 0, o(e));
								p(n, w) && (w = n),
								x[r] = n
							}, !0),
							w
						}
						if ("fro" === t)
							return c(d(f(v(e), e)));
						if (2 === t)
							throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");
						throw new Error("Unsupported parameter value")
					}
				}
				var o = n(r(29)),
				s = n(r(18)),
				u = n(r(45)),
				c = n(r(56)),
				f = n(r(12)),
				l = n(r(11)),
				p = n(r(34)),
				h = n(r(44)),
				m = n(r(0)),
				d = n(r(135)),
				v = n(r(67)),
				g = i("norm", {
						number: Math.abs,
						Complex: function (e) {
							return e.abs()
						},
						BigNumber: function (e) {
							return e.abs()
						},
						"boolean | null": function (e) {
							return Math.abs(e)
						},
						Array: function (e) {
							return a(m(e), 2)
						},
						Matrix: function (e) {
							return a(e, 2)
						},
						"number | Complex | BigNumber | boolean | null, number | BigNumber | string": function (e) {
							return g(e)
						},
						"Array, number | BigNumber | string": function (e, t) {
							return a(m(e), t)
						},
						"Matrix, number | BigNumber | string": function (e, t) {
							return a(e, t)
						}
					});
				return g.toTex = {
					1: "\\left\\|${args[0]}\\right\\|",
					2: void 0
				},
				g
			}
			t.name = "norm",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					var n = e.BigNumber.precision,
					i = e.BigNumber.clone({
							precision: n + 2
						}),
					a = new e.BigNumber(0),
					o = new i(1),
					s = r.isNegative();
					if (s && (r = r.neg()), r.isZero())
						throw new Error("Root must be non-zero");
					if (t.isNegative() && !r.abs().mod(2).equals(1))
						throw new Error("Root must be odd when a is negative.");
					if (t.isZero())
						return s ? new i(1 / 0) : 0;
					if (!t.isFinite())
						return s ? a : t;
					var u = t.abs().pow(o.div(r));
					return u = t.isNeg() ? u.neg() : u,
					new e.BigNumber((s ? o.div(u) : u).toPrecision(n))
				}
				var u = n(r(0)),
				c = n(r(33)),
				f = n(r(24)),
				l = n(r(68)),
				p = n(r(17)),
				h = n(r(8)),
				m = n(r(6)),
				d = o("nthRoot", {
						number: function (e) {
							return i(e, 2)
						},
						"number, number": i,
						BigNumber: function (t) {
							return s(t, new e.BigNumber(2))
						},
						Complex: function (e) {
							return a(e, 2)
						},
						"Complex, number": a,
						"BigNumber, BigNumber": s,
						"Array | Matrix": function (e) {
							return d(e, 2)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									if (1 !== t.density())
										throw new Error("Root must be non-zero");
									r = l(e, t, d);
									break;
								default:
									r = f(t, e, d, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									if (1 !== t.density())
										throw new Error("Root must be non-zero");
									r = c(e, t, d, !1);
									break;
								default:
									r = h(e, t, d)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return d(u(e), u(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return d(u(e), t)
						},
						"Matrix, Array": function (e, t) {
							return d(e, u(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = p(e, t, d, !1);
								break;
							default:
								r = m(e, t, d, !1)
							}
							return r
						},
						"number | BigNumber, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								if (1 !== t.density())
									throw new Error("Root must be non-zero");
								r = p(t, e, d, !0);
								break;
							default:
								r = m(t, e, d, !0)
							}
							return r
						},
						"Array, number | BigNumber": function (e, t) {
							return d(u(e), t).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return d(e, u(t)).valueOf()
						}
					});
				return d.toTex = {
					2: "\\sqrt[${args[1]}]{${args[0]}}"
				},
				d
			}
			function i(e, t) {
				var r = t < 0;
				if (r && (t = -t), 0 === t)
					throw new Error("Root must be non-zero");
				if (e < 0 && Math.abs(t) % 2 != 1)
					throw new Error("Root must be odd when a is negative.");
				if (0 == e)
					return r ? 1 / 0 : 0;
				if (!isFinite(e))
					return r ? 0 : e;
				var n = Math.pow(Math.abs(e), 1 / t);
				return n = e < 0 ? -n : n,
				r ? 1 / n : n
			}
			function a(e, t) {
				if (t < 0)
					throw new Error("Root must be greater than zero");
				if (0 === t)
					throw new Error("Root must be non-zero");
				if (t % 1 !== 0)
					throw new Error("Root must be an integer");
				for (var r = e.arg(), n = e.abs(), i = [], a = Math.pow(n, 1 / t), o = 0; o < t; o++)
					i.push({
						r: a,
						phi: (r + 2 * Math.PI * o) / t
					});
				return i
			}
			t.name = "nthRoot",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("square", {
						number: function (e) {
							return e * e
						},
						Complex: function (e) {
							return e.mul(e)
						},
						BigNumber: function (e) {
							return e.times(e)
						},
						Fraction: function (e) {
							return e.mul(e)
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						},
						Unit: function (e) {
							return e.pow(2)
						}
					});
				return a.toTex = {
					1: "\\left(${args[0]}\\right)^2"
				},
				a
			}
			var i = r(1);
			t.name = "square",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = r(4),
				s = a("unaryPlus", {
						number: function (e) {
							return e
						},
						Complex: function (e) {
							return e
						},
						BigNumber: function (e) {
							return e
						},
						Fraction: function (e) {
							return e
						},
						Unit: function (e) {
							return e.clone()
						},
						"Array | Matrix": function (e) {
							return i(e, s, !0)
						},
						"boolean | string | null": function (r) {
							return "BigNumber" == t.number ? new e.BigNumber(+r) : +r
						}
					});
				return s.toTex = {
					1: o.operators.unaryPlus + "\\left(${args[0]}\\right)"
				},
				s
			}
			var i = r(1);
			t.name = "unaryPlus",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, r) {
					var n,
					a,
					o,
					s = 0,
					c = 1,
					f = 1,
					l = 0;
					if (!i(e) || !i(r))
						throw new Error("Parameters in function xgcd must be integer numbers");
					for (; r; )
						a = Math.floor(e / r), o = e - a * r, n = s, s = c - a * s, c = n, n = f, f = l - a * f, l = n, e = r, r = o;
					var p;
					return p = e < 0 ? [-e, -c, -l] : [e, e ? c : 0, l],
					"Array" === t.matrix ? p : u(p)
				}
				function s(r, n) {
					var i,
					a,
					o,
					s = new e.BigNumber(0),
					c = new e.BigNumber(1),
					f = s,
					l = c,
					p = c,
					h = s;
					if (!r.isInt() || !n.isInt())
						throw new Error("Parameters in function xgcd must be integer numbers");
					for (; !n.isZero(); )
						a = r.div(n).floor(), o = r.mod(n), i = f, f = l.minus(a.times(f)), l = i, i = p, p = h.minus(a.times(p)), h = i, r = n, n = o;
					var m;
					return m = r.lt(s) ? [r.neg(), l.neg(), h.neg()] : [r, r.isZero() ? 0 : l, h],
					"Array" === t.matrix ? m : u(m)
				}
				var u = n(r(0)),
				c = a("xgcd", {
						"number, number": o,
						"BigNumber, BigNumber": s
					});
				return c.toTex = void 0,
				c
			}
			var i = r(3).isInteger;
			t.name = "xgcd",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(445), r(447), r(448), r(450), r(452), r(454), r(456)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = r(4),
				u = n(r(0)),
				c = n(r(24)),
				f = n(r(68)),
				l = n(r(17)),
				p = n(r(8)),
				h = n(r(6)),
				m = o("bitAnd", {
						"number, number": function (e, t) {
							if (!i(e) || !i(t))
								throw new Error("Integers expected in function bitAnd");
							return e & t
						},
						"BigNumber, BigNumber": a,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, m, !1);
									break;
								default:
									r = c(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m, !1);
									break;
								default:
									r = p(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(u(e), u(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(u(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, u(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = l(e, t, m, !1);
								break;
							default:
								r = h(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = l(t, e, m, !0);
								break;
							default:
								r = h(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return h(u(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return h(u(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + s.operators.bitAnd + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).isInteger,
			a = r(446);
			t.name = "bitAnd",
			t.factory = n
		}, function (e, t, r) {
			var n = r(85);
			e.exports = function (e, t) {
				if (e.isFinite() && !e.isInteger() || t.isFinite() && !t.isInteger())
					throw new Error("Integers expected in function bitAnd");
				var r = e.constructor;
				if (e.isNaN() || t.isNaN())
					return new r(NaN);
				if (e.isZero() || t.eq(-1) || e.eq(t))
					return e;
				if (t.isZero() || e.eq(-1))
					return t;
				if (!e.isFinite() || !t.isFinite()) {
					if (!e.isFinite() && !t.isFinite())
						return e.isNegative() == t.isNegative() ? e : new r(0);
					if (!e.isFinite())
						return t.isNegative() ? e : e.isNegative() ? new r(0) : t;
					if (!t.isFinite())
						return e.isNegative() ? t : t.isNegative() ? new r(0) : e
				}
				return n(e, t, function (e, t) {
					return e & t
				})
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				var u = r(4),
				c = s("bitNot", {
						number: function (e) {
							if (!o(e))
								throw new Error("Integer expected in function bitNot");
							return ~e
						},
						BigNumber: a,
						"Array | Matrix": function (e) {
							return i(e, c)
						}
					});
				return c.toTex = {
					1: u.operators.bitNot + "\\left(${args[0]}\\right)"
				},
				c
			}
			var i = r(1),
			a = r(86),
			o = r(3).isInteger;
			t.name = "bitNot",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = r(4),
				u = n(r(0)),
				c = n(r(33)),
				f = n(r(73)),
				l = n(r(36)),
				p = n(r(8)),
				h = n(r(6)),
				m = o("bitOr", {
						"number, number": function (e, t) {
							if (!i(e) || !i(t))
								throw new Error("Integers expected in function bitOr");
							return e | t
						},
						"BigNumber, BigNumber": a,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, m);
									break;
								default:
									r = c(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m, !1);
									break;
								default:
									r = p(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(u(e), u(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(u(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, u(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = l(e, t, m, !1);
								break;
							default:
								r = h(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = l(t, e, m, !0);
								break;
							default:
								r = h(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return h(u(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return h(u(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + s.operators.bitOr + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).isInteger,
			a = r(449);
			t.name = "bitOr",
			t.factory = n
		}, function (e, t, r) {
			var n = r(85);
			e.exports = function (e, t) {
				if (e.isFinite() && !e.isInteger() || t.isFinite() && !t.isInteger())
					throw new Error("Integers expected in function bitOr");
				var r = e.constructor;
				if (e.isNaN() || t.isNaN())
					return new r(NaN);
				var i = new r(-1);
				return e.isZero() || t.eq(i) || e.eq(t) ? t : t.isZero() || e.eq(i) ? e : e.isFinite() && t.isFinite() ? n(e, t, function (e, t) {
					return e | t
				}) : !e.isFinite() && !e.isNegative() && t.isNegative() || e.isNegative() && !t.isNegative() && !t.isFinite() ? i : e.isNegative() && t.isNegative() ? e.isFinite() ? e : t : e.isFinite() ? t : e
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = r(4),
				u = n(r(0)),
				c = n(r(15)),
				f = n(r(26)),
				l = n(r(16)),
				p = n(r(8)),
				h = n(r(6)),
				m = o("bitXor", {
						"number, number": function (e, t) {
							if (!i(e) || !i(t))
								throw new Error("Integers expected in function bitXor");
							return e ^ t
						},
						"BigNumber, BigNumber": a,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, m);
									break;
								default:
									r = c(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m, !1);
									break;
								default:
									r = p(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(u(e), u(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(u(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, u(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = l(e, t, m, !1);
								break;
							default:
								r = h(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = l(t, e, m, !0);
								break;
							default:
								r = h(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return h(u(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return h(u(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + s.operators.bitXor + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).isInteger,
			a = r(451);
			t.name = "bitXor",
			t.factory = n
		}, function (e, t, r) {
			var n = r(85),
			i = r(86);
			e.exports = function (e, t) {
				if (e.isFinite() && !e.isInteger() || t.isFinite() && !t.isInteger())
					throw new Error("Integers expected in function bitXor");
				var r = e.constructor;
				if (e.isNaN() || t.isNaN())
					return new r(NaN);
				if (e.isZero())
					return t;
				if (t.isZero())
					return e;
				if (e.eq(t))
					return new r(0);
				var a = new r(-1);
				return e.eq(a) ? i(t) : t.eq(a) ? i(e) : e.isFinite() && t.isFinite() ? n(e, t, function (e, t) {
					return e ^ t
				}) : e.isFinite() || t.isFinite() ? new r(e.isNegative() == t.isNegative() ? 1 / 0 :  - (1 / 0)) : a
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = r(4),
				u = n(r(0)),
				c = n(r(11)),
				f = n(r(38)),
				l = n(r(33)),
				p = n(r(24)),
				h = n(r(87)),
				m = n(r(36)),
				d = n(r(17)),
				v = n(r(8)),
				g = n(r(6)),
				y = o("leftShift", {
						"number, number": function (e, t) {
							if (!i(e) || !i(t))
								throw new Error("Integers expected in function leftShift");
							return e << t
						},
						"BigNumber, BigNumber": a,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = h(e, t, y, !1);
									break;
								default:
									r = p(t, e, y, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = l(e, t, y, !1);
									break;
								default:
									r = v(e, t, y)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return y(u(e), u(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return y(u(e), t)
						},
						"Matrix, Array": function (e, t) {
							return y(e, u(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							if (!c(t, 0)) {
								var r;
								switch (e.storage()) {
								case "sparse":
									r = d(e, t, y, !1);
									break;
								default:
									r = g(e, t, y, !1)
								}
								return r
							}
							return e.clone()
						},
						"number | BigNumber, Matrix": function (e, t) {
							if (!c(e, 0)) {
								var r;
								switch (t.storage()) {
								case "sparse":
									r = m(t, e, y, !0);
									break;
								default:
									r = g(t, e, y, !0)
								}
								return r
							}
							return f(t.size(), t.storage())
						},
						"Array, number | BigNumber": function (e, t) {
							return y(u(e), t).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return y(e, u(t)).valueOf()
						}
					});
				return y.toTex = {
					2: "\\left(${args[0]}" + s.operators.leftShift + "${args[1]}\\right)"
				},
				y
			}
			var i = r(3).isInteger,
			a = r(453);
			t.name = "leftShift",
			t.factory = n
		}, function (e, t) {
			e.exports = function (e, t) {
				if (e.isFinite() && !e.isInteger() || t.isFinite() && !t.isInteger())
					throw new Error("Integers expected in function leftShift");
				var r = e.constructor;
				return e.isNaN() || t.isNaN() || t.isNegative() && !t.isZero() ? new r(NaN) : e.isZero() || t.isZero() ? e : e.isFinite() || t.isFinite() ? t.lt(55) ? e.times(Math.pow(2, t.toNumber()) + "") : e.times(new r(2).pow(t)) : new r(NaN)
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = r(4),
				u = n(r(0)),
				c = n(r(11)),
				f = n(r(38)),
				l = n(r(33)),
				p = n(r(24)),
				h = n(r(87)),
				m = n(r(36)),
				d = n(r(17)),
				v = n(r(8)),
				g = n(r(6)),
				y = o("rightArithShift", {
						"number, number": function (e, t) {
							if (!i(e) || !i(t))
								throw new Error("Integers expected in function rightArithShift");
							return e >> t
						},
						"BigNumber, BigNumber": a,
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = h(e, t, y, !1);
									break;
								default:
									r = p(t, e, y, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = l(e, t, y, !1);
									break;
								default:
									r = v(e, t, y)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return y(u(e), u(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return y(u(e), t)
						},
						"Matrix, Array": function (e, t) {
							return y(e, u(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							if (!c(t, 0)) {
								var r;
								switch (e.storage()) {
								case "sparse":
									r = d(e, t, y, !1);
									break;
								default:
									r = g(e, t, y, !1)
								}
								return r
							}
							return e.clone()
						},
						"number | BigNumber, Matrix": function (e, t) {
							if (!c(e, 0)) {
								var r;
								switch (t.storage()) {
								case "sparse":
									r = m(t, e, y, !0);
									break;
								default:
									r = g(t, e, y, !0)
								}
								return r
							}
							return f(t.size(), t.storage())
						},
						"Array, number | BigNumber": function (e, t) {
							return y(u(e), t).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return y(e, u(t)).valueOf()
						}
					});
				return y.toTex = {
					2: "\\left(${args[0]}" + s.operators.rightArithShift + "${args[1]}\\right)"
				},
				y
			}
			var i = r(3).isInteger,
			a = r(455);
			t.name = "rightArithShift",
			t.factory = n
		}, function (e, t) {
			e.exports = function (e, t) {
				if (e.isFinite() && !e.isInteger() || t.isFinite() && !t.isInteger())
					throw new Error("Integers expected in function rightArithShift");
				var r = e.constructor;
				return e.isNaN() || t.isNaN() || t.isNegative() && !t.isZero() ? new r(NaN) : e.isZero() || t.isZero() ? e : t.isFinite() ? t.lt(55) ? e.div(Math.pow(2, t.toNumber()) + "").floor() : e.div(new r(2).pow(t)).floor() : new r(e.isNegative() ? -1 : e.isFinite() ? 0 : NaN)
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = r(4),
				s = n(r(0)),
				u = n(r(11)),
				c = n(r(38)),
				f = n(r(33)),
				l = n(r(24)),
				p = n(r(87)),
				h = n(r(36)),
				m = n(r(17)),
				d = n(r(8)),
				v = n(r(6)),
				g = a("rightLogShift", {
						"number, number": function (e, t) {
							if (!i(e) || !i(t))
								throw new Error("Integers expected in function rightLogShift");
							return e >>> t
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = p(e, t, g, !1);
									break;
								default:
									r = l(t, e, g, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, g, !1);
									break;
								default:
									r = d(e, t, g)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return g(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return g(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return g(e, s(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							if (!u(t, 0)) {
								var r;
								switch (e.storage()) {
								case "sparse":
									r = m(e, t, g, !1);
									break;
								default:
									r = v(e, t, g, !1)
								}
								return r
							}
							return e.clone()
						},
						"number | BigNumber, Matrix": function (e, t) {
							if (!u(e, 0)) {
								var r;
								switch (t.storage()) {
								case "sparse":
									r = h(t, e, g, !0);
									break;
								default:
									r = v(t, e, g, !0)
								}
								return r
							}
							return c(t.size(), t.storage())
						},
						"Array, number | BigNumber": function (e, t) {
							return g(s(e), t).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return g(e, s(t)).valueOf()
						}
					});
				return g.toTex = {
					2: "\\left(${args[0]}" + o.operators.rightLogShift + "${args[1]}\\right)"
				},
				g
			}
			var i = r(3).isInteger;
			t.name = "rightLogShift",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(458), r(459), r(136), r(460)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(18)),
				o = n(r(136)),
				s = n(r(57)),
				u = n(r(48)),
				c = i("bellNumbers", {
						"number | BigNumber": function (e) {
							if (!u(e) || s(e))
								throw new TypeError("Non-negative integer value expected in function bellNumbers");
							for (var t = 0, r = 0; r <= e; r++)
								t = a(t, o(e, r));
							return t
						}
					});
				return c.toTex = {
					1: "\\mathrm{B}_{${args[0]}}"
				},
				c
			}
			t.name = "bellNumbers",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(70)),
				o = n(r(20)),
				s = n(r(55)),
				u = n(r(48)),
				c = n(r(34)),
				f = i("composition", {
						"number | BigNumber, number | BigNumber": function (e, t) {
							if (!(u(e) && s(e) && u(t) && s(t)))
								throw new TypeError("Positive integer value expected in function composition");
							if (c(t, e))
								throw new TypeError("k must be less than or equal to n in function composition");
							return a(o(e, -1), o(t, -1))
						}
					});
				return f.toTex = void 0,
				f
			}
			t.name = "composition",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(18)),
				o = n(r(47)),
				s = n(r(12)),
				u = n(r(70)),
				c = n(r(57)),
				f = n(r(48)),
				l = i("catalan", {
						"number | BigNumber": function (e) {
							if (!f(e) || c(e))
								throw new TypeError("Non-negative integer value expected in function catalan");
							return o(u(s(e, 2), e), a(e, 1))
						}
					});
				return l.toTex = {
					1: "\\mathrm{C}_{${args[0]}}"
				},
				l
			}
			t.name = "catalan",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(462), r(123), r(463), r(464)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("arg", {
						number: function (e) {
							return Math.atan2(0, e)
						},
						BigNumber: function (t) {
							return e.BigNumber.atan2(0, t)
						},
						Complex: function (e) {
							return e.arg()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\arg\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "arg",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("im", {
						number: function (e) {
							return 0
						},
						BigNumber: function (t) {
							return new e.BigNumber(0)
						},
						Complex: function (e) {
							return e.im
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\Im\\left\\lbrace${args[0]}\\right\\rbrace"
				},
				a
			}
			var i = r(1);
			t.name = "im",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("re", {
						number: function (e) {
							return e
						},
						BigNumber: function (e) {
							return e
						},
						Complex: function (e) {
							return e.re
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\Re\\left\\lbrace${args[0]}\\right\\rbrace"
				},
				a
			}
			var i = r(1);
			t.name = "re",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(466), r(467)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e) {
					return 2 === e.length && "number" == typeof e[0] && "number" == typeof e[1]
				}
				function o(e) {
					return 3 === e.length && "number" == typeof e[0] && "number" == typeof e[1] && "number" == typeof e[2]
				}
				function s(e) {
					return 4 === e.length && "number" == typeof e[0] && "number" == typeof e[1] && "number" == typeof e[2] && "number" == typeof e[3]
				}
				function u(e, r, n, i) {
					var a = e,
					o = n,
					s = d(a, r),
					u = d(o, i),
					c = s[0] * u[1] - u[0] * s[1];
					if (l(c) < t.epsilon)
						return null;
					var f = (u[0] * a[1] - u[1] * a[0] - u[0] * o[1] + u[1] * o[0]) / c;
					return p(m(s, f), a)
				}
				function c(e, t, r, n, i, a, o, s, u, c, f, l) {
					var p = (e - o) * (c - o) + (t - s) * (f - s) + (r - u) * (l - u),
					h = (c - o) * (n - e) + (f - s) * (i - t) + (l - u) * (a - r),
					m = (e - o) * (n - e) + (t - s) * (i - t) + (r - u) * (a - r),
					d = (c - o) * (c - o) + (f - s) * (f - s) + (l - u) * (l - u),
					v = (n - e) * (n - e) + (i - t) * (i - t) + (a - r) * (a - r),
					g = (p * h - m * d) / (v * d - h * h),
					y = (p + g * h) / d,
					x = e + g * (n - e),
					w = t + g * (i - t),
					b = r + g * (a - r),
					N = o + y * (c - o),
					E = s + y * (f - s),
					M = u + y * (l - u);
					return x === N && w === E && b === M ? [x, w, b] : null
				}
				function f(e, t, r, n, i, a, o, s, u, c) {
					var f = (c - e * o - t * s - r * u) / (n * o + i * s + a * u - e * o - t * s - r * u),
					l = e + f * (n - e),
					p = t + f * (i - t),
					h = r + f * (a - r);
					return [l, p, h]
				}
				var l = n(r(29)),
				p = n(r(18)),
				h = n(r(0)),
				m = n(r(12)),
				d = n(r(21)),
				v = i("intersect", {
						"Array, Array, Array": function (e, t, r) {
							if (!o(e))
								throw new TypeError("Array with 3 numbers expected for first argument");
							if (!o(t))
								throw new TypeError("Array with 3 numbers expected for second argument");
							if (!s(r))
								throw new TypeError("Array with 4 numbers expected as third argument");
							return f(e[0], e[1], e[2], t[0], t[1], t[2], r[0], r[1], r[2], r[3])
						},
						"Array, Array, Array, Array": function (e, t, r, n) {
							if (2 === e.length) {
								if (!a(e))
									throw new TypeError("Array with 2 numbers expected for first argument");
								if (!a(t))
									throw new TypeError("Array with 2 numbers expected for second argument");
								if (!a(r))
									throw new TypeError("Array with 2 numbers expected for third argument");
								if (!a(n))
									throw new TypeError("Array with 2 numbers expected for fourth argument");
								return u(e, t, r, n)
							}
							if (3 === e.length) {
								if (!o(e))
									throw new TypeError("Array with 3 numbers expected for first argument");
								if (!o(t))
									throw new TypeError("Array with 3 numbers expected for second argument");
								if (!o(r))
									throw new TypeError("Array with 3 numbers expected for third argument");
								if (!o(n))
									throw new TypeError("Array with 3 numbers expected for fourth argument");
								return c(e[0], e[1], e[2], t[0], t[1], t[2], r[0], r[1], r[2], n[0], n[1], n[2])
							}
							throw new TypeError("Arrays with two or thee dimensional points expected")
						},
						"Matrix, Matrix, Matrix": function (e, t, r) {
							return h(v(e.valueOf(), t.valueOf(), r.valueOf()))
						},
						"Matrix, Matrix, Matrix, Matrix": function (e, t, r, n) {
							return h(v(e.valueOf(), t.valueOf(), r.valueOf(), n.valueOf()))
						}
					});
				return v
			}
			t.name = "intersect",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, s) {
				var m = (n(r(0)), s("distance", {
						"Array, Array, Array": function (e, t, r) {
							if (2 == e.length && 2 == t.length && 2 == r.length) {
								if (!i(e))
									throw new TypeError("Array with 2 numbers expected for first argument");
								if (!i(t))
									throw new TypeError("Array with 2 numbers expected for second argument");
								if (!i(r))
									throw new TypeError("Array with 2 numbers expected for third argument");
								var n = (r[1] - r[0]) / (t[1] - t[0]),
								a = n * n * t[0],
								o = -1 * (n * t[0]),
								s = e[1];
								return c(e[0], e[1], a, o, s)
							}
							throw new TypeError("Invalid Arguments: Try again")
						},
						"Object, Object, Object": function (e, t, r) {
							if (2 == Object.keys(e).length && 2 == Object.keys(t).length && 2 == Object.keys(r).length) {
								if (!i(e))
									throw new TypeError("Values of pointX and pointY should be numbers");
								if (!i(t))
									throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers");
								if (!i(r))
									throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers");
								if (e.hasOwnProperty("pointX") && e.hasOwnProperty("pointY") && t.hasOwnProperty("lineOnePtX") && t.hasOwnProperty("lineOnePtY") && r.hasOwnProperty("lineTwoPtX") && r.hasOwnProperty("lineTwoPtY")) {
									var n = (r.lineTwoPtY - r.lineTwoPtX) / (t.lineOnePtY - t.lineOnePtX),
									a = n * n * t.lineOnePtX,
									o = -1 * (n * t.lineOnePtX),
									s = e.pointX;
									return c(e.pointX, e.pointY, a, o, s)
								}
								throw new TypeError("Key names do not match")
							}
							throw new TypeError("Invalid Arguments: Try again")
						},
						"Array, Array": function (e, t) {
							if (2 == e.length && 3 == t.length) {
								if (!i(e))
									throw new TypeError("Array with 2 numbers expected for first argument");
								if (!a(t))
									throw new TypeError("Array with 3 numbers expected for second argument");
								return c(e[0], e[1], t[0], t[1], t[2])
							}
							if (3 == e.length && 6 == t.length) {
								if (!a(e))
									throw new TypeError("Array with 3 numbers expected for first argument");
								if (!o(t))
									throw new TypeError("Array with 6 numbers expected for second argument");
								return f(e[0], e[1], e[2], t[0], t[1], t[2], t[3], t[4], t[5])
							}
							if (2 == e.length && 2 == t.length) {
								if (!i(e))
									throw new TypeError("Array with 2 numbers expected for first argument");
								if (!i(t))
									throw new TypeError("Array with 2 numbers expected for second argument");
								return l(e[0], e[1], t[0], t[1])
							}
							if (3 == e.length && 3 == t.length) {
								if (!a(e))
									throw new TypeError("Array with 3 numbers expected for first argument");
								if (!a(t))
									throw new TypeError("Array with 3 numbers expected for second argument");
								return p(e[0], e[1], e[2], t[0], t[1], t[2])
							}
							throw new TypeError("Invalid Arguments: Try again")
						},
						"Object, Object": function (e, t) {
							if (2 == Object.keys(e).length && 3 == Object.keys(t).length) {
								if (!i(e))
									throw new TypeError("Values of pointX and pointY should be numbers");
								if (!a(t))
									throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers");
								if (e.hasOwnProperty("pointX") && e.hasOwnProperty("pointY") && t.hasOwnProperty("xCoeffLine") && t.hasOwnProperty("yCoeffLine") && t.hasOwnProperty("yCoeffLine"))
									return c(e.pointX, e.pointY, t.xCoeffLine, t.yCoeffLine, t.constant);
								throw new TypeError("Key names do not match")
							}
							if (3 == Object.keys(e).length && 6 == Object.keys(t).length) {
								if (!a(e))
									throw new TypeError("Values of pointX, pointY and pointZ should be numbers");
								if (!o(t))
									throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers");
								if (e.hasOwnProperty("pointX") && e.hasOwnProperty("pointY") && t.hasOwnProperty("x0") && t.hasOwnProperty("y0") && t.hasOwnProperty("z0") && t.hasOwnProperty("a") && t.hasOwnProperty("b") && t.hasOwnProperty("c"))
									return f(e.pointX, e.pointY, e.pointZ, t.x0, t.y0, t.z0, t.a, t.b, t.c);
								throw new TypeError("Key names do not match")
							}
							if (2 == Object.keys(e).length && 2 == Object.keys(t).length) {
								if (!i(e))
									throw new TypeError("Values of pointOneX and pointOneY should be numbers");
								if (!i(t))
									throw new TypeError("Values of pointTwoX and pointTwoY should be numbers");
								if (e.hasOwnProperty("pointOneX") && e.hasOwnProperty("pointOneY") && t.hasOwnProperty("pointTwoX") && t.hasOwnProperty("pointTwoY"))
									return l(e.pointOneX, e.pointOneY, t.pointTwoX, t.pointTwoY);
								throw new TypeError("Key names do not match")
							}
							if (3 == Object.keys(e).length && 3 == Object.keys(t).length) {
								if (!a(e))
									throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers");
								if (!a(t))
									throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers");
								if (e.hasOwnProperty("pointOneX") && e.hasOwnProperty("pointOneY") && e.hasOwnProperty("pointOneZ") && t.hasOwnProperty("pointTwoX") && t.hasOwnProperty("pointTwoY") && t.hasOwnProperty("pointTwoZ"))
									return p(e.pointOneX, e.pointOneY, e.pointOneZ, t.pointTwoX, t.pointTwoY, t.pointTwoZ);
								throw new TypeError("Key names do not match")
							}
							throw new TypeError("Invalid Arguments: Try again")
						},
						Array: function (e) {
							if (!u(e))
								throw new TypeError("Incorrect array format entered for pairwise distance calculation");
							return h(e)
						}
					}));
				return m
			}
			function i(e) {
				return e.constructor !== Array && (e = s(e)),
				"number" == typeof e[0] && "number" == typeof e[1]
			}
			function a(e) {
				return e.constructor !== Array && (e = s(e)),
				"number" == typeof e[0] && "number" == typeof e[1] && "number" == typeof e[2]
			}
			function o(e) {
				return e.constructor !== Array && (e = s(e)),
				"number" == typeof e[0] && "number" == typeof e[1] && "number" == typeof e[2] && "number" == typeof e[3] && "number" == typeof e[4] && "number" == typeof e[5]
			}
			function s(e) {
				for (var t = Object.keys(e), r = [], n = 0; n < t.length; n++)
					r.push(e[t[n]]);
				return r
			}
			function u(e) {
				if (2 == e[0].length && "number" == typeof e[0][0] && "number" == typeof e[0][1]) {
					for (var t in e)
						if (2 != e[t].length || "number" != typeof e[t][0] || "number" != typeof e[t][1])
							return !1
				} else {
					if (3 != e[0].length || "number" != typeof e[0][0] || "number" != typeof e[0][1] || "number" != typeof e[0][2])
						return !1;
					for (var t in e)
						if (3 != e[t].length || "number" != typeof e[t][0] || "number" != typeof e[t][1] || "number" != typeof e[t][2])
							return !1
				}
				return !0
			}
			function c(e, t, r, n, i) {
				var a = Math.abs(r * e + n * t + i),
				o = Math.pow(r * r + n * n, .5),
				s = a / o;
				return s
			}
			function f(e, t, r, n, i, a, o, s, u) {
				var c = [(i - t) * u - (a - r) * s, (a - r) * o - (n - e) * u, (n - e) * s - (i - t) * o];
				c = Math.pow(c[0] * c[0] + c[1] * c[1] + c[2] * c[2], .5);
				var f = Math.pow(o * o + s * s + u * u, .5),
				l = c / f;
				return l
			}
			function l(e, t, r, n) {
				var i = n - t,
				a = r - e,
				o = i * i + a * a,
				s = Math.pow(o, .5);
				return s
			}
			function p(e, t, r, n, i, a) {
				var o = a - r,
				s = i - t,
				u = n - e,
				c = o * o + s * s + u * u,
				f = Math.pow(c, .5);
				return f
			}
			function h(e) {
				for (var t = [], r = 0; r < e.length - 1; r++)
					for (var n = r + 1; n < e.length; n++)
						2 == e[0].length ? t.push(l(e[r][0], e[r][1], e[n][0], e[n][1])) : 3 == e[0].length && t.push(p(e[r][0], e[r][1], e[r][2], e[n][0], e[n][1], e[n][2]));
				return t
			}
			t.name = "distance",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(469), r(138), r(470), r(471)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = r(4),
				o = n(r(0)),
				s = n(r(38)),
				u = n(r(138)),
				c = (n(r(82)), n(r(24))),
				f = n(r(68)),
				l = n(r(17)),
				p = n(r(8)),
				h = n(r(6)),
				m = i("and", {
						"number, number": function (e, t) {
							return !(!e || !t)
						},
						"Complex, Complex": function (e, t) {
							return !(0 === e.re && 0 === e.im || 0 === t.re && 0 === t.im)
						},
						"BigNumber, BigNumber": function (e, t) {
							return !(e.isZero() || t.isZero() || e.isNaN() || t.isNaN())
						},
						"Unit, Unit": function (e, t) {
							return m(e.value, t.value)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = f(e, t, m, !1);
									break;
								default:
									r = c(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m, !1);
									break;
								default:
									r = p(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(o(e), o(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(o(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, o(t))
						},
						"Matrix, any": function (e, t) {
							if (u(t))
								return s(e.size(), e.storage());
							var r;
							switch (e.storage()) {
							case "sparse":
								r = l(e, t, m, !1);
								break;
							default:
								r = h(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							if (u(e))
								return s(e.size(), e.storage());
							var r;
							switch (t.storage()) {
							case "sparse":
								r = l(t, e, m, !0);
								break;
							default:
								r = h(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return m(o(e), t).valueOf()
						},
						"any, Array": function (e, t) {
							return m(e, o(t)).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + a.operators.and + "${args[1]}\\right)"
				},
				m
			}
			t.name = "and",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = r(4),
				o = n(r(0)),
				s = n(r(15)),
				u = n(r(60)),
				c = n(r(16)),
				f = n(r(8)),
				l = n(r(6)),
				p = i("or", {
						"number, number": function (e, t) {
							return !(!e && !t)
						},
						"Complex, Complex": function (e, t) {
							return 0 !== e.re || 0 !== e.im || 0 !== t.re || 0 !== t.im
						},
						"BigNumber, BigNumber": function (e, t) {
							return !e.isZero() && !e.isNaN() || !t.isZero() && !t.isNaN()
						},
						"Unit, Unit": function (e, t) {
							return p(e.value, t.value)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, p);
									break;
								default:
									r = s(t, e, p, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = s(e, t, p, !1);
									break;
								default:
									r = f(e, t, p)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return p(o(e), o(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return p(o(e), t)
						},
						"Matrix, Array": function (e, t) {
							return p(e, o(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = c(e, t, p, !1);
								break;
							default:
								r = l(e, t, p, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = c(t, e, p, !0);
								break;
							default:
								r = l(t, e, p, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return l(o(e), t, p, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return l(o(t), e, p, !0).valueOf()
						}
					});
				return p.toTex = {
					2: "\\left(${args[0]}" + a.operators.or + "${args[1]}\\right)"
				},
				p
			}
			t.name = "or",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = r(4),
				o = n(r(0)),
				s = n(r(15)),
				u = n(r(26)),
				c = n(r(16)),
				f = n(r(8)),
				l = n(r(6)),
				p = i("xor", {
						"number, number": function (e, t) {
							return !!e != !!t
						},
						"Complex, Complex": function (e, t) {
							return (0 !== e.re || 0 !== e.im) != (0 !== t.re || 0 !== t.im)
						},
						"BigNumber, BigNumber": function (e, t) {
							return (!e.isZero() && !e.isNaN()) != (!t.isZero() && !t.isNaN())
						},
						"Unit, Unit": function (e, t) {
							return p(e.value, t.value)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, p);
									break;
								default:
									r = s(t, e, p, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = s(e, t, p, !1);
									break;
								default:
									r = f(e, t, p)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return p(o(e), o(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return p(o(e), t)
						},
						"Matrix, Array": function (e, t) {
							return p(e, o(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = c(e, t, p, !1);
								break;
							default:
								r = l(e, t, p, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = c(t, e, p, !0);
								break;
							default:
								r = l(t, e, p, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return l(o(e), t, p, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return l(o(t), e, p, !0).valueOf()
						}
					});
				return p.toTex = {
					2: "\\left(${args[0]}" + a.operators.xor + "${args[1]}\\right)"
				},
				p
			}
			t.name = "xor",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(64), r(473), r(115), r(474), r(475), r(61), r(476), r(477), r(478), r(114), r(479), r(139), r(480), r(88), r(117), r(481), r(482), r(28), r(140), r(484), r(22), r(135), r(67), r(38)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, t) {
					var r = Math.max(i.size(e).length, i.size(t).length);
					e = i.squeeze(e),
					t = i.squeeze(t);
					var n = i.size(e),
					a = i.size(t);
					if (1 != n.length || 1 != a.length || 3 != n[0] || 3 != a[0])
						throw new RangeError("Vectors with length 3 expected (Size A = [" + n.join(", ") + "], B = [" + a.join(", ") + "])");
					var o = [u(c(e[1], t[2]), c(e[2], t[1])), u(c(e[2], t[0]), c(e[0], t[2])), u(c(e[0], t[1]), c(e[1], t[0]))];
					return r > 1 ? [o] : o
				}
				var s = n(r(0)),
				u = n(r(21)),
				c = n(r(12)),
				f = a("cross", {
						"Matrix, Matrix": function (e, t) {
							return s(o(e.toArray(), t.toArray()))
						},
						"Matrix, Array": function (e, t) {
							return s(o(e.toArray(), t))
						},
						"Array, Matrix": function (e, t) {
							return s(o(e, t.toArray()))
						},
						"Array, Array": o
					});
				return f.toTex = {
					2: "\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"
				},
				f
			}
			var i = r(2);
			t.name = "cross",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(e, t, r, n) {
					if (!a(t))
						throw new TypeError("Second parameter in function diag must be an integer");
					var i = t > 0 ? t : 0,
					o = t < 0 ? -t : 0;
					switch (r.length) {
					case 1:
						return u(e, t, n, r[0], o, i);
					case 2:
						return c(e, t, n, r, o, i)
					}
					throw new RangeError("Matrix for function diag must be 2 dimensional")
				}
				function u(t, r, n, i, a, o) {
					var s = [i + a, i + o],
					u = e.Matrix.storage(n || "dense"),
					c = u.diagonal(s, t, r);
					return null !== n ? c : c.valueOf()
				}
				function c(t, r, n, i, a, o) {
					if (e.isMatrix(t)) {
						var s = t.diagonal(r);
						return null !== n ? n !== s.storage() ? f(s, n) : s : s.valueOf()
					}
					for (var u = Math.min(i[0] - a, i[1] - o), c = [], l = 0; l < u; l++)
						c[l] = t[l + a][l + o];
					return null !== n ? f(c) : c
				}
				var f = n(r(0)),
				l = o("diag", {
						Array: function (e) {
							return s(e, 0, i.size(e), null)
						},
						"Array, number": function (e, t) {
							return s(e, t, i.size(e), null)
						},
						"Array, BigNumber": function (e, t) {
							return s(e, t.toNumber(), i.size(e), null)
						},
						"Array, string": function (e, t) {
							return s(e, 0, i.size(e), t)
						},
						"Array, number, string": function (e, t, r) {
							return s(e, t, i.size(e), r)
						},
						"Array, BigNumber, string": function (e, t, r) {
							return s(e, t.toNumber(), i.size(e), r)
						},
						Matrix: function (e) {
							return s(e, 0, e.size(), e.storage())
						},
						"Matrix, number": function (e, t) {
							return s(e, t, e.size(), e.storage())
						},
						"Matrix, BigNumber": function (e, t) {
							return s(e, t.toNumber(), e.size(), e.storage())
						},
						"Matrix, string": function (e, t) {
							return s(e, 0, e.size(), t)
						},
						"Matrix, number, string": function (e, t, r) {
							return s(e, t, e.size(), r)
						},
						"Matrix, BigNumber, string": function (e, t, r) {
							return s(e, t.toNumber(), e.size(), r)
						}
					});
				return l.toTex = void 0,
				l
			}
			var i = r(2),
			a = (r(5).clone, r(3).isInteger);
			t.name = "diag",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, t) {
					var r = i(e),
					n = i(t),
					a = r[0];
					if (1 !== r.length || 1 !== n.length)
						throw new RangeError("Vector expected");
					if (r[0] != n[0])
						throw new RangeError("Vectors must have equal length (" + r[0] + " != " + n[0] + ")");
					if (0 == a)
						throw new RangeError("Cannot calculate the dot product of empty vectors");
					for (var o = 0, c = 0; c < a; c++)
						o = s(o, u(e[c], t[c]));
					return o
				}
				var s = n(r(18)),
				u = n(r(12)),
				c = a("dot", {
						"Matrix, Matrix": function (e, t) {
							return o(e.toArray(), t.toArray())
						},
						"Matrix, Array": function (e, t) {
							return o(e.toArray(), t)
						},
						"Array, Matrix": function (e, t) {
							return o(e, t.toArray())
						},
						"Array, Array": o
					});
				return c.toTex = {
					2: "\\left(${args[0]}\\cdot${args[1]}\\right)"
				},
				c
			}
			var i = r(2).size;
			t.name = "dot",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var s = n(r(0)),
				u = a("filter", {
						"Array, function": i,
						"Matrix, function": function (e, t) {
							return s(i(e.toArray(), t))
						},
						"Array, RegExp": o,
						"Matrix, RegExp": function (e, t) {
							return s(o(e.toArray(), t))
						}
					});
				return u.toTex = void 0,
				u
			}
			function i(e, t) {
				var r = s(t);
				return a(e, function (e, n, i) {
					return 1 === r ? t(e) : 2 === r ? t(e, [n]) : t(e, [n], i)
				})
			}
			var a = r(2).filter,
			o = r(2).filterRegExp,
			s = r(32).maxArgumentCount;
			t.name = "filter",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = o("flatten", {
						Array: function (e) {
							return a(i(e))
						},
						Matrix: function (e) {
							var t = a(i(e.toArray()));
							return s(t)
						}
					});
				return u.toTex = void 0,
				u
			}
			var i = r(5).clone,
			a = r(2).flatten;
			t.name = "flatten",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("forEach", {
						"Array, function": i,
						"Matrix, function": function (e, t) {
							return e.forEach(t)
						}
					});
				return a.toTex = void 0,
				a
			}
			function i(e, t) {
				var r = a(t),
				n = function (i, a) {
					Array.isArray(i) ? o(i, function (e, t) {
						n(e, a.concat(t))
					}) : 1 === r ? t(i) : 2 === r ? t(i, a) : t(i, a, e)
				};
				n(e, [])
			}
			var a = r(32).maxArgumentCount,
			o = r(2).forEach;
			t.name = "forEach",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, t) {
					if (1 === i(e).length && (e = [e]), 1 === i(t).length && (t = [t]), i(e).length > 2 || i(t).length > 2)
						throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = " + JSON.stringify(e.length) + ", y = " + JSON.stringify(t.length) + ")");
					var r = [],
					n = [];
					return e.map(function (e) {
						return t.map(function (t) {
							return e.map(function (e) {
								return t.map(function (t) {
									return n.push(u(e, t))
								})
							}, r.push(n = []))
						})
					}, r = []) && r
				}
				var s = n(r(0)),
				u = n(r(23)),
				c = a("kron", {
						"Matrix, Matrix": function (e, t) {
							return s(o(e.toArray(), t.toArray()))
						},
						"Matrix, Array": function (e, t) {
							return s(o(e.toArray(), t))
						},
						"Array, Matrix": function (e, t) {
							return s(o(e, t.toArray()))
						},
						"Array, Array": o
					});
				return c
			}
			var i = r(2).size;
			t.name = "kron",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				function s(t, r) {
					var n = u(t),
					i = n ? new e.BigNumber(1) : 1;
					if (c(t), r) {
						var o = f(r);
						return t.length > 0 ? o.resize(t, i) : o
					}
					var s = [];
					return t.length > 0 ? a(s, t, i) : s
				}
				function u(t) {
					var r = !1;
					return t.forEach(function (t, n, i) {
						e.isBigNumber(t) && (r = !0, i[n] = t.toNumber())
					}),
					r
				}
				function c(e) {
					e.forEach(function (e) {
						if ("number" != typeof e || !i(e) || e < 0)
							throw new Error("Parameters in function ones must be positive integers")
					})
				}
				var f = n(r(0)),
				l = o("ones", {
						"": function () {
							return "Array" === t.matrix ? s([]) : s([], "default")
						},
						"...number | BigNumber | string": function (e) {
							var r = e[e.length - 1];
							if ("string" == typeof r) {
								var n = e.pop();
								return s(e, n)
							}
							return "Array" === t.matrix ? s(e) : s(e, "default")
						},
						Array: s,
						Matrix: function (e) {
							var t = e.storage();
							return s(e.valueOf(), t)
						},
						"Array | Matrix, string": function (e, t) {
							return s(e.valueOf(), t)
						}
					});
				return l.toTex = void 0,
				l
			}
			var i = r(3).isInteger,
			a = r(2).resize;
			t.name = "ones",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = o("reshape", {
						"Matrix, Array": function (e, t) {
							return e.reshape ? e.reshape(t) : s(a.reshape(e.valueOf(), t))
						},
						"Array, Array": function (e, t) {
							return t.forEach(function (e) {
								if (!i(e))
									throw new TypeError("Invalid size for dimension: " + e)
							}),
							a.reshape(e, t)
						}
					});
				return u.toTex = void 0,
				u
			}
			var i = (r(10), r(3).isInteger),
			a = r(2);
			t.name = "reshape",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, f) {
				function l(e, t, r) {
					if (void 0 !== r) {
						if ("string" != typeof r || 1 !== r.length)
							throw new TypeError("Single character expected as defaultValue")
					} else
						r = " ";
					if (1 !== t.length)
						throw new i(t.length, 1);
					var n = t[0];
					if ("number" != typeof n || !o(n))
						throw new TypeError("Invalid size, must contain positive integers (size: " + s(t) + ")");
					if (e.length > n)
						return e.substring(0, n);
					if (e.length < n) {
						for (var a = e, u = 0, c = n - e.length; u < c; u++)
							a += r;
						return a
					}
					return e
				}
				var p = n(r(0)),
				h = function (r, n, i) {
					if (2 != arguments.length && 3 != arguments.length)
						throw new a("resize", arguments.length, 2, 3);
					if (e.isMatrix(n) && (n = n.valueOf()), e.isBigNumber(n[0]) && (n = n.map(function (t) {
									return e.isBigNumber(t) ? t.toNumber() : t
								})), e.isMatrix(r))
						return r.resize(n, i, !0);
					if ("string" == typeof r)
						return l(r, n, i);
					var o = !Array.isArray(r) && "Array" !== t.matrix;
					if (0 == n.length) {
						for (; Array.isArray(r); )
							r = r[0];
						return u(r)
					}
					Array.isArray(r) || (r = [r]),
					r = u(r);
					var s = c.resize(r, n, i);
					return o ? p(s) : s
				};
				return h.toTex = void 0,
				h
			}
			var i = r(10),
			a = r(50),
			o = r(3).isInteger,
			s = r(9).format,
			u = r(5).clone,
			c = r(2);
			t.name = "resize",
			t.factory = n
		}, function (e, t) {
			e.exports = function e(t, r) {
				"use strict";
				var n,
				i,
				a = /(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,
				o = /(^[ ]*|[ ]*$)/g,
				s = /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,
				u = /^0x[0-9a-f]+$/i,
				c = /^0/,
				f = function (t) {
					return e.insensitive && ("" + t).toLowerCase() || "" + t
				},
				l = f(t).replace(o, "") || "",
				p = f(r).replace(o, "") || "",
				h = l.replace(a, "\0$1\0").replace(/\0$/, "").replace(/^\0/, "").split("\0"),
				m = p.replace(a, "\0$1\0").replace(/\0$/, "").replace(/^\0/, "").split("\0"),
				d = parseInt(l.match(u), 16) || 1 !== h.length && l.match(s) && Date.parse(l),
				v = parseInt(p.match(u), 16) || d && p.match(s) && Date.parse(p) || null;
				if (v) {
					if (d < v)
						return -1;
					if (d > v)
						return 1
				}
				for (var g = 0, y = Math.max(h.length, m.length); g < y; g++) {
					if (n = !(h[g] || "").match(c) && parseFloat(h[g]) || h[g] || 0, i = !(m[g] || "").match(c) && parseFloat(m[g]) || m[g] || 0, isNaN(n) !== isNaN(i))
						return isNaN(n) ? 1 : -1;
					if (typeof n != typeof i && (n += "", i += ""), n < i)
						return -1;
					if (n > i)
						return 1
				}
				return 0
			}
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = o("squeeze", {
						Array: function (e) {
							return a.squeeze(i.clone(e))
						},
						Matrix: function (e) {
							var t = a.squeeze(e.toArray());
							return Array.isArray(t) ? s(t) : t
						},
						any: function (e) {
							return i.clone(e)
						}
					});
				return u.toTex = void 0,
				u
			}
			var i = r(5),
			a = r(2);
			t.name = "squeeze",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(70), r(69), r(137), r(486), r(487), r(488), r(489), r(493), r(494)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e, t) {
					var r = t.size().length,
					n = e.size().length;
					if (r > 1)
						throw new Error("first object must be one dimensional");
					if (n > 1)
						throw new Error("second object must be one dimensional");
					if (r !== n)
						throw new Error("Length of two vectors must be equal");
					var i = u(e);
					if (0 === i)
						throw new Error("Sum of elements in first object must be non zero");
					var a = u(t);
					if (0 === a)
						throw new Error("Sum of elements in second object must be non zero");
					var o = s(e, u(e)),
					h = s(t, u(t)),
					m = u(c(o, l(f(o, h))));
					return p(m) ? m : Number.NaN
				}
				var o = n(r(0)),
				s = n(r(47)),
				u = n(r(141)),
				c = n(r(12)),
				f = n(r(132)),
				l = n(r(134)),
				p = n(r(75)),
				h = i("kldivergence", {
						"Array, Array": function (e, t) {
							return a(o(e), o(t))
						},
						"Matrix, Array": function (e, t) {
							return a(e, o(t))
						},
						"Array, Matrix": function (e, t) {
							return a(o(e), t)
						},
						"Matrix, Matrix": function (e, t) {
							return a(e, t)
						}
					});
				return h
			}
			t.name = "kldivergence",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(18)),
				s = n(r(12)),
				u = n(r(47)),
				c = n(r(69)),
				f = n(r(48)),
				l = n(r(55));
				return a("multinomial", {
					"Array | Matrix": function (e) {
						var t = 0,
						r = 1;
						return i(e, function (e) {
							if (!f(e) || !l(e))
								throw new TypeError("Positive integer value expected in function multinomial");
							t = o(t, e),
							r = s(r, c(e))
						}),
						u(c(t), r)
					}
				})
			}
			var i = r(42);
			t.name = "multinomial",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(69)),
				u = o("permutations", {
						"number | BigNumber": s,
						"number, number": function (e, t) {
							var r,
							n;
							if (!a(e) || e < 0)
								throw new TypeError("Positive integer value expected in function permutations");
							if (!a(t) || t < 0)
								throw new TypeError("Positive integer value expected in function permutations");
							if (t > e)
								throw new TypeError("second argument k must be less than or equal to first argument n");
							for (r = 1, n = e - t + 1; n <= e; n++)
								r *= n;
							return r
						},
						"BigNumber, BigNumber": function (t, r) {
							var n,
							a;
							if (!i(t) || !i(r))
								throw new TypeError("Positive integer value expected in function permutations");
							if (r.gt(t))
								throw new TypeError("second argument k must be less than or equal to first argument n");
							for (n = new e.BigNumber(1), a = t.minus(r).plus(1); a.lte(t); a = a.plus(1))
								n = n.times(a);
							return n
						}
					});
				return u.toTex = void 0,
				u
			}
			function i(e) {
				return e.isInteger() && e.gte(0)
			}
			var a = r(3).isInteger;
			t.name = "permutations",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(89)),
				o = a("uniform").pickRandom;
				return o.toTex = void 0,
				o
			}
			t.name = "pickRandom",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n, o) {
				function s(e) {
					c = null === e ? a : i(String(e))
				}
				function u() {
					return c()
				}
				var c;
				return s(t.randomSeed),
				o.on("config", function (e, t, r) {
					void 0 !== r.randomSeed && s(e.randomSeed)
				}),
				u
			}
			var i = r(491),
			a = i();
			t.factory = n,
			t.math = !0
		}, function (e, t, r) {
			"use strict";
			(function (t) {
				function r(e) {
					var t,
					r = e.length,
					n = this,
					i = 0,
					a = n.i = n.j = 0,
					o = n.S = [];
					for (r || (e = [r++]); i < s; )
						o[i] = i++;
					for (i = 0; i < s; i++)
						o[i] = o[a = d & a + e[i % r] + (t = o[i])], o[a] = t;
					(n.g = function (e) {
						for (var t, r = 0, i = n.i, a = n.j, o = n.S; e--; )
							t = o[i = d & i + 1], r = r * s + o[d & (o[i] = o[a = d & a + t]) + (o[a] = t)];
						return n.i = i,
						n.j = a,
						r
					})(s)
				}
				function n(e, t) {
					var r,
					i = [],
					a = (typeof e)[0];
					if (t && "o" == a)
						for (r in e)
							try {
								i.push(n(e[r], t - 1))
							} catch (e) {}
					return i.length ? i : "s" == a ? e : e + "\0"
				}
				function i(e, t) {
					for (var r, n = e + "", i = 0; i < n.length; )
						t[d & i] = d & (r ^= 19 * t[d & i]) + n.charCodeAt(i++);
					return o(t)
				}
				function a(e) {
					try {
						return l.crypto.getRandomValues(e = new Uint8Array(s)),
						o(e)
					} catch (e) {
						return [+new Date, l, l.navigator && l.navigator.plugins, l.screen, o(f)]
					}
				}
				function o(e) {
					return String.fromCharCode.apply(0, e)
				}
				var s = 256,
				u = 6,
				c = 52,
				f = [],
				l = "undefined" == typeof t ? window : t,
				p = Math.pow(s, u),
				h = Math.pow(2, c),
				m = 2 * h,
				d = s - 1,
				v = Math.random;
				e.exports = function (t, c) {
					if (c && c.global === !0)
						return c.global = !1, Math.random = e.exports(t, c), c.global = !0, Math.random;
					var l = c && c.entropy || !1,
					d = [],
					v = (i(n(l ? [t, o(f)] : 0 in arguments ? t : a(), 3), d), new r(d));
					return i(o(v.S), f),
					function () {
						for (var e = v.g(u), t = p, r = 0; e < h; )
							e = (e + r) * s, t *= s, r = v.g(1);
						for (; e >= m; )
							e /= 2, t /= 2, r >>>= 1;
						return (e + r) / t
					}
				},
				e.exports.resetGlobal = function () {
					Math.random = v
				},
				i(Math.random(), f)
			}).call(t, r(492))
		}, function (e, t) {
			var r;
			r = function () {
				return this
			}
			();
			try {
				r = r || Function("return this")() || (0, eval)("this")
			} catch (e) {
				"object" == typeof window && (r = window)
			}
			e.exports = r
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(89)),
				o = a("uniform").random;
				return o.toTex = void 0,
				o
			}
			t.name = "random",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(89)),
				o = a("uniform").randomInt;
				return o.toTex = void 0,
				o
			}
			t.name = "randomInt",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(49), r(31), r(496), r(30), r(34), r(127), r(44), r(497), r(121)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e, t) {
					if (Array.isArray(e)) {
						if (Array.isArray(t)) {
							var r = e.length;
							if (r !== t.length)
								return !1;
							for (var n = 0; n < r; n++)
								if (!a(e[n], t[n]))
									return !1;
							return !0
						}
						return !1
					}
					return !Array.isArray(t) && o(e, t)
				}
				var o = n(r(30)),
				s = i("deepEqual", {
						"any, any": function (e, t) {
							return a(e.valueOf(), t.valueOf())
						}
					});
				return s.toTex = void 0,
				s
			}
			t.name = "deepEqual",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(0)),
				u = n(r(15)),
				c = n(r(26)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = r(4),
				m = o("smallerEq", {
						"boolean, boolean": function (e, t) {
							return e <= t
						},
						"number, number": function (e, r) {
							return e <= r || i(e, r, t.epsilon)
						},
						"BigNumber, BigNumber": function (e, r) {
							return e.lte(r) || a(e, r, t.epsilon)
						},
						"Fraction, Fraction": function (e, t) {
							return 1 !== e.compare(t)
						},
						"Complex, Complex": function () {
							throw new TypeError("No ordering relation is defined for complex numbers")
						},
						"Unit, Unit": function (e, t) {
							if (!e.equalBase(t))
								throw new Error("Cannot compare units with different base");
							return m(e.value, t.value)
						},
						"string, string": function (e, t) {
							return e <= t
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = c(e, t, m);
									break;
								default:
									r = u(t, e, m, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, m, !1);
									break;
								default:
									r = l(e, t, m)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return m(s(e), s(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return m(s(e), t)
						},
						"Matrix, Array": function (e, t) {
							return m(e, s(t))
						},
						"Matrix, any": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = f(e, t, m, !1);
								break;
							default:
								r = p(e, t, m, !1)
							}
							return r
						},
						"any, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, m, !0);
								break;
							default:
								r = p(t, e, m, !0)
							}
							return r
						},
						"Array, any": function (e, t) {
							return p(s(e), t, m, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return p(s(t), e, m, !0).valueOf()
						}
					});
				return m.toTex = {
					2: "\\left(${args[0]}" + h.operators.smallerEq + "${args[1]}\\right)"
				},
				m
			}
			var i = r(3).nearlyEqual,
			a = r(35);
			t.name = "smallerEq",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(499), r(142), r(500), r(143), r(501), r(502), r(503), r(504), r(144), r(505)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(27)),
				s = n(r(43)),
				u = n(r(28)),
				c = n(r(22)),
				f = n(r(31)),
				l = a("setCartesian", {
						"Array | Matrix, Array | Matrix": function (e, t) {
							if (0 === c(u(e), new o(0)) || 0 === c(u(t), new o(0)))
								var r = [];
							else
								for (var n = i(Array.isArray(e) ? e : e.toArray()).sort(f), a = i(Array.isArray(t) ? t : t.toArray()).sort(f), r = [], l = 0; l < n.length; l++)
									for (var p = 0; p < a.length; p++)
										r.push([n[l], a[p]]);
							return Array.isArray(e) && Array.isArray(t) ? r : new s(r)
						}
					});
				return l
			}
			var i = r(2).flatten;
			t.name = "setCartesian",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(30)),
				s = n(r(27)),
				u = n(r(43)),
				c = n(r(28)),
				f = n(r(22)),
				l = n(r(31)),
				p = a("setDistinct", {
						"Array | Matrix": function (e) {
							if (0 === f(c(e), new s(0)))
								var t = [];
							else {
								var r = i(Array.isArray(e) ? e : e.toArray()).sort(l),
								t = [];
								t.push(r[0]);
								for (var n = 1; n < r.length; n++)
									o(r[n], r[n - 1]) || t.push(r[n])
							}
							return Array.isArray(e) ? t : new u(t)
						}
					});
				return p
			}
			var i = r(2).flatten;
			t.name = "setDistinct",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, o) {
				var s = n(r(30)),
				u = n(r(27)),
				c = n(r(28)),
				f = n(r(22)),
				l = n(r(31)),
				p = o("setIsSubset", {
						"Array | Matrix, Array | Matrix": function (e, t) {
							if (0 === f(c(e), new u(0)))
								return !0;
							if (0 === f(c(t), new u(0)))
								return !1;
							for (var r, n = a(i(Array.isArray(e) ? e : e.toArray()).sort(l)), o = a(i(Array.isArray(t) ? t : t.toArray()).sort(l)), p = 0; p < n.length; p++) {
								r = !1;
								for (var h = 0; h < o.length; h++)
									if (s(n[p].value, o[h].value) && n[p].identifier === o[h].identifier) {
										r = !0;
										break
									}
								if (r === !1)
									return !1
							}
							return !0
						}
					});
				return p
			}
			var i = r(2).flatten,
			a = r(2).identify;
			t.name = "setIsSubset",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(30)),
				s = n(r(27)),
				u = n(r(28)),
				c = n(r(22)),
				f = a("setMultiplicity", {
						"number | BigNumber | Fraction | Complex, Array | Matrix": function (e, t) {
							if (0 === c(u(t), new s(0)))
								return 0;
							for (var r = i(Array.isArray(t) ? t : t.toArray()), n = 0, a = 0; a < r.length; a++)
								o(r[a], e) && n++;
							return n
						}
					});
				return f
			}
			var i = r(2).flatten;
			t.name = "setMultiplicity",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e, t) {
					for (var r = [], n = 0; n < t.length; n++)
						"1" === t[n] && r.push(e[n]);
					return r
				}
				function s(e) {
					for (var t = [], r = e.length - 1; r > 0; r--)
						for (var n = 0; n < r; n++)
							e[n].length > e[n + 1].length && (t = e[n], e[n] = e[n + 1], e[n + 1] = t);
					return e
				}
				var u = n(r(27)),
				c = n(r(28)),
				f = n(r(22)),
				l = n(r(31)),
				p = a("setPowerset", {
						"Array | Matrix": function (e) {
							if (0 === f(c(e), new u(0)))
								return [];
							for (var t = i(Array.isArray(e) ? e : e.toArray()).sort(l), r = [], n = 0; n.toString(2).length <= t.length; )
								r.push(o(t, n.toString(2).split("").reverse())), n++;
							return s(r)
						}
					});
				return p
			}
			var i = r(2).flatten;
			t.name = "setPowerset",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(30)),
				s = n(r(31)),
				u = a("setSize", {
						"Array | Matrix": function (e) {
							return Array.isArray(e) ? i(e).length : i(e.toArray()).length
						},
						"Array | Matrix, boolean": function (e, t) {
							if (t === !1 || 0 === e.length)
								return Array.isArray(e) ? i(e).length : i(e.toArray()).length;
							for (var r = i(Array.isArray(e) ? e : e.toArray()).sort(s), n = 1, a = 1; a < r.length; a++)
								o(r[a], r[a - 1]) || n++;
							return n
						}
					});
				return u
			}
			var i = r(2).flatten;
			t.name = "setSize",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = n(r(27)),
				s = n(r(64)),
				u = n(r(28)),
				c = n(r(22)),
				f = n(r(143)),
				l = n(r(144)),
				p = a("setUnion", {
						"Array | Matrix, Array | Matrix": function (e, t) {
							if (0 === c(u(e), new o(0)))
								return i(t);
							if (0 === c(u(t), new o(0)))
								return i(e);
							var r = i(e),
							n = i(t);
							return s(l(r, n), f(r, n))
						}
					});
				return p
			}
			var i = r(2).flatten;
			t.name = "setUnion",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(507)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function l(e) {
					var t,
					r = e * e,
					n = u[0][4] * r,
					i = r;
					for (t = 0; t < 3; t += 1)
						n = (n + u[0][t]) * r, i = (i + c[0][t]) * r;
					return e * (n + u[0][3]) / (i + c[0][3])
				}
				function p(e) {
					var t,
					r = u[1][8] * e,
					n = e;
					for (t = 0; t < 7; t += 1)
						r = (r + u[1][t]) * e, n = (n + c[1][t]) * e;
					var i = (r + u[1][7]) / (n + c[1][7]),
					a = parseInt(16 * e) / 16,
					o = (e - a) * (e + a);
					return Math.exp(-a * a) * Math.exp(-o) * i
				}
				function h(e) {
					var t,
					r = 1 / (e * e),
					n = u[2][5] * r,
					i = r;
					for (t = 0; t < 4; t += 1)
						n = (n + u[2][t]) * r, i = (i + c[2][t]) * r;
					var a = r * (n + u[2][4]) / (i + c[2][4]);
					a = (s - a) / e,
					r = parseInt(16 * e) / 16;
					var o = (e - r) * (e + r);
					return Math.exp(-r * r) * Math.exp(-o) * a
				}
				var m = n("erf", {
						number: function (e) {
							var t = Math.abs(e);
							return t >= f ? a(e) : t <= o ? a(e) * l(t) : t <= 4 ? a(e) * (1 - p(t)) : a(e) * (1 - h(t))
						},
						BigNumber: function (t) {
							return new e.BigNumber(m(t.toNumber()))
						},
						"Array | Matrix": function (e) {
							return i(e, m)
						}
					});
				return m.toTex = {
					1: "erf\\left(${args[0]}\\right)"
				},
				m
			}
			var i = r(1),
			a = r(3).sign,
			o = .46875,
			s = .5641895835477563,
			u = [[3.1611237438705655, 113.86415415105016, 377.485237685302, 3209.3775891384694, .18577770618460315], [.5641884969886701, 8.883149794388377, 66.11919063714163, 298.6351381974001, 881.952221241769, 1712.0476126340707, 2051.0783778260716, 1230.3393547979972, 2.1531153547440383e-8], [.30532663496123236, .36034489994980445, .12578172611122926, .016083785148742275, .0006587491615298378, .016315387137302097]],
			c = [[23.601290952344122, 244.02463793444417, 1282.6165260773723, 2844.236833439171], [15.744926110709835, 117.6939508913125, 537.1811018620099, 1621.3895745666903, 3290.7992357334597, 4362.619090143247, 3439.3676741437216, 1230.3393548037495], [2.568520192289822, 1.8729528499234604, .5279051029514285, .06051834131244132, .0023352049762686918]],
			f = Math.pow(2, 53);
			t.name = "erf",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(509), r(112), r(113), r(145), r(116), r(510), r(511), r(512), r(513), r(141), r(146)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e) {
					if (e = i(e.valueOf()), 0 === e.length)
						throw new Error("Cannot calculate median absolute deviation of an empty array");
					var t = c(e);
					return c(u(e, function (e) {
							return s(f(e, t))
						}))
				}
				var s = n(r(29)),
				u = n(r(139)),
				c = n(r(145)),
				f = n(r(21)),
				l = a("mad", {
						"Array | Matrix": o,
						"...": function (e) {
							return o(e)
						}
					});
				return l.toTex = void 0,
				l
			}
			var i = r(2).flatten;
			t.name = "mad",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				function a(e) {
					e = i(e.valueOf());
					var t = e.length;
					if (0 == t)
						throw new Error("Cannot calculate mode of an empty array");
					var r = {},
					n = [],
					a = 0;
					for (var o in e)
						e[o]in r || (r[e[o]] = 0), r[e[o]]++, r[e[o]] == a ? n.push(e[o]) : r[e[o]] > a && (a = r[e[o]], n = [e[o]]);
					return n
				}
				var o = n("mode", {
						"Array | Matrix": a,
						"...": function (e) {
							return a(e)
						}
					});
				return o
			}
			var i = r(2).flatten;
			t.name = "mode",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				function o(e) {
					var t = void 0;
					if (i(e, function (e) {
							t = void 0 === t ? e : s(t, e)
						}), void 0 === t)
						throw new Error("Cannot calculate prod of an empty array");
					return t
				}
				var s = n(r(23)),
				u = a("prod", {
						"Array | Matrix": o,
						"Array | Matrix, number | BigNumber": function (e, t) {
							throw new Error("prod(A, dim) is not yet supported")
						},
						"...": function (e) {
							return o(e)
						}
					});
				return u.toTex = void 0,
				u
			}
			var i = r(42);
			t.name = "prod",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, u) {
				function c(t, r, n) {
					var o,
					u,
					c;
					if (arguments.length < 2 || arguments.length > 3)
						throw new SyntaxError("Function quantileSeq requires two or three parameters");
					if (s(t)) {
						if (n = n || !1, "boolean" == typeof n) {
							if (u = t.valueOf(), a(r)) {
								if (r < 0)
									throw new Error("N/prob must be non-negative");
								if (r <= 1)
									return f(u, r, n);
								if (r > 1) {
									if (!i(r))
										throw new Error("N must be a positive integer");
									var l = r + 1;
									o = new Array(r);
									for (var p = 0; p < r; )
										o[p] = f(u, ++p / l, n);
									return o
								}
							}
							if (e.isBigNumber(r)) {
								if (r.isNegative())
									throw new Error("N/prob must be non-negative");
								if (c = new r.constructor(1), r.lte(c))
									return f(u, r, n);
								if (r.gt(c)) {
									if (!r.isInteger())
										throw new Error("N must be a positive integer");
									var h = r.toNumber();
									if (h > 4294967295)
										throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");
									var l = new e.BigNumber(h + 1);
									o = new Array(h);
									for (var p = 0; p < h; )
										o[p] = f(u, new e.BigNumber(++p).div(l), n);
									return o
								}
							}
							if (Array.isArray(r)) {
								o = new Array(r.length);
								for (var p = 0; p < o.length; ++p) {
									var m = r[p];
									if (a(m)) {
										if (m < 0 || m > 1)
											throw new Error("Probability must be between 0 and 1, inclusive")
									} else {
										if (!e.isBigNumber(m))
											throw new TypeError("Unexpected type of argument in function quantileSeq");
										if (c = new m.constructor(1), m.isNegative() || m.gt(c))
											throw new Error("Probability must be between 0 and 1, inclusive")
									}
									o[p] = f(u, m, n)
								}
								return o
							}
							throw new TypeError("Unexpected type of argument in function quantileSeq")
						}
						throw new TypeError("Unexpected type of argument in function quantileSeq")
					}
					throw new TypeError("Unexpected type of argument in function quantileSeq")
				}
				function f(e, t, r) {
					var n = o(e),
					i = n.length;
					if (0 === i)
						throw new Error("Cannot calculate quantile of an empty sequence");
					if (a(t)) {
						var s = t * (i - 1),
						u = s % 1;
						if (0 === u) {
							var c = r ? n[s] : h(n, s);
							return d(c),
							c
						}
						var f,
						v,
						g = Math.floor(s);
						if (r)
							f = n[g], v = n[g + 1];
						else {
							v = h(n, g + 1),
							f = n[g];
							for (var y = 0; y < g; ++y)
								m(n[y], f) > 0 && (f = n[y])
						}
						return d(f),
						d(v),
						l(p(f, 1 - u), p(v, u))
					}
					var s = t.times(i - 1);
					if (s.isInteger()) {
						s = s.toNumber();
						var c = r ? n[s] : h(n, s);
						return d(c),
						c
					}
					var f,
					v,
					g = s.floor(),
					u = s.minus(g),
					x = g.toNumber();
					if (r)
						f = n[x], v = n[x + 1];
					else {
						v = h(n, x + 1),
						f = n[x];
						for (var y = 0; y < x; ++y)
							m(n[y], f) > 0 && (f = n[y])
					}
					d(f),
					d(v);
					var w = new u.constructor(1);
					return l(p(f, w.minus(u)), p(v, u))
				}
				var l = n(r(18)),
				p = n(r(12)),
				h = n(r(88)),
				m = n(r(49)),
				d = u({
						"number | BigNumber | Unit": function (e) {
							return e
						}
					});
				return c
			}
			var i = r(3).isInteger,
			a = r(3).isNumber,
			o = r(2).flatten,
			s = r(46);
			t.name = "quantileSeq",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				function a(e, t) {
					if (0 == e.length)
						throw new SyntaxError("Function std requires one or more parameters (0 provided)");
					return o(s.apply(null, arguments))
				}
				var o = n(r(56)),
				s = n(r(146)),
				u = i("std", {
						"Array | Matrix": a,
						"Array | Matrix, string": a,
						"...": function (e) {
							return a(e)
						}
					});
				return u.toTex = void 0,
				u
			}
			t.name = "std",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(98), r(515)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("print", {
						"string, Object": i,
						"string, Object, number | Object": i
					});
				return a.toTex = void 0,
				a
			}
			function i(e, t, r) {
				return e.replace(/\$([\w\.]+)/g, function (e, n) {
					for (var i = n.split("."), s = t[i.shift()]; i.length && void 0 !== s; ) {
						var u = i.shift();
						s = u ? s[u] : s + "."
					}
					return void 0 !== s ? a(s) ? s : o(s, r) : e
				})
			}
			var a = r(9).isString,
			o = r(9).format;
			t.name = "print",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(517), r(147), r(518), r(519), r(520), r(521), r(522), r(523), r(524), r(525), r(526), r(527), r(528), r(529), r(530), r(531), r(532), r(533), r(534), r(535), r(536), r(537), r(538), r(539), r(540)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("acos", {
						number: function (r) {
							return r >= -1 && r <= 1 || t.predictable ? Math.acos(r) : new e.Complex(r, 0).acos()
						},
						Complex: function (e) {
							return e.acos()
						},
						BigNumber: function (e) {
							return e.acos()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\cos^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "acos",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("acot", {
						number: function (e) {
							return Math.atan(1 / e)
						},
						Complex: function (e) {
							return e.acot()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t).atan()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\cot^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "acot",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("acoth", {
						number: function (r) {
							return r >= 1 || r <= -1 || t.predictable ? isFinite(r) ? (Math.log((r + 1) / r) + Math.log(r / (r - 1))) / 2 : 0 : new e.Complex(r, 0).acoth()
						},
						Complex: function (e) {
							return e.acoth()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t).atanh()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\coth^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "acoth",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("acsc", {
						number: function (r) {
							return r <= -1 || r >= 1 || t.predictable ? Math.asin(1 / r) : new e.Complex(r, 0).acsc()
						},
						Complex: function (e) {
							return e.acsc()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t).asin()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\csc^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "acsc",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("acsch", {
						number: function (e) {
							return e = 1 / e,
							Math.log(e + Math.sqrt(e * e + 1))
						},
						Complex: function (e) {
							return e.acsch()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t).asinh()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "acsch",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("asec", {
						number: function (r) {
							return r <= -1 || r >= 1 || t.predictable ? Math.acos(1 / r) : new e.Complex(r, 0).asec()
						},
						Complex: function (e) {
							return e.asec()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t).acos()
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\sec^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "asec",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, a) {
				var o = (a.find(n(r(147)), ["Complex"]), a("asech", {
						number: function (r) {
							if (r <= 1 && r >= -1 || t.predictable) {
								r = 1 / r;
								var n = Math.sqrt(r * r - 1);
								return r > 0 || t.predictable ? Math.log(n + r) : new e.Complex(Math.log(n - r), Math.PI)
							}
							return new e.Complex(r, 0).asech()
						},
						Complex: function (e) {
							return e.asech()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t).acosh()
						},
						"Array | Matrix": function (e) {
							return i(e, o)
						}
					}));
				return o.toTex = {
					1: "\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1);
			t.name = "asech",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("asin", {
						number: function (r) {
							return r >= -1 && r <= 1 || t.predictable ? Math.asin(r) : new e.Complex(r, 0).asin()
						},
						Complex: function (e) {
							return e.asin()
						},
						BigNumber: function (e) {
							return e.asin()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\sin^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "asin",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("asinh", {
						number: Math.asinh || function (e) {
							return Math.log(Math.sqrt(e * e + 1) + e)
						},
						Complex: function (e) {
							return e.asinh()
						},
						BigNumber: function (e) {
							return e.asinh()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\sinh^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "asinh",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("atan", {
						number: function (e) {
							return Math.atan(e)
						},
						Complex: function (e) {
							return e.atan()
						},
						BigNumber: function (e) {
							return e.atan()
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\tan^{-1}\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "atan",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = n(r(0)),
				o = n(r(24)),
				s = n(r(15)),
				u = n(r(133)),
				c = n(r(17)),
				f = n(r(16)),
				l = n(r(8)),
				p = n(r(6)),
				h = i("atan2", {
						"number, number": Math.atan2,
						"BigNumber, BigNumber": function (t, r) {
							return e.BigNumber.atan2(t, r)
						},
						"Matrix, Matrix": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								switch (t.storage()) {
								case "sparse":
									r = u(e, t, h, !1);
									break;
								default:
									r = o(t, e, h, !0)
								}
								break;
							default:
								switch (t.storage()) {
								case "sparse":
									r = s(e, t, h, !1);
									break;
								default:
									r = l(e, t, h)
								}
							}
							return r
						},
						"Array, Array": function (e, t) {
							return h(a(e), a(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return h(a(e), t)
						},
						"Matrix, Array": function (e, t) {
							return h(e, a(t))
						},
						"Matrix, number | BigNumber": function (e, t) {
							var r;
							switch (e.storage()) {
							case "sparse":
								r = c(e, t, h, !1);
								break;
							default:
								r = p(e, t, h, !1)
							}
							return r
						},
						"number | BigNumber, Matrix": function (e, t) {
							var r;
							switch (t.storage()) {
							case "sparse":
								r = f(t, e, h, !0);
								break;
							default:
								r = p(t, e, h, !0)
							}
							return r
						},
						"Array, number | BigNumber": function (e, t) {
							return p(a(e), t, h, !1).valueOf()
						},
						"number | BigNumber, Array": function (e, t) {
							return p(a(t), e, h, !0).valueOf()
						}
					});
				return h.toTex = {
					2: "\\mathrm{atan2}\\left(${args}\\right)"
				},
				h
			}
			t.name = "atan2",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("atanh", {
						number: function (r) {
							return r <= 1 && r >= -1 || t.predictable ? a(r) : new e.Complex(r, 0).atanh()
						},
						Complex: function (e) {
							return e.atanh()
						},
						BigNumber: function (e) {
							return e.atanh()
						},
						"Array | Matrix": function (e) {
							return i(e, o, !0)
						}
					});
				return o.toTex = {
					1: "\\tanh^{-1}\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = Math.atanh || function (e) {
				return Math.log((1 + e) / (1 - e)) / 2
			};
			t.name = "atanh",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("cos", {
						number: Math.cos,
						Complex: function (e) {
							return e.cos()
						},
						BigNumber: function (e) {
							return e.cos()
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function cos is no angle");
							return a(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\cos\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "cos",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("cosh", {
						number: a,
						Complex: function (e) {
							return e.cosh()
						},
						BigNumber: function (e) {
							return e.cosh()
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function cosh is no angle");
							return o(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, o)
						}
					});
				return o.toTex = {
					1: "\\cosh\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = Math.cosh || function (e) {
				return (Math.exp(e) + Math.exp(-e)) / 2
			};
			t.name = "cosh",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("cot", {
						number: function (e) {
							return 1 / Math.tan(e)
						},
						Complex: function (e) {
							return e.cot()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t.tan())
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function cot is no angle");
							return a(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\cot\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "cot",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("coth", {
						number: i,
						Complex: function (e) {
							return e.coth()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t.tanh())
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function coth is no angle");
							return o(t.value)
						},
						"Array | Matrix": function (e) {
							return a(e, o)
						}
					});
				return o.toTex = {
					1: "\\coth\\left(${args[0]}\\right)"
				},
				o
			}
			function i(e) {
				var t = Math.exp(2 * e);
				return (t + 1) / (t - 1)
			}
			var a = r(1);
			t.name = "coth",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("csc", {
						number: function (e) {
							return 1 / Math.sin(e)
						},
						Complex: function (e) {
							return e.csc()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t.sin())
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function csc is no angle");
							return a(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\csc\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "csc",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("csch", {
						number: i,
						Complex: function (e) {
							return e.csch()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t.sinh())
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function csch is no angle");
							return o(t.value)
						},
						"Array | Matrix": function (e) {
							return a(e, o)
						}
					});
				return o.toTex = {
					1: "\\mathrm{csch}\\left(${args[0]}\\right)"
				},
				o
			}
			function i(e) {
				return 0 == e ? Number.POSITIVE_INFINITY : Math.abs(2 / (Math.exp(e) - Math.exp(-e))) * o(e)
			}
			var a = r(1),
			o = r(3).sign;
			t.name = "csch",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("sec", {
						number: function (e) {
							return 1 / Math.cos(e)
						},
						Complex: function (e) {
							return e.sec()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t.cos())
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function sec is no angle");
							return a(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a.toTex = {
					1: "\\sec\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "sec",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("sech", {
						number: i,
						Complex: function (e) {
							return e.sech()
						},
						BigNumber: function (t) {
							return new e.BigNumber(1).div(t.cosh())
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function sech is no angle");
							return o(t.value)
						},
						"Array | Matrix": function (e) {
							return a(e, o)
						}
					});
				return o.toTex = {
					1: "\\mathrm{sech}\\left(${args[0]}\\right)"
				},
				o
			}
			function i(e) {
				return 2 / (Math.exp(e) + Math.exp(-e))
			}
			var a = r(1);
			t.name = "sech",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("sin", {
						number: Math.sin,
						Complex: function (e) {
							return e.sin()
						},
						BigNumber: function (e) {
							return e.sin()
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function sin is no angle");
							return a(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\sin\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "sin",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("sinh", {
						number: a,
						Complex: function (e) {
							return e.sinh()
						},
						BigNumber: function (e) {
							return e.sinh()
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function sinh is no angle");
							return o(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, o, !0)
						}
					});
				return o.toTex = {
					1: "\\sinh\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = Math.sinh || function (e) {
				return (Math.exp(e) - Math.exp(-e)) / 2
			};
			t.name = "sinh",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("tan", {
						number: Math.tan,
						Complex: function (e) {
							return e.tan()
						},
						BigNumber: function (e) {
							return e.tan()
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function tan is no angle");
							return a(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, a, !0)
						}
					});
				return a.toTex = {
					1: "\\tan\\left(${args[0]}\\right)"
				},
				a
			}
			var i = r(1);
			t.name = "tan",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var o = n("tanh", {
						number: a,
						Complex: function (e) {
							return e.tanh()
						},
						BigNumber: function (e) {
							return e.tanh()
						},
						Unit: function (t) {
							if (!t.hasBase(e.Unit.BASE_UNITS.ANGLE))
								throw new TypeError("Unit in function tanh is no angle");
							return o(t.value)
						},
						"Array | Matrix": function (e) {
							return i(e, o, !0)
						}
					});
				return o.toTex = {
					1: "\\tanh\\left(${args[0]}\\right)"
				},
				o
			}
			var i = r(1),
			a = Math.tanh || function (e) {
				var t = Math.exp(2 * e);
				return (t - 1) / (t + 1)
			};
			t.name = "tanh",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(542)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, n, i) {
				var a = r(4),
				o = n(r(0)),
				s = n(r(8)),
				u = n(r(6)),
				c = i("to", {
						"Unit, Unit | string": function (e, t) {
							return e.to(t)
						},
						"Matrix, Matrix": function (e, t) {
							return s(e, t, c)
						},
						"Array, Array": function (e, t) {
							return c(o(e), o(t)).valueOf()
						},
						"Array, Matrix": function (e, t) {
							return c(o(e), t)
						},
						"Matrix, Array": function (e, t) {
							return c(e, o(t))
						},
						"Matrix, any": function (e, t) {
							return u(e, t, c, !1)
						},
						"any, Matrix": function (e, t) {
							return u(t, e, c, !0)
						},
						"Array, any": function (e, t) {
							return u(o(e), t, c, !1).valueOf()
						},
						"any, Array": function (e, t) {
							return u(o(t), e, c, !0).valueOf()
						}
					});
				return c.toTex = {
					2: "\\left(${args[0]}" + a.operators.to + "${args[1]}\\right)"
				},
				c
			}
			t.name = "to",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(120), r(48), r(57), r(75), r(55), r(544), r(82), r(545), r(76)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("isPrime", {
						number: function (e) {
							if (e < 2)
								return !1;
							if (2 == e)
								return !0;
							if (e % 2 == 0)
								return !1;
							for (var t = 3; t * t <= e; t += 2)
								if (e % t == 0)
									return !1;
							return !0
						},
						BigNumber: function (t) {
							if (t.lt(2))
								return !1;
							if (t.equals(2))
								return !0;
							if (t.mod(2).isZero())
								return !1;
							for (var r = e.BigNumber(3); r.times(r).lte(t); r = r.plus(1))
								if (t.mod(r).isZero())
									return !1;
							return !0
						},
						"Array | Matrix": function (e) {
							return i(e, a)
						}
					});
				return a
			}
			var i = r(1);
			t.name = "isPrime",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				var a = n("isNaN", {
						number: function (e) {
							return Number.isNaN(e)
						},
						BigNumber: function (e) {
							return e.isNaN()
						},
						Fraction: function (e) {
							return !1
						},
						Complex: function (e) {
							return e.isNaN()
						},
						Unit: function (e) {
							return Number.isNaN(e.value)
						},
						"Array | Matrix": function (e) {
							return i(e, Number.isNaN)
						}
					});
				return a
			}
			var i = r(1);
			r(3);
			t.name = "isNaN",
			t.factory = n
		}, function (e, t, r) {
			e.exports = [r(547)]
		}, function (e, t, r) {
			"use strict";
			function n(e, t, r, n) {
				return function (t, r) {
					var n = e[r && r.mathjs];
					return n && "function" == typeof n.fromJSON ? n.fromJSON(r) : r
				}
			}
			t.name = "reviver",
			t.path = "json",
			t.factory = n
		}, function (e, t, r) {
			"use strict";
			var n = r(50),
			i = r(10),
			a = r(51);
			e.exports = [{
					name: "ArgumentsError",
					path: "error",
					factory: function () {
						return n
					}
				}, {
					name: "DimensionError",
					path: "error",
					factory: function () {
						return i
					}
				}, {
					name: "IndexError",
					path: "error",
					factory: function () {
						return a
					}
				}
			]
		}
	])
});
//# sourceMappingURL=math.map
//--><!]]></script>

<script type="text/javascript"><!--//--><![CDATA[//><!--
var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.AnalyticCurve={};EJSS_DRAWING2D.analyticCurve=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Arrow={NONE:0,ANGLE:1,CIRCLE:2,RECTANGLE:3,LINE:4,CURVE:5,TRIANGLE:6,DIAMOND:7,WEDGE:8,POINTED:9,INVANGLE:10,INVTRIANGLE:11,SPLINE_NONE:0,SPLINE_CUBIC:1,SPLINE_QUADRATIC:2,SPLINE_CUBIC_WITH_MIDDLE_POINT:3,SPLINE_QUADRATIC_WITH_MIDDLE_POINT:4,copyTo:function(source,dest){EJSS_DRAWING2D.Element.copyTo(source,dest);dest.setRelativePosition(source.getRelativePosition());dest.setMarkEnd(source.getMarkEnd());dest.setMarkEndWidth(source.getMarkEndWidth());dest.setMarkEndHeight(source.getMarkEndHeight());dest.setMarkEndColor(source.getMarkEndColor());dest.setMarkEndStroke(source.getMarkEndStroke());dest.setMarkEndOrient(source.getMarkEndOrient());dest.setMarkStart(source.getMarkStart());dest.setMarkStartWidth(source.getMarkStartWidth());dest.setMarkStartHeight(source.getMarkStartHeight());dest.setMarkStartColor(source.getMarkStartColor());dest.setMarkStartStroke(source.getMarkStartStroke());dest.setMarkStartOrient(source.getMarkStartOrient());dest.setMarkMiddle(source.getMarkMiddle());dest.setMarkMiddleWidth(source.getMarkMiddleWidth());dest.setMarkMiddleHeight(source.getMarkMiddleHeight());dest.setMarkMiddleColor(source.getMarkMiddleColor());dest.setMarkMiddleColorSnd(source.getMarkMiddleColorSnd());dest.setMarkMiddleStroke(source.getMarkMiddleStroke());dest.setMarkMiddleOrient(source.getMarkMiddleOrient());dest.setMarkProportion(source.getMarkProportion());dest.setSplineType(source.getSplineType())},registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("SplineType",element.setSplineType);controller.registerProperty("InteractionPosition",element.setInteractionPosition);controller.registerProperty("Offset",element.setRelativePosition,element.getRelativePosition);controller.registerProperty("MarkEnd",element.setMarkEnd);controller.registerProperty("MarkEndWidth",element.setMarkEndWidth);controller.registerProperty("MarkEndHeight",element.setMarkEndHeight);controller.registerProperty("MarkEndDiameter",element.setMarkEndDiameter);controller.registerProperty("MarkEndColor",element.setMarkEndColor);controller.registerProperty("MarkEndStroke",element.setMarkEndStroke);controller.registerProperty("MarkEndOrient",element.setMarkEndOrient);controller.registerProperty("MarkStart",element.setMarkStart);controller.registerProperty("MarkStartWidth",element.setMarkStartWidth);controller.registerProperty("MarkStartHeight",element.setMarkStartHeight);controller.registerProperty("MarkStartDiameter",element.setMarkStartDiameter);controller.registerProperty("MarkStartColor",element.setMarkStartColor);controller.registerProperty("MarkStartStroke",element.setMarkStartStroke);controller.registerProperty("MarkStartOrient",element.setMarkStartOrient);controller.registerProperty("MarkMiddle",element.setMarkMiddle);controller.registerProperty("MarkMiddleWidth",element.setMarkMiddleWidth);controller.registerProperty("MarkMiddleHeight",element.setMarkMiddleHeight);controller.registerProperty("MarkMiddleDiameter",element.setMarkMiddleDiameter);controller.registerProperty("MarkMiddleColor",element.setMarkMiddleColor);controller.registerProperty("MarkMiddleColorSnd",element.setMarkMiddleColorSnd);controller.registerProperty("MarkMiddleStroke",element.setMarkMiddleStroke);controller.registerProperty("MarkMiddleOrient",element.setMarkMiddleOrient);controller.registerProperty("MarkProportion",element.setMarkProportion)}};EJSS_DRAWING2D.arrow=function(name){var self=EJSS_DRAWING2D.element(name);var mMarkProportion=.5;var mMarkStart=EJSS_DRAWING2D.Arrow.NONE;var mMarkStartColor="none";var mMarkStartWidth=12;var mMarkStartHeight=10;var mMarkStartStroke=-1;var mMarkStartOrient="auto";var mMarkEnd=EJSS_DRAWING2D.Arrow.ANGLE;var mMarkEndColor="none";var mMarkEndWidth=12;var mMarkEndHeight=12;var mMarkEndStroke=-1;var mMarkEndOrient="auto";var mMarkMiddle=EJSS_DRAWING2D.Arrow.NONE;var mMarkMiddleColor="none";var mMarkMiddleColorSnd="none";var mMarkMiddleWidth=12;var mMarkMiddleHeight=10;var mMarkMiddleStroke=-1;var mMarkMiddleOrient="auto";var mSplineType=EJSS_DRAWING2D.Arrow.SPLINE_NONE;self._23=function(){return"ElementArrow"};self.setInteractionPosition=function(position){if(typeof position=="string")position=EJSS_DRAWING2D.Element[position.toUpperCase()];var inter=self.getInteractionTarget(EJSS_DRAWING2D.PanelInteraction.TARGET_POSITION);if(inter.getPositionOffset()!=position){inter.setPositionOffset(position);self.setChanged(true)}};self.getInteractionPosition=function(){var inter=self.getInteractionTarget(EJSS_DRAWING2D.PanelInteraction.TARGET_POSITION);return inter.getPositionOffset()};self.setMarkProportion=function(prop){if(mMarkProportion!=prop){mMarkProportion=prop;self.setChanged(true)}};self.getMarkProportion=function(){return mMarkProportion};self.setMarkStart=function(mark){if(typeof mark==="string")mMarkStart=EJSS_DRAWING2D.Arrow[mark.toUpperCase()];else mMarkStart=mark};self.getMarkStart=function(){return mMarkStart};self.setMarkStartColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mMarkStartColor){mMarkStartColor=color;self.setChanged(true)}return self};self.getMarkStartColor=function(){return mMarkStartColor};self.setMarkStartStroke=function(width){if(mMarkStartStroke!=width){mMarkStartStroke=width;self.setChanged(true)}};self.getMarkStartStroke=function(){return mMarkStartStroke};self.setMarkStartWidth=function(width){if(mMarkStartWidth!=width){mMarkStartWidth=width;self.setChanged(true)}};self.getMarkStartWidth=function(){return mMarkStartWidth};self.setMarkStartHeight=function(height){if(mMarkStartHeight!=height){mMarkStartHeight=height;self.setChanged(true)}};self.getMarkStartHeight=function(){return mMarkStartHeight};self.setMarkStartDiameter=function(diameter){if(mMarkStartHeight!=diameter||mMarkStartWidth!=diameter){mMarkStartHeight=diameter;mMarkStartWidth=diameter;self.setChanged(true)}};self.getMarkStartOrient=function(){return mMarkStartOrient};self.setMarkStartOrient=function(orient){if(mMarkStartOrient!=orient){mMarkStartOrient=orient;self.setChanged(true)}};self.setMarkEnd=function(mark){if(typeof mark==="string")mMarkEnd=EJSS_DRAWING2D.Arrow[mark.toUpperCase()];else mMarkEnd=mark};self.getMarkEnd=function(){return mMarkEnd};self.setMarkEndColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mMarkEndColor){mMarkEndColor=color;self.setChanged(true)}return self};self.getMarkEndColor=function(){return mMarkEndColor};self.setMarkEndStroke=function(width){if(mMarkEndStroke!=width){mMarkEndStroke=width;self.setChanged(true)}};self.getMarkEndStroke=function(){return mMarkEndStroke};self.setMarkEndWidth=function(width){if(mMarkEndWidth!=width){mMarkEndWidth=width;self.setChanged(true)}};self.getMarkEndWidth=function(){return mMarkEndWidth};self.setMarkEndHeight=function(height){if(mMarkEndHeight!=height){mMarkEndHeight=height;self.setChanged(true)}};self.getMarkEndHeight=function(){return mMarkEndHeight};self.setMarkEndDiameter=function(diameter){if(mMarkEndHeight!=diameter||mMarkEndWidth!=diameter){mMarkEndHeight=diameter;mMarkEndWidth=diameter;self.setChanged(true)}};self.getMarkEndOrient=function(){return mMarkEndOrient};self.setMarkEndOrient=function(orient){if(mMarkEndOrient!=orient){mMarkEndOrient=orient;self.setChanged(true)}};self.setMarkMiddle=function(mark){if(typeof mark==="string")mMarkMiddle=EJSS_DRAWING2D.Arrow[mark.toUpperCase()];else mMarkMiddle=mark};self.getMarkMiddle=function(){return mMarkMiddle};self.setMarkMiddleColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mMarkMiddleColor){mMarkMiddleColor=color;self.setChanged(true)}return self};self.getMarkMiddleColor=function(){return mMarkMiddleColor};self.setMarkMiddleStroke=function(width){if(mMarkMiddleStroke!=width){mMarkMiddleStroke=width;self.setChanged(true)}};self.getMarkMiddleStroke=function(){return mMarkMiddleStroke};self.setMarkMiddleColorSnd=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mMarkMiddleColorSnd){mMarkMiddleColorSnd=color;self.setChanged(true)}return self};self.getMarkMiddleColorSnd=function(){return mMarkMiddleColorSnd};self.setMarkMiddleWidth=function(width){if(mMarkMiddleWidth!=width){mMarkMiddleWidth=width;self.setChanged(true)}};self.getMarkMiddleWidth=function(){return mMarkMiddleWidth};self.setMarkMiddleHeight=function(height){if(mMarkMiddleHeight!=height){mMarkMiddleHeight=height;self.setChanged(true)}};self.getMarkMiddleHeight=function(){return mMarkMiddleHeight};self.setMarkMiddleDiameter=function(diameter){if(mMarkMiddleHeight!=diameter||mMarkMiddleWidth!=diameter){mMarkMiddleHeight=diameter;mMarkMiddleWidth=diameter;self.setChanged(true)}};self.getMarkMiddleOrient=function(){return mMarkMiddleOrient};self.setMarkMiddleOrient=function(orient){if(mMarkMiddleOrient!=orient){mMarkMiddleOrient=orient;self.setChanged(true)}};self.setSplineType=function(spline){if(mSplineType!=spline){mSplineType=spline;self.setChanged(true)}};self.getSplineType=function(){return mSplineType};self.registerProperties=function(controller){EJSS_DRAWING2D.Arrow.registerProperties(self,controller)};self.copyTo=function(element){EJSS_DRAWING2D.Arrow.copyTo(self,element)};self.setSize([.1,.1]);self.setRelativePosition("SOUTH_WEST");return self};EJSS_DRAWING2D.ArrowSet={};EJSS_DRAWING2D.arrowSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Axis={AXIS_VERTICAL:0,AXIS_HORIZONTAL:1,TICKS_UP:2,TICKS_DOWN:3,SCALE_NUM:0,SCALE_LOG:1,registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Step",element.setStep,element.getStep);controller.registerProperty("TickStep",element.setTickStep,element.getTickStep);controller.registerProperty("Ticks",element.setTicks,element.getTicks);controller.registerProperty("AutoTicks",element.setAutoTicks,element.getAutoTicks);controller.registerProperty("FixedTick",element.setFixedTick,element.getFixedTick);controller.registerProperty("Orient",element.setOrient,element.getOrient);controller.registerProperty("Scale",element.setScale,element.getScale);controller.registerProperty("TicksMode",element.setTicksMode,element.getTicksMode);controller.registerProperty("TicksSize",element.setTicksSize,element.getTicksSize);controller.registerProperty("AutoStepMin",element.setAutoStepMin,element.getAutoStepMin);controller.registerProperty("AutoTicksRange",element.setAutoTicksRange,element.getAutoTicksRange);controller.registerProperty("TextPosition",element.setTextPosition,element.getTextPosition);controller.registerProperty("ScalePrecision",element.setScalePrecision,element.getScalePrecision);controller.registerProperty("Font",element.getFont().setFont);controller.registerProperty("FontFamily",element.getFont().setFontFamily);controller.registerProperty("FontSize",element.getFont().setFontSize);controller.registerProperty("LetterSpacing",element.getFont().setLetterSpacing);controller.registerProperty("FontOutlineColor",element.getFont().setOutlineColor);controller.registerProperty("FontWeight",element.getFont().setFontWeight);controller.registerProperty("FontFillColor",element.getFont().setFillColor);controller.registerProperty("Show",element.setShow,element.getShow)}};EJSS_DRAWING2D.axis=function(mName){var self=EJSS_DRAWING2D.segment(mName);var mAutoTicks=true;var mTicks=0;var mStep=20;var mTickStep=0;var mFixedTick=Number.NaN;var mOrient=EJSS_DRAWING2D.Axis.AXIS_VERTICAL;var mScale=[-1,1];var mInvertedScaleY=false;var mTicksMode=EJSS_DRAWING2D.Axis.SCALE_NUM;var mTextPosition=EJSS_DRAWING2D.Axis.TICKS_UP;var mTicksSize=10;var mScalePrecision=1;var mFont=EJSS_DRAWING2D.font(mName);var mAutoStepMin=40;var mAutoTicksRange=[5,10,20];var mShow=true;self._23=function(){return"ElementAxis"};self.setShow=function(show){if(mShow!=show){mShow=show;self.setChanged(true)}};self.getShow=function(){return mShow};self.getFont=function(){return mFont};self.setAutoTicksRange=function(range){if(mAutoTicksRange!=range){mAutoTicksRange=range;self.setChanged(true)}};self.getAutoTicksRange=function(){return mAutoTicksRange};self.setAutoStepMin=function(min){if(mAutoStepMin!=min){mAutoStepMin=min;self.setChanged(true)}};self.getAutoStepMin=function(){return mAutoStepMin};self.setFixedTick=function(fixed){if(mFixedTick!=fixed){mFixedTick=fixed;self.setChanged(true)}};self.getFixedTick=function(){return mFixedTick};self.setAutoTicks=function(auto){if(mAutoTicks!=auto){mAutoTicks=auto;self.setChanged(true)}};self.getAutoTicks=function(){return mAutoTicks};self.setStep=function(step){if(mStep!=step){mStep=step;self.setChanged(true)}};self.getStep=function(){return mStep};self.setTickStep=function(TickStep){if(mTickStep!=TickStep){mTickStep=TickStep;self.setChanged(true)}};self.getTickStep=function(){return mTickStep};self.setTicks=function(ticks){if(mTicks!=ticks){mTicks=ticks;self.setChanged(true)}};self.getTicks=function(){return mTicks};self.setTicksMode=function(ticksMode){if(typeof ticksMode=="string")ticksMode=EJSS_DRAWING2D.Grid[ticksMode.toUpperCase()];if(mTicksMode!=ticksMode){mTicksMode=ticksMode;self.setChanged(true)}};self.getTicksMode=function(){return mTicksMode};self.setTextPosition=function(textPosition){if(typeof textPosition=="string")textPosition=EJSS_DRAWING2D.Axis[textPosition.toUpperCase()];if(mTextPosition!=textPosition){mTextPosition=textPosition;self.setChanged(true)}};self.getTextPosition=function(){return mTextPosition};self.setOrient=function(orient){if(typeof orient=="string")orient=EJSS_DRAWING2D.Axis[orient.toUpperCase()];if(mOrient!=orient){mOrient=orient;self.setChanged(true)}};self.getOrient=function(){return mOrient};self.setScale=function(scale){if(mScale!=scale){mScale=scale;self.setChanged(true)}};self.getScale=function(){return mScale};self.setScalePrecision=function(scalePrecision){if(mScalePrecision!=scalePrecision){mScalePrecision=scalePrecision;self.setChanged(true)}};self.getScalePrecision=function(){return mScalePrecision};self.setTicksSize=function(ticksSize){if(mTicksSize!=ticksSize){mTicksSize=ticksSize;self.setChanged(true)}};self.getTicksSize=function(){return mTicksSize};self.setInvertedScaleY=function(invertedscale){if(mInvertedScaleY!=invertedscale){mInvertedScaleY=invertedscale;self.setChanged(true)}};self.getInvertedScaleY=function(){return mInvertedScaleY};self.registerProperties=function(controller){EJSS_DRAWING2D.Axis.registerProperties(self,controller)};mFont.setChangeListener(function(change){self.setChanged(true)});return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.ByteRaster={};EJSS_DRAWING2D.byteRaster=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Canvas={copyTo:function(source,dest){EJSS_DRAWING2D.Element.copyTo(source,dest);dest.setDimensions(source.getDimensions())},registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Dimensions",element.setDimensions,element.getDimensions)}};EJSS_DRAWING2D.canvas=function(name){var self=EJSS_DRAWING2D.element(name);var mDrawables=[];var mxMin=-10;var mxMax=10;var myMin=-10;var myMax=10;self._23=function(){return"ElementCanvas"};self.setDimensions=function(dimensions){xMin=dimensions[0];xMax=dimensions[1];yMin=dimensions[2];yMax=dimensions[3];self.setChanged(true)};self.getDimensions=function(){return[xMin,xMax,yMin,yMax]};self.addDrawable=function(drawable){mDrawables.push(drawable);self.setChanged(true)};self.addImageField=function(data,xMin,xMax,xPoints,yMin,yMax,yPoints,autoscale,zMin,zMax){var imgField=function(){var shape={};shape.imageField=true;shape.data=data||undefined;shape.xMin=xMin===undefined?-5:xMin;shape.xMax=xMax===undefined?5:xMax;shape.nx=xPoints||128;shape.yMin=yMin===undefined?-5:yMin;shape.yMax=yMax===undefined?5:yMax;shape.ny=yPoints||128;shape.autoscale=autoscale||true;shape.lower=zMin===undefined?-1:zMin;shape.upper=zMax===undefined?1:zMax;shape.center=(shape.lower+shape.upper)/2;shape.maskRadius=0;function arrayCoordinates(min,max,points){var coordinates=[];var step=(max-min)/(points-1);var val=min;for(var i=0;i<points;i++){coordinates.push(val);val+=step}return coordinates}shape.xPos=arrayCoordinates(shape.xMin,shape.xMax,shape.nx);shape.yPos=arrayCoordinates(shape.yMin,shape.yMax,shape.ny);shape.updateData=function(newData){shape.data=newData||shape.data;shape.xPos=arrayCoordinates(shape.xMin,shape.xMax,shape.nx);shape.yPos=arrayCoordinates(shape.yMin,shape.yMax,shape.ny);self.setChanged(true)};shape.setThreshold=function(lower,upper){shape.lower=lower===undefined?shape.lower:lower;shape.upper=upper===undefined?shape.upper:upper;self.setChanged(true)};shape.setCircularMask=function(radius){shape.maskRadius=radius;self.setChanged(true)};return shape}();self.addDrawable(imgField);return imgField};self.getDrawables=function(){return mDrawables};this.clearObjects=function(){mDrawables=[];self.setChanged(true)};self.registerProperties=function(controller){EJSS_DRAWING2D.Canvas.registerProperties(self,controller)};self.copyTo=function(element){EJSS_DRAWING2D.Canvas.copyTo(self,element)};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.CellLattice={};EJSS_DRAWING2D.cellLattice=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Cursor={};EJSS_DRAWING2D.cursor=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Custom={}
;EJSS_DRAWING2D.custom=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.DrawingPanel={MOUSE_ENTERED:0,MOUSE_EXITED:1,MOUSE_PRESSED:2,MOUSE_DRAGGED:3,MOUSE_RELEASED:4,GRAPHICS2D_SVG:0,GRAPHICS2D_CANVAS:1,SCALE_NUM:0,SCALE_LOG:1,ENABLED_NONE:0,ENABLED_ANY:1,ENABLED_X:2,ENABLED_Y:3,ENABLED_NO_MOVE:4,registerProperties:function(element,controller){element.setController(controller);controller.registerProperty("AutoScale",element.setAutoScale,element.getAutoScale);controller.registerProperty("AutoScaleX",element.setAutoScaleX,element.getAutoScaleX);controller.registerProperty("AutoScaleY",element.setAutoScaleY,element.getAutoScaleY);controller.registerProperty("InvertedScaleY",element.setInvertedScaleY,element.getInvertedScaleY);controller.registerProperty("MinimumX",element.setWorldXMin,element.getWorldXMin);controller.registerProperty("MaximumX",element.setWorldXMax,element.getWorldXMax);controller.registerProperty("MinimumY",element.setWorldYMin,element.getWorldYMin);controller.registerProperty("MaximumY",element.setWorldYMax,element.getWorldYMax);controller.registerProperty("Bounds",element.setWorldCoordinates,element.getWorldCoordinates);controller.registerProperty("ScaleXType",function(v){element.setTypeScaleX(v);element.scale()},element.getTypeScaleX);controller.registerProperty("ScaleYType",function(v){element.setTypeScaleY(v);element.scale()},element.getTypeScaleY);controller.registerProperty("MarginX",element.setMarginX,element.getMarginX);controller.registerProperty("MarginY",element.setMarginY,element.getMarginY);controller.registerProperty("Parent",element.getGraphics().setParent,element.getGraphics().getParent);controller.registerProperty("ClassName",element.getGraphics().setClassName);controller.registerProperty("Width",function(v){if(element.getGraphics().setWidth(v))element.scale()},element.getGraphics().getBox().width);controller.registerProperty("Height",function(v){if(element.getGraphics().setHeight(v))element.scale()},element.getGraphics().getBox().height);controller.registerProperty("SquareAspect",element.setSquareAspect);controller.registerProperty("GraphicsMode",element.setGraphicsMode);controller.registerProperty("Enabled",element.getPanelInteraction().setEnabled);controller.registerProperty("StopMoveEvents",element.getPanelInteraction().setStopMoveEvents);controller.registerProperty("StopEventPropagation",element.getPanelInteraction().setStopGestures);controller.registerProperty("Gutters",element._25);controller.registerProperty("GuttersLineColor",element.getGuttersStyle().setLineColor);controller.registerProperty("GuttersLineWidth",element.getGuttersStyle().setLineWidth);controller.registerProperty("GuttersDrawLines",element.getGuttersStyle().setDrawLines);controller.registerProperty("GuttersColor",element.getGuttersStyle().setFillColor);controller.registerProperty("GuttersFill",element.getGuttersStyle().setDrawFill);controller.registerProperty("GuttersRendering",element.getStyle().setShapeRendering);controller.registerProperty("Background",element.getStyle().setFillColor);controller.registerProperty("Foreground",element.getStyle().setLineColor);controller.registerProperty("LineColor",element.getStyle().setLineColor);controller.registerProperty("LineWidth",element.getStyle().setLineWidth);controller.registerProperty("DrawLines",element.getStyle().setDrawLines);controller.registerProperty("FillColor",element.getStyle().setFillColor);controller.registerProperty("DrawFill",element.getStyle().setDrawFill);controller.registerProperty("ShapeRendering",element.getStyle().setShapeRendering);controller.registerProperty("Visibility",element.getGraphics().getStyle().setVisibility);controller.registerProperty("Display",element.getGraphics().getStyle().setDisplay);controller.registerProperty("CSS",element.getGraphics().getStyle().setCSS);controller.registerProperty("TRMessage",element.getMessageDecoration("TR").setText);controller.registerProperty("TLMessage",element.getMessageDecoration("TL").setText);controller.registerProperty("BRMessage",element.getMessageDecoration("BR").setText);controller.registerProperty("BLMessage",element.getMessageDecoration("BL").setText);controller.registerProperty("CoordinatesFormat",element.getCoordinates().setFormat);controller.registerProperty("ShowCoordinates",element.setShowCoordinates);controller.registerProperty("ShowAreaRectangle",element.setShowAreaRectangle);controller.registerProperty("EnabledZooming",element.setEnabledZooming);controller.registerProperty("EnabledDragging",element.setEnabledDragging);controller.registerProperty("CursorTypeForMove",element.getInteraction().setCursorTypeForMove);controller.registerAction("OnDoubleClick",element.getInteraction().getInteractionPoint);controller.registerAction("OnMove",element.getInteraction().getInteractionPoint,element.getOnMoveHandler);controller.registerAction("OnPress",element.getInteraction().getInteractionPoint,element.getOnPressHandler);controller.registerAction("OnDrag",element.getInteraction().getInteractionPoint,element.getOnDragHandler);controller.registerAction("OnRelease",element.getInteraction().getInteractionBounds,element.getOnReleaseHandler);controller.registerAction("OnResize",element.getInteraction().getInteractionBounds,element.scale);controller.registerAction("OnOrientationChange",element.getInteraction().getOrientation,element.scale);controller.registerAction("OnZoom",element.getInteraction().getPinchDistance,element.getOnZoomHandler)}};EJSS_DRAWING2D.drawingPanel=function(mName,mGraphicsMode){var self={};var mGraphics;var mStyle=EJSS_DRAWING2D.style(mName);var mBottomDecorations=[];var mElements=[];var mElementsChanged=false;var mAutoScaleX=false;var mAutoScaleY=false;var mInvertedScaleY=false;var mTypeScaleX=0;var mTypeScaleY=0;var mTopDecorations=[];var mShowCoordinates=true;var mShowAreaRectangle=true;var mEnabledDragging=false;var mEnabledZooming=false;var mZoomRate=1.1;var mZoomLimits=[.1,1e3];var mCollectersList=[];var xmindef=-1,xmaxdef=+1,ymindef=-1,ymaxdef=+1;var mWorld={xminPreferred:NaN,xmaxPreferred:NaN,yminPreferred:NaN,ymaxPreferred:NaN,xminMeasured:NaN,xmaxMeasured:NaN,yminMeasured:NaN,ymaxMeasured:NaN,xmargin:0,ymargin:0,xmin:-1,xmax:+1,ymin:-1,ymax:+1,squareAspect:false,xorigin:0,yorigin:0,xscale:1,yscale:1};var mGutters={left:0,right:0,top:0,bottom:0,visible:false};var mGuttersStyle=EJSS_DRAWING2D.style(mName+" gutters");var mPanelChanged=true;var mMustScale=true;var mEnabledRedering=true;var mController={propertiesChanged:function(){},invokeAction:function(){}};self.getName=function(){return mName};self.getGraphics=function(){return mGraphics};self.importGraphics=function(callback){if(mGraphics.importSVG)return mGraphics.importSVG(callback);return null};self.getStyle=function(){return mStyle};self.getGraphicsMode=function(){return mGraphicsMode};self.getGraphicsModeName=function(){switch(mGraphicsMode){case EJSS_DRAWING2D.DrawingPanel.GRAPHICS2D_CANVAS:return"CANVAS";default:case EJSS_DRAWING2D.DrawingPanel.GRAPHICS2D_SVG:return"SVG"}};self.setGraphicsMode=function(mode){if(typeof mode==="string"){if(mode.indexOf("GRAPHICS2D_")!=0)mode="GRAPHICS2D_"+mode;mode=EJSS_DRAWING2D.DrawingPanel[mode.toUpperCase()]|EJSS_DRAWING2D.DrawingPanel.GRAPHICS2D_SVG}else if(typeof mode==="undefined"){mode=EJSS_DRAWING2D.DrawingPanel.GRAPHICS2D_SVG}if(mode==mGraphicsMode)return;mGraphicsMode=mode;var exists=typeof mGraphics!=="undefined";if(exists){var parent=mGraphics.getParent();var width=mGraphics.getWidth();var height=mGraphics.getHeight();var style=mGraphics.getEventContext().getAttribute("style");var ele=document.getElementById(mName);ele.parentNode.removeChild(ele)}if(mode==EJSS_DRAWING2D.DrawingPanel.GRAPHICS2D_SVG){mGraphics=EJSS_GRAPHICS.svgGraphics(mName)}else if(mode==EJSS_DRAWING2D.DrawingPanel.GRAPHICS2D_CANVAS){mGraphics=EJSS_GRAPHICS.canvasGraphics(mName)}else{console.log("WARNING: setGraphics() - Graphics not supported")}if(exists){mGraphics.setParent(parent);mGraphics.setWidth(width);mGraphics.setHeight(height);mGraphics.getEventContext().setAttribute("style",style);mElementsChanged=true;mInteraction.reload()}};self.getAutoScale=function(){return mAutoScaleX||mAutoScaleY};self.setAutoScale=function(autoscale){self.setAutoScaleX(autoscale);self.setAutoScaleY(autoscale)};self.setAutoScaleX=function(autoscale){mAutoScaleX=autoscale};self.getAutoScaleX=function(){return mAutoScaleX};self.setAutoScaleY=function(autoscale){mAutoScaleY=autoscale};self.getAutoScaleY=function(){return mAutoScaleY};self.setInvertedScaleY=function(invertedscale){if(mInvertedScaleY!=invertedscale){mInvertedScaleY=invertedscale;if(mInvertedScaleY)mTypeScaleY=EJSS_DRAWING2D.DrawingPanel.SCALE_NUM;var changed=self.reportDecorations("bounds");if(changed)mPanelChanged=true}};self.getInvertedScaleY=function(){return mInvertedScaleY};self.setTypeScaleX=function(typescale){if(typeof typescale=="string")typescale=EJSS_DRAWING2D.DrawingPanel[typescale.toUpperCase()];mTypeScaleX=typescale};self.getTypeScaleX=function(){return mTypeScaleX};self.setTypeScaleY=function(typescale){if(typeof typescale=="string")typescale=EJSS_DRAWING2D.DrawingPanel[typescale.toUpperCase()];mTypeScaleY=typescale;if(mTypeScaleY==EJSS_DRAWING2D.DrawingPanel.SCALE_LOG)mInvertedScaleY=false};self.getTypeScaleY=function(){return mTypeScaleY};self.setWorldXMin=function(xmin){if(xmin!==mWorld.xminPreferred){mWorld.xminPreferred=xmin}};self.getWorldXMin=function(){return mWorld.xminPreferred};self.setWorldXMax=function(xmax){if(xmax!==mWorld.xmaxPreferred){mWorld.xmaxPreferred=xmax}};self.getWorldXMax=function(){return mWorld.xmaxPreferred};self.setWorldYMin=function(ymin){if(ymin!==mWorld.yminPreferred){mWorld.yminPreferred=ymin}};self.getWorldYMin=function(){return mWorld.yminPreferred};self.setWorldYMax=function(ymax){if(ymax!==mWorld.ymaxPreferred){mWorld.ymaxPreferred=ymax}};self.getWorldYMax=function(){return mWorld.ymaxPreferred};self.setWorldCoordinates=function(bounds){self.setWorldXMin(bounds[0]);self.setWorldXMax(bounds[1]);self.setWorldYMin(bounds[2]);self.setWorldYMax(bounds[3])};self.getWorldCoordinates=function(){return[self.getWorldXMin(),self.getWorldXMax(),self.getWorldYMin(),self.getWorldYMax()]};self.getMeasuredCoordinates=function(){return[mWorld.xminMeasured,mWorld.xmaxMeasured,mWorld.yminMeasured,mWorld.ymaxMeasured]};self.getRealWorldCoordinates=function(){return[mWorld.xmin,mWorld.xmax,mWorld.ymin,mWorld.ymax]};self.getRealWorldXMin=function(){return mWorld.xmin};self.getRealWorldXMax=function(){return mWorld.xmax};self.getRealWorldYMin=function(){return mWorld.ymin};self.getRealWorldYMax=function(){return mWorld.ymax};self.setSquareAspect=function(square){if(square!==mWorld.squareAspect){mWorld.squareAspect=square;mMustScale=true}};self.setMarginX=function(margin){if(mWorld.xmargin!=margin){mWorld.xmargin=margin;mMustScale=true}};self.getMarginX=function(){return mWorld.xmargin};self.setMarginY=function(margin){if(mWorld.ymargin!=margin){mWorld.ymargin=margin;mMustScale=true}};self.getMarginY=function(){return mWorld.ymargin};self.setEnabledDragging=function(motion){if(typeof motion=="string"){value=EJSS_DRAWING2D.DrawingPanel[motion.toUpperCase()];mEnabledDragging=typeof value==="undefined"?EJSS_DRAWING2D.DrawingPanel.ENABLED_NONE:value}else mEnabledDragging=motion};self.getEnabledDragging=function(){return mEnabledDragging};self.setEnabledZooming=function(allowed){mEnabledZooming=allowed};self.getEnabledZooming=function(){return mEnabledZooming};self.setZoomRate=function(rate){mZoomRate=rate};self.getZoomRate=function(){return mZoomRate};self.setZoomLimits=function(limits){mZoomLimits=limits};self.getZoomLimits=function(){return mZoomLimits};self.setShowCoordinates=function(show){mShowCoordinates=show};self.getShowCoordinates=function(){return mShowCoordinates};self.setShowAreaRectangle=function(show){mShowAreaRectangle=show};self.getShowAreaRectangle=function(){return mShowAreaRectangle};self.addDecoration=function(drawable,position,istop){if(istop)EJSS_TOOLS.addToArray(mTopDecorations,drawable,position);else EJSS_TOOLS.addToArray(mBottomDecorations,drawable,position);if(drawable.setPanel)drawable.setPanel(self);return self};self.removeDecoration=function(drawable){EJSS_TOOLS.removeFromArray(mBottomDecorations,drawable);EJSS_TOOLS.removeFromArray(mTopDecorations,drawable);if(drawable.setPanel)drawable.setPanel(null);return self};self.addElement=function(element,sibling){if(typeof sibling==="undefined"){EJSS_TOOLS.addToArray(mElements,element)}else if(typeof sibling==="object"){var index=EJSS_TOOLS.arrayObjectIndexOf(mElements,sibling);EJSS_TOOLS.addToArray(mElements,element,index)}else{EJSS_TOOLS.addToArray(mElements,element,sibling)}element.setPanel(self);if(element.dataCollected)mCollectersList.push(element);mElementsChanged=true};self.removeElement=function(element){EJSS_TOOLS.removeFromArray(mElements,element);mInteraction.clearInteractionElement(element);element.setPanel(null);if(element.dataCollected)EJSS_TOOLS.removeFromArray(mCollectersList,element);mElementsChanged=true};self.getElements=function(){return mElements};self.indexOfElement=function(element){return mElements.indexOf(element)};self._25=function(rect){var left=rect[0],top=rect[1],right=rect[2],bottom=rect[3];var changed=false;if(left!==mGutters.left){mGutters.left=left;changed=true}if(top!==mGutters.top){mGutters.top=top;changed=true}if(right!==mGutters.right){mGutters.right=right;changed=true}if(bottom!==mGutters.bottom){mGutters.bottom=bottom;changed=true}if(changed){mGutters.visible=mGutters.left>0||mGutters.top>0||mGutters.right>0||mGutters.bottom>0;mPanelChanged=true;mMustScale=true}};self.getGutters=function(){return mGutters};self.getGuttersStyle=function(){return mGuttersStyle};self.toPixelAxisY=function(y){return mWorld.yorigin-y-mWorld.yscale*mWorld.ymin};self.toPixelAxisX=function(x){return mWorld.xorigin+x-mWorld.xscale*mWorld.xmin};self._26=function(point,scale){var scaleX=typeof scale!="undefined"?scale:mTypeScaleX;var scaleY=typeof scale!="undefined"?scale:mTypeScaleY;var pos=[];if(scaleX==EJSS_DRAWING2D.DrawingPanel.SCALE_LOG)pos[0]=self.toPixelLogScale(point[0],mWorld.xorigin,mWorld.xmin,mWorld.xmax,mWorld.xscale);else pos[0]=mWorld.xorigin+mWorld.xscale*(point[0]-mWorld.xmin);if(scaleY==EJSS_DRAWING2D.DrawingPanel.SCALE_LOG)pos[1]=self.toPixelLogScale(point[1],mWorld.yorigin,mWorld.ymin,mWorld.ymax,mWorld.yscale);else{if(!mInvertedScaleY)pos[1]=mWorld.yorigin+mWorld.yscale*(point[1]-mWorld.ymin);else pos[1]=mGutters.top+mWorld.yscale*(mWorld.ymin-point[1])}return pos};self.toPixelMod=function(mod){var pmod=[];pmod[0]=mod[0]*mWorld.xscale;pmod[1]=mod[1]*mWorld.yscale;return pmod};self.toPanelPosition=function(point,scale){var scaleX=typeof scale!="undefined"?scale:mTypeScaleX;var scaleY=typeof scale!="undefined"?scale:mTypeScaleY;var pos=[];if(scaleX==EJSS_DRAWING2D.DrawingPanel.SCALE_LOG)pos[0]=self.toPanelLogScale(point[0],mWorld.xorigin,mWorld.xmin,mWorld.xmax,mWorld.xscale);else pos[0]=mWorld.xmin+(point[0]-mWorld.xorigin)/mWorld.xscale;if(scaleY==EJSS_DRAWING2D.DrawingPanel.SCALE_LOG)pos[1]=self.toPanelLogScale(point[1],mWorld.yorigin,mWorld.ymin,mWorld.ymax,mWorld.yscale);else{if(!mInvertedScaleY)pos[1]=mWorld.ymin+(point[1]-mWorld.yorigin)/mWorld.yscale;else pos[1]=mWorld.ymin-(point[1]-mGutters.top)/mWorld.yscale}return pos};self.toPanelMod=function(mod){var pmod=[];pmod[0]=mWorld.xscale==0?0:mod[0]/mWorld.xscale;pmod[1]=mWorld.yscale==0?0:mod[1]/mWorld.yscale;return pmod};self.toPixelLogScale=function(value,origin,min,max,pixratio){var minscale=min<=0?1:Math.log(min)/Math.log(10);var maxscale=max<=0?1:Math.log(max)/Math.log(10);var segsize=(max-min)*pixratio;var scalesize=maxscale-minscale;var sizeratio=segsize/scalesize;var step=value<=0?0:Math.log(value)/Math.log(10);return origin+sizeratio*(step-minscale)};self.toPanelLogScale=function(value,origin,min,max,pixratio){var minscale=min<0?0:Math.log(min)/Math.log(10);var maxscale=max<0?0:Math.log(max)/Math.log(10);var segsize=(max-min)*pixratio;var scalesize=maxscale-minscale;var sizeratio=segsize/scalesize;return Math.pow(10,minscale+(value-origin)/sizeratio)};self.getPixelPositionWorldOrigin=function(){return[mWorld.xorigin,mWorld.yorigin]};self.getInnerRect=function(){var bounds=self.getRealWorldCoordinates();if(!self.getInvertedScaleY())var pos=self._26([bounds[0],bounds[3]]);else var pos=self._26([bounds[0],bounds[2]]);var size=self.toPixelMod([bounds[1]-bounds[0],bounds[3]-bounds[2]]);return{x:pos[0],width:Math.abs(size[0]),y:pos[1],height:Math.abs(size[1])}},self.scale=function(){mMustScale=true;mElementsChanged=true};self.touch=function(){mMustScale=true;mElementsChanged=true;for(var i=0,n=mElements.length;i<n;i++)mElements[i].setChanged(true)};self._27=function(){var newWorld=false;var rangeX=(mWorld.xmaxMeasured-mWorld.xminMeasured)/2;var rangeY=(mWorld.ymaxMeasured-mWorld.yminMeasured)/2;var xmin=mWorld.xminMeasured-Math.abs(rangeX*mWorld.xmargin/100);var xmax=mWorld.xmaxMeasured+Math.abs(rangeX*mWorld.xmargin/100);var ymin=mWorld.yminMeasured-Math.abs(rangeY*mWorld.ymargin/100);var ymax=mWorld.ymaxMeasured+Math.abs(rangeY*mWorld.ymargin/100);var box=mGraphics.getBox();var width=box.width-(mGutters.left+mGutters.right);var height=box.height-(mGutters.bottom+mGutters.top);var xPixPerUnit=width/(xmax-xmin);var yPixPerUnit=height/(ymax-ymin);var stretch,diff;if(mWorld.squareAspect){stretch=Math.abs(xPixPerUnit/yPixPerUnit);if(stretch>=1){stretch=Math.min(stretch,width);diff=(xmax-xmin)*(stretch-1)/2;xmin-=diff;xmax+=diff;xPixPerUnit=width/(xmax-xmin)}else{stretch=Math.max(stretch,1/height);diff=(ymax-ymin)*(1/stretch-1)/2;ymin-=diff;ymax+=diff;yPixPerUnit=height/(ymax-ymin)}}newWorld=mWorld.xscale!=xPixPerUnit||mWorld.yscale!=-yPixPerUnit;mWorld.xscale=xPixPerUnit;mWorld.yscale=-yPixPerUnit;mWorld.xorigin=mGutters.left+.5;mWorld.yorigin=height+mGutters.top+.5;mMustScale=false;if(mWorld.xmin!==xmin||mWorld.xmax!==xmax||mWorld.ymin!==ymin||mWorld.ymax!==ymax){mWorld.xmin=xmin;mWorld.xmax=xmax;mWorld.ymin=ymin;mWorld.ymax=ymax;var changed=self.reportDecorations("bounds");if(changed)mPanelChanged=true;newWorld=true}if(newWorld){for(var i=0,n=mElements.length;i<n;i++)mElements[i].setMustProject(true)}};self.reportDecorations=function(event){var changed=false,i,n;for(i=0,n=mBottomDecorations.length;i<n;i++){changed|=mBottomDecorations[i].panelChangeListener&&mBottomDecorations[i].panelChangeListener("bounds")}for(i=0,n=mTopDecorations.length;i<n;i++){if(mTopDecorations[i].panelChangeListener)mTopDecorations[i].panelChangeListener("bounds")}return changed};self._28=function(){var xminMeasured=Number.MAX_VALUE;var xmaxMeasured=-Number.MAX_VALUE;var yminMeasured=Number.MAX_VALUE;var ymaxMeasured=-Number.MAX_VALUE;if(self.getAutoScaleY()||self.getAutoScaleX()){for(var i=0,n=mElements.length;i<n;i++){if(mElements[i].isMeasured()&&!mElements[i].isGroup()&&(mElements[i].getGroup()==null||mElements[i].getGroup().isMeasured())){if(mElements[i].isPixelSize()){var pos=mElements[i].getPosition();xminMeasured=Math.min(xminMeasured,pos[0]);xmaxMeasured=Math.max(xmaxMeasured,pos[0]);yminMeasured=Math.min(yminMeasured,pos[1]);ymaxMeasured=Math.max(ymaxMeasured,pos[1])}else{var bounds=mElements[i].getAbsoluteBounds();xminMeasured=Math.min(xminMeasured,bounds.left);xmaxMeasured=Math.max(xmaxMeasured,bounds.right);yminMeasured=Math.min(yminMeasured,bounds.bottom);ymaxMeasured=Math.max(ymaxMeasured,bounds.top)}}}}var updatedX=false;if(self.getAutoScaleX()){if(!isNaN(mWorld.xminPreferred))xminMeasured=Math.min(xminMeasured,mWorld.xminPreferred);if(!isNaN(mWorld.xmaxPreferred))xmaxMeasured=Math.max(xmaxMeasured,mWorld.xmaxPreferred);if(xmaxMeasured<=xminMeasured){updatedX=mWorld.xminMeasured!=xmindef||mWorld.xmaxMeasured!=xmaxdef;mWorld.xminMeasured=xmindef;mWorld.xmaxMeasured=xmaxdef}else{updatedX=mWorld.xminMeasured!=xminMeasured||mWorld.xmaxMeasured!=xmaxMeasured;mWorld.xminMeasured=xminMeasured;mWorld.xmaxMeasured=xmaxMeasured}}else if(!isNaN(mWorld.xminPreferred)&&!isNaN(mWorld.xmaxPreferred)){updatedX=mWorld.xminMeasured!=mWorld.xminPreferred||mWorld.xmaxMeasured!=mWorld.xmaxPreferred;mWorld.xminMeasured=mWorld.xminPreferred;mWorld.xmaxMeasured=mWorld.xmaxPreferred}else{updatedX=mWorld.xminMeasured!=xmindef||mWorld.xmaxMeasured!=xmaxdef;mWorld.xminMeasured=xmindef;mWorld.xmaxMeasured=xmaxdef}var updatedY=false;if(self.getAutoScaleY()){if(!isNaN(mWorld.yminPreferred))yminMeasured=Math.min(yminMeasured,mWorld.yminPreferred);if(!isNaN(mWorld.ymaxPreferred))ymaxMeasured=Math.max(ymaxMeasured,mWorld.ymaxPreferred);if(ymaxMeasured<=yminMeasured){updatedY=mWorld.yminMeasured!=ymindef||mWorld.ymaxMeasured!=ymaxdef;mWorld.yminMeasured=ymindef;mWorld.ymaxMeasured=ymaxdef}else{updatedY=mWorld.yminMeasured!=yminMeasured||mWorld.ymaxMeasured!=ymaxMeasured;mWorld.yminMeasured=yminMeasured;mWorld.ymaxMeasured=ymaxMeasured}}else if(!isNaN(mWorld.yminPreferred)&&!isNaN(mWorld.ymaxPreferred)){updatedY=mWorld.yminMeasured!=mWorld.yminPreferred||mWorld.ymaxMeasured!=mWorld.ymaxPreferred;mWorld.yminMeasured=mWorld.yminPreferred;mWorld.ymaxMeasured=mWorld.ymaxPreferred}else{updatedY=mWorld.yminMeasured!=ymindef||mWorld.ymaxMeasured!=ymaxdef;mWorld.yminMeasured=ymindef;mWorld.ymaxMeasured=ymaxdef}return updatedX||updatedY};self.reset=function(){mGraphics.reset()};self.disable=function(){mEnabledRedering=false};self.enable=function(){mEnabledRedering=true};self.render=function(){if(mEnabledRedering){var reseted=false;if(mGraphics.setImageData||mElementsChanged){mGraphics.reset();reseted=true;mElementsChanged=false}for(var i=0,n=mCollectersList.length;i<n;i++)mCollectersList[i].dataCollected();var measuredWorld=self._28();if(mMustScale||measuredWorld)self._27();if(mPanelChanged||reseted){mGraphics.drawPanel(self)}mGraphics.draw(mBottomDecorations);mGraphics.draw(mElements,reseted);if(mPanelChanged||reseted){mGraphics._24(self)}mGraphics.draw(mTopDecorations);mPanelChanged=false;for(var i=0,n=mElements.length;i<n;i++)mElements[i].setChanged(false)}};self.getPanelInteraction=function(){return mInteraction};self.getController=function(){return mController};self.setController=function(controller){mController=controller};self.getOnMoveHandler=null;self.getOnZoomHandler=function(){if(mEnabledZooming){var delta=mInteraction.getInteractionZoomDelta();var bounds=self.getWorldCoordinates();if(isNaN(bounds[0])||isNaN(bounds[1])||isNaN(bounds[2])||isNaN(bounds[3]))bounds=self.getMeasuredCoordinates();var incw=+((1-mZoomRate)*(bounds[1]-bounds[0])*delta/2);var inch=+((1-mZoomRate)*(bounds[3]-bounds[2])*delta/2);var neww=Math.abs(bounds[0]-bounds[1])-2*incw;if(neww>mZoomLimits[0]&&neww<mZoomLimits[1]){self.setWorldCoordinates([bounds[0]+incw,bounds[1]-incw,bounds[2]+inch,bounds[3]-inch])}}};self.getOnPressHandler=function(){if(mShowCoordinates){var point=mInteraction.getInteractionPoint();var bounds=self.getRealWorldCoordinates();if(bounds[0]<point[0]&&bounds[1]>point[0]&&bounds[3]>point[1]&&bounds[2]<point[1]){mCoorDecoration.setText(point);mCoorDecoration.setVisible(true);mCoorDecoration.getController().propertiesChanged("Visible","Text")}}};self.getOnDragHandler=function(){if(mShowCoordinates){var point=mInteraction.getInteractionPoint();var bounds=self.getRealWorldCoordinates();if(bounds[0]<point[0]&&bounds[1]>point[0]&&bounds[3]>point[1]&&bounds[2]<point[1]){mCoorDecoration.setText(point);mCoorDecoration.setVisible(true);mCoorDecoration.getController().propertiesChanged("Visible","Text")}}if(mShowAreaRectangle){var boundsInter=mInteraction.getInteractionBounds();if(boundsInter.length>0&&mTypeScaleX==EJSS_DRAWING2D.DrawingPanel.SCALE_NUM&&mTypeScaleY==EJSS_DRAWING2D.DrawingPanel.SCALE_NUM){mDragDecoration.setBounds(boundsInter);mDragDecoration.setVisible(true);mDragDecoration.getController().propertiesChanged("Position","X","Y","Size","SizeX","SizeY","Visible")}else{mDragDecoration.setVisible(false);mDragDecoration.getController().propertiesChanged("Visible")}}if(mEnabledDragging!=0&&mEnabledDragging!=4){var distance=mInteraction.getInteractionDistance();if(distance.length>0&&mTypeScaleX==EJSS_DRAWING2D.DrawingPanel.SCALE_NUM&&mTypeScaleY==EJSS_DRAWING2D.DrawingPanel.SCALE_NUM){var bounds=self.getWorldCoordinates();if(isNaN(bounds[0])||isNaN(bounds[1])||isNaN(bounds[2])||isNaN(bounds[3]))bounds=self.getMeasuredCoordinates();if(mEnabledDragging==1){self.setWorldCoordinates([bounds[0]+distance[0],bounds[1]+distance[0],bounds[2]+distance[1],bounds[3]+distance[1]])}else if(mEnabledDragging==2){self.setWorldCoordinates([bounds[0]+distance[0],bounds[1]+distance[0],bounds[2],bounds[3]])}else{self.setWorldCoordinates([bounds[0],bounds[1],bounds[2]+distance[1],bounds[3]+distance[1]])}}}};self.getOnReleaseHandler=function(){if(mShowCoordinates){mCoorDecoration.setVisible(false);mCoorDecoration.getController().propertiesChanged("Visible")}if(mShowAreaRectangle){mDragDecoration.setVisible(false);mDragDecoration.getController().propertiesChanged("Visible")}};self.getMessageDecoration=function(whichOne){switch(whichOne){case"TL":return mTLMessageDecoration;case"BR":return mBRMessageDecoration;case"BL":return mBLMessageDecoration}return mTRMessageDecoration};self.getCoordinates=function(){return mCoorDecoration};self.getInteraction=function(){return mInteraction};self.registerProperties=function(controller){EJSS_DRAWING2D.DrawingPanel.registerProperties(self,controller)};self.serialize=function(){return{mStyle:mStyle.serialize(),mTopDecorations:mTopDecorations,mBottomDecorations:mBottomDecorations,mElements:mElements,mCollectersList:mCollectersList,mAutoScaleX:mAutoScaleX,mAutoScaleY:mAutoScaleY,mInvertedScaleY:mInvertedScaleY,mTypeScaleX:mTypeScaleX,mTypeScaleY:mTypeScaleY,mShowCoordinates:mShowCoordinates,xmindef:xmindef,xmaxdef:xmaxdef,ymindef:ymindef,ymaxdef:ymaxdef,mWorld:mWorld,mGutters:mGutters,mGuttersStyle:mGuttersStyle.serialize()}};self.unserialize=function(json){mStyle.unserialize(json.mStyle),mAutoScaleX=json.mAutoScaleX,mAutoScaleY=json.mAutoScaleY,mInvertedScaleY=json.mInvertedScaleY,mTypeScaleX=json.mTypeScaleX,mTypeScaleY=json.mTypeScaleY,mShowCoordinates=json.mShowCoordinates,xmindef=json.xmindef,xmaxdef=json.xmaxdef,ymindef=json.ymindef,ymaxdef=json.ymaxdef,mWorld=json.mWorld,mGutters=json.mGutters,mGuttersStyle.unserialize(json.mGuttersStyle),mPanelChanged=true};self.setGraphicsMode(mGraphicsMode);mStyle.setLineColor("black");mStyle.setFillColor("rgb(239,239,255)");mStyle.setChangeListener(function(change){mPanelChanged=true});mGuttersStyle.setChangeListener(function(reporter){mPanelChanged=true});var mDragDecoration=EJSS_DRAWING2D.shape(mName+"__cursorBox__");mDragDecoration.setShapeType(EJSS_DRAWING2D.Shape.RECTANGLE);mDragDecoration.getStyle().setDrawFill(false);mDragDecoration.getStyle().setLineColor("black");mDragDecoration.setRelativePosition("CENTER");mDragDecoration.setVisible(false);self.addDecoration(mDragDecoration,0,true);var mTLMessageDecoration=EJSS_DRAWING2D.text(mName+"__tlmessage__");mTLMessageDecoration.setRelativePosition("NORTH_WEST");mTLMessageDecoration.getStyle().setDrawLines(true);mTLMessageDecoration.getStyle().setDrawFill(true);mTLMessageDecoration.getStyle().setFillColor("yellow");mTLMessageDecoration.getStyle().setLineColor("black");mTLMessageDecoration.getFont().setFontSize(12);mTLMessageDecoration.setPosition([mWorld.xmin,mWorld.ymax]);mTLMessageDecoration.setFramed(true);mTLMessageDecoration.panelChangeListener=function(event){if(event=="bounds"){if(self.getInvertedScaleY())mTLMessageDecoration.setPosition([mWorld.xmin,mWorld.ymin]);else mTLMessageDecoration.setPosition([mWorld.xmin,mWorld.ymax])}};self.addDecoration(mTLMessageDecoration,0,true);var mBLMessageDecoration=EJSS_DRAWING2D.text(mName+"__blmessage__");mBLMessageDecoration.setRelativePosition("SOUTH_WEST");mBLMessageDecoration.getStyle().setDrawLines(true);mBLMessageDecoration.getStyle().setDrawFill(true);mBLMessageDecoration.getStyle().setFillColor("yellow");mBLMessageDecoration.getStyle().setLineColor("black");mBLMessageDecoration.getFont().setFontSize(12);mBLMessageDecoration.setPosition([mWorld.xmin,mWorld.ymin]);mBLMessageDecoration.setFramed(true);mBLMessageDecoration.panelChangeListener=function(event){if(event=="bounds")if(self.getInvertedScaleY())mBLMessageDecoration.setPosition([mWorld.xmin,mWorld.ymax]);else mBLMessageDecoration.setPosition([mWorld.xmin,mWorld.ymin])};self.addDecoration(mBLMessageDecoration,0,true);var mBRMessageDecoration=EJSS_DRAWING2D.text(mName+"__brmessage__");mBRMessageDecoration.setRelativePosition("SOUTH_EAST");mBRMessageDecoration.getStyle().setDrawLines(true);mBRMessageDecoration.getStyle().setDrawFill(true);mBRMessageDecoration.getStyle().setFillColor("yellow");mBRMessageDecoration.getStyle().setLineColor("black");mBRMessageDecoration.getFont().setFontSize(12);mBRMessageDecoration.setPosition([mWorld.xmax,mWorld.ymin]);mBRMessageDecoration.setFramed(true);mBRMessageDecoration.panelChangeListener=function(event){if(event=="bounds")if(self.getInvertedScaleY())mBRMessageDecoration.setPosition([mWorld.xmax,mWorld.ymax]);else mBRMessageDecoration.setPosition([mWorld.xmax,mWorld.ymin])};self.addDecoration(mBRMessageDecoration,0,true);var mTRMessageDecoration=EJSS_DRAWING2D.text(mName+"__trmessage__");mTRMessageDecoration.setRelativePosition("NORTH_EAST");mTRMessageDecoration.getStyle().setDrawLines(true);mTRMessageDecoration.getStyle().setDrawFill(true);mTRMessageDecoration.getStyle().setFillColor("yellow");mTRMessageDecoration.getStyle().setLineColor("black");mTRMessageDecoration.getFont().setFontSize(12);mTRMessageDecoration.setPosition([mWorld.xmax,mWorld.ymax]);mTRMessageDecoration.setFramed(true);mTRMessageDecoration.panelChangeListener=function(event){if(event=="bounds")if(self.getInvertedScaleY())mTRMessageDecoration.setPosition([mWorld.xmax,mWorld.ymin]);else mTRMessageDecoration.setPosition([mWorld.xmax,mWorld.ymax])};self.addDecoration(mTRMessageDecoration,0,true);var mCoorDecoration=EJSS_DRAWING2D.infoText(mName+"__coor__");mCoorDecoration.setRelativePosition("SOUTH_WEST");mCoorDecoration.getFont().setFontSize(12);mCoorDecoration.getStyle().setFillColor("yellow");mCoorDecoration.setPosition([mWorld.xmin,mWorld.ymin]);mCoorDecoration.setFormat("x:0.##,y:0.##");mCoorDecoration.setFramed(true);mCoorDecoration.setVisible(false);mCoorDecoration.panelChangeListener=function(event){if(event=="bounds")if(self.getInvertedScaleY())mCoorDecoration.setPosition([mWorld.xmin,mWorld.ymax]);else mCoorDecoration.setPosition([mWorld.xmin,mWorld.ymin])};self.addDecoration(mCoorDecoration,0,true);self.getGuttersStyle().setLineColor("black");self.getGuttersStyle().setFillColor("rgb(239,239,255)");self.getGuttersStyle().setShapeRendering("RENDER_CRISPEDGES");var mInteraction=EJSS_DRAWING2D.panelInteraction(self);mGraphics.getEventContext().addEventListener("dblclick",function(event){event.preventDefault();event.stopPropagation();return false},true);return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Element={CENTER:0,NORTH:1,SOUTH:2,EAST:3,WEST:4,NORTH_EAST:5,NORTH_WEST:6,SOUTH_EAST:7,SOUTH_WEST:8,registerProperties:function(element,controller){var TARGET_POSITION=EJSS_DRAWING2D.PanelInteraction.TARGET_POSITION;var TARGET_SIZE=EJSS_DRAWING2D.PanelInteraction.TARGET_SIZE;var style=element.getStyle();element.setController(controller);controller.registerProperty("Parent",element.setParent,element.getParent);controller.registerProperty("X",element.setX,element.getX);controller.registerProperty("Y",element.setY,element.getY)
;controller.registerProperty("Position",element.setPosition,element.getPosition);controller.registerProperty("PixelPosition",element.setPixelPosition,element.getPixelPosition);controller.registerProperty("Diameter",function(diameter){element.setSize([diameter,diameter])});controller.registerProperty("Radius",function(radius){element.setSize([radius*2,radius*2])});controller.registerProperty("SizeX",element.setSizeX,element.getSizeX);controller.registerProperty("SizeY",element.setSizeY,element.getSizeY);controller.registerProperty("Size",element.setSize,element.getSize);controller.registerProperty("PixelSize",element.setPixelSize,element.getPixelSize);controller.registerProperty("Bounds",element.setBounds,element.getBounds);controller.registerProperty("RelativePosition",element.setRelativePosition,element.getRelativePosition);controller.registerProperty("Visibility",element.setVisible,element.isVisible);controller.registerProperty("Measured",element.setMeasured,element.isMeasured);controller.registerProperty("Transformation",element.setTransformation);controller.registerProperty("Rotate",element.setRotate);controller.registerProperty("ScaleX",element.setScaleX);controller.registerProperty("ScaleY",element.setScaleY);controller.registerProperty("SkewX",element.setSkewX);controller.registerProperty("SkewY",element.setSkewY);controller.registerProperty("LineColor",style.setLineColor,style.getLineColor);controller.registerProperty("LineWidth",style.setLineWidth,style.getLineWidth);controller.registerProperty("DrawLines",style.setDrawLines,style.getDrawLines);controller.registerProperty("FillColor",style.setFillColor,style.getFillColor);controller.registerProperty("DrawFill",style.setDrawFill,style.getDrawFill);controller.registerProperty("ShapeRendering",style.setShapeRendering,style.getShapeRendering);controller.registerProperty("Attributes",style.setAttributes,style.getAttributes);controller.registerProperty("EnabledPosition",function(enabled){element.getInteractionTarget(TARGET_POSITION).setMotionEnabled(enabled)});controller.registerProperty("MovesGroup",function(affects){element.getInteractionTarget(TARGET_POSITION).setAffectsGroup(affects)});controller.registerProperty("EnabledSize",function(enabled){element.getInteractionTarget(TARGET_SIZE).setMotionEnabled(enabled)});controller.registerProperty("ResizesGroup",function(affects){element.getInteractionTarget(TARGET_SIZE).setAffectsGroup(affects)});controller.registerProperty("Sensitivity",function(sense){element.getInteractionTarget(TARGET_POSITION).setSensitivity(sense);element.getInteractionTarget(TARGET_SIZE).setSensitivity(sense)});controller.registerAction("OnDoubleClick",element.getOnDoubleClickInformation);controller.registerAction("OnEnter",element.getOnEnterInformation);controller.registerAction("OnExit",element.getOnExitInformation);controller.registerAction("OnPress",element.getOnPressInformation);controller.registerAction("OnDrag",element.getOnDragInformation);controller.registerAction("OnRelease",element.getOnReleaseInformation)},copyTo:function(source,dest){var InteractionTarget=EJSS_DRAWING2D.InteractionTarget;var TARGET_POSITION=EJSS_DRAWING2D.PanelInteraction.TARGET_POSITION;var TARGET_SIZE=EJSS_DRAWING2D.PanelInteraction.TARGET_SIZE;EJSS_DRAWING2D.Style.copyTo(source.getStyle(),dest.getStyle());dest.setVisible(source.isVisible());dest.setMeasured(source.isMeasured());dest.setPosition(source.getPosition());dest.setPixelPosition(source.isPixelPosition());dest.setSize(source.getSize());dest.setPixelSize(source.isPixelSize());dest.setTransformation(source.getTransformation());dest.setRotate(source.getRotate());dest.setRelativePosition(source.getRelativePosition());InteractionTarget.copyTo(source.getInteractionTarget(TARGET_POSITION),dest.getInteractionTarget(TARGET_POSITION));InteractionTarget.copyTo(source.getInteractionTarget(TARGET_SIZE),dest.getInteractionTarget(TARGET_SIZE));dest.setParent(source.getParent(),source)},getRelativePositionOffset:function(position,sx,sy,invertedy){var dx=0;var dy=0;switch(position){default:case EJSS_DRAWING2D.Element.CENTER:dx=0;dy=0;break;case EJSS_DRAWING2D.Element.NORTH:dx=0;dy=-(sy/2);break;case EJSS_DRAWING2D.Element.SOUTH:dx=0;dy=sy/2;break;case EJSS_DRAWING2D.Element.EAST:dx=-(sx/2);dy=0;break;case EJSS_DRAWING2D.Element.WEST:dx=sx/2;dy=0;break;case EJSS_DRAWING2D.Element.NORTH_EAST:dx=-(sx/2);dy=-(sy/2);break;case EJSS_DRAWING2D.Element.NORTH_WEST:dx=sx/2;dy=-(sy/2);break;case EJSS_DRAWING2D.Element.SOUTH_EAST:dx=-(sx/2);dy=sy/2;break;case EJSS_DRAWING2D.Element.SOUTH_WEST:dx=sx/2;dy=sy/2;break}if(typeof invertedy!="undefined"&&invertedy)dy=-dy;return[dx,dy]},getSWRelativePositionOffset:function(position,sx,sy,invertedy){var dx=0;var dy=0;switch(position){default:case EJSS_DRAWING2D.Element.CENTER:dx=-(sx/2);dy=sy/2;break;case EJSS_DRAWING2D.Element.NORTH:dx=-(sx/2);dy=sy;break;case EJSS_DRAWING2D.Element.SOUTH:dx=-(sx/2);dy=0;break;case EJSS_DRAWING2D.Element.EAST:dx=-sx;dy=sy/2;break;case EJSS_DRAWING2D.Element.WEST:dx=0;dy=sy/2;break;case EJSS_DRAWING2D.Element.NORTH_EAST:dx=-sx;dy=sy;break;case EJSS_DRAWING2D.Element.NORTH_WEST:dx=0;dy=sy;break;case EJSS_DRAWING2D.Element.SOUTH_EAST:dx=-sx;dy=0;break;case EJSS_DRAWING2D.Element.SOUTH_WEST:dx=0;dy=0;break}if(typeof invertedy!="undefined"&&invertedy)dy=-dy;return[dx,dy]}};EJSS_DRAWING2D.element=function(mName){var self={};var Element=EJSS_DRAWING2D.Element;var PanelInteraction=EJSS_DRAWING2D.PanelInteraction;var mStyle=EJSS_DRAWING2D.style(mName);var mVisible=true;var mMeasured=true;var mRelativePosition=Element.CENTER;var mX=0;var mY=0;var mPixelPosition=false;var mSizeX=1;var mSizeY=1;var mPixelSize=false;var mTransformation=[];var mRotate=0;var mInteraction={positionTarget:EJSS_DRAWING2D.interactionTarget(self,PanelInteraction.TARGET_POSITION,Element.CENTER),sizeTarget:EJSS_DRAWING2D.interactionTarget(self,PanelInteraction.TARGET_SIZE,Element.NORTH_EAST)};var mPanel=null;var mGroup=null;var mSet=null;var mIndexInSet=-1;var mProjectedPosition=[];var mProjectedSize=[];var mMustProject=true;var mElementChanged=true;var mController={propertiesChanged:function(){},invokeAction:function(){}};var mCustomObject=null;self.getName=function(){return mName};self.setParent=function(parent,sibling){if(parent.render){self.setGroup(null);parent.addElement(self);self.setPanel(parent)}else if(parent._23()=="ElementGroup"){self.setGroup(parent);self.getGroupPanel().addElement(self,sibling);self.setPanel(self.getGroupPanel())}else{console.log("WARNING: setParent() - Parent not valid : "+parent.getName())}};self.getParent=function(){var parent;if(mGroup!==null)parent=self.getGroup();else parent=self.getPanel();return parent};self.isGroup=function(){return false};self.getStyle=function(){return mStyle};self.setCustomObject=function(object){mCustomObject=object};self.getCustomObject=function(){return mCustomObject};self.setX=function(x,dummy){if(mX!=x){mX=x;mElementChanged=true}};self.getX=function(){return mX};self.setY=function(y){if(mY!=y){mY=y;mElementChanged=true}};self.getY=function(){return mY};self.setPosition=function(position){self.setX(position[0]);self.setY(position[1])};self.getPosition=function(){return[mX,mY]};self.setPixelPosition=function(pixel){if(mPixelPosition!=pixel){mPixelPosition=pixel;mElementChanged=true}};self.isPixelPosition=function(){return mPixelPosition};self.setSizeX=function(sizeX){if(mSizeX!=sizeX){mSizeX=sizeX;mElementChanged=true}};self.getSizeX=function(){return mSizeX};self.setSizeY=function(sizeY){if(mSizeY!=sizeY){mSizeY=sizeY;mElementChanged=true}};self.getSizeY=function(){return mSizeY};self.setSize=function(size){self.setSizeX(size[0]);self.setSizeY(size[1])};self.getSize=function(){return[self.getSizeX(),self.getSizeY()]};self.setPixelSize=function(pixel){if(mPixelSize!=pixel){mPixelSize=pixel;mElementChanged=true}};self.isPixelSize=function(){return mPixelSize};self.setBounds=function(bounds){var left,right,top,bottom;if(bounds.left){left=bounds.left;right=bounds.right;top=bounds.top;bottom=bounds.bottom}else{left=bounds[0];right=bounds[1];top=bounds[2];bottom=bounds[3]}var sx=right-left;var sy=bottom-top;var d=self.getRelativePositionOffset(sx,sy);var mx=sx/2,my=sy/2;var x=left+mx-d[0];var y=top+my-d[1];self.setX(x);self.setY(y);self.setSizeX(sx);self.setSizeY(sy)};self.getBounds=function(){var size=mPixelSize?mPanel.toPanelMod([mSizeX,-mSizeY]):[mSizeX,mSizeY];var mx=size[0]/2,my=size[1]/2;var d=self.getRelativePositionOffset(size[0],size[1]);return{left:mX+d[0]-mx,right:mX+d[0]+mx,top:mY+d[1]+my,bottom:mY+d[1]-my}};self.getAbsoluteBounds=function(withTransf){var bounds=self.getBounds();var p1=self.toGroupSpace([bounds.left,bounds.top],withTransf);var p2=self.toGroupSpace([bounds.right,bounds.bottom],withTransf);return{left:p1[0],top:p1[1],right:p2[0],bottom:p2[1]}};self.setRelativePosition=function(position){if(typeof position=="string")position=Element[position.toUpperCase()];if(mRelativePosition!=position){mRelativePosition=position;mElementChanged=true}};self.getRelativePosition=function(){return mRelativePosition};self.getRelativePositionOffset=function(s1,s2){var sx,sy;if(Array.isArray(s1)){sx=s1[0];sy=s1[1]}else{sx=s1;sy=s2}var invertedScale=mPanel.getInvertedScaleY?mPanel.getInvertedScaleY():false;return Element.getRelativePositionOffset(mRelativePosition,sx,sy,invertedScale)};self.setVisible=function(visible){if(visible!=mVisible){mVisible=visible;mElementChanged=true}};self.isVisible=function(){return mVisible};self.isGroupVisible=function(){var el=mGroup;while(typeof el!="undefined"&&el!==null){if(!el.isVisible())return false;el=el.getGroup()}return mVisible};self.setMeasured=function(measured){mMeasured=measured};self.isMeasured=function(){return mMeasured};self.setTransformation=function(trans){if(typeof trans=="undefined"||trans===null){mTransformation=[]}else if(Array.isArray(trans)&&trans.length>5){if(!EJSS_TOOLS.compareArrays(mTransformation,trans)){mTransformation=trans.slice();mElementChanged=true}}else if(mRotate!=trans){mRotate=trans;mElementChanged=true}};self.getTransformation=function(){return mTransformation};self.setRotate=function(angle){if(mRotate!=angle){mRotate=angle;mElementChanged=true}};self.getRotate=function(){return mRotate};self.setScaleX=function(rate){if(mTransformation.length==0)mTransformation=[1,0,0,1,0,0];if(mTransformation[0]!=rate){mTransformation[0]=rate;mElementChanged=true}};self.getScaleX=function(){if(mTransformation.length==0)return 1;else return mTransformation[0]};self.setScaleY=function(rate){if(mTransformation.length==0)mTransformation=[1,0,0,1,0,0];if(mTransformation[3]!=rate){mTransformation[3]=rate;mElementChanged=true}};self.getScaleY=function(){if(mTransformation.length==0)return 1;else return mTransformation[3]};self.setSkewX=function(angle){if(mTransformation.length==0)mTransformation=[1,0,0,1,0,0];if(mTransformation[2]!=angle){mTransformation[2]=angle;mElementChanged=true}};self.getSkewX=function(){if(mTransformation.length==0)return 0;else return mTransformation[2]};self.setSkewY=function(angle){if(mTransformation.length==0)mTransformation=[1,0,0,1,0,0];if(mTransformation[1]!=angle){mTransformation[1]=angle;mElementChanged=true}};self.getSkewY=function(){if(mTransformation.length==0)return 0;else return mTransformation[1]};self.getInfo=function(){var info="x="+mX.toFixed(2)+" y="+mY.toFixed(2);return info};self.setPanel=function(panel){mPanel=panel;mMustProject=true};self.getPanel=function(){return mPanel};self.getGroupPanel=function(){var el=self;while(el.getGroup())el=el.getGroup();return el.getPanel()};self.setGroup=function(group){mGroup=group;mElementChanged=true};self.getGroup=function(){return mGroup};self.setSet=function(set,index){mSet=set;mIndexInSet=index};self.getSet=function(){return mSet};self.getSetIndex=function(){return mIndexInSet};self.isChanged=function(){return mElementChanged};self.setChanged=function(changed){mElementChanged=changed};self.isGroupChanged=function(){var el=self.getGroup();while(typeof el!="undefined"&&el!==null){if(el.isChanged())return true;el=el.getGroup()}return false};self.setMustProject=function(needsIt){mMustProject=needsIt};self.isMustProject=function(){return mMustProject};self.getPixelPosition=function(withTransf){if(self.isChanged()||self.isGroupChanged()||self.isMustProject()||withTransf){mProjectedPosition=self.getPixelPositionOf(mX,mY,withTransf);mProjectedSize=self.getPixelSizeOf(mSizeX,mSizeY);self.setMustProject(withTransf)}return mProjectedPosition};self.getPixelSizes=function(withTransf){if(self.isChanged()||self.isGroupChanged()||self.isMustProject()){mProjectedPosition=self.getPixelPositionOf(mX,mY,withTransf);mProjectedSize=self.getPixelSizeOf(mSizeX,mSizeY);self.setMustProject(withTransf)}return mProjectedSize};self.getAbsoluteSize=function(){var size=mPixelSize?mPanel.toPanelMod([mSizeX,-mSizeY]):[mSizeX,mSizeY];return self.toGroupSpaceMod(size)};self.getAbsolutePosition=function(withTransf){var pos;if(mPixelPosition){if(mGroup===null)pos=mPanel.toPanelPosition([mX,mY]);else pos=mPanel.toPanelPosition([mX,mY],EJSS_DRAWING2D.DrawingPanel.SCALE_NUM)}else{pos=[mX,mY]}return self.toGroupSpace(pos,withTransf)};self.setAbsolutePosition=function(position){if(mPixelPosition){console.log("setAbsolutePosition not supported!")}else{self.setPosition(self.toElementSpace(position))}};self.setAbsoluteX=function(x){if(mPixelPosition){console.log("setAbsoluteX not supported!")}else{self.setX(self.toElementSpace([x,0])[0])}};self.setAbsoluteY=function(y){if(mPixelPosition){console.log("setAbsoluteY not supported!")}else{self.setY(self.toElementSpace([0,y])[1])}};self.getPixelSizeOf=function(sx,sy){if(mPixelSize)return[sx,-sy];else return self.getGroupPanel().toPixelMod(self.toGroupSpaceMod([sx,sy]))};self.getPixelPositionOf=function(x,y,withTransf){if(mPixelPosition){if(mGroup){var groupPos=mGroup.getPixelPosition();return[groupPos[0]+x,groupPos[1]-y]}return[self.getGroupPanel().toPixelAxisX(x),self.getGroupPanel().toPixelAxisY(y)]}else{if(mGroup===null)return self.getGroupPanel()._26(self.toGroupSpace([x,y]));return self.getGroupPanel()._26(self.toGroupSpace([x,y],withTransf),EJSS_DRAWING2D.DrawingPanel.SCALE_NUM)}};self.toGroupSpaceMod=function(mod){var el=mGroup;while(typeof el!="undefined"&&el!==null){mod[0]*=el.getSizeX();mod[1]*=el.getSizeY();el=el.getGroup()}return mod};self.toGroupSpace=function(point,withTransf){var el=mGroup;while(typeof el!="undefined"&&el!==null){point[0]*=el.getSizeX();point[1]*=el.getSizeY();point[0]+=el.getX();point[1]+=el.getY();el=el.getGroup()}if(withTransf){el=mGroup;while(typeof el!="undefined"&&el!==null){var rot=el.getRotate();if(rot!=0){var pos=el.getAbsolutePosition();point=EJSS_TOOLS.Mathematics.rotate(pos,point,-rot)}el=el.getGroup()}}return point};self.toElementSpace=function(point){var list=[];var el=mGroup;while(typeof el!="undefined"&&el!==null){list.push(el);el=el.getGroup()}list=list.reverse();var listLength=list.length;for(var i=0;i<listLength;i++){var el=list[i];point[0]-=el.getX();point[1]-=el.getY();if(el.getSizeX()==0)point[0]=0;else point[0]/=el.getSizeX();if(el.getSizeY()==0)point[1]=0;else point[1]/=el.getSizeY()}return point};self.getController=function(){return mController};self.setController=function(controller){mController=controller};self.getInteractionTarget=function(target){switch(target){case PanelInteraction.TARGET_POSITION:return mInteraction.positionTarget;case PanelInteraction.TARGET_SIZE:return mInteraction.sizeTarget}return null};self.getInteractionTargets=function(){return[mInteraction.positionTarget,mInteraction.sizeTarget]};self.getInteractionInformation=function(){return{info:self.getPosition(),element:self,point:self.getGroupPanel().getPanelInteraction().getInteractionPoint()}};self.getOnDoubleClickInformation=function(){var info=self.getInteractionInformation();info.action="OnDoubleClick";return info};self.getOnEnterInformation=function(){var info=self.getInteractionInformation();info.action="OnEnter";return info};self.getOnExitInformation=function(){var info=self.getInteractionInformation();info.action="OnExit";return info};self.getOnPressInformation=function(){var info=self.getInteractionInformation();info.action="OnPress";return info};self.getOnDragInformation=function(){var info=self.getInteractionInformation();info.action="OnDrag";return info};self.getOnReleaseInformation=function(){var info=self.getInteractionInformation();info.action="OnRelease";return info};self.registerProperties=function(controller){EJSS_DRAWING2D.Element.registerProperties(self,controller)};self.copyTo=function(element){EJSS_DRAWING2D.Element.copyTo(self,element)};self.serialize=function(){return{mStyle:mStyle.serialize(),mVisible:mVisible,mMeasured:mMeasured,mRelativePosition:mRelativePosition,mX:mX,mY:mY,mPixelPosition:mPixelPosition,mSizeX:mSizeX,mSizeY:mSizeY,mPixelSize:mPixelSize,mTransformation:mTransformation,mInteraction:{},mPanel:mPanel?mPanel.getName():mPanel,mGroup:mGroup?mGroup.getName():mGroup,mSet:mSet?mSet.getName():mSet,mIndexInSet:mIndexInSet,mProjectedPosition:mProjectedPosition,mProjectedSize:mProjectedSize}};self.unserialize=function(json){mStyle.unserialize(json.mStyle),mVisible=json.mVisible,mMeasured=json.mMeasured,mRelativePosition=json.mRelativePosition,mX=json.mX,mY=json.mY,mPixelPosition=json.mPixelPosition,mSizeX=json.mSizeX,mSizeY=json.mSizeY,mPixelSize=json.mPixelSize,mTransformation=json.mTransformation,mIndexInSet=json.mIndexInSet,mProjectedPosition=json.mProjectedPosition,mProjectedSize=json.mProjectedSize,mElementChanged=true};mStyle.setChangeListener(function(change){mElementChanged=true});return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.ElementSet={};EJSS_DRAWING2D.elementSet=function(mConstructor,mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Grid={SCALE_NUM:0,SCALE_LOG:1,registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("StepX",element.setStepX,element.getStepX);controller.registerProperty("StepY",element.setStepY,element.getStepY);controller.registerProperty("TicksX",element.setTicksX,element.getTicksX);controller.registerProperty("TicksY",element.setTicksY,element.getTicksY);controller.registerProperty("TickStepX",element.setTickStepX,element.getTickStepX);controller.registerProperty("TickStepY",element.setTickStepY,element.getTickStepY);controller.registerProperty("TicksXMode",element.setTicksXMode,element.getTicksXMode);controller.registerProperty("TicksYMode",element.setTicksYMode,element.getTicksYMode);controller.registerProperty("ShowX",element.setShowX,element.getShowX);controller.registerProperty("ShowY",element.setShowY,element.getShowY);controller.registerProperty("FixedTickX",element.setFixedTickX,element.getFixedTickX);controller.registerProperty("FixedTickY",element.setFixedTickY,element.getFixedTickY);controller.registerProperty("ScaleX",element.setScaleX,element.getScaleX);controller.registerProperty("ScaleY",element.setScaleY,element.getScaleY);controller.registerProperty("ScalePrecisionX",element.setScalePrecisionX,element.getScalePrecisionX);controller.registerProperty("ScalePrecisionY",element.setScalePrecisionY,element.getScalePrecisionY);controller.registerProperty("AutoTicksX",element.setAutoTicksX,element.getAutoTicksX);controller.registerProperty("AutoTicksY",element.setAutoTicksY,element.getAutoTicksY);controller.registerProperty("AutoStepXMin",element.setAutoStepXMin,element.getAutoStepXMin);controller.registerProperty("AutoStepYMin",element.setAutoStepYMin,element.getAutoStepYMin);controller.registerProperty("AutoTicksXRange",element.setAutoTicksXRange,element.getAutoTicksXRange);controller.registerProperty("AutoTicksYRange",element.setAutoTicksYRange,element.getAutoTicksYRange);controller.registerProperty("LineColorX",element.setLineColorX,element.getLineColorX);controller.registerProperty("LineWidthX",element.setLineWidthX,element.getLineWidthX);controller.registerProperty("ShapeRenderingX",element.setShapeRenderingX,element.getShapeRenderingX);controller.registerProperty("LineColorY",element.setLineColorY,element.getLineColorY);controller.registerProperty("LineWidthY",element.setLineWidthY,element.getLineWidthY);controller.registerProperty("ShapeRenderingY",element.setShapeRenderingY,element.getShapeRenderingY)}};EJSS_DRAWING2D.grid=function(name){var self=EJSS_DRAWING2D.element(name);var mAutoTicksX=true;var mAutoTicksY=true;var mTicksX=0;var mTicksY=0;var mStepX=0;var mStepY=0;var mTickStepX=0;var mTickStepY=0;var mShowX=true;var mShowY=true;var mFixedTickX=Number.NaN;var mFixedTickY=Number.NaN;var mScaleX=[-1,1];var mScaleY=[-1,1];var mScalePrecisionX=1;var mScalePrecisionY=1;var mTicksXMode=EJSS_DRAWING2D.Grid.SCALE_NUM;var mTicksYMode=EJSS_DRAWING2D.Grid.SCALE_NUM;var mAutoStepXMin=40;var mAutoStepYMin=40;var mAutoTicksXRange=[5,10,20];var mAutoTicksYRange=[5,10,20];var mLineColorX="black";var mLineWidthX=.5;var mShapeRenderingX=EJSS_DRAWING2D.Style.RENDER_AUTO;var mLineColorY="black";var mLineWidthY=.5;var mShapeRenderingY=EJSS_DRAWING2D.Style.RENDER_AUTO;self._23=function(){return"ElementGrid"};self.setAutoTicksRangeY=function(range){if(mAutoTicksYRange!=range){mAutoTicksYRange=range;self.setChanged(true)}};self.getAutoTicksRangeY=function(){return mAutoTicksYRange};self.setAutoTicksRangeX=function(range){if(mAutoTicksXRange!=range){mAutoTicksXRange=range;self.setChanged(true)}};self.getAutoTicksRangeX=function(){return mAutoTicksXRange};self.setAutoStepYMin=function(min){if(mAutoStepYMin!=min){mAutoStepYMin=min;self.setChanged(true)}};self.getAutoStepYMin=function(){return mAutoStepYMin};self.setAutoStepXMin=function(min){if(mAutoStepXMin!=min){mAutoStepXMin=min;self.setChanged(true)}};self.getAutoStepXMin=function(){return mAutoStepXMin};self.setScaleY=function(scale){if(mScaleY!=scale){mScaleY=scale;self.setChanged(true)}};self.getScaleY=function(){return mScaleY};self.setScaleX=function(scale){if(mScaleX!=scale){mScaleX=scale;self.setChanged(true)}};self.getScaleX=function(){return mScaleX};self.setScalePrecisionX=function(scalePrecisionX){if(mScalePrecisionX!=scalePrecisionX){mScalePrecisionX=scalePrecisionX;self.setChanged(true)}};self.getScalePrecisionX=function(){return mScalePrecisionX};self.setScalePrecisionY=function(scalePrecisionY){if(mScalePrecisionY!=scalePrecisionY){mScalePrecisionY=scalePrecisionY;self.setChanged(true)}};self.getScalePrecisionY=function(){return mScalePrecisionY};self.setFixedTickX=function(fixed){if(mFixedTickX!=fixed){mFixedTickX=fixed;self.setChanged(true)}};self.getFixedTickX=function(){return mFixedTickX};self.setFixedTickY=function(fixed){if(mFixedTickY!=fixed){mFixedTickY=fixed;self.setChanged(true)}};self.getFixedTickY=function(){return mFixedTickY};self.setAutoTicksX=function(auto){if(mAutoTicksX!=auto){mAutoTicksX=auto;self.setChanged(true)}};self.getAutoTicksX=function(){return mAutoTicksX};self.setAutoTicksY=function(auto){if(mAutoTicksY!=auto){mAutoTicksY=auto;self.setChanged(true)}};self.getAutoTicksY=function(){return mAutoTicksY};self.setStepX=function(stepX){if(mStepX!=stepX){mStepX=stepX;self.setChanged(true)}};self.getStepX=function(){return mStepX};self.setStepY=function(stepY){if(mStepY!=stepY){mStepY=stepY;self.setChanged(true)}};self.getStepY=function(){return mStepY};self.setTickStepX=function(TickStepX){if(mTickStepX!=TickStepX){mTickStepX=TickStepX;self.setChanged(true)}};self.getTickStepX=function(){return mTickStepX}
;self.setTickStepY=function(TickStepY){if(mTickStepY!=TickStepY){mTickStepY=TickStepY;self.setChanged(true)}};self.getTickStepY=function(){return mTickStepY};self.setTicksX=function(ticksX){if(mTicksX!=ticksX){mTicksX=ticksX;self.setChanged(true)}};self.getTicksX=function(){return mTicksX};self.setTicksY=function(ticksY){if(mTicksY!=ticksY){mTicksY=ticksY;self.setChanged(true)}};self.getTicksY=function(){return mTicksY};self.setTicksXMode=function(ticksXMode){if(typeof ticksXMode=="string")ticksXMode=EJSS_DRAWING2D.Grid[ticksXMode.toUpperCase()];if(mTicksXMode!=ticksXMode){mTicksXMode=ticksXMode;self.setChanged(true)}};self.getTicksXMode=function(){return mTicksXMode};self.setTicksYMode=function(ticksYMode){if(typeof ticksYMode=="string")ticksXMode=EJSS_DRAWING2D.Grid[ticksYMode.toUpperCase()];if(mTicksYMode!=ticksYMode){mTicksYMode=ticksYMode;self.setChanged(true)}};self.setShowX=function(show){if(mShowX!=show){mShowX=show;self.setChanged(true)}};self.getShowX=function(){return mShowX};self.setShowY=function(show){if(mShowY!=show){mShowY=show;self.setChanged(true)}};self.getShowY=function(){return mShowY};self.getTicksYMode=function(){return mTicksYMode};self.setLineColorX=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mLineColorX){mLineColorX=color;self.setChanged(true)}return self};self.getLineColorX=function(){return mLineColorX};self.setLineWidthX=function(width){if(width!=mLineWidthX){mLineWidthX=width;self.setChanged(true)}};self.getLineWidthX=function(){return mLineWidthX};self.setShapeRenderingX=function(rendering){if(rendering.substring(0,6)=="RENDER")rendering=EJSS_DRAWING2D.Style[rendering.toUpperCase()];if(mShapeRenderingX!=rendering){mShapeRenderingX=rendering;self.setChanged(true)}};self.getShapeRenderingX=function(){return mShapeRenderingX};self.setLineColorY=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mLineColorY){mLineColorY=color;self.setChanged(true)}return self};self.getLineColorY=function(){return mLineColorY};self.setLineWidthY=function(width){if(width!=mLineWidthY){mLineWidthY=width;self.setChanged(true)}};self.getLineWidthY=function(){return mLineWidthY};self.setShapeRenderingY=function(rendering){if(rendering.substring(0,6)=="RENDER")rendering=EJSS_DRAWING2D.Style[rendering.toUpperCase()];if(mShapeRenderingY!=rendering){mShapeRenderingY=rendering;self.setChanged(true)}};self.getShapeRenderingY=function(){return mShapeRenderingY};self.registerProperties=function(controller){EJSS_DRAWING2D.Grid.registerProperties(self,controller)};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Group={};EJSS_DRAWING2D.group=function(name){var self=EJSS_DRAWING2D.element(name);self._23=function(){return"ElementGroup"};self.isGroup=function(){return true};return self};EJSS_DRAWING2D.GroupSet={};EJSS_DRAWING2D.groupSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Histogram={};EJSS_DRAWING2D.histogram=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Image={};EJSS_DRAWING2D.image=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.ImageSet={};EJSS_DRAWING2D.imageSet=function(mName){};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.analyticCurve=function(mContext,mElement){function drawAnalyticCurve(points,x,y,sx,sy){mContext.beginPath();for(var i=0;i<points.length;i++){var point=points[i];var xx=x+point[0]*sx;var yy=y+point[1]*sy;var type=point[2];if(i==0||type==0)mContext.moveTo(xx,yy);else mContext.lineTo(xx,yy)}}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var numPoints=mElement.getNumPoints();var mMinimun=mElement.getMinimun();var mMaximun=mElement.getMaximun();var min=typeof mMinimun=="undefined"||mMinimun===null?mElement.getPanel().getRealWorldXMin():mMinimun;var max=typeof mMaximun=="undefined"||mMaximun===null?mElement.getPanel().getRealWorldXMax():mMaximun;var vble=mElement.getVariable();var fx=mElement.getFunctionX();var fy=mElement.getFunctionY();var parser=EJSS_DRAWING2D.functionsParser();var exprfx;var exprfy;var mustReturn=false;try{exprfx=parser.parse(fx)}catch(errorfx){console.log("Analytic curve error parsing FunctionX: "+fx);mustReturn=true}if(!mustReturn){try{exprfy=parser.parse(fy)}catch(errorfy){console.log("Analytic curve error parsing FunctionY: "+fy);mustReturn=true}}if(mustReturn){mElement.getController().invokeAction("OnError");return}var step=(max-min)/(numPoints-1);var points=[];var vblevalue={};var parameters=mElement.getParameters();for(var param in parameters){vblevalue[param]=parameters[param]}try{for(var j=0,i=min;i<=max;i+=step){vblevalue[vble]=i;var fxvalue=exprfx.evaluate(vblevalue);var fyvalue=exprfy.evaluate(vblevalue);if(!isNaN(fxvalue)&&!isNaN(fyvalue)){points[j]=[];points[j][0]=fxvalue;points[j++][1]=fyvalue}}}catch(error){mElement.getController().invokeAction("OnError")}drawAnalyticCurve(points,x-mx,y-my,size[0],size[1]);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.arrow=function(mContext,mElement){var Arrow=EJSS_DRAWING2D.Arrow;function createMarkDef(px,py,mark,width,height,stroke,color,sizex,sizey){mContext.save();width/=2;height/=2;var angle=sizex==0?Math.PI/2:Math.atan(sizey/sizex);angle+=sizex<0?-Math.PI/2:Math.PI/2;switch(mark){case Arrow.TRIANGLE:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(0,height/2);mContext.lineTo(width,height/2);mContext.lineTo(0,-height/2);mContext.lineTo(-width,height/2);mContext.closePath();break;case Arrow.ANGLE:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(width,height);mContext.lineTo(0,0);mContext.lineTo(-width,height);break;case Arrow.LINE:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(width,0);mContext.lineTo(-width,0);break;case Arrow.RECTANGLE:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(0,-height);mContext.lineTo(width,-height);mContext.lineTo(width,height);mContext.lineTo(-width,height);mContext.lineTo(-width,-height);mContext.closePath();break;case Arrow.POINTED:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(0,height/4);mContext.lineTo(width,height);mContext.lineTo(0,-height/4);mContext.lineTo(-width,height);mContext.closePath();break;case Arrow.CIRCLE:var size=width<height?width:height;mContext.beginPath();mContext.translate(px,py);mContext.arc(0,0,size,0,2*Math.PI,false);break;case Arrow.DIAMOND:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(0,-height);mContext.lineTo(width,0);mContext.lineTo(0,height);mContext.lineTo(-width,0);mContext.closePath();break;case Arrow.INVTRIANGLE:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(0,-height/2);mContext.lineTo(-width,-height/2);mContext.lineTo(0,height/2);mContext.lineTo(width,-height/2);mContext.closePath();break;case Arrow.INVANGLE:mContext.beginPath();mContext.translate(px,py);mContext.rotate(angle);mContext.moveTo(-width,-height);mContext.lineTo(0,0);mContext.lineTo(width,-height);break;case Arrow.WEDGE:case Arrow.CURVE:console.log("Type of Arrow: not supported");break}if(color!="none"){if(mark!=Arrow.ANGLE&&mark!=Arrow.INVANGLE){mContext.fillStyle=color;mContext.fill()}if(mark!=Arrow.POINTED){mContext.lineWidth=stroke;mContext.strokeStyle=color;mContext.stroke()}}mContext.restore()}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;if(size[0]!=0||size[1]!=0){mContext.beginPath();mContext.moveTo(x-mx,y-my);mContext.lineTo(x+mx,y+my);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}if(mElement.getMarkEnd()!=Arrow.NONE){var endMax=mElement.getMarkProportion()*EJSS_TOOLS.Mathematics.norm([size[0],size[1]]);var endW=endMax!=0&&endMax<mElement.getMarkEndWidth()?endMax:mElement.getMarkEndWidth();var endH=endMax!=0&&endMax<mElement.getMarkEndHeight()?endMax:mElement.getMarkEndHeight();var color=mElement.getMarkEndColor()=="none"?mElement.getStyle().getLineColor():mElement.getMarkEndColor();var stroke=mElement.getMarkEndStroke()<0?mElement.getStyle().getLineWidth():mElement.getMarkEndStroke();createMarkDef(x+mx,y+my,mElement.getMarkEnd(),endW,endH,stroke,color,mx,my)}if(mElement.getMarkMiddle()!=Arrow.NONE){var midMax=mElement.getMarkProportion()*EJSS_TOOLS.Mathematics.norm([size[0],size[1]]);var midW=midMax!=0&&midMax<mElement.getMarkMiddleWidth()?midMax:mElement.getMarkMiddleWidth();var midH=midMax!=0&&midMax<mElement.getMarkMiddleHeight()?midMax:mElement.getMarkMiddleHeight();var color=mElement.getMarkMiddleColor()=="none"?mElement.getStyle().getLineColor():mElement.getMarkMiddleColor();var stroke=mElement.getMarkMiddleStroke()<0?mElement.getStyle().getLineWidth():mElement.getMarkMiddleStroke();createMarkDef(x,y,mElement.getMarkMiddle(),midW,midH,stroke,color,mx,my)}if(mElement.getMarkStart()!=Arrow.NONE){var stMax=mElement.getMarkProportion()*EJSS_TOOLS.Mathematics.norm([size[0],size[1]]);var stW=stMax!=0&&stMax<mElement.getMarkStartWidth()?stMax:mElement.getMarkStartWidth();var stH=stMax!=0&&stMax<mElement.getMarkStartHeight()?stMax:mElement.getMarkStartHeight();var color=mElement.getMarkStartColor()=="none"?mElement.getStyle().getLineColor():mElement.getMarkStartColor();var stroke=mElement.getMarkStartStroke()<0?mElement.getStyle().getLineWidth():mElement.getMarkStartStroke();createMarkDef(x-mx,y-my,mElement.getMarkStart(),stW,stH,stroke,color,mx,my)}}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.axis=function(mContext,mElement){function drawLine(x,y,mx,my,orient,inverted){if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){if(inverted){my=-my;y=-y}mContext.moveTo(x,y-my);mContext.lineTo(x,y+my)}else{mContext.moveTo(x-mx,y);mContext.lineTo(x+mx,y)}}function drawTick(x,y,ticksize,orient){if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){mContext.moveTo(x-ticksize/2,y);mContext.lineTo(x+ticksize/2,y)}else{mContext.moveTo(x,y-ticksize/2);mContext.lineTo(x,y+ticksize/2)}}function tickText(x,y,text,font,horizontal){mContext.save();var font=mElement.getFont();var fondtxt="";fondtxt+=font.getFontStyle()!="none"?font.getFontStyle()+" ":"";fondtxt+=font.getFontWeight()!="none"?font.getFontWeight()+" ":"";fondtxt+=font.getFontSizeString()+"px ";fondtxt+=font.getFontFamily();mContext.font=fondtxt;mContext.fillStyle=font.getFillColor();if(horizontal){x-=mContext.measureText(text).width/2+.5}else{y+=font.getFontSize()/2}mContext.fillText(text,x,y);mContext.restore()}if(mElement.getShow()){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var style=mElement.getStyle();var orient=mElement.getOrient();var inverted=mElement.getInvertedScaleY();mContext.beginPath();drawLine(x,y,mx,my,orient,inverted);var segsize=orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL?Math.abs(size[1]):Math.abs(size[0]);var ticksmode=mElement.getTicksMode();if(ticksmode==EJSS_DRAWING2D.Axis.SCALE_LOG){var scale=mElement.getScale();if(scale[0]>0&&scale[1]>0){var ticks=mElement.getTicks();var scalePrecision=mElement.getScalePrecision();var ticksize=mElement.getTicksSize();EJSS_GRAPHICS.GraphicsUtils.drawLogTicks(x,y,mx,my,segsize,ticksize,scale,ticks,orient,drawTick);var font=mElement.getFont();var textPosition=mElement.getTextPosition();EJSS_GRAPHICS.GraphicsUtils.drawLogTicksText(x,y,mx,my,ticks,ticksize,scale,scalePrecision,font,textPosition,orient,tickText)}}else if(ticksmode==EJSS_DRAWING2D.Axis.SCALE_NUM){var step=0;var tickstep=0;if(!mElement.getAutoTicks()){var ticks=mElement.getTicks();if(ticks!=0){step=segsize/ticks}else{step=mElement.getStep();tickstep=mElement.getTickStep()}}else{var stepmin=mElement.getAutoStepMin();var ticksrange=mElement.getAutoTicksRange();for(var i=ticksrange.length-1;i>=0;i--){step=Math.abs(segsize/ticksrange[i]);if(step*1.001>=stepmin)break}}var scalePrecision=mElement.getScalePrecision();var scale=mElement.getScale();if(tickstep==0){var scalestep=Math.abs((scale[1]-scale[0])*step/segsize)}else{var scalestep=tickstep;step=Math.abs(scalestep*segsize/(scale[1]-scale[0]))}var decimals=Math.pow(10,scalePrecision);var scalestepTmp=Math.round(scalestep*decimals)/decimals;if(scalestepTmp>0){scalestep=scalestepTmp;step=Math.abs(scalestepTmp*segsize/(scale[1]-scale[0]))}var fixedTicks=mElement.getFixedTick();var tickfixed=scale[1];if(!isNaN(fixedTicks)){if(fixedTicks<scale[0])tickfixed=fixedTicks+(Math.floor((scale[0]-fixedTicks)/scalestep)+1)*scalestep;else if(fixedTicks>scale[1])tickfixed=fixedTicks-(Math.floor((fixedTicks-scale[1])/scalestep)+1)*scalestep;else tickfixed=fixedTicks}var scaleshift=Math.abs((scale[0]-tickfixed)%scalestep);var dist=Math.abs(scaleshift-scalestep);if(scaleshift<.001||dist<.001)scaleshift=0;var shift=segsize*scaleshift/Math.abs(scale[1]-scale[0]);var ticksize=mElement.getTicksSize();EJSS_GRAPHICS.GraphicsUtils.drawDecTicks(x,y,mx,my,ticksize,step,shift,orient,inverted,drawTick);var font=mElement.getFont();var textPosition=mElement.getTextPosition();EJSS_GRAPHICS.GraphicsUtils.drawDecTicksText(x,y,mx,my,ticksize,step,shift,scale,scalePrecision,scalestep,scaleshift,font,textPosition,orient,inverted,tickText)}var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.byteRaster=function(mContext,mElement){if(mElement.getDataChanged()){var data=mElement.getData();var colors=mElement.getColorMapper().getColors();var xlen=data.length;var ylen=data[0].length;var num=mElement.getColorMapper().getNumberOfColors();var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);var idcanvas=mContext.canvas.id;EJSS_SVGGRAPHICS.Utils.ImageDataCanvas(xlen,ylen,num,data,colors,function(img){var canvas=document.getElementById(idcanvas);mContext=canvas.getContext("2d");mContext.putImageData(img,x-mx,y-my)});mElement.setDataChanged(false)}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.canvas=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var dim=mElement.getDimensions();var deltaX=dim[1]-dim[0];var deltaY=dim[3]-dim[2];var pixWth=Math.abs(size[0]);var pixHgt=Math.abs(size[1]);var pxPerUnitX=pixWth/deltaX;var pxPerUnitY=pixHgt/deltaY;var pxTopLeftX=x-pixWth/2;var pxTopLeftY=y+pixHgt/2;var drawables=mElement.getDrawables();for(var i=0;i<drawables.length;i++){if(typeof drawables[i].imageField!="undefined")EJSS_GRAPHICS.GraphicsUtils.drawImageField(mContext,pxTopLeftX,pxTopLeftY,xMin,yMin,pixWth,pixHgt,pxPerUnitX,pxPerUnitY,drawables[i]);else if(typeof drawables[i].run!="undefined")drawables[i].draw(mContext,pxTopLeftX,pxTopLeftY,xMin,yMin,pixWth,pixHgt,pxPerUnitX,pxPerUnitY)}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.cellLattice=function(mContext,mElement){function drawGrid(left,top,right,bottom,stepx,stepy){mContext.beginPath();if(stepx==0)stepx=Math.abs(right-left);for(var i=left;i<=right;i=i+stepx){mContext.moveTo(i,top);mContext.lineTo(i,bottom)}if(stepy==0)stepy=Math.abs(top-bottom);for(var i=bottom;i>=top;i=i-stepy){mContext.moveTo(left,i);mContext.lineTo(right,i)}}function rectCell(x,y,sx,sy,fill){mContext.beginPath();var mx=sx/2,my=sy/2;mContext.moveTo(x-mx,y+my);mContext.lineTo(x+mx,y+my);mContext.lineTo(x+mx,y-my);mContext.lineTo(x-mx,y-my);mContext.lineTo(x-mx,y+my);mContext.fillStyle=fill;mContext.fill();mContext.lineWidth=1;mContext.strokeStyle=fill;mContext.stroke()}function gridCell(x,y,sx,sy,stepx,stepy,style){var mx=sx/2,my=sy/2;var left=x-mx,right=x+mx,top=y+my,bottom=y-my;drawGrid(left,top,right,bottom,stepx,stepy);if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var style=mElement.getStyle();var data=mElement.getData();var colors=mElement.getColorMapper().getColors();var xlen=data.length;var ylen=data[0].length;var stepx=Math.abs(size[0]/xlen);var stepy=Math.abs(size[1]/ylen);var left=x-mx+stepx/2,bottom=y-my-stepy/2;for(var i=0;i<ylen;i++){for(var j=0;j<xlen;j++){rectCell(left+stepx*j,bottom-stepy*i,stepx,stepy,colors[data[j][i]])}}var showGrid=mElement.getShowGrid();if(showGrid)gridCell(x,y,size[0],size[1],stepx,stepy,style)};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.cursor=function(mContext,mElement){var pos=mElement.getPixelPosition();var cursorType=mElement.getCursorType();var panel=mElement.getGroupPanel();var bounds=panel.getRealWorldCoordinates();var bottomLeft=panel._26([bounds[0],bounds[2]]);var topRight=panel._26([bounds[1],bounds[3]]);mContext.beginPath();if(cursorType!=EJSS_DRAWING2D.Cursor.VERTICAL){var x1=bottomLeft[0],x2=topRight[0];var y=pos[1];if(y>bottomLeft[1])y=bottomLeft[1];else if(y<topRight[1])y=topRight[1];mContext.moveTo(x1,y);mContext.lineTo(x2,y)}if(cursorType!=EJSS_DRAWING2D.Cursor.HORIZONTAL){var x=pos[0];var y1=bottomLeft[1],y2=topRight[1];if(x<bottomLeft[0])x=bottomLeft[0];else if(x>topRight[0])x=topRight[0];mContext.moveTo(x,y1);mContext.lineTo(x,y2)}var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.ellipse=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var xm=pos[0]+offset[0];var ym=pos[1]+offset[1];var w=Math.abs(size[0]);var h=Math.abs(size[1]);var kappa=.5522848,x=xm-w/2,y=ym-h/2;ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,mContext.beginPath();mContext.moveTo(x,ym);mContext.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);mContext.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);mContext.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);mContext.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.grid=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var showx=mElement.getShowX();var showy=mElement.getShowY();if(showx){mContext.beginPath();var ticksXmode=mElement.getTicksXMode();if(ticksXmode==EJSS_DRAWING2D.Grid.SCALE_LOG){var scaleX=mElement.getScaleX();if(scaleX[0]>0&&scaleX[1]>0){var ticksX=mElement.getTicksX();var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawLogGrid(left,top,right,bottom,ticksX,scaleX,1,function(xx,yy){mContext.moveTo(xx,yy)},function(xx,yy){mContext.lineTo(xx,yy)})}}else if(ticksXmode==EJSS_DRAWING2D.Grid.SCALE_NUM){var stepx=0;var tickstepx=0;if(!mElement.getAutoTicksX()){var ticksX=mElement.getTicksX();if(ticksX!=0){stepx=Math.abs(size[0]/ticksX)}else{stepx=mElement.getStepX();tickstepx=mElement.getTickStepX()}}else{var stepxmin=mElement.getAutoStepXMin();var ticksxrange=mElement.getAutoTicksRangeX();for(var i=ticksxrange.length-1;i>=0;i--){stepx=Math.abs(size[0]/ticksxrange[i]);if(stepx>=stepxmin)break}}var scalePrecisionX=mElement.getScalePrecisionX();var scaleX=mElement.getScaleX();if(tickstepx==0){var scalestepX=Math.abs((scaleX[1]-scaleX[0])*stepx/size[0])}else{var scalestepX=tickstepx;stepx=Math.abs(scalestepX*size[0]/(scaleX[1]-scaleX[0]))}var decimalsX=Math.pow(10,scalePrecisionX);var scalestepXTmp=Math.round(scalestepX*decimalsX)/decimalsX;if(scalestepXTmp>0){scalestepX=scalestepXTmp;stepx=Math.abs(scalestepXTmp*size[0]/(scaleX[1]-scaleX[0]))}var fixedTicks=mElement.getFixedTickX();var tickfixed=scaleX[1];if(!isNaN(fixedTicks)){if(fixedTicks<scaleX[0])tickfixed=fixedTicks+(Math.floor((scaleX[0]-fixedTicks)/scalestepX)+1)*scalestepX;else if(fixedTicks>scaleX[1])tickfixed=fixedTicks-(Math.floor((fixedTicks-scaleX[1])/scalestepX)+1)*scalestepX;else tickfixed=fixedTicks}var scaleshift=Math.abs((scaleX[0]-tickfixed)%scalestepX);var dist=Math.abs(scaleshift-scalestepX);if(scaleshift<.001||dist<.001)scaleshift=0;var shiftx=Math.abs(size[0]*scaleshift/(scaleX[1]-scaleX[0]));var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawDecGrid(left,top,right,bottom,shiftx,stepx,1,function(xx,yy){mContext.moveTo(xx,yy)},function(xx,yy){mContext.lineTo(xx,yy)})}mContext.lineWidth=mElement.getLineWidthX();mContext.strokeStyle=mElement.getLineColorX();mContext.stroke()}if(showy){mContext.beginPath();var ticksYmode=mElement.getTicksYMode();if(ticksYmode==EJSS_DRAWING2D.Grid.SCALE_LOG){var scaleY=mElement.getScaleY();if(scaleY[0]>0&&scaleY[1]>0){var ticksY=mElement.getTicksY();var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawLogGrid(left,top,right,bottom,ticksY,scaleY,-1,function(xx,yy){mContext.moveTo(xx,yy)},function(xx,yy){mContext.lineTo(xx,yy)})}}else if(ticksYmode==EJSS_DRAWING2D.Grid.SCALE_NUM){var stepy=0;var tickstepy=0;if(!mElement.getAutoTicksY()){var ticksY=mElement.getTicksY();if(ticksY!=0){stepy=Math.abs(size[1]/ticksY)}else{stepy=mElement.getStepY();tickstepy=mElement.getTickStepY()}}else{var stepymin=mElement.getAutoStepYMin();var ticksyrange=mElement.getAutoTicksRangeY();for(var i=ticksyrange.length-1;i>=0;i--){stepy=Math.abs(size[1]/ticksyrange[i]);if(stepy>=stepymin)break}}var scalePrecisionY=mElement.getScalePrecisionY();var scaleY=mElement.getScaleY();if(tickstepy==0){var scalestepY=Math.abs((scaleY[1]-scaleY[0])*stepy/size[1])}else{var scalestepY=tickstepy;stepy=Math.abs(scalestepY*size[1]/(scaleY[1]-scaleY[0]))}var decimalsY=Math.pow(10,scalePrecisionY);var scalestepYTmp=Math.round(scalestepY*decimalsY)/decimalsY;if(scalestepYTmp>0){scalestepY=scalestepYTmp;stepy=Math.abs(scalestepYTmp*size[1]/(scaleY[1]-scaleY[0]))}var fixedTicks=mElement.getFixedTickY();var tickfixed=scaleY[1];if(!isNaN(fixedTicks)){if(fixedTicks<scaleY[0])tickfixed=fixedTicks+(Math.floor((scaleY[0]-fixedTicks)/scalestepY)+1)*scalestepY;else if(fixedTicks>scaleY[1])tickfixed=fixedTicks-(Math.floor((fixedTicks-scaleY[1])/scalestepY)+1)*scalestepY;else tickfixed=fixedTicks}var scaleshift=Math.abs((scaleY[0]-tickfixed)%scalestepY);var dist=Math.abs(scaleshift-scalestepY);if(scaleshift<.001||dist<.001)scaleshift=0
;var shifty=Math.abs(size[1]*scaleshift/(scaleY[1]-scaleY[0]));var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawDecGrid(left,top,right,bottom,shifty,stepy,-1,function(xx,yy){mContext.moveTo(xx,yy)},function(xx,yy){mContext.lineTo(xx,yy)})}mContext.lineWidth=mElement.getLineWidthY();mContext.strokeStyle=mElement.getLineColorY();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.histogram=function(mContext,mElement){function areaBar(barx1,barx2,bary,axis,barstyle){mContext.beginPath();mContext.moveTo(barx1,axis);mContext.lineTo(barx1,bary);mContext.lineTo(barx2,bary);mContext.lineTo(barx2,axis);if(barstyle.getDrawFill()&&barstyle.getFillColor()!="none"){mContext.fillStyle=barstyle.getFillColor();mContext.fill()}if(barstyle.getDrawLines()){mContext.lineWidth=barstyle.getLineWidth();mContext.strokeStyle=barstyle.getLineColor();mContext.stroke()}}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var style=mElement.getStyle();var discrete=mElement.getDiscrete();var halfBin=mElement.getBinWidth()/2;var bars=mElement.getBars();var axisx=mElement.getGroupPanel().getPixelPositionWorldOrigin()[1];for(var j=0;j<bars.length;j++){var barx1,barx2;var cbin=bars[j][0];if(discrete){barx1=barx2=x-mx+cbin*size[0]}else{barx1=x-mx+(cbin-halfBin)*size[0];barx2=x-mx+(cbin+halfBin)*size[0]}var bary=y-my+bars[j][1]*size[1];areaBar(barx1,barx2,bary,axisx,style)}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.image=function(mContext,mElement,transformCallBack){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);var img;if(!mElement.getChangedImage())img=mElement.getCustomObject();if(img){mContext.save();transformCallBack(mElement);mContext.drawImage(img,x-mx,y-my,Math.abs(size[0]),Math.abs(size[1]));mContext.restore()}else{img=new Image;mElement.setCustomObject(img);img.onload=function(){mContext.save();transformCallBack(mElement);mContext.drawImage(img,x-mx,y-my,Math.abs(size[0]),Math.abs(size[1]));mContext.restore()};var code=mElement.getEncode();if(code.length>0){img.src="data:png;base64,"+code}else{img.src=mElement.getImageUrl()}}mElement.setChangedImage(false)};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.mesh=function(mContext,mElement){var mA;var mB;var mCells;var mBoundary;function fillCell(xs,ys,numpoints,color,levelIndex){mContext.beginPath();for(var i=0;i<numpoints;i++){if(i==0)mContext.moveTo(xs[0],ys[0]);else mContext.lineTo(xs[i],ys[i])}mContext.lineTo(xs[0],ys[0]);var fill=color.indexToColor(levelIndex);mContext.fillStyle=fill;mContext.fill();mContext.lineWidth=1.25;mContext.strokeStyle=fill;mContext.stroke()}function drawCell(xs,ys,fill,style){mContext.beginPath();var numpoints=xs.length;for(var i=0;i<numpoints;i++){if(i==0)mContext.moveTo(xs[0],ys[0]);else mContext.lineTo(xs[i],ys[i])}mContext.lineTo(xs[0],ys[0]);if(fill&&style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}}function drawSegment(xs,ys,color,lineWidth){mContext.beginPath();var numpoints=xs.length;for(var i=0;i<numpoints;i++){if(i==0)mContext.moveTo(xs[0],ys[0]);else mContext.lineTo(xs[i],ys[i])}mContext.lineTo(xs[0],ys[0]);mContext.lineWidth=lineWidth+.5;mContext.strokeStyle=color;mContext.stroke()}function drawVectors(cellA,cellB,field,lenVector){for(var i=0;i<cellA.length;i++){var a=cellA[i];var b=cellB[i];var a1=field[i][0];var b1=field[i][1];var len=EJSS_TOOLS.Mathematics.norm([a1,b1]);var sa=a1*lenVector/len;var sb=b1*lenVector/len;if(sa!=0||sb!=0){var stMax=.3*EJSS_TOOLS.Mathematics.norm([sa,sb]);var stW=stMax!=0&&stMax<12?stMax:12;var angle=Math.atan2(sa,sb);mContext.beginPath();mContext.moveTo(a,b);mContext.lineTo(a+sa-stW*Math.cos(angle),b+sb-stW*Math.sin(angle));mContext.lineTo(a+sa-stW*Math.cos(angle-Math.PI/6),b+sb-stW*Math.sin(angle-Math.PI/6));mContext.lineTo(a+sa,y+my);mContext.lineTo(a+sa-stW*Math.cos(angle+Math.PI/6),b+sb-stW*Math.sin(angle+Math.PI/6));mContext.lineTo(a+sa-stW*Math.cos(angle),b+sb-stW*Math.sin(angle));mContext.lineWidth=1;mContext.strokeStyle="black";mContext.stroke()}}}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var mPoints=mElement.getPoints();if(mPoints==null)return;var nPoints=mPoints.length;mA=new Array(nPoints);mB=new Array(nPoints);for(var i=0;i<nPoints;i++){mA[i]=x-mx+mPoints[i][0]*size[0];mB[i]=y-my+mPoints[i][1]*size[1]}var cells=mElement.getCells();var field=mElement.getFieldAtPoints();if(field){mCells=EJSS_GRAPHICS.GraphicsUtils.buildCells(mA,mB,cells,field,false)}else{field=mElement.getFieldAtCells();mCells=EJSS_GRAPHICS.GraphicsUtils.buildCells(mA,mB,cells,field,true)}if(cells!=null){var style=mElement.getStyle();if(field!=null){var color=mElement.getColorCoded();EJSS_GRAPHICS.GraphicsUtils.drawPolygons(mCells,color,function(xs,ys){drawCell(xs,ys,false,style)},function(xs,ys,numpoints,color,levelIndex){fillCell(xs,ys,numpoints,color,levelIndex)})}else{EJSS_GRAPHICS.GraphicsUtils.drawPolygons(mCells,color,function(xs,ys){drawCell(xs,ys,true,style)},function(xs,ys,numpoints,color,levelIndex){})}}var boundary=mElement.getBoundary();if(mElement.getDrawBoundary()&&boundary!=null){var labels=mElement.getBoundaryLabels();var colors=mElement.getBoundaryColors();var lineWidth=mElement.getBoundaryLineWidth();mBoundary=EJSS_GRAPHICS.GraphicsUtils.buildBoundary(mA,mB,boundary);EJSS_GRAPHICS.GraphicsUtils.drawBoundary(mBoundary,labels,colors,function(xs,ys,color){drawSegment(xs,ys,color,lineWidth)})}if(mElement.getDataType()>=4&&field!=null){var lenVector=mElement.getVectorLength()*size[0];for(var i=0,n=cells.length;i<n;i++){drawVectors(mCellA[i],mCellB[i],field[i],lenVector)}}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.pipe=function(mContext,mElement){var points=mElement.getPoints();if(!points||points.length<=0)return;var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var sx=Math.abs(size[0]);var sy=Math.abs(size[1]);var xmin=x-sx/2;var ymin=y+sy/2;var style=mElement.getStyle();mContext.beginPath();mContext.moveTo(xmin,ymin);var x=xmin;var y=ymin;for(var i=0,n=points.length;i<n;i++){var point=points[i];x+=Math.round(point[0]*sx);y+=Math.round(-point[1]*sy);mContext.lineTo(x,y)}if(style.getDrawLines()){mContext.lineWidth=2*style.getLineWidth()+mElement.getPipeWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}mContext.beginPath();mContext.moveTo(xmin,ymin);var x=xmin;var y=ymin;for(var i=0,n=points.length;i<n;i++){var point=points[i];x+=Math.round(point[0]*sx);y+=Math.round(-point[1]*sy);mContext.lineTo(x,y)}if(style.getDrawLines()){mContext.lineWidth=mElement.getPipeWidth();mContext.strokeStyle=style.getFillColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.point=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var xm=pos[0]+offset[0];var ym=pos[1]+offset[1];mContext.beginPath();mContext.arc(xm,ym,2,0,2*Math.PI);var style=mElement.getStyle();mContext.fillStyle=style.getFillColor();mContext.fill()};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.polygon=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;mContext.beginPath();var points=mElement.getPoints();for(var i=0;i<points.length;i++){var point=points[i];var xx=x-mx+point[0]*size[0];var yy=y-my+point[1]*size[1];var type=point[2];if(i==0||type==0)mContext.moveTo(xx,yy);else mContext.lineTo(xx,yy)}var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.rectangle=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;mContext.beginPath();mContext.moveTo(x-mx,y+my);mContext.lineTo(x+mx,y+my);mContext.lineTo(x+mx,y-my);mContext.lineTo(x-mx,y-my);mContext.lineTo(x-mx,y+my);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.roundRectangle=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var mx=pos[0]+offset[0];var my=pos[1]+offset[1];var width=Math.abs(size[0]);var height=Math.abs(size[1]);var x=mx-width/2;var y=my-height/2;var radius=Math.abs(mElement.getCornerRadius());mContext.beginPath();mContext.moveTo(x+radius,y);mContext.lineTo(x+width-radius,y);mContext.quadraticCurveTo(x+width,y,x+width,y+radius);mContext.lineTo(x+width,y+height-radius);mContext.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);mContext.lineTo(x+radius,y+height);mContext.quadraticCurveTo(x,y+height,x,y+height-radius);mContext.lineTo(x,y+radius);mContext.quadraticCurveTo(x,y,x+radius,y);mContext.closePath();var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.canvas=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var deltaX=mElement.getMaximumX()-mElement.getMinimumX();var deltaY=mElement.getMaximumY()-mElement.getMinimumY();var pixWth=Math.abs(size[0]);var pixHgt=Math.abs(size[1]);var pxPerUnitX=pixWth/deltaX;var pxPerUnitY=pixHgt/deltaY;var pxTopLeftX=x-pixWth/2;var pxTopLeftY=y+pixHgt/2;EJSS_GRAPHICS.GraphicsUtils.drawImageField(context,pxTopLeftX,pxTopLeftY,mElement.getMinimumX(),mElement.getMinimumY(),pixWth,pixHgt,pxPerUnitX,pxPerUnitY,{data:mElement.getData()})};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.segment=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;mContext.beginPath();mContext.moveTo(x-mx,y-my);mContext.lineTo(x+mx,y+my);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.spring=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var radius=mElement.getGroupPanel().toPixelMod([mElement.getRadius(),0])[0];mContext.beginPath();EJSS_GRAPHICS.GraphicsUtils.drawSpring(mElement.getLoops(),mElement.getPointsPerLoop(),radius,mElement.getSolenoid(),mElement.getThinExtremes(),x-mx,y-my,size[0],size[1],function(xx,yy){mContext.moveTo(xx,yy)},function(xx,yy){mContext.lineTo(xx,yy)});var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.tank=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);var level=mElement.getPixelSizeOf(0,mElement.getLevel());var xmin=x-mx,xmax=x+mx;var ymin=y+my,ymax=y-my;var ylevel=ymin+level[1];var style=mElement.getStyle();mContext.beginPath();mContext.moveTo(xmin+level[0],ylevel);mContext.lineTo(xmin,ymin);mContext.lineTo(xmax,ymin);mContext.lineTo(xmax+level[0],ylevel);mContext.fillStyle=mElement.getLevelColor();mContext.fill();mContext.beginPath();mContext.moveTo(xmin,ymax);mContext.lineTo(xmin,ymin);mContext.lineTo(xmax,ymin);mContext.lineTo(xmax,ymax);if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.text=function(mContext,mElement){var font=mElement.getFont();var fondtxt="";fondtxt+=font.getFontStyle()!="none"?font.getFontStyle()+" ":"";fondtxt+=font.getFontWeight()!="none"?font.getFontWeight()+" ":"";fondtxt+=font.getFontSizeString()+(font.getFontSizeString().toString().indexOf("px")>-1?" ":"px ");fondtxt+=font.getFontFamily();mContext.font=fondtxt;var txt=mElement.getText();var pos=mElement.getPixelPosition();var marginFrame=mElement.getFramed()?4:0;var size=[mContext.measureText(txt).width+marginFrame*2,font.getFontSize()+marginFrame*2];var offset=EJSS_DRAWING2D.Element.getSWRelativePositionOffset(mElement.getRelativePosition(),size[0],size[1]);var xmargin=mElement.getMarginX();var ymargin=mElement.getMarginY();var x=pos[0]+offset[0]+xmargin+marginFrame;var y=pos[1]+offset[1]+ymargin-marginFrame;if(mElement.getFramed()){var tbmargin=marginFrame;var rlmargin=marginFrame;var wlen=size[0]-marginFrame*2;var hlen=size[1]-marginFrame*2;if(wlen>0){var bottom=y+tbmargin,top=y-hlen-tbmargin;var left=x-rlmargin,rigth=x+wlen+tbmargin;mContext.save();mContext.beginPath();mContext.moveTo(left,bottom);mContext.lineTo(rigth,bottom);mContext.lineTo(rigth,top);mContext.lineTo(left,top);mContext.lineTo(left,bottom);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}mContext.restore()}}var angletext=0;switch(mElement.getWritingMode()){case EJSS_DRAWING2D.Text.MODE_TOPDOWN:angletext=Math.PI/2;break;case EJSS_DRAWING2D.Text.MODE_RIGTHLEFT:angletext=Math.PI;break;case EJSS_DRAWING2D.Text.MODE_DOWNTOP:angletext=3*Math.PI/2;break;case EJSS_DRAWING2D.Text.MODE_LEFTRIGHT:angletext=0;break}mContext.translate(pos[0]+xmargin,pos[1]+ymargin);mContext.rotate(angletext);mContext.translate(-(pos[0]+xmargin),-(pos[1]+ymargin));mContext.fillStyle=font.getFillColor();mContext.fillText(mElement.getText(),x,y)};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.trace=function(mContext,mElement){function drawTrail(points,x,y,sx,sy){mContext.beginPath();for(var i=0;i<points.length;i++){var point=points[i];var xx=x+point[0]*sx;var yy=y+point[1]*sy;var type=point[2];if(i==0||type==0)mContext.moveTo(xx,yy);else mContext.lineTo(xx,yy)}}function ellipseMark(markx,marky,size,markstyle){var xm=markx;var ym=marky;var w=Math.abs(size[0]);var h=Math.abs(size[1]);var kappa=.5522848,x=xm-w/2,y=ym-h/2;ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,mContext.beginPath();mContext.moveTo(x,ym);mContext.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);mContext.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);mContext.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);mContext.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);if(markstyle.getDrawFill()&&markstyle.getFillColor()!="none"){mContext.fillStyle=markstyle.getFillColor();mContext.fill()}if(markstyle.getDrawLines()){mContext.lineWidth=markstyle.getLineWidth();mContext.strokeStyle=markstyle.getLineColor();mContext.stroke()}}function rectangleMark(markx,marky,size,markstyle){var x=markx;var y=marky;var sx=Math.abs(size[0]);var sy=Math.abs(size[1]);mContext.beginPath();mContext.rect(x-sx/2,y-sy/2,sx,sy);if(markstyle.getDrawFill()&&markstyle.getFillColor()!="none"){mContext.fillStyle=markstyle.getFillColor();mContext.fill()}if(markstyle.getDrawLines()){mContext.lineWidth=markstyle.getLineWidth();mContext.strokeStyle=markstyle.getLineColor();mContext.stroke()}}function areaMark(lastmarkx,lastmarky,markx,marky,axis,markstyle){mContext.beginPath();mContext.moveTo(lastmarkx,axis);mContext.lineTo(lastmarkx,lastmarky);mContext.lineTo(markx,marky);mContext.lineTo(markx,axis);if(markstyle.getDrawFill()&&markstyle.getFillColor()!="none"){mContext.fillStyle=markstyle.getFillColor();mContext.fill()}if(markstyle.getDrawLines()){mContext.lineWidth=markstyle.getLineWidth();mContext.strokeStyle=markstyle.getLineColor();mContext.stroke()}}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;drawTrail(mElement.getPoints(),x-mx,y-my,size[0],size[1]);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}var points=mElement.getPoints();var lastpointX,lastpointY;for(var i=0;i<points.length;i++){var point=points[i];var markx=x-mx+point[0]*size[0];var marky=y-my+point[1]*size[1];var markType=point[3];var markstyle=point[4];var marksize=[point[5],point[6]];if(markType==EJSS_DRAWING2D.Trace.ELLIPSE){ellipseMark(markx,marky,marksize,markstyle)}else if(markType==EJSS_DRAWING2D.Trace.RECTANGLE){rectangleMark(markx,marky,marksize,markstyle)}else if(markType==EJSS_DRAWING2D.Trace.BAR){var axisx=mElement.getGroupPanel()._26([0,0])[1];marksize[1]=axisx-marky;marky=marky+marksize[1]/2;rectangleMark(markx,marky,marksize,markstyle)}else if(markType==EJSS_DRAWING2D.Trace.AREA){if(i!=0){var axisx=mElement.getGroupPanel()._26([0,0])[1];var lastmarkx=x-mx+lastpointX*size[0];var lastmarky=y-my+lastpointY*size[1];areaMark(mMark,lastmarkx,lastmarky,markx,marky,axisx,markstyle)}lastpointX=point[0];lastpointY=point[1]}}};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.trail=function(mContext,mElement){function addSegment(points,num,style,pX,pY,sX,sY){if(num<=0)return;mContext.beginPath();for(var i=0;i<num;i++){var point=points[i];var xx=pX+point[0]*sX;var yy=pY+point[1]*sY;var type=point[2];if(i==0||type==0)mContext.moveTo(xx,yy);else mContext.lineTo(xx,yy)}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var pX=x-mx;var pY=y-my;var sX=size[0];var sY=size[1];var segmentCount=mElement.getSegmentsCount();if(segmentCount>0){for(var i=0;i<segmentCount;i++){var num=mElement.getSegmentPoints(i).length;addSegment(mElement.getSegmentPoints(i),num,mElement.getSegmentStyle(i),pX,pY,sX,sY)}}var num=mElement.getCurrentPoints().length;addSegment(mElement.getCurrentPoints(),num,mElement.getStyle(),pX,pY,sX,sY)};var EJSS_CANVASGRAPHICS=EJSS_CANVASGRAPHICS||{};EJSS_CANVASGRAPHICS.wheel=function(mContext,mElement){var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var xm=pos[0]+offset[0];var ym=pos[1]+offset[1];var w=Math.abs(size[0]);var h=Math.abs(size[1]);var mx=size[0]/2;var my=size[1]/2;var kappa=.5522848,x=xm-w/2,y=ym-h/2;ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,mContext.beginPath();mContext.moveTo(x,ym);mContext.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);mContext.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);mContext.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);mContext.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);mContext.moveTo(xm-mx,ym);mContext.lineTo(xm+mx,ym);mContext.moveTo(xm,ym-my);mContext.lineTo(xm,ym+my);var style=mElement.getStyle();if(style.getDrawFill()&&style.getFillColor()!="none"){mContext.fillStyle=style.getFillColor();mContext.fill()}if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};var EJSS_GRAPHICS=EJSS_GRAPHICS||{};EJSS_GRAPHICS.CanvasGraphics={getOffsetRect:function(graphics){return EJSS_GRAPHICS.GraphicsUtils.getOffsetRect(graphics)}};EJSS_GRAPHICS.canvasGraphics=function(mName){var self=EJSS_INTERFACE.canvas(mName);var mInterfaceGraphics=self.getDOMElement();var mContext=self.getContext();self.getEventContext=function(){return mInterfaceGraphics};self.getBox=function(){var box=EJSS_GRAPHICS.CanvasGraphics.getOffsetRect(self);box.width-=1;box.height-=1;return box};self.reset=function(){var rect=EJSS_GRAPHICS.CanvasGraphics.getOffsetRect(self);mContext.clearRect(0,0,rect.width,rect.height)};self.draw=function(elements,force){for(var i=0,n=elements.length;i<n;i++){var element=elements[i];if(element.isGroupVisible()){self.drawElement(element,self.transformElement)}}};self.drawElement=function(element,transformCallBack){var Shape=EJSS_DRAWING2D.Shape;var cl=element._23();if(cl==="ElementImage"){EJSS_CANVASGRAPHICS.image(mContext,element,transformCallBack)}else{mContext.save();transformCallBack(element);switch(cl){case"ElementCustom":{var customFunction=element.getFunction();if(customFunction)customFunction(mContext,element)}break;case"ElementShape":switch(element.getShapeType()){default:case Shape.ELLIPSE:EJSS_CANVASGRAPHICS.ellipse(mContext,element);break;case Shape.RECTANGLE:EJSS_CANVASGRAPHICS.rectangle(mContext,element);break;case Shape.ROUND_RECTANGLE:EJSS_CANVASGRAPHICS.roundRectangle(mContext,element);break;case Shape.WHEEL:EJSS_CANVASGRAPHICS.wheel(mContext,element);break;case Shape.NONE:case Shape.POINT:EJSS_CANVASGRAPHICS.point(mContext,element);break}break;case"ElementSegment":EJSS_CANVASGRAPHICS.segment(mContext,element);break;case"ElementArrow":EJSS_CANVASGRAPHICS.arrow(mContext,element);break;case"ElementText":EJSS_CANVASGRAPHICS.text(mContext,element);break;case"ElementSpring":EJSS_CANVASGRAPHICS.spring(mContext,element);break;case"ElementTrail":EJSS_CANVASGRAPHICS.trail(mContext,element);break;case"ElementTrace":EJSS_CANVASGRAPHICS.trace(mContext,element);break;case"ElementGrid":EJSS_CANVASGRAPHICS.grid(mContext,element);break;case"ElementAxis":EJSS_CANVASGRAPHICS.axis(mContext,element);break;case"ElementCursor":EJSS_CANVASGRAPHICS.cursor(mContext,element);break;case"ElementPolygon":EJSS_CANVASGRAPHICS.polygon(mContext,element);break;case"ElementAnalyticCurve":EJSS_CANVASGRAPHICS.analyticCurve(mContext,element);break;case"ElementCellLattice":EJSS_CANVASGRAPHICS.cellLattice(mContext,element);break;case"ElementByteRaster":EJSS_CANVASGRAPHICS.byteRaster(mContext,element);break;case"ElementMesh":EJSS_CANVASGRAPHICS.mesh(mContext,element);break;case"ElementTank":EJSS_CANVASGRAPHICS.tank(mContext,element);break;case"ElementPipe":EJSS_CANVASGRAPHICS.pipe(mContext,element);break;case"ElementHistogram":EJSS_CANVASGRAPHICS.histogram(mContext,element);break;case"ElementScalarField":EJSS_CANVASGRAPHICS.scalarField(mContext,element);break;case"ElementCanvas":EJSS_CANVASGRAPHICS.canvas(mContext,element);break;case"ElementVideo":Console.log("Not supported ElementVideo in Canvas!");break}mContext.restore()}};self.transformElement=function(element){if(element.getGroup()!=null)self.transformElement(element.getGroup());var trans=element.getTransformation();if(Array.isArray(trans)){console.log("Array transformations are not supported in Canvas!")}else if(typeof trans==="string"){console.log("SVG-based transformations are not supported in Canvas!")}else if(typeof trans==="number"){var pos=element.getPixelPosition();mContext.translate(pos[0],pos[1]);mContext.rotate(-trans);mContext.translate(-pos[0],-pos[1])}};self._24=function(panel){var gutters=panel.getGutters();if(gutters.visible){var inner=panel.getInnerRect();var x=.5,y=.5;var box=self.getBox();var sx=box.width,sy=box.height;var guttersStyle=panel.getGuttersStyle();var panelStyle=panel.getStyle();if(guttersStyle.getDrawFill()){mContext.beginPath();mContext.moveTo(x,y);mContext.lineTo(x,y+sy);mContext.lineTo(x+sx,y+sy);mContext.lineTo(x+sx,y);mContext.lineTo(x,y);mContext.moveTo(inner.x,inner.y);mContext.lineTo(inner.x+inner.width,inner.y);mContext.lineTo(inner.x+inner.width,inner.y+inner.height);mContext.lineTo(inner.x,inner.y+inner.height);mContext.lineTo(inner.x,inner.y);mContext.moveTo(x,y);mContext.closePath();mContext.fillStyle=guttersStyle.getFillColor();mContext.fill()}if(guttersStyle.getDrawLines()){mContext.beginPath();mContext.moveTo(x,y);mContext.lineTo(x,y+sy);mContext.lineTo(x+sx,y+sy);mContext.lineTo(x+sx,y);mContext.lineTo(x,y);mContext.closePath();mContext.lineWidth=guttersStyle.getLineWidth();mContext.strokeStyle=guttersStyle.getLineColor();mContext.stroke()}if(guttersStyle.getDrawLines()){mContext.beginPath();mContext.moveTo(inner.x,inner.y);mContext.lineTo(inner.x+inner.width,inner.y);mContext.lineTo(inner.x+inner.width,inner.y+inner.height);mContext.lineTo(inner.x,inner.y+inner.height);mContext.lineTo(inner.x,inner.y);mContext.closePath();mContext.lineWidth=panelStyle.getLineWidth();mContext.strokeStyle=panelStyle.getLineColor();mContext.stroke()}}};self.drawPanel=function(panel){var x=.5,y=.5;var box=self.getBox();mContext.beginPath();mContext.rect(x,y,box.width,box.height);var style=panel.getStyle();mContext.fillStyle=style.getFillColor();mContext.fill();if(style.getDrawLines()){mContext.lineWidth=style.getLineWidth();mContext.strokeStyle=style.getLineColor();mContext.stroke()}};return self};var EJSS_GRAPHICS=EJSS_GRAPHICS||{};EJSS_GRAPHICS.GraphicsUtils={getOffsetRect:function(graphics){var width,height,top,left;var element=graphics.getDOMElement();var strw=graphics.getWidth();var strh=graphics.getHeight();width=parseFloat(strw);var isWidthNumber=!isNaN(width)&&isFinite(strw);height=parseFloat(strh);var isHeightNumber=!isNaN(height)&&isFinite(strh);if(element.getBoundingClientRect){var mypanel=element.getElementById?element.getElementById(".myPanel"):null;if(mypanel&&mypanel.childElementCount>0){var box=mypanel.getBoundingClientRect()}else{var box=element.getBoundingClientRect()}top=box.top;left=box.left;if(!isWidthNumber)width=box.width;if(!isHeightNumber)height=box.height}else if(element.offsetTop!==undefined){top=element.offsetTop;left=element.offsetLeft;if(!isWidthNumber)width=element.offsetWidth;if(!isHeightNumber)height=element.offsetHeight}else{var parent=element.parentNode||document.getElementById(element.id).parentNode;while(parent&&!parent.offsetTop&&(parent&&!parent.previousElementSibling&&!parent.nextElementSibling)){parent=parent.parentNode}top=parent.offsetTop;left=parent.offsetLeft;if(!isWidthNumber)width=parent.offsetWidth;if(!isHeightNumber)height=parent.offsetHeight}var body=document.body;var docElem=document.documentElement;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;top=top-clientTop;left=left-clientLeft;return{top:top,left:left,width:width,height:height,bottom:top+height,right:left+width}},drawSpring:function(loops,pointsPerLoop,radius,solenoid,thinExtremes,x,y,sx,sy,moveTo,lineTo){var segments=loops*pointsPerLoop;var delta=2*Math.PI/pointsPerLoop;if(radius<0)delta*=-1;var pre=pointsPerLoop/2;var size=[sx,sy,0];var u1=EJSS_TOOLS.Mathematics.normalTo(size);var u2=EJSS_TOOLS.Mathematics.normalize(EJSS_TOOLS.Mathematics.crossProduct(size,u1));for(var i=0;i<=segments;i++){var k;if(thinExtremes){if(i<pre)k=0;else if(i<pointsPerLoop)k=i-pre;else if(i>segments-pre)k=0;else if(i>segments-pointsPerLoop)k=segments-i-pre;else k=pre}else k=pre;var angle=Math.PI/2+i*delta;var cos=Math.cos(angle),sin=Math.sin(angle);var xx=x+i*sx/segments+k*radius*(cos*u1[0]+sin*u2[0])/pre;var yy=y+i*sy/segments+k*radius*(cos*u1[1]+sin*u2[1])/pre;if(solenoid!=0){var cte=k*Math.cos(i*2*Math.PI/pointsPerLoop)/pre;xx+=solenoid*cte*sx;yy+=solenoid*cte*sy}if(i==0)moveTo(xx,yy);else lineTo(xx,yy)}},drawDecTicks:function(x,y,mx,my,ticksize,step,shift,orient,inverted,drawTick){var UTILS=EJSS_SVGGRAPHICS.Utils;var left=x-mx,right=x+mx,top=y+my,bottom=y-my;var cright=UTILS.crispValue(right);var cbottom=UTILS.crispValue(bottom);if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){for(var i=cbottom-shift;i>=top-.5;i-=step){drawTick(x,i,ticksize,orient)}}else{for(var i=left+shift;i<=cright+.5;i+=step){drawTick(i,y,ticksize,orient)}}},drawDecTicksText:function(x,y,mx,my,ticksize,step,shift,scale,scalePrecision,scalestep,scaleshift,font,textPosition,orient,inverted,tickText){var UTILS=EJSS_SVGGRAPHICS.Utils;var left=x-mx,right=x+mx,top=y+my,bottom=y-my;var cright=UTILS.crispValue(right);var cbottom=UTILS.crispValue(bottom);if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){for(var j=0,i=cbottom-shift;i>=top-.5;i-=step,j++){if(inverted)var number=scale[1]-scaleshift-scalestep*j;else var number=scale[0]+scaleshift+scalestep*j;var text=parseFloat(number.toFixed(scalePrecision)).toFixed(scalePrecision);if(textPosition==EJSS_DRAWING2D.Axis.TICKS_DOWN){var dx=ticksize/2;tickText(mGroup,x+dx,i,text,font,false)}else{var dx=text.length*Math.floor(font.getFontSize()/2);dx+=text.length*font.getNumberLetterSpacing();dx+=Math.floor(ticksize/2);tickText(x-dx,i,text,font,false)}}}else{for(var j=0,i=left+shift;i<=cright+.5;i+=step,j++){var number=scale[0]+scaleshift+scalestep*j;var text=parseFloat(number.toFixed(scalePrecision)).toFixed(scalePrecision);if(textPosition==EJSS_DRAWING2D.Axis.TICKS_DOWN){var dy=Math.floor(ticksize/2)+2;tickText(i,y-ticksize,text,font,true)}else{var dy=font.getFontSize()+Math.floor(ticksize/2);tickText(i,y+dy,text,font,true)}}}},drawLogTicks:function(x,y,mx,my,segsize,ticksize,scale,numticks,orient,drawTick){var UTILS=EJSS_SVGGRAPHICS.Utils;var left=x-mx,bottom=y-my;var cbottom=UTILS.crispValue(bottom);if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){var minscale=Math.log(scale[0])/Math.log(10);var maxscale=Math.log(scale[1])/Math.log(10);var scalesize=maxscale-minscale;var numbands=Math.ceil(scalesize);var sizeratio=segsize/scalesize;for(var i=0;i<=numbands;i++){var bandmin=Math.pow(10,i+minscale);var bandmax=Math.pow(10,i+minscale+1);var bandshift=bandmax/numticks;for(var j=0;j<numticks-1;j++){var number=bandmin+j*bandshift;if(number!=0&&number>=scale[0]&&number<=scale[1]){var step=Math.log(number)/Math.log(10);var pos=cbottom-(step-minscale)*sizeratio;drawTick(x,pos,ticksize,orient)}}}}else{var minscale=Math.log(scale[0])/Math.log(10);var maxscale=Math.log(scale[1])/Math.log(10);var scalesize=maxscale-minscale;var numbands=Math.ceil(scalesize);var sizeratio=segsize/scalesize;for(var i=0;i<=numbands;i++){var bandmin=Math.pow(10,i+minscale);var bandmax=Math.pow(10,i+minscale+1);var bandshift=bandmax/numticks
;for(var j=0;j<numticks-1;j++){var number=bandmin+j*bandshift;if(number!=0&&number>=scale[0]&&number<=scale[1]){var step=Math.log(number)/Math.log(10);var pos=left+(step-minscale)*sizeratio;drawTick(pos,y,ticksize,orient)}}}}},drawLogTicksText:function(x,y,mx,my,numticks,ticksize,scale,scalePrecision,font,textPosition,orient,tickText){var UTILS=EJSS_SVGGRAPHICS.Utils;var left=x-mx,bottom=y-my;var cbottom=UTILS.crispValue(bottom);if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){var minscale=Math.log(scale[0])/Math.log(10);var maxscale=Math.log(scale[1])/Math.log(10);var scalesize=maxscale-minscale;var numbands=Math.ceil(scalesize);var sizeratio=segsize/scalesize;for(var i=0;i<=numbands;i++){var bandmin=Math.pow(10,i+minscale);var bandmax=Math.pow(10,i+minscale+1);var bandshift=bandmax/numticks;for(var j=0;j<numticks-1;j++){var number=bandmin+j*bandshift;if(number!=0&&number>=scale[0]&&number<=scale[1]){var step=Math.log(number)/Math.log(10);var pos=cbottom-(step-minscale)*sizeratio;if(j==0){var text=number.toExponential(scalePrecision)}else{var text=parseFloat((number/bandmin).toFixed(scalePrecision)).toFixed(scalePrecision)}if(textPosition==EJSS_DRAWING2D.Axis.TICKS_DOWN){var dx=ticksize/2;tickText(x+dx,pos,text,font,false)}else{var dx=text.length*Math.floor(font.getFontSize()/2);dx+=text.length*font.getNumberLetterSpacing();dx+=Math.floor(ticksize/2);tickText(x-dx,pos,text,font,false)}}}}}else{var minscale=Math.log(scale[0])/Math.log(10);var maxscale=Math.log(scale[1])/Math.log(10);var scalesize=maxscale-minscale;var numbands=Math.ceil(scalesize);var sizeratio=segsize/scalesize;for(var i=0;i<=numbands;i++){var bandmin=Math.pow(10,i+minscale);var bandmax=Math.pow(10,i+minscale+1);var bandshift=bandmax/numticks;for(var j=0;j<numticks-1;j++){var number=bandmin+j*bandshift;if(number!=0&&number>=scale[0]&&number<=scale[1]){var step=Math.log(number)/Math.log(10);var pos=left+(step-minscale)*sizeratio;if(j==0){var text=number.toExponential(scalePrecision)}else{var text=parseFloat((number/bandmin).toFixed(scalePrecision)).toFixed(scalePrecision)}if(textPosition==EJSS_DRAWING2D.Axis.TICKS_DOWN){var dy=Math.floor(ticksize/2)+2;tickText(pos,y-ticksize,text,font,true)}else{var dy=font.getFontSize()+Math.floor(ticksize/2);tickText(pos,y+dy,text,font,true)}}}}}},drawDecGrid:function(left,top,right,bottom,sh,step,orientation,moveTo,lineTo){var UTILS=EJSS_SVGGRAPHICS.Utils;var cleft=UTILS.crispValue(left),cright=UTILS.crispValue(right);var ctop=UTILS.crispValue(top),cbottom=UTILS.crispValue(bottom);if(orientation==-1){if(step==0)step=Math.abs(ctop-cbottom);for(var i=cbottom-sh;i>=top-.5;i-=step){moveTo(left,i);lineTo(right,i)}}else{if(step==0)step=Math.abs(cright-cleft);for(var i=left+sh;i<=cright+.5;i+=step){moveTo(i,top);lineTo(i,bottom)}}},drawLogGrid:function(left,top,right,bottom,numTicks,scale,orientation,moveTo,lineTo){var UTILS=EJSS_SVGGRAPHICS.Utils;var cleft=UTILS.crispValue(left),cright=UTILS.crispValue(right);var ctop=UTILS.crispValue(top),cbottom=UTILS.crispValue(bottom);var path="";var minscale=Math.log(scale[0])/Math.log(10);var maxscale=Math.log(scale[1])/Math.log(10);var scalesize=maxscale-minscale;var numbands=Math.ceil(scalesize);if(orientation==-1)var sizeratio=(cbottom-ctop)/scalesize;else var sizeratio=(cright-cleft)/scalesize;for(var i=0;i<=numbands;i++){var bandmin=Math.pow(10,i+minscale);var bandmax=Math.pow(10,i+minscale+1);var bandshift=bandmax/numTicks;for(var j=0;j<numTicks-1;j++){var number=bandmin+j*bandshift;if(number!=0&&number>=scale[0]&&number<=scale[1]){var step=Math.log(number)/Math.log(10);if(orientation==-1){var pos=cbottom-(step-minscale)*sizeratio;moveTo(cleft,pos);lineTo(cright,pos)}else{var pos=cleft+(step-minscale)*sizeratio;moveTo(pos,ctop);lineTo(pos,cbottom)}}}}return path},buildCells:function(a,b,cells,field,fieldGivenPerCell){var cellA;var cellB;var cellZ;var cellVector;if(cells!=null&&cells.length>0){var nCells=cells.length;cellA=new Array(nCells);cellB=new Array(nCells);cellZ=new Array(nCells);cellVector=new Array(nCells);var dimension=1;if(field!=null){if(fieldGivenPerCell)dimension=field[0][0].length;else dimension=field[0].length}for(var i=0;i<nCells;i++){var cell=cells[i];var nCellPoints=cell.length;cellA[i]=new Array(nCellPoints);cellB[i]=new Array(nCellPoints);for(var j=0;j<nCellPoints;j++){var p=cell[j];cellA[i][j]=a[p];cellB[i][j]=b[p]}if(field!=null){cellZ[i]=new Array(nCellPoints);cellVector[i]=new Array(nCellPoints);if(!fieldGivenPerCell){for(var j=0;j<nCellPoints;j++){var p=cell[j];cellZ[i][j]=dimension<=1?field[p][0]:EJSS_TOOLS.Mathematics.norm(field[p]);cellVector[i][j]=new Array(dimension);for(var k=0;k<dimension;k++){cellVector[i][j][k]=field[p][k]}}}else{var cellField=field[i];for(var j=0;j<nCellPoints;j++){cellZ[i][j]=dimension<=1?cellField[j][0]:EJSS_TOOLS.Mathematics.norm(cellField[j]);cellVector[i][j]=new Array(dimension);for(var k=0;k<dimension;k++){cellVector[i][j][k]=cellField[j][k]}}}}}}return{cellA:cellA,cellB:cellB,cellZ:cellZ,cellVector:cellVector}},drawPolygons:function(cells,color,drawCell,fillCell){var cellA=cells.cellA;var cellB=cells.cellB;var cellZ=cells.cellZ;for(var i=0,n=cellA.length;i<n;i++){var a=cellA[i];var b=cellB[i];var values=cellZ[i];if(typeof values!="undefined"){var nVertex=a.length;var vertexIndex=new Array(nVertex);var minIndex=Number.MAX_VALUE,maxIndex=Number.MIN_VALUE;for(var j=0;j<nVertex;j++){var valueIndex=color.doubleToIndex(values[j]);minIndex=Math.min(valueIndex,minIndex);maxIndex=Math.max(valueIndex,maxIndex);vertexIndex[j]=valueIndex}var mThresholds=color.getColorThresholds();var newCornersX=new Array(2*nVertex);var newCornersY=new Array(2*nVertex);for(var levelIndex=minIndex;levelIndex<=maxIndex;levelIndex++){var pointsAdded=0;for(var point=0;point<nVertex;point++){var nextPoint=(point+1)%nVertex;if(vertexIndex[point]<=levelIndex&&vertexIndex[nextPoint]>=levelIndex){if(vertexIndex[point]==levelIndex){newCornersX[pointsAdded]=a[point];newCornersY[pointsAdded]=b[point];pointsAdded++}else{var lambda=(mThresholds[levelIndex]-values[point])/(values[nextPoint]-values[point]);newCornersX[pointsAdded]=Math.round(a[point]+lambda*(a[nextPoint]-a[point]));newCornersY[pointsAdded]=Math.round(b[point]+lambda*(b[nextPoint]-b[point]));pointsAdded++}if(vertexIndex[nextPoint]>levelIndex){var lambda=(mThresholds[levelIndex+1]-values[point])/(values[nextPoint]-values[point]);newCornersX[pointsAdded]=Math.round(a[point]+lambda*(a[nextPoint]-a[point]));newCornersY[pointsAdded]=Math.round(b[point]+lambda*(b[nextPoint]-b[point]));pointsAdded++}}else if(vertexIndex[point]>=levelIndex&&vertexIndex[nextPoint]<=levelIndex){if(vertexIndex[point]==levelIndex){newCornersX[pointsAdded]=a[point];newCornersY[pointsAdded]=b[point];pointsAdded++}else{var lambda=(mThresholds[levelIndex+1]-values[point])/(values[nextPoint]-values[point]);newCornersX[pointsAdded]=Math.round(a[point]+lambda*(a[nextPoint]-a[point]));newCornersY[pointsAdded]=Math.round(b[point]+lambda*(b[nextPoint]-b[point]));pointsAdded++}if(vertexIndex[nextPoint]<levelIndex){var lambda=(mThresholds[levelIndex]-values[point])/(values[nextPoint]-values[point]);newCornersX[pointsAdded]=Math.round(a[point]+lambda*(a[nextPoint]-a[point]));newCornersY[pointsAdded]=Math.round(b[point]+lambda*(b[nextPoint]-b[point]));pointsAdded++}}}if(pointsAdded>0){fillCell(newCornersX,newCornersY,pointsAdded,color,levelIndex)}}}drawCell(a,b)}},buildBoundary:function(a,b,boundary){var boundaryA;var boundaryB;if(boundary!=null&&boundary.length>0){var num=boundary.length;boundaryA=new Array(num);boundaryB=new Array(num);for(var i=0;i<num;i++){var segment=boundary[i];var len=segment.length;boundaryA[i]=new Array(len);boundaryB[i]=new Array(len);for(var j=0;j<len;j++){var p=segment[j];boundaryA[i][j]=a[p];boundaryB[i][j]=b[p]}}}return{boundaryA:boundaryA,boundaryB:boundaryB}},drawBoundary:function(boundary,labels,colors,drawSegment){var boundaryA=boundary.boundaryA;var boundaryB=boundary.boundaryB;var segmentColor="black";for(var i=0,n=boundaryA.length;i<n;i++){if(labels!=null){var colorIndex=labels[i];if(colors!=null&&colorIndex<colors.length)segmentColor=colors[colorIndex]}drawSegment(boundaryA[i],boundaryB[i],segmentColor)}},drawImageField:function(ctx,pxTopLeftX,pxTopLeftY,xMin,yMin,pixWth,pixHgt,pxPerUnitX,pxPerUnitY,shape){function xToPix(x){return pxTopLeftX+(x-xMin)*pxPerUnitX}function yToPix(y){return pxTopLeftY-(y-yMin)*pxPerUnitY}var left=Math.round(xToPix(shape.xMin));var top=Math.round(yToPix(shape.yMax));var width=Math.round(pixWth);var height=Math.round(pixHgt);var imageData=ctx.getImageData(left,top,width,height);var maskpx=this.maskRadius*pxPerUnitX;var r=0;var g=0;var b=0;for(var i=0;i<width;i++){var ii=Math.floor(i*shape.nx/width);for(var j=0;j<height;j++){var jj=Math.floor(j*shape.ny/height);g=0;if(shape.data[ii][jj]<shape.lower){b=255;r=0}else if(shape.data[ii][jj]<shape.center){b=255*(shape.center-shape.data[ii][jj])/(shape.center-shape.lower);r=0}else if(shape.data[ii][jj]<shape.upper){b=0;r=255*(shape.data[ii][jj]-shape.center)/(shape.upper-shape.center)}else{b=0;r=255}if(shape.maskRadius>0){if(Math.sqrt((i-width/2)*(i-width/2)+(j-height/2)*(j-height/2))>maskpx){r=g=224;b=255}}var index=4*i+4*width*j;imageData.data[index+0]=r;imageData.data[index+1]=g;imageData.data[index+2]=b}}ctx.putImageData(imageData,left,top)}};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.analyticCurve=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.arrow=function(mGraphics,mElement){var UTILS=EJSS_SVGGRAPHICS.Utils;var Arrow=EJSS_DRAWING2D.Arrow;function createMarkDef(name,mark,orient,width,height,stroke,color,color2,sizex,sizey){var path,path2;var marker=mGraphics.getElementById(name);if(marker===null){marker=document.createElementNS("http://www.w3.org/2000/svg","marker");marker.setAttribute("id",name);path=document.createElementNS("http://www.w3.org/2000/svg","path");path.setAttribute("id",name+".markpath");marker.appendChild(path);path2=document.createElementNS("http://www.w3.org/2000/svg","path");path2.setAttribute("id",name+".markpath2");marker.appendChild(path2);mGraphics.getElementsByTagName("defs")[0].appendChild(marker)}else{path=mGraphics.getElementById(name+".markpath");path2=mGraphics.getElementById(name+".markpath2");mGraphics.getElementsByTagName("defs")[0].insertBefore(marker,marker)}var vwidth=width+2*stroke;var vheight=height+2*stroke;marker.setAttribute("viewBox",-stroke+" "+-stroke+" "+vwidth+" "+vheight);marker.setAttribute("refX",width/2);marker.setAttribute("refY",height/2);marker.setAttribute("markerUnits","userSpaceOnUse");marker.setAttribute("markerWidth",vwidth);marker.setAttribute("markerHeight",vheight);marker.setAttribute("orient",orient);path.setAttribute("fill",color);path.setAttribute("stroke",color);path.setAttribute("stroke-width",stroke);path.setAttribute("style","  marker-start :none;   marker-end :none; ");path2.setAttribute("fill",color2);path2.setAttribute("stroke",color2);path2.setAttribute("stroke-width",stroke);path2.setAttribute("style","  marker-start :none;   marker-end :none; ");switch(mark){case Arrow.TRIANGLE:var str="M 0 0 L "+width+" "+height/2+" L 0 "+height+" z";path.setAttribute("d",str);break;case Arrow.INVTRIANGLE:var str="M "+width+" 0 L 0 "+height/2+" L "+width+" "+height+" z";path.setAttribute("d",str);break;case Arrow.ANGLE:marker.setAttribute("markerHeight",height);marker.setAttribute("refX",width);var p1=-(stroke-1);var p2=height+(stroke-1);var str="M 0 "+p1+" L "+width+" "+height/2+" L 0 "+p2;path.setAttribute("d",str);path.setAttribute("fill","none");break;case Arrow.INVANGLE:marker.setAttribute("markerHeight",height);marker.setAttribute("refX",1);var p1=-(stroke-1);var p2=height+(stroke-1);var str="M "+width+" "+p1+" L 0 "+height/2+" L "+width+" "+p2;path.setAttribute("d",str);path.setAttribute("fill","none");break;case Arrow.LINE:var str="M "+width/2+" 0 L "+width/2+" "+height+" z";path.setAttribute("d",str);break;case Arrow.RECTANGLE:var str="M 0 0 L "+width+" 0 L "+width+" "+height+" L 0 "+height+" z";path.setAttribute("d",str);break;case Arrow.DIAMOND:var str="M "+width/2+" 0 L "+width+" "+height/2+" L "+width/2+" "+height+" L 0 "+height/2+" z";path.setAttribute("d",str);break;case Arrow.CIRCLE:var radius=width<height?width:height;radius/=2;var str="M "+width/2+" "+height/2+" m "+-radius+", 0 a "+radius+","+radius+" 0 1,0 "+radius*2+",0"+" a "+radius+","+radius+" 0 1,0 "+-radius*2+",0";path.setAttribute("d",str);break;case Arrow.WEDGE:path.setAttribute("stroke-width",0);path2.setAttribute("stroke-width",.5);var angle_rot=typeof sizey==="undefined"||sizey===0?0:Math.atan(sizex/sizey);var radius=width<height?width:height;radius/=2;var x=width/2;var y=height/2;var p11=x+radius*Math.cos(angle_rot);var p12=y-radius*Math.sin(angle_rot);var p21=x+radius*Math.cos(Math.PI/3.25-angle_rot);var p22=y+radius*Math.sin(Math.PI/3.25-angle_rot);var wedge=" M "+x+" "+y+" L "+p11+","+p12+" A "+radius+","+radius+" 0 0,1 "+p21+","+p22;var circle="M "+x+" "+y+" m "+-radius+", 0 a "+radius+","+radius+" 0 1,0 "+radius*2+",0"+" a "+radius+","+radius+" 0 1,0 "+-radius*2+",0 ";path.setAttribute("d",circle);path2.setAttribute("d",wedge);break;case Arrow.POINTED:marker.setAttribute("refX",width);path.setAttribute("stroke-width",0);var str="M 0 0 L "+width+" "+height/2+" L 0 "+height+" L "+width/2+" "+height/2+" L 0 0 z";path.setAttribute("d",str);break;case Arrow.CURVE:marker.setAttribute("refX",width);path.setAttribute("stroke-width",0);var radius1=width*3;var radius2=height/2.5;var str="M 0 0 "+" A "+radius1+","+radius1+" 1 0,0 "+width+","+height/2+" A "+radius1+","+radius1+" 1 0,0 "+" 0,"+height+" A "+radius2+","+radius2+" 1 0,0 "+" 0,"+height/2+" A "+radius2+","+radius2+" 1 0,0 "+" 0,0 z";path.setAttribute("d",str);break}}var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mLine=mGraphics.getElementById(mElement.getName());if(mLine===null){mLine=document.createElementNS("http://www.w3.org/2000/svg","path");mLine.setAttribute("id",mElement.getName());group.appendChild(mLine)}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;if(size[0]!=0||size[1]!=0){if(mElement.getMarkEnd()!=Arrow.NONE){var endMax=mElement.getMarkProportion()*EJSS_TOOLS.Mathematics.norm([size[0],size[1]]);var endW=endMax!=0&&endMax<mElement.getMarkEndWidth()?endMax:mElement.getMarkEndWidth();var endH=endMax!=0&&endMax<mElement.getMarkEndHeight()?endMax:mElement.getMarkEndHeight();var color=mElement.getMarkEndColor()=="none"?mElement.getStyle().getLineColor():mElement.getMarkEndColor();var stroke=mElement.getMarkEndStroke()<0?mElement.getStyle().getLineWidth():mElement.getMarkEndStroke();createMarkDef(mElement.getName()+".end",mElement.getMarkEnd(),mElement.getMarkEndOrient(),endW,endH,stroke,color);mLine.setAttribute("marker-end","url(#"+mElement.getName()+".end"+")")}else{mLine.removeAttribute("marker-end")}if(mElement.getMarkMiddle()!=Arrow.NONE){var midMax=mElement.getMarkProportion()*EJSS_TOOLS.Mathematics.norm([size[0],size[1]]);var midW=midMax!=0&&midMax<mElement.getMarkMiddleWidth()?midMax:mElement.getMarkMiddleWidth();var midH=midMax!=0&&midMax<mElement.getMarkMiddleHeight()?midMax:mElement.getMarkMiddleHeight();var color=mElement.getMarkMiddleColor()=="none"?mElement.getStyle().getLineColor():mElement.getMarkMiddleColor();var colorsnd=mElement.getMarkMiddleColorSnd()=="none"?mElement.getStyle().getLineColor():mElement.getMarkMiddleColorSnd();var stroke=mElement.getMarkMiddleStroke()<0?mElement.getStyle().getLineWidth():mElement.getMarkMiddleStroke();createMarkDef(mElement.getName()+".mid",mElement.getMarkMiddle(),mElement.getMarkMiddleOrient(),midW,midH,stroke,color,colorsnd,size[0],size[1]);mLine.setAttribute("marker-mid","url(#"+mElement.getName()+".mid"+")")}else{mLine.removeAttribute("marker-mid")}if(mElement.getMarkStart()!=Arrow.NONE){var stMax=mElement.getMarkProportion()*EJSS_TOOLS.Mathematics.norm([size[0],size[1]]);var stW=stMax!=0&&stMax<mElement.getMarkStartWidth()?stMax:mElement.getMarkStartWidth();var stH=stMax!=0&&stMax<mElement.getMarkStartHeight()?stMax:mElement.getMarkStartHeight();var color=mElement.getMarkStartColor()=="none"?mElement.getStyle().getLineColor():mElement.getMarkStartColor();var stroke=mElement.getMarkStartStroke()<0?mElement.getStyle().getLineWidth():mElement.getMarkStartStroke();createMarkDef(mElement.getName()+".start",mElement.getMarkStart(),mElement.getMarkStartOrient(),stW,stH,stroke,color);mLine.setAttribute("marker-start","url(#"+mElement.getName()+".start"+")")}else{mLine.removeAttribute("marker-start")}}else{mLine.removeAttribute("marker-end");mLine.removeAttribute("marker-mid");mLine.removeAttribute("marker-start")}var CR=UTILS.crispValue;var style=mElement.getStyle();switch(mElement.getSplineType()){default:case Arrow.SPLINE_NONE:if(style.getShapeRendering()=="crispEdges"){if(mElement.getMarkMiddle()!=Arrow.NONE){mLine.setAttribute("d","M "+CR(x-mx)+" "+CR(y-my)+" L "+CR(x)+" "+CR(y)+" L "+CR(x+mx)+" "+CR(y+my))}else{mLine.setAttribute("d","M "+CR(x-mx)+" "+CR(y-my)+" L "+CR(x+mx)+" "+CR(y+my))}}else{if(mElement.getMarkMiddle()!=Arrow.NONE){mLine.setAttribute("d","M "+(x-mx)+" "+(y-my)+" L "+x+" "+y+" L "+(x+mx)+" "+(y+my))}else{mLine.setAttribute("d","M "+(x-mx)+" "+(y-my)+" L "+(x+mx)+" "+(y+my))}}break;case Arrow.SPLINE_CUBIC:var controlX=Math.abs(mx)*.25;if(style.getShapeRendering()=="crispEdges"){if(mElement.getMarkMiddle()!=Arrow.NONE){mLine.setAttribute("d","M "+CR(x-mx)+" "+CR(y-my)+" Q "+CR(x-controlX)+" "+CR(y-my)+", "+CR(x)+" "+CR(y)+" Q "+CR(x+controlX)+" "+CR(y+my)+", "+CR(x+mx)+" "+CR(y+my))}else{mLine.setAttribute("d","M "+CR(x-mx)+" "+CR(y-my)+" C "+CR(x)+" "+CR(y-my)+", "+CR(x)+" "+CR(y+my)+", "+CR(x+mx)+" "+CR(y+my))}}else{if(mElement.getMarkMiddle()!=Arrow.NONE){mLine.setAttribute("d","M "+(x-mx)+" "+(y-my)+" Q "+(x-controlX)+" "+(y-my)+", "+x+" "+y+" Q "+(x+controlX)+" "+(y+my)+", "+(x+mx)+" "+(y+my))}else{mLine.setAttribute("d","M "+(x-mx)+" "+(y-my)+" C "+x+" "+(y-my)+", "+x+" "+(y+my)+", "+(x+mx)+" "+(y+my)+" L "+(x+mx)+" "+(y+my))}}break}if(style.getDrawFill())mLine.setAttribute("fill",style.getFillColor());else mLine.setAttribute("fill","none");if(style.getDrawLines()){mLine.setAttribute("stroke",style.getLineColor());mLine.setAttribute("stroke-width",style.getLineWidth())}else{mLine.setAttribute("stroke","none");mLine.setAttribute("stroke-width",0)}mLine.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mLine.setAttribute(attr,attributes[attr])}return mLine};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.axis=function(mGraphics,mElement){var UTILS=EJSS_SVGGRAPHICS.Utils;function drawLine(group,x,y,mx,my,style,orient,inverted){var mLine=document.createElementNS("http://www.w3.org/2000/svg","path");group.appendChild(mLine);if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){if(inverted){my=-my;y=-y}if(style.getShapeRendering()=="crispEdges"){mLine.setAttribute("d","M "+UTILS.crispValue(x)+" "+UTILS.crispValue(y-.5-my)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y-.5+my))}else{mLine.setAttribute("d","M "+x+" "+(y-my)+" L "+x+" "+(y+my))}}else{if(style.getShapeRendering()=="crispEdges"){mLine.setAttribute("d","M "+UTILS.crispValue(x+.5-mx)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x+.5+mx)+" "+UTILS.crispValue(y))}else{mLine.setAttribute("d","M "+(x-mx)+" "+y+" L "+(x+mx)+" "+y)}}}function drawTick(group,x,y,ticksize,style,orient){if(orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL){var mTick=document.createElementNS("http://www.w3.org/2000/svg","path");group.appendChild(mTick);if(style.getShapeRendering()=="crispEdges"){mTick.setAttribute("d","M "+UTILS.crispValue(x-ticksize/2)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x+ticksize/2)+" "+UTILS.crispValue(y))}else{mTick.setAttribute("d","M "+(x-ticksize/2)+" "+y+" L "+(x+ticksize/2)+" "+y)}}else{var mTick=document.createElementNS("http://www.w3.org/2000/svg","path");group.appendChild(mTick);if(style.getShapeRendering()=="crispEdges"){mTick.setAttribute("d","M "+UTILS.crispValue(x)+" "+UTILS.crispValue(y-ticksize/2)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y+ticksize/2))}else{mTick.setAttribute("d","M "+x+" "+(y-ticksize/2)+" L "+x+" "+(y+ticksize/2))}}}function tickText(group,x,y,text,font,horizontal){var mTxtGroup=document.createElementNS("http://www.w3.org/2000/svg","g");group.appendChild(mTxtGroup);var mText=document.createElementNS("http://www.w3.org/2000/svg","text");mTxtGroup.appendChild(mText);mText.setAttribute("font-family",font.getFontFamily());mText.setAttribute("font-size",font.getFontSizeString());mText.setAttribute("fill",font.getFillColor());mText.setAttribute("stroke",font.getOutlineColor());mText.setAttribute("stroke-width",font.getFontWeight());mText.setAttribute("letterSpacing",font.getLetterSpacing());mText.textContent=text;if(horizontal){x-=mText.getComputedTextLength()/2+.5}else{y+=font.getFontSize()/2}mText.setAttribute("x",x);mText.setAttribute("y",y)}var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mGroup=mGraphics.getElementById(mElement.getName());if(mGroup!==null)group.removeChild(mGroup);if(mElement.getShow()){mGroup=document.createElementNS("http://www.w3.org/2000/svg","g");mGroup.setAttribute("id",mElement.getName());group.appendChild(mGroup);var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var style=mElement.getStyle();var orient=mElement.getOrient();var inverted=mElement.getInvertedScaleY();drawLine(mGroup,x,y,mx,my,style,orient,inverted);var segsize=orient==EJSS_DRAWING2D.Axis.AXIS_VERTICAL?Math.abs(size[1]):Math.abs(size[0]);var ticksmode=mElement.getTicksMode();if(ticksmode==EJSS_DRAWING2D.Axis.SCALE_LOG){var scale=mElement.getScale();if(scale[0]>0&&scale[1]>0){var ticks=mElement.getTicks();var scalePrecision=mElement.getScalePrecision();var ticksize=mElement.getTicksSize();EJSS_GRAPHICS.GraphicsUtils.drawLogTicks(x,y,mx,my,segsize,ticksize,scale,ticks,orient,function(x,y,ticksize,orient){drawTick(mGroup,x,y,ticksize,style,orient)});var font=mElement.getFont();var textPosition=mElement.getTextPosition();EJSS_GRAPHICS.GraphicsUtils.drawLogTicksText(x,y,mx,my,ticks,ticksize,scale,scalePrecision,font,textPosition,orient,function(x,y,text,font,horizontal){tickText(mGroup,x,y,text,font,horizontal)})}}else if(ticksmode==EJSS_DRAWING2D.Axis.SCALE_NUM){var step=0;var tickstep=0;if(!mElement.getAutoTicks()){var ticks=mElement.getTicks();if(ticks!=0){step=segsize/ticks}else{step=mElement.getStep();tickstep=mElement.getTickStep()}}else{var stepmin=mElement.getAutoStepMin();var ticksrange=mElement.getAutoTicksRange();for(var i=ticksrange.length-1;i>=0;i--){step=Math.abs(segsize/ticksrange[i]);if(step*1.001>=stepmin)break}}var scalePrecision=mElement.getScalePrecision();var scale=mElement.getScale();if(tickstep==0){var scalestep=Math.abs((scale[1]-scale[0])*step/segsize)}else{var scalestep=tickstep;step=Math.abs(scalestep*segsize/(scale[1]-scale[0]))}var decimals=Math.pow(10,scalePrecision);var scalestepTmp=Math.round(scalestep*decimals)/decimals;if(scalestepTmp>0){scalestep=scalestepTmp;step=Math.abs(scalestepTmp*segsize/(scale[1]-scale[0]))}var fixedTicks=mElement.getFixedTick();var tickfixed=scale[1];if(!isNaN(fixedTicks)){if(fixedTicks<scale[0])tickfixed=fixedTicks+(Math.floor((scale[0]-fixedTicks)/scalestep)+1)*scalestep;else if(fixedTicks>scale[1])tickfixed=fixedTicks-(Math.floor((fixedTicks-scale[1])/scalestep)+1)*scalestep;else tickfixed=fixedTicks}var scaleshift=Math.abs((scale[0]-tickfixed)%scalestep);var dist=Math.abs(scaleshift-scalestep);if(scaleshift<.001||dist<.001)scaleshift=0;var shift=segsize*scaleshift/Math.abs(scale[1]-scale[0]);var ticksize=mElement.getTicksSize();EJSS_GRAPHICS.GraphicsUtils.drawDecTicks(x,y,mx,my,ticksize,step,shift,orient,inverted,function(x,y,ticksize,orient){drawTick(mGroup,x,y,ticksize,style,orient)});var font=mElement.getFont();var textPosition=mElement.getTextPosition();EJSS_GRAPHICS.GraphicsUtils.drawDecTicksText(x,y,mx,my,ticksize,step,shift,scale,scalePrecision,scalestep,scaleshift,font,textPosition,orient,inverted,function(x,y,text,font,horizontal){tickText(mGroup,x,y,text,font,horizontal)})}if(style.getDrawFill())mGroup.setAttribute("fill",style.getFillColor());else mGroup.setAttribute("fill","none");if(style.getDrawLines()){mGroup.setAttribute("stroke",style.getLineColor());mGroup.setAttribute("stroke-width",style.getLineWidth())}else{mGroup.setAttribute("stroke","none");mGroup.setAttribute("stroke-width",0)}mGroup.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mGroup.setAttribute(attr,attributes[attr])}}return mGroup};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.byteRaster=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.canvas=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());var myCanvasSrc;if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape);myCanvasSrc=document.createElement("canvas");myCanvasSrc.setAttribute("id",mElement.getName()+".canvas");mShape.appendChild(myCanvasSrc)}else{myCanvasSrc=document.getElementById(mElement.getName()+".canvas")}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];myCanvasSrc.width=Math.abs(size[0]);myCanvasSrc.height=Math.abs(size[1]);mShape.width=Math.abs(size[0]);mShape.height=Math.abs(size[1]);var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);mShape.setAttribute("x",x-mx);mShape.setAttribute("y",y-my);var dim=mElement.getDimensions();var deltaX=dim[1]-dim[0];var deltaY=dim[3]-dim[2];var pixWth=Math.abs(size[0]);var pixHgt=Math.abs(size[1]);var pxPerUnitX=pixWth/deltaX;var pxPerUnitY=pixHgt/deltaY;var pxTopLeftX=x-pixWth/2;var pxTopLeftY=y+pixHgt/2;var drawables=mElement.getDrawables();var context=myCanvasSrc.getContext("2d");context.fillRect(0,0,myCanvasSrc.width-.5,myCanvasSrc.height-.5);for(var i=0;i<drawables.length;i++){if(typeof drawables[i].imageField!="undefined")EJSS_GRAPHICS.GraphicsUtils.drawImageField(context,pxTopLeftX,pxTopLeftY,xMin,yMin,pixWth,pixHgt,pxPerUnitX,pxPerUnitY,drawables[i]);else if(typeof drawables[i].run!="undefined")drawables[i].draw(context,pxTopLeftX,pxTopLeftY,xMin,yMin,pixWth,pixHgt,pxPerUnitX,pxPerUnitY)}var attributes=mElement.getStyle().getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.cellLattice=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.cursor=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.ellipse=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","ellipse");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape)}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);mShape.setAttribute("cx",x);mShape.setAttribute("cy",y);mShape.setAttribute("rx",mx);mShape.setAttribute("ry",my);var style=mElement.getStyle();if(style.getDrawFill())mShape.setAttribute("fill",style.getFillColor());else mShape.setAttribute("fill","none");if(style.getDrawLines()){mShape.setAttribute("stroke",style.getLineColor());mShape.setAttribute("stroke-width",style.getLineWidth())}else{mShape.setAttribute("stroke","none");mShape.setAttribute("stroke-width",0)}mShape.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.grid=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mGroup=mGraphics.getElementById(mElement.getName());if(mGroup!==null)group.removeChild(mGroup);mGroup=document.createElementNS("http://www.w3.org/2000/svg","g");mGroup.setAttribute("id",mElement.getName());group.appendChild(mGroup);var mShapeX=document.createElementNS("http://www.w3.org/2000/svg","path");mShapeX.setAttribute("id",mElement.getName()+"X");mGroup.appendChild(mShapeX);var mShapeY=document.createElementNS("http://www.w3.org/2000/svg","path");mShapeY.setAttribute("id",mElement.getName()+"Y");mGroup.appendChild(mShapeY);var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var showx=mElement.getShowX();var showy=mElement.getShowY();var pathX="";var pathY="";if(showx){var ticksXmode=mElement.getTicksXMode();if(ticksXmode==EJSS_DRAWING2D.Grid.SCALE_LOG){var scaleX=mElement.getScaleX();if(scaleX[0]>0&&scaleX[1]>0){var ticksX=mElement.getTicksX();var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawLogGrid(left,top,right,bottom,ticksX,scaleX,1,function(xx,yy){pathX+=" M "+xx+" "+yy},function(xx,yy){pathX+=" L "+xx+" "+yy})}}else if(ticksXmode==EJSS_DRAWING2D.Grid.SCALE_NUM){var stepx=0;var tickstepx=0;if(!mElement.getAutoTicksX()){var ticksX=mElement.getTicksX();if(ticksX!=0){stepx=Math.abs(size[0]/ticksX)}else{stepx=mElement.getStepX();tickstepx=mElement.getTickStepX()}}else{var stepxmin=mElement.getAutoStepXMin();var ticksxrange=mElement.getAutoTicksRangeX();for(var i=ticksxrange.length-1;i>=0;i--){stepx=Math.abs(size[0]/ticksxrange[i]);if(stepx>=stepxmin)break}}var scalePrecisionX=mElement.getScalePrecisionX();var scaleX=mElement.getScaleX();if(tickstepx==0){var scalestepX=Math.abs((scaleX[1]-scaleX[0])*stepx/size[0])}else{var scalestepX=tickstepx;stepx=Math.abs(scalestepX*size[0]/(scaleX[1]-scaleX[0]))}var decimalsX=Math.pow(10,scalePrecisionX);var scalestepXTmp=Math.round(scalestepX*decimalsX)/decimalsX;if(scalestepXTmp>0){scalestepX=scalestepXTmp;stepx=Math.abs(scalestepXTmp*size[0]/(scaleX[1]-scaleX[0]))}var fixedTicks=mElement.getFixedTickX();var tickfixed=scaleX[1];if(!isNaN(fixedTicks)){if(fixedTicks<scaleX[0])tickfixed=fixedTicks+(Math.floor((scaleX[0]-fixedTicks)/scalestepX)+1)*scalestepX;else if(fixedTicks>scaleX[1])tickfixed=fixedTicks-(Math.floor((fixedTicks-scaleX[1])/scalestepX)+1)*scalestepX;else tickfixed=fixedTicks}var scaleshift=Math.abs((scaleX[0]-tickfixed)%scalestepX);var dist=Math.abs(scaleshift-scalestepX);if(scaleshift<.001||dist<.001)scaleshift=0;var shiftx=Math.abs(size[0]*scaleshift/(scaleX[1]-scaleX[0]));var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawDecGrid(left,top,right,bottom,shiftx,stepx,1,function(xx,yy){pathX+=" M "+xx+" "+yy},function(xx,yy){pathX+=" L "+xx+" "+yy})}}if(showy){var ticksYmode=mElement.getTicksYMode();if(ticksYmode==EJSS_DRAWING2D.Grid.SCALE_LOG){var scaleY=mElement.getScaleY();if(scaleY[0]>0&&scaleY[1]>0){var ticksY=mElement.getTicksY();var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawLogGrid(left,top,right,bottom,ticksY,scaleY,-1,function(xx,yy){pathY+=" M "+xx+" "+yy},function(xx,yy){pathY+=" L "+xx+" "+yy})}}else if(ticksYmode==EJSS_DRAWING2D.Grid.SCALE_NUM){var stepy=0;var tickstepy=0;if(!mElement.getAutoTicksY()){var ticksY=mElement.getTicksY();if(ticksY!=0){stepy=Math.abs(size[1]/ticksY)}else{stepy=mElement.getStepY();tickstepy=mElement.getTickStepY()}}else{var stepymin=mElement.getAutoStepYMin();var ticksyrange=mElement.getAutoTicksRangeY();for(var i=ticksyrange.length-1;i>=0;i--){stepy=Math.abs(size[1]/ticksyrange[i]);if(stepy>=stepymin)break}}var scalePrecisionY=mElement.getScalePrecisionY();var scaleY=mElement.getScaleY();if(tickstepy==0){var scalestepY=Math.abs((scaleY[1]-scaleY[0])*stepy/size[1])}else{var scalestepY=tickstepy;stepy=Math.abs(scalestepY*size[1]/(scaleY[1]-scaleY[0]))}var decimalsY=Math.pow(10,scalePrecisionY);var scalestepYTmp=Math.round(scalestepY*decimalsY)/decimalsY;if(scalestepYTmp>0){scalestepY=scalestepYTmp;stepy=Math.abs(scalestepYTmp*size[1]/(scaleY[1]-scaleY[0]))}var fixedTicks=mElement.getFixedTickY();var tickfixed=scaleY[1];if(!isNaN(fixedTicks)){if(fixedTicks<scaleY[0])tickfixed=fixedTicks+(Math.floor((scaleY[0]-fixedTicks)/scalestepY)+1)*scalestepY;else if(fixedTicks>scaleY[1])tickfixed=fixedTicks-(Math.floor((fixedTicks-scaleY[1])/scalestepY)+1)*scalestepY;else tickfixed=fixedTicks}var scaleshift=Math.abs((scaleY[0]-tickfixed)%scalestepY);var dist=Math.abs(scaleshift-scalestepY);if(scaleshift<.001||dist<.001)scaleshift=0;var shifty=Math.abs(size[1]*scaleshift/(scaleY[1]-scaleY[0]));var left=x-mx,right=x+mx,top=y+my,bottom=y-my;EJSS_GRAPHICS.GraphicsUtils.drawDecGrid(left,top,right,bottom,shifty,stepy,-1,function(xx,yy){pathY+=" M "+xx+" "+yy},function(xx,yy){pathY+=" L "+xx+" "+yy})}}if(pathX.length>0){mShapeX.setAttribute("d",pathX);mShapeX.setAttribute("shapeRendering",mElement.getShapeRenderingX());mShapeX.setAttribute("stroke",mElement.getLineColorX());mShapeX.setAttribute("stroke-width",mElement.getLineWidthX())}if(pathY.length>0){mShapeY.setAttribute("d",pathY);mShapeY.setAttribute("shapeRendering",mElement.getShapeRenderingY());mShapeY.setAttribute("stroke",mElement.getLineColorY());mShapeY.setAttribute("stroke-width",mElement.getLineWidthY())}var attributes=mElement.getStyle().getAttributes();for(var attr in attributes){mShapeX.setAttribute(attr,attributes[attr]);mShapeY.setAttribute(attr,attributes[attr])}return mGroup};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.group=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","g");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape)}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.histogram=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.image=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.mesh=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.pipe=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.point=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","ellipse");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape)}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];mShape.setAttribute("cx",x);mShape.setAttribute("cy",y);mShape.setAttribute("rx",2);mShape.setAttribute("ry",2);var style=mElement.getStyle();mShape.setAttribute("fill",style.getFillColor());var attributes=style.getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.polygon=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.rectangle=function(mGraphics,mElement){var UTILS=EJSS_SVGGRAPHICS.Utils;var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","path");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape)}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var style=mElement.getStyle();if(style.getShapeRendering()=="crispEdges"){mShape.setAttribute("d","M "+UTILS.crispValue(x-mx)+" "+UTILS.crispValue(y+my)+" L "+UTILS.crispValue(x+mx)+" "+UTILS.crispValue(y+my)+" L "+UTILS.crispValue(x+mx)+" "+UTILS.crispValue(y-my)+" L "+UTILS.crispValue(x-mx)+" "+UTILS.crispValue(y-my)+" z")}else{mShape.setAttribute("d","M "+(x-mx)+" "+(y+my)+" L "+(x+mx)+" "+(y+my)+" L "+(x+mx)+" "+(y-my)+" L "+(x-mx)+" "+(y-my)+" z")}if(style.getDrawFill())mShape.setAttribute("fill",style.getFillColor());else mShape.setAttribute("fill","none");if(style.getDrawLines()){mShape.setAttribute("stroke",style.getLineColor());mShape.setAttribute("stroke-width",style.getLineWidth())}else{mShape.setAttribute("stroke","none");mShape.setAttribute("stroke-width",0)}mShape.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.roundRectangle=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","rect");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape)}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);var radius=Math.abs(mElement.getCornerRadius());mShape.setAttribute("x",x-mx);mShape.setAttribute("y",y-my);mShape.setAttribute("width",Math.abs(size[0]));mShape.setAttribute("height",Math.abs(size[1]));mShape.setAttribute("rx",radius);mShape.setAttribute("ry",radius);var style=mElement.getStyle();if(style.getDrawFill())mShape.setAttribute("fill",style.getFillColor());else mShape.setAttribute("fill","none");if(style.getDrawLines()){mShape.setAttribute("stroke",style.getLineColor());mShape.setAttribute("stroke-width",style.getLineWidth())}else{mShape.setAttribute("stroke","none");mShape.setAttribute("stroke-width",0)}mShape.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.scalarField=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());var myScalarFieldSrc;if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape);myScalarFieldSrc=document.createElement("scalarField");myScalarFieldSrc.setAttribute("id",mElement.getName()+".scalarField");mShape.appendChild(myScalarFieldSrc)}else{myScalarFieldSrc=document.getElementById(mElement.getName()+".scalarField")}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];myScalarFieldSrc.width=Math.abs(size[0]);myScalarFieldSrc.height=Math.abs(size[1]);mShape.width=Math.abs(size[0]);mShape.height=Math.abs(size[1]);var mx=Math.abs(size[0]/2);var my=Math.abs(size[1]/2);mShape.setAttribute("x",x-mx);mShape.setAttribute("y",y-my);var deltaX=mElement.getMaximumX()-mElement.getMinimumX();var deltaY=mElement.getMaximumY()-mElement.getMinimumY();var pixWth=Math.abs(size[0]);var pixHgt=Math.abs(size[1])
;var pxPerUnitX=pixWth/deltaX;var pxPerUnitY=pixHgt/deltaY;var pxTopLeftX=x-pixWth/2;var pxTopLeftY=y+pixHgt/2;var context=myScalarFieldSrc.getContext("2d");context.fillRect(0,0,myScalarFieldSrc.width-.5,myScalarFieldSrc.height-.5);EJSS_GRAPHICS.GraphicsUtils.drawImageField(context,pxTopLeftX,pxTopLeftY,mElement.getMinimumX(),mElement.getMinimumY(),pixWth,pixHgt,pxPerUnitX,pxPerUnitY,{data:mElement.getData()});var attributes=mElement.getStyle().getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.segment=function(mGraphics,mElement){var UTILS=EJSS_SVGGRAPHICS.Utils;var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mShape=mGraphics.getElementById(mElement.getName());if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","path");mShape.setAttribute("id",mElement.getName());group.appendChild(mShape)}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var style=mElement.getStyle();if(style.getShapeRendering()=="crispEdges"){mShape.setAttribute("d","M "+UTILS.crispValue(x-mx)+" "+UTILS.crispValue(y-my)+" L "+UTILS.crispValue(x+mx)+" "+UTILS.crispValue(y+my))}else{mShape.setAttribute("d","M "+(x-mx)+" "+(y-my)+" L "+(x+mx)+" "+(y+my))}if(style.getDrawFill())mShape.setAttribute("fill",style.getFillColor());else mShape.setAttribute("fill","none");if(style.getDrawLines()){mShape.setAttribute("stroke",style.getLineColor());mShape.setAttribute("stroke-width",style.getLineWidth())}else{mShape.setAttribute("stroke","none");mShape.setAttribute("stroke-width",0)}mShape.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}return mShape};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.spring=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.tank=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.text=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mGroup=mGraphics.getElementById(mElement.getName());var mInnerGroup,mText,mBox;if(mGroup===null){mGroup=document.createElementNS("http://www.w3.org/2000/svg","g");mGroup.setAttribute("id",mElement.getName());group.appendChild(mGroup);mInnerGroup=document.createElementNS("http://www.w3.org/2000/svg","g");mInnerGroup.setAttribute("id",mElement.getName()+".inner");mGroup.appendChild(mInnerGroup);mBox=document.createElementNS("http://www.w3.org/2000/svg","path");mBox.setAttribute("id",mElement.getName()+".box");mInnerGroup.appendChild(mBox);mText=document.createElementNS("http://www.w3.org/2000/svg","text");mText.setAttribute("id",mElement.getName()+".text");mInnerGroup.appendChild(mText)}else{mInnerGroup=mGraphics.getElementById(mElement.getName()+".inner");mText=mGraphics.getElementById(mElement.getName()+".text");mBox=mGraphics.getElementById(mElement.getName()+".box")}while(mText.firstChild){mText.removeChild(mText.firstChild)}var font=mElement.getFont();mText.setAttribute("font-style",font.getFontStyle());mText.setAttribute("font-weight",font.getFontWeight());mText.setAttribute("font-size",font.getFontSizeString());mText.setAttribute("font-family",font.getFontFamily());mText.setAttribute("fill",font.getFillColor());mText.setAttribute("stroke",font.getOutlineColor());mText.setAttribute("stroke-width",font.getOutlineWidth());mText.setAttribute("letterSpacing",font.getLetterSpacing());var text=mElement.getText();var arr=text.split("\n");var maxLength;var maxHeight;var drawingSize=mElement.getDrawingSize();if(drawingSize[0]==-1){if(typeof text=="undefined"||text==null)text="";maxLength=0;maxHeight=font.getFontSize();mText.textContent="";mText.setAttribute("visibility","hidden");for(i=0;i<arr.length;i++){mText.textContent=arr[i];var len=mText.getComputedTextLength();if(len>maxLength)maxLength=len;if(i>0)maxHeight+=1.8*font.getFontSize()}mText.setAttribute("visibility","inherit");mText.textContent="";mElement.setDrawingSize([maxLength,maxHeight])}else{maxLength=drawingSize[0];maxHeight=drawingSize[1]}var pos=mElement.getPixelPosition();var marginFrame=mElement.getFramed()?4:0;var size=[maxLength+marginFrame*2,maxHeight/1.5+marginFrame*2];var offset=EJSS_DRAWING2D.Element.getSWRelativePositionOffset(mElement.getRelativePosition(),size[0],size[1]);var xmargin=mElement.getMarginX();var ymargin=mElement.getMarginY();var x=pos[0]+offset[0]+xmargin+marginFrame;var y=pos[1]+offset[1]+ymargin-marginFrame;mText.setAttribute("x",x);mText.setAttribute("y",y);for(i=arr.length-1;i>=0;i--){var ts=document.createElementNS("http://www.w3.org/2000/svg","tspan");if(i==arr.length-1)ts.setAttribute("y",y);else ts.setAttribute("dy","-1.2em");ts.setAttribute("x",x);ts.textContent=arr[i];mText.appendChild(ts)}if(mElement.getFramed()){var tbmargin=marginFrame;var rlmargin=marginFrame;var wlen=size[0]-marginFrame*2;var hlen=size[1]-marginFrame*2;if(wlen>0){var bottom=y+tbmargin,top=y-hlen-tbmargin;var left=x-rlmargin,rigth=x+wlen+tbmargin;mBox.setAttribute("d","M "+left+" "+bottom+" L "+rigth+" "+bottom+" L "+rigth+" "+top+" L "+left+" "+top+" z");var style=mElement.getStyle();if(style.getDrawFill())mBox.setAttribute("fill",style.getFillColor());else mBox.setAttribute("fill","none");if(style.getDrawLines()){mBox.setAttribute("stroke",style.getLineColor());mBox.setAttribute("stroke-width",style.getLineWidth())}else{mBox.setAttribute("stroke","none");mBox.setAttribute("stroke-width",0)}var attributes=style.getAttributes();for(var attr in attributes){mShape.setAttribute(attr,attributes[attr])}}else{mBox.setAttribute("stroke","none");mBox.setAttribute("fill","none")}}var angletext=0;switch(mElement.getWritingMode()){case EJSS_DRAWING2D.Text.MODE_TOPDOWN:angletext=90;break;case EJSS_DRAWING2D.Text.MODE_RIGTHLEFT:angletext=180;break;case EJSS_DRAWING2D.Text.MODE_DOWNTOP:angletext=270;break;case EJSS_DRAWING2D.Text.MODE_LEFTRIGHT:angletext=0;break}mInnerGroup.setAttribute("transform","rotate("+angletext+" "+(pos[0]+xmargin)+" "+(pos[1]+ymargin)+")");mGroup.setAttribute("pointer-events","none");return mGroup};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.trace=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.trail=function(mGraphics,mElement){function addSegment(group,points,num,style,pX,pY,sX,sY){if(num<=0)return;var segment=document.createElementNS("http://www.w3.org/2000/svg","path");group.appendChild(segment);var path="";for(var i=0;i<num;i++){var point=points[i];var xx=pX+point[0]*sX;var yy=pY+point[1]*sY;var type=point[2];if(i==0||type==0)path+=" M "+xx+" "+yy;else path+=" L "+xx+" "+yy}segment.setAttribute("d",path);if(style.getDrawFill())segment.setAttribute("fill",style.getFillColor());else segment.setAttribute("fill","none");if(style.getDrawLines()){segment.setAttribute("stroke",style.getLineColor());segment.setAttribute("stroke-width",style.getLineWidth())}else{segment.setAttribute("stroke","none");segment.setAttribute("stroke-width",0)}segment.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes)segment.setAttribute(attr,attributes[attr])}var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var multitrail=document.createElementNS("http://www.w3.org/2000/svg","g");group.appendChild(multitrail);var lastmultitrail=mGraphics.getElementById(mElement.getName());if(lastmultitrail!==null){group.insertBefore(multitrail,lastmultitrail);group.removeChild(lastmultitrail)}multitrail.setAttribute("id",mElement.getName());var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;var pX=x-mx;var pY=y-my;var sX=size[0];var sY=size[1];var segmentCount=mElement.getSegmentsCount();if(segmentCount>0){for(var i=0;i<segmentCount;i++){var num=mElement.getSegmentPoints(i).length;addSegment(multitrail,mElement.getSegmentPoints(i),num,mElement.getSegmentStyle(i),pX,pY,sX,sY)}}var num=mElement.getCurrentPoints().length;addSegment(multitrail,mElement.getCurrentPoints(),num,mElement.getStyle(),pX,pY,sX,sY);return multitrail};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.Utils={};EJSS_SVGGRAPHICS.Utils.crispValue=function(value){return Math.round(+value.toFixed(4)+.5)-.5};EJSS_SVGGRAPHICS.Utils.crispTop=function(value){return Math.round(+value.toFixed(4)+.5)-.5};EJSS_SVGGRAPHICS.Utils.round=function(value){return+value.toFixed(4)};EJSS_SVGGRAPHICS.Utils.hsl2rgb=function(hsl){var H=hsl[0],S=hsl[1],L=hsl[2];var C=(1-Math.abs(2*L-1))*S;var H_=H/60;var X=C*(1-Math.abs(H_%2-1));var R1,G1,B1;if(H===undefined||isNaN(H)||H===null){R1=G1=B1=0}else{if(H_>=0&&H_<1){R1=C;G1=X;B1=0}else if(H_>=1&&H_<2){R1=X;G1=C;B1=0}else if(H_>=2&&H_<3){R1=0;G1=C;B1=X}else if(H_>=3&&H_<4){R1=0;G1=X;B1=C}else if(H_>=4&&H_<5){R1=X;G1=0;B1=C}else if(H_>=5&&H_<6){R1=C;G1=0;B1=X}}var m=L-C/2;var R,G,B;R=(R1+m)*255;G=(G1+m)*255;B=(B1+m)*255;R=Math.round(R);G=Math.round(G);B=Math.round(B);return{r:R,g:G,b:B}};EJSS_SVGGRAPHICS.Utils.PNGCanvasWorker=function(params){var imageData=params.data.params.imageData;var width=params.data.params.width;var height=params.data.params.height;var depth=params.data.params.depth;var data=params.data.params.data;var colors=params.data.params.colors;var index=params.data.id;function Rgb(rgb){var rgb=rgb.substring(4,rgb.length-1).replace(/ /g,"").split(",");return{r:rgb[0],g:rgb[1],b:rgb[2]}}function Hsl(hsl){var hsl=hsl.substring(4,hsl.length-1).replace(/ /g,"").replace(/%/g,"").split(",");return{h:hsl[0],s:hsl[1]/100,l:hsl[2]/100}}function setPixel(imageData,x,y,r,g,b,a){index=(x+y*imageData.width)*4;imageData.data[index+0]=r;imageData.data[index+1]=g;imageData.data[index+2]=b;imageData.data[index+3]=a}var cinf=colors[0];var csup=colors[colors.length-1];for(var i=0;i<width;i++){for(var j=0;j<height;j++){var index=data[i][height-j-1];var color=index<0?cinf:index<colors.length?colors[index]:csup;if(typeof color=="undefined")color=cinf;if(color.substring(0,3)=="rgb"){rgb=Rgb(color)}else if(color.substring(0,3)=="hsl"){rgb=EJSS_SVGGRAPHICS.Utils.hsl2rgb(Hsl(color))}setPixel(imageData,i,j,rgb.r,rgb.g,rgb.b,255)}}self.postMessage({result:imageData,id:index})};EJSS_SVGGRAPHICS.Utils.PNGCanvasNoWorker=function(imageData,width,height,depth,data,colors){function Rgb(rgb){var rgb=rgb.substring(4,rgb.length-1).replace(/ /g,"").split(",");return{r:rgb[0],g:rgb[1],b:rgb[2]}}function Hsl(hsl){var hsl=hsl.substring(4,hsl.length-1).replace(/ /g,"").replace(/%/g,"").split(",");return{h:hsl[0],s:hsl[1]/100,l:hsl[2]/100}}function setPixel(imageData,x,y,r,g,b,a){index=(x+y*imageData.width)*4;imageData.data[index+0]=r;imageData.data[index+1]=g;imageData.data[index+2]=b;imageData.data[index+3]=a}var cinf=colors[0];var csup=colors[colors.length-1];for(var i=0;i<width;i++){for(var j=0;j<height;j++){var index=data[i][height-j-1];var color=index<0?cinf:index<colors.length?colors[index]:csup;if(typeof color=="undefined")color=cinf;if(color.substring(0,3)=="rgb"){rgb=Rgb(color)}else if(color.substring(0,3)=="hsl"){rgb=EJSS_SVGGRAPHICS.Utils.hsl2rgb(Hsl(color))}setPixel(imageData,i,j,rgb.r,rgb.g,rgb.b,255)}}};EJSS_SVGGRAPHICS.Utils.PNGCanvas=function(width,height,depth,data,colors,callback){var element=document.createElement("canvas");element.setAttribute("width",width);element.setAttribute("height",height);var c=element.getContext("2d");var imageData=c.createImageData(width,height);if(EJSS_TOOLS.Worker&&EJSS_TOOLS.Worker.runFunction){EJSS_TOOLS.Worker.runFunction("PNGCanvasWorker",EJSS_SVGGRAPHICS.Utils.PNGCanvasWorker,{imageData:imageData,width:width,height:height,depth:depth,data:data,colors:colors},function(result){c.putImageData(result.result,0,0);callback(element.toDataURL())})}else{EJSS_SVGGRAPHICS.Utils.PNGCanvasNoWorker(imageData,width,height,depth,data,colors);c.putImageData(imageData,0,0);callback(element.toDataURL())}};EJSS_SVGGRAPHICS.Utils.ImageDataCanvas=function(width,height,depth,data,colors,callback){var element=document.createElement("canvas");element.setAttribute("width",width);element.setAttribute("height",height);var c=element.getContext("2d");var imageData=c.createImageData(width,height);EJSS_TOOLS.Worker.runFunction("PNGCanvasWorker",EJSS_SVGGRAPHICS.Utils.PNGCanvasWorker,{imageData:imageData,width:width,height:height,depth:depth,data:data,colors:colors},function(result){callback(result)})};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.video=function(mGraphics,mElement){};var EJSS_SVGGRAPHICS=EJSS_SVGGRAPHICS||{};EJSS_SVGGRAPHICS.wheel=function(mGraphics,mElement){var group,elementGroup=mElement.getGroup();if(elementGroup!==null)group=mGraphics.getElementById(elementGroup.getName());else group=mGraphics;var mGroup=mGraphics.getElementById(mElement.getName());var mCircle,mCross;if(mGroup===null){mGroup=document.createElementNS("http://www.w3.org/2000/svg","g");mGroup.setAttribute("id",mElement.getName());group.appendChild(mGroup);mCircle=document.createElementNS("http://www.w3.org/2000/svg","ellipse");mCircle.setAttribute("id",mElement.getName()+".circle");mGroup.appendChild(mCircle);mCross=document.createElementNS("http://www.w3.org/2000/svg","path");mCross.setAttribute("id",mElement.getName()+".cross");mGroup.appendChild(mCross)}else{mCircle=mGraphics.getElementById(mElement.getName()+".circle");mCross=mGraphics.getElementById(mElement.getName()+".cross")}var pos=mElement.getPixelPosition();var size=mElement.getPixelSizes();var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var mx=size[0]/2;var my=size[1]/2;mCircle.setAttribute("cx",x);mCircle.setAttribute("cy",y);mCircle.setAttribute("rx",Math.abs(mx));mCircle.setAttribute("ry",Math.abs(my));mCross.setAttribute("d","M "+(x-mx)+" "+y+" L "+(x+mx)+" "+y+" M "+x+" "+(y-my)+" L "+x+" "+(y+my));var style=mElement.getStyle();if(style.getDrawFill())mGroup.setAttribute("fill",style.getFillColor());else mGroup.setAttribute("fill","none");if(style.getDrawLines()){mGroup.setAttribute("stroke",style.getLineColor());mGroup.setAttribute("stroke-width",style.getLineWidth())}else{mGroup.setAttribute("stroke","none");mGroup.setAttribute("stroke-width",0)}mGroup.setAttribute("shapeRendering",style.getShapeRendering());var attributes=style.getAttributes();for(var attr in attributes){mGroup.setAttribute(attr,attributes[attr])}return mGroup};var EJSS_GRAPHICS=EJSS_GRAPHICS||{};EJSS_GRAPHICS.SvgGraphics={getOffsetRect:function(graphics){return EJSS_GRAPHICS.GraphicsUtils.getOffsetRect(graphics)}};EJSS_GRAPHICS.svgGraphics=function(mName){var self=EJSS_INTERFACE.svgGraphics(mName);var mInterfaceGraphics=self.getDOMElement();var mDefs=document.createElementNS("http://www.w3.org/2000/svg","defs");mInterfaceGraphics.appendChild(mDefs);self.getEventContext=function(){return mInterfaceGraphics};self.getBox=function(){var box=EJSS_GRAPHICS.CanvasGraphics.getOffsetRect(self);box.width-=1;box.height-=1;return box};self.remove=function(name){var myElement=mInterfaceGraphics.getElementById(name);if(myElement!==null){mInterfaceGraphics.removeChild(myElement);return true}return false};self.reset=function(){while(mInterfaceGraphics.firstChild){mInterfaceGraphics.removeChild(mInterfaceGraphics.firstChild)}mInterfaceGraphics.appendChild(mDefs)};self.getDefs=function(){return mDefs};self.draw=function(elements,force){for(var i=0,n=elements.length;i<n;i++){var element=elements[i];if(element.getElements){var lasts=element.getLastElements();for(var j=0,m=lasts.length;j<m;j++){var mShape=mInterfaceGraphics.getElementById(lasts[j].getName());if(mShape)mShape.parentNode.removeChild(mShape)}}if(force||element.isChanged()||element.isGroupChanged()||element.isMustProject()){var build=self.drawElement(element);if(typeof build!="undefined"&&build!=null)self.transformElement(element,build)}}};self.drawElement=function(element){var Shape=EJSS_DRAWING2D.Shape;var build=null;switch(element._23()){case"ElementCustom":{var customFunction=element.getFunction();if(customFunction)build=customFunction(mInterfaceGraphics,element)}break;case"ElementGroup":build=EJSS_SVGGRAPHICS.group(mInterfaceGraphics,element);break;case"ElementShape":switch(element.getShapeType()){default:case Shape.ELLIPSE:build=EJSS_SVGGRAPHICS.ellipse(mInterfaceGraphics,element);break;case Shape.RECTANGLE:build=EJSS_SVGGRAPHICS.rectangle(mInterfaceGraphics,element);break;case Shape.ROUND_RECTANGLE:build=EJSS_SVGGRAPHICS.roundRectangle(mInterfaceGraphics,element);break;case Shape.WHEEL:build=EJSS_SVGGRAPHICS.wheel(mInterfaceGraphics,element);break;case Shape.NONE:case Shape.POINT:build=EJSS_SVGGRAPHICS.point(mInterfaceGraphics,element);break}break;case"ElementSegment":build=EJSS_SVGGRAPHICS.segment(mInterfaceGraphics,element);break;case"ElementImage":build=EJSS_SVGGRAPHICS.image(mInterfaceGraphics,element);break;case"ElementVideo":build=EJSS_SVGGRAPHICS.video(mInterfaceGraphics,element);break;case"ElementArrow":build=EJSS_SVGGRAPHICS.arrow(mInterfaceGraphics,element);break;case"ElementText":build=EJSS_SVGGRAPHICS.text(mInterfaceGraphics,element);break;case"ElementSpring":build=EJSS_SVGGRAPHICS.spring(mInterfaceGraphics,element);break;case"ElementTrail":build=EJSS_SVGGRAPHICS.trail(mInterfaceGraphics,element);break;case"ElementTrace":build=EJSS_SVGGRAPHICS.trace(mInterfaceGraphics,element);break;case"ElementGrid":build=EJSS_SVGGRAPHICS.grid(mInterfaceGraphics,element);break;case"ElementAxis":build=EJSS_SVGGRAPHICS.axis(mInterfaceGraphics,element);break;case"ElementCursor":build=EJSS_SVGGRAPHICS.cursor(mInterfaceGraphics,element);break;case"ElementPolygon":build=EJSS_SVGGRAPHICS.polygon(mInterfaceGraphics,element);break;case"ElementAnalyticCurve":build=EJSS_SVGGRAPHICS.analyticCurve(mInterfaceGraphics,element);break;case"ElementCellLattice":build=EJSS_SVGGRAPHICS.cellLattice(mInterfaceGraphics,element);break;case"ElementByteRaster":build=EJSS_SVGGRAPHICS.byteRaster(mInterfaceGraphics,element);break;case"ElementMesh":build=EJSS_SVGGRAPHICS.mesh(mInterfaceGraphics,element);break;case"ElementTank":build=EJSS_SVGGRAPHICS.tank(mInterfaceGraphics,element);break;case"ElementPipe":build=EJSS_SVGGRAPHICS.pipe(mInterfaceGraphics,element);break;case"ElementHistogram":build=EJSS_SVGGRAPHICS.histogram(mInterfaceGraphics,element);break;case"ElementScalarField":build=EJSS_SVGGRAPHICS.scalarField(mInterfaceGraphics,element);break;case"ElementCanvas":build=EJSS_SVGGRAPHICS.canvas(mInterfaceGraphics,element);break}if(build){if(!element.isGroupVisible())build.setAttribute("visibility","hidden");else build.setAttribute("visibility","visible")}return build};self.transformElement=function(element,build){var trstr="";var trans=element.getTransformation();var rot=element.getRotate();var pos=element.getPixelPosition();if(trans.length>0){trstr="matrix("+trans[0]+" "+trans[1]+" "+trans[2]+" "+trans[3]+" "+trans[4]+" "+trans[5]+")";build.setAttribute("transform-origin",pos[0]+" "+pos[1])}if(rot!=0){var angle=EJSS_TOOLS.Mathematics.degrees(-rot);trstr+=" rotate("+angle+" "+pos[0]+" "+pos[1]+")"}build.setAttribute("transform",trstr)};self._24=function(panel){var gutters=panel.getGutters();if(gutters.visible){var UTILS=EJSS_SVGGRAPHICS.Utils;var mShape=mInterfaceGraphics.getElementById(".myGutters");var mOuterBorder=mInterfaceGraphics.getElementById(".myOuterBorder");var mInnerBorder=mInterfaceGraphics.getElementById(".myInnerBorder");if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","path");mShape.setAttribute("id",".myGutters");mShape.setAttribute("stroke","none");mShape.setAttribute("stroke-width",0);mInterfaceGraphics.appendChild(mShape)
;mOuterBorder=document.createElementNS("http://www.w3.org/2000/svg","path");mOuterBorder.setAttribute("id",".myOuterBorder");mOuterBorder.setAttribute("fill","none");mInterfaceGraphics.appendChild(mOuterBorder);mInnerBorder=document.createElementNS("http://www.w3.org/2000/svg","path");mInnerBorder.setAttribute("id",".myInnerBorder");mInnerBorder.setAttribute("fill","none");mInterfaceGraphics.appendChild(mInnerBorder)}var inner=panel.getInnerRect();var x=.5,y=.5;var box=self.getBox();var sx=box.width,sy=box.height;var guttersStyle=panel.getGuttersStyle();var panelStyle=panel.getStyle();if(panelStyle.getShapeRendering()=="crispEdges"){mShape.setAttribute("d","M "+UTILS.crispValue(x)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y+sy)+" L "+UTILS.crispValue(x+sx)+" "+UTILS.crispValue(y+sy)+" L "+UTILS.crispValue(x+sx)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y)+" M "+UTILS.crispValue(inner.x)+" "+UTILS.crispValue(inner.y)+" L "+UTILS.crispValue(inner.x+inner.width)+" "+UTILS.crispValue(inner.y)+" L "+UTILS.crispValue(inner.x+inner.width)+" "+UTILS.crispValue(inner.y+inner.height)+" L "+UTILS.crispValue(inner.x)+" "+UTILS.crispValue(inner.y+inner.height)+" L "+UTILS.crispValue(inner.x)+" "+UTILS.crispValue(inner.y)+" z");mOuterBorder.setAttribute("d","M "+UTILS.crispValue(x)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y+sy)+" L "+UTILS.crispValue(x+sx)+" "+UTILS.crispValue(y+sy)+" L "+UTILS.crispValue(x+sx)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y)+" z");mInnerBorder.setAttribute("d","M "+UTILS.crispValue(inner.x)+" "+UTILS.crispValue(inner.y)+" L "+UTILS.crispValue(inner.x+inner.width)+" "+UTILS.crispValue(inner.y)+" L "+UTILS.crispValue(inner.x+inner.width)+" "+UTILS.crispValue(inner.y+inner.height)+" L "+UTILS.crispValue(inner.x)+" "+UTILS.crispValue(inner.y+inner.height)+" L "+UTILS.crispValue(inner.x)+" "+UTILS.crispValue(inner.y)+" z")}else{mShape.setAttribute("d","M "+x+" "+y+" L "+x+" "+(y+sy)+" L "+(x+sx)+" "+(y+sy)+" L "+(x+sx)+" "+y+" L "+x+" "+y+" M "+inner.x+" "+inner.y+" L "+(inner.x+inner.width)+" "+inner.y+" L "+(inner.x+inner.width)+" "+(inner.y+inner.height)+" L "+inner.x+" "+(inner.y+inner.height)+" L "+inner.x+" "+inner.y+" z");mOuterBorder.setAttribute("d","M "+x+" "+y+" L "+x+" "+(y+sy)+" L "+(x+sx)+" "+(y+sy)+" L "+(x+sx)+" "+y+" L "+x+" "+y+" z");mInnerBorder.setAttribute("d","M "+inner.x+" "+inner.y+" L "+(inner.x+inner.width)+" "+inner.y+" L "+(inner.x+inner.width)+" "+(inner.y+inner.height)+" L "+inner.x+" "+(inner.y+inner.height)+" L "+inner.x+" "+inner.y+" z")}if(guttersStyle.getDrawFill())mShape.setAttribute("fill",guttersStyle.getFillColor());else mShape.setAttribute("fill","none");if(guttersStyle.getDrawLines()){mOuterBorder.setAttribute("stroke",guttersStyle.getLineColor());mOuterBorder.setAttribute("stroke-width",guttersStyle.getLineWidth())}else{mOuterBorder.setAttribute("stroke","none");mOuterBorder.setAttribute("stroke-width",0)}if(panelStyle.getDrawLines()){mInnerBorder.setAttribute("stroke",panelStyle.getLineColor());mInnerBorder.setAttribute("stroke-width",panelStyle.getLineWidth())}else{mInnerBorder.setAttribute("stroke","none");mInnerBorder.setAttribute("stroke-width",0)}mShape.setAttribute("shapeRendering",panelStyle.getShapeRendering());mOuterBorder.setAttribute("shapeRendering",guttersStyle.getShapeRendering());mInnerBorder.setAttribute("shapeRendering",panelStyle.getShapeRendering())}};self.drawPanel=function(panel){var UTILS=EJSS_SVGGRAPHICS.Utils;var mShape=mInterfaceGraphics.getElementById(".myPanel");if(mShape===null){mShape=document.createElementNS("http://www.w3.org/2000/svg","path");mShape.setAttribute("id",".myPanel");mInterfaceGraphics.appendChild(mShape)}var x=.5,y=.5;var box=self.getBox();var sx=box.width,sy=box.height;var style=panel.getStyle();if(style.getShapeRendering()=="crispEdges"){mShape.setAttribute("d","M "+UTILS.crispValue(x)+" "+UTILS.crispValue(y)+" L "+UTILS.crispValue(x)+" "+UTILS.crispValue(y+sy)+" L "+UTILS.crispValue(x+sx)+" "+UTILS.crispValue(y+sy)+" L "+UTILS.crispValue(x+sx)+" "+UTILS.crispValue(y)+" z")}else{mShape.setAttribute("d","M "+x+" "+y+" L "+x+" "+(y+sy)+" L "+(x+sx)+" "+(y+sy)+" L "+(x+sx)+" "+y+" z")}if(style.getDrawFill())mShape.setAttribute("fill",style.getFillColor());else mShape.setAttribute("fill","none");if(style.getDrawLines()){mShape.setAttribute("stroke",style.getLineColor());mShape.setAttribute("stroke-width",style.getLineWidth())}else{mShape.setAttribute("stroke","none");mShape.setAttribute("stroke-width",0)}mShape.setAttribute("shapeRendering",style.getShapeRendering())};self.importSVG=function(callback){var box=self.getBox();var canvas=document.createElement("canvas");canvas.width=box.width+1;canvas.height=box.height+1;var ctx=canvas.getContext("2d");var dom=self.getDOMElement();dom.setAttribute("width",canvas.width);dom.setAttribute("height",canvas.height);var svg_xml=(new XMLSerializer).serializeToString(dom);var img=new Image;img.src="data:image/svg+xml;utf8,"+svg_xml;img.onload=function(){console.log("tam "+canvas.width+" "+canvas.height);ctx.drawImage(img,0,0);if(callback)callback(canvas.toDataURL("image/png"))};return img.src};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.InfoText={registerProperties:function(element,controller){EJSS_DRAWING2D.Text.registerProperties(element,controller);controller.registerProperty("Info",element.setInfo);controller.registerProperty("Format",element.setFormat)}};EJSS_DRAWING2D.infoText=function(name){var self=EJSS_DRAWING2D.text(name);var super_getText=self.getText;var mInfo;var mFormat;self.setInfo=function(info){mInfo=info};self.getText=function(){if(typeof mInfo!="undefined"){if(mInfo.getInfo)return mInfo.getInfo();else if(typeof mInfo=="function")return mInfo()}else{var text=super_getText();return fillString(mFormat,text)}};self.setFormat=function(format){mFormat=format};self.isChanged=function(){return true};self.registerProperties=function(controller){EJSS_DRAWING2D.InfoText.registerProperties(self,controller)};function fillString(format,text){if(!Array.isArray(text)||typeof mFormat=="undefined")return text;var t="";var txt=format;var numbers=format.match(/[0-9]*\.(\^|#)+/g);for(var i=0;i<numbers.length;i++){var precision=numbers[i].split("#").length-1;if(isNaN(text[i]))t=text[i];else t=text[i].toFixed(precision);txt=txt.replace(numbers[i],t)}return txt}return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Knob={};EJSS_DRAWING2D.knob=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.KnobOld={registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Value",element.setValue,element.getValue);controller.registerProperty("Minimum",element.setMinimum,element.getMinimum);controller.registerProperty("Maximum",element.setMaximum,element.getMaximum);controller.registerAction("OnPress",element.getValue);controller.registerAction("OnRelease",element.getValue);controller.registerAction("OnChange",element.getValue);controller.registerProperty("Size",element.setSize)}};EJSS_DRAWING2D.knobOld=function(mName){var self=EJSS_DRAWING2D.group(mName);var mValue=0;var mMaximum=1;var mMinimum=-1;var mNumberOfMarks=21;var mBigMark=4;var mMediumMark=2;var mDigits=0;var mMinimumAngle=Math.PI/2+1.5*Math.PI/2;var mMaximumAngle=Math.PI/2-1.5*Math.PI/2;var mMinAngle=-Math.PI*.7;var mMaxAngle=Math.PI*.7;var mThreshold=Math.PI/5;var mKnobExterior,mKnobMiddle,mKnobInterior;var mSegments,mTexts,mBrand,mUnits;var mDummyContainer;var mSVGDefs="<svg xmlns='http://www.w3.org/2000/svg' version='1.1'>"+"  <defs>"+"    <linearGradient id='KnobExteriorGradient' x1='0%' y1='0%' x2='100%' y2='100%'>"+"      <stop offset='0%'   stop-color='rgb(250,250,250)' />"+"      <stop offset='100%' stop-color='rgb(100,100,100)' />"+"    </linearGradient>"+"    <linearGradient id='KnobMiddleGradient' x1='0%' y1='0%' x2='100%' y2='100%'>"+"      <stop offset='0%'   stop-color='rgb(200,200,200)' />"+"      <stop offset='100%' stop-color='rgb(150,150,150)' />"+"    </linearGradient>"+"    <linearGradient id='KnobInteriorGradient' x1='0%' y1='0%' x2='100%' y2='100%'>"+"      <stop offset='0%'   stop-color='rgb(127,127,127)' />"+"      <stop offset='100%' stop-color='rgb(250,250,250)' />"+"    </linearGradient>"+"    <filter id='KnobFilter' x='0' y='0' width='200%' height='200%'>"+"      <feOffset result='offOut' in='SourceGraphic' dx='1' dy='1' />"+"      <feGaussianBlur result='blurOut' in='offOut' stdDeviation='2' />"+"      <feBlend in='SourceGraphic' in2='blurOut' mode='normal' />"+"    </filter>"+"  </defs>"+"</svg>";self.setValue=function(value){if(mValue!=value){mValue=value;adjustPosition()}};self.getValue=function(){return mValue};self.setMinimum=function(value){if(mMinimum!=value){mMinimum=value;adjustPosition()}};self.getMinimum=function(){return mMinimum};self.setMaximum=function(value){if(mMaximum!=value){mMaximum=value;adjustPosition()}};self.getMaximum=function(){return mMaximum};self.setSize=function(value){self.setSizeX(value);self.setSizeY(value)};self.registerProperties=function(controller){createKnob();EJSS_DRAWING2D.Knob.registerProperties(self,controller)};self.superSetParent=self.setParent;self.setParent=function(parent,sibling){self.superSetParent(parent,sibling);mKnobExterior.setParent(self);mKnobMiddle.setParent(self);mKnobInterior.setParent(self)};function createKnob(){mDummyContainer=document.createElement("div");document.body.appendChild(mDummyContainer);mDummyContainer.innerHTML=mSVGDefs;mKnobExterior=EJSS_DRAWING2D.shape(mName+".exterior_shape");mKnobExterior.setSize([1,1]);mKnobExterior.getStyle().setDrawLines(false);mKnobExterior.getStyle().setAttributes({fill:"url(#KnobExteriorGradient)",filter:"url(#KnobFilter)"});mKnobMiddle=EJSS_DRAWING2D.shape(mName+".middle_shape");mKnobMiddle.setSize([.9,.9]);mKnobMiddle.getStyle().setDrawLines(false);mKnobMiddle.getStyle().setAttributes({fill:"url(#KnobMiddleGradient)"});mKnobInterior=EJSS_CORE.promoteToControlElement(EJSS_DRAWING2D.shape(mName+".inner_shape"),self.getView(),mName+".inner_shape");mKnobInterior.setY(.3);mKnobInterior.setSize([.2,.2]);mKnobInterior.getStyle().setDrawLines(false);mKnobInterior.getStyle().setAttributes({fill:"url(#KnobInteriorGradient)"});mKnobInterior.setProperty("EnabledPosition","ENABLED_NO_MOVE");mKnobInterior.setProperty("Sensitivity",10);mKnobInterior.setProperty("OnDrag",dragged);mKnobInterior.setProperty("OnPress",pressed);mKnobInterior.setProperty("OnRelease",released)}function adjustPosition(){mValue=Math.max(Math.min(mMaximum,mValue),mMinimum);var angle=mMaxAngle-(mValue-mMinimum)/(mMaximum-mMinimum)*(mMaxAngle-mMinAngle)+Math.PI/2;mKnobInterior.setPosition([.3*Math.cos(angle),.3*Math.sin(angle)])}function pressed(point,info){var controller=self.getController();if(controller)controller.invokeImmediateAction("OnPress")}function released(point,info){var controller=self.getController();if(controller)controller.invokeImmediateAction("OnRelease")}function dragged(point,info){var point=info.point;var element=info.element;var group_pos=self.getAbsolutePosition(true);point[0]-=group_pos[0];point[1]-=group_pos[1];var angle=mMaxAngle-(mValue-mMinimum)/(mMaximum-mMinimum)*(mMaxAngle-mMinAngle);var rotation=Math.atan2(-point[0],point[1]);if(Math.abs(rotation-angle)>mThreshold)return;rotation=Math.min(Math.max(rotation,mMinAngle),mMaxAngle);mValue=mMaximum-(rotation-mMinAngle)/(mMaxAngle-mMinAngle)*(mMaximum-mMinimum);var angle=rotation+Math.PI/2;element.setPosition([.3*Math.cos(angle),.3*Math.sin(angle)]);var controller=self.getController();if(controller){controller.immediatePropertyChanged("Value");controller.invokeImmediateAction("OnChange")}}return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Mesh={};EJSS_DRAWING2D.mesh=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Meter={};EJSS_DRAWING2D.meter=function(mName){}
;var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Pipe={};EJSS_DRAWING2D.pipe=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.PlottingPanel={registerProperties:function(element,controller){EJSS_DRAWING2D.DrawingPanel.registerProperties(element,controller);controller.registerProperty("Title",element.getTitle().setText);controller.registerProperty("TitleFont",element.getTitle().getFont().setFont);controller.registerProperty("TitleColor",element.getTitle().getFont().setFillColor);controller.registerProperty("TitleMargin",element.getTitle().setMarginY);controller.registerProperty("TitleX",element.getTitleX().setText);controller.registerProperty("TitleXFont",element.getTitleX().getFont().setFont);controller.registerProperty("TitleXColor",element.getTitleX().getFont().setFillColor);controller.registerProperty("TitleXMargin",element.getTitleX().setMarginY);controller.registerProperty("TitleY",element.getTitleY().setText);controller.registerProperty("TitleYFont",element.getTitleY().getFont().setFont);controller.registerProperty("TitleYColor",element.getTitleY().getFont().setFillColor);controller.registerProperty("TitleYMargin",element.getTitleY().setMarginX);controller.registerProperty("GridXShow",element.getGrid().setShowX,element.getGrid().getShowX);controller.registerProperty("GridXTicks",element.getGrid().setTicksX,element.getGrid().getTicksX);controller.registerProperty("GridXStep",element.getGrid().setStepX,element.getGrid().getStepX);controller.registerProperty("GridXAutoStepMin",element.getGrid().setAutoStepXMin,element.getGrid().getAutoStepXMin);controller.registerProperty("GridXAutoTicksRange",element.getGrid().setAutoTicksXRange,element.getGrid().getAutoTicksXRange);controller.registerProperty("GridXScale",element.getGrid().setScaleX,element.getGrid().getScaleX);controller.registerProperty("GridXScalePrecision",element.getGrid().setScalePrecisionX,element.getGrid().getScalePrecisionX);controller.registerProperty("GridXFixedTick",element.getGrid().setFixedTickX,element.getGrid().getFixedTickX);controller.registerProperty("GridXAutoTicks",element.getGrid().setAutoTicksX,element.getGrid().getAutoTicksX);controller.registerProperty("GridXLineColor",element.getGrid().setLineColorX);controller.registerProperty("GridXLineWidth",element.getGrid().setLineWidthX);controller.registerProperty("GridXShapeRendering",element.getGrid().setShapeRenderingX);controller.registerProperty("GridYShow",element.getGrid().setShowY,element.getGrid().getShowY);controller.registerProperty("GridYTicks",element.getGrid().setTicksY,element.getGrid().getTicksY);controller.registerProperty("GridYStep",element.getGrid().setStepY,element.getGrid().getStepY);controller.registerProperty("GridYAutoStepMin",element.getGrid().setAutoStepYMin,element.getGrid().getAutoStepYMin);controller.registerProperty("GridYAutoTicksRange",element.getGrid().setAutoTicksYRange,element.getGrid().getAutoTicksYRange);controller.registerProperty("GridYScale",element.getGrid().setScaleY,element.getGrid().getScaleY);controller.registerProperty("GridYScalePrecision",element.getGrid().setScalePrecisionY,element.getGrid().getScalePrecisionY);controller.registerProperty("GridYFixedTick",element.getGrid().setFixedTickY,element.getGrid().getFixedTickY);controller.registerProperty("GridYAutoTicks",element.getGrid().setAutoTicksY,element.getGrid().getAutoTicksY);controller.registerProperty("GridYLineColor",element.getGrid().setLineColorY);controller.registerProperty("GridYLineWidth",element.getGrid().setLineWidthY);controller.registerProperty("GridYShapeRendering",element.getGrid().setShapeRenderingY);controller.registerProperty("AxisXShow",element.getAxisX().setShow);controller.registerProperty("AxisXLineColor",element.getAxisX().getStyle().setLineColor);controller.registerProperty("AxisXLineWidth",element.getAxisX().getStyle().setLineWidth);controller.registerProperty("AxisXShapeRendering",element.getAxisX().getStyle().setShapeRendering);controller.registerProperty("AxisXFixedTick",element.getAxisX().setFixedTick,element.getAxisX().getFixedTick);controller.registerProperty("AxisXAutoTicks",element.getAxisX().setAutoTicks,element.getAxisX().getAutoTicks);controller.registerProperty("AxisXTicks",element.getAxisX().setTicks,element.getAxisX().getTicks);controller.registerProperty("AxisXStep",element.getAxisX().setStep,element.getAxisX().getStep);controller.registerProperty("AxisXTickStep",element.getAxisX().setTickStep,element.getAxisX().getTickStep);controller.registerProperty("AxisXAutoStepMin",element.getAxisX().setAutoStepMin,element.getAxisX().getAutoStepMin);controller.registerProperty("AxisXAutoTicksRange",element.getAxisX().setAutoTicksRange,element.getAxisX().getAutoTicksRange);controller.registerProperty("AxisXScale",element.getAxisX().setScale,element.getAxisX().getScale);controller.registerProperty("AxisXScalePrecision",element.getAxisX().setScalePrecision,element.getAxisX().getScalePrecision);controller.registerProperty("AxisXFont",element.getAxisX().getFont().setFont);controller.registerProperty("AxisXFontColor",element.getAxisX().getFont().setFillColor);controller.registerProperty("AxisYShow",element.getAxisY().setShow);controller.registerProperty("AxisYLineColor",element.getAxisY().getStyle().setLineColor);controller.registerProperty("AxisYLineWidth",element.getAxisY().getStyle().setLineWidth);controller.registerProperty("AxisYShapeRendering",element.getAxisY().getStyle().setShapeRendering);controller.registerProperty("AxisYFixedTick",element.getAxisY().setFixedTick,element.getAxisY().getFixedTick);controller.registerProperty("AxisYAutoTicks",element.getAxisY().setAutoTicks,element.getAxisY().getAutoTicks);controller.registerProperty("AxisYTicks",element.getAxisY().setTicks,element.getAxisY().getTicks);controller.registerProperty("AxisYStep",element.getAxisY().setStep,element.getAxisY().getStep);controller.registerProperty("AxisYTickStep",element.getAxisY().setTickStep,element.getAxisY().getTickStep);controller.registerProperty("AxisYAutoStepMin",element.getAxisY().setAutoStepMin,element.getAxisY().getAutoStepMin);controller.registerProperty("AxisYAutoTicksRange",element.getAxisY().setAutoTicksRange,element.getAxisY().getAutoTicksRange);controller.registerProperty("AxisYScale",element.getAxisY().setScale,element.getAxisY().getScale);controller.registerProperty("AxisYScalePrecision",element.getAxisY().setScalePrecision,element.getAxisY().getScalePrecision);controller.registerProperty("AxisYFont",element.getAxisY().getFont().setFont);controller.registerProperty("AxisYFontColor",element.getAxisY().getFont().setFillColor);controller.registerProperty("XFixedTick",function(v){element.getAxisX().setFixedTick(v);element.getGrid().setFixedTickX(v)});controller.registerProperty("YFixedTick",function(v){element.getAxisY().setFixedTick(v);element.getGrid().setFixedTickY(v)});controller.registerProperty("XTicks",function(v){element.getAxisX().setTicks(v);element.getGrid().setTicksX(v)});controller.registerProperty("YTicks",function(v){element.getAxisY().setTicks(v);element.getGrid().setTicksY(v)});controller.registerProperty("XStep",function(v){element.getAxisX().setStep(v);element.getGrid().setStepX(v)});controller.registerProperty("YStep",function(v){element.getAxisY().setStep(v);element.getGrid().setStepY(v)});controller.registerProperty("XTickStep",function(v){element.getAxisX().setTickStep(v);element.getGrid().setTickStepX(v)});controller.registerProperty("YTickStep",function(v){element.getAxisY().setTickStep(v);element.getGrid().setTickStepY(v)});controller.registerProperty("XAutoStepMin",function(v){element.getAxisX().setAutoStepMin(v);element.getGrid().setAutoStepXMin(v)});controller.registerProperty("YAutoStepMin",function(v){element.getAxisY().setAutoStepMin(v);element.getGrid().setAutoStepYMin(v)});controller.registerProperty("XAutoTicksRange",function(v){element.getAxisX().setAutoTicksRange(v);element.getGrid().setAutoTicksXRange(v)});controller.registerProperty("YAutoTicksRange",function(v){element.getAxisY().setAutoTicksRange(v);element.getGrid().setAutoTicksyRange(v)});controller.registerProperty("XScale",function(v){element.getAxisX().setScale(v);element.getGrid().setScaleX(v)});controller.registerProperty("YScale",function(v){element.getAxisY().setScale(v);element.getGrid().setScaleY(v)});controller.registerProperty("XScalePrecision",function(v){element.getAxisX().setScalePrecision(v);element.getGrid().setScalePrecisionX(v)});controller.registerProperty("YScalePrecision",function(v){element.getAxisY().setScalePrecision(v);element.getGrid().setScalePrecisionY(v)});controller.registerProperty("XAutoTicks",function(v){element.getAxisX().setAutoTicks(v);element.getGrid().setAutoTicksX(v)});controller.registerProperty("YAutoTicks",function(v){element.getAxisY().setAutoTicks(v);element.getGrid().setAutoTicksY(v)})}};EJSS_DRAWING2D.plottingPanel=function(mName,mGraphicsMode){var self=EJSS_DRAWING2D.drawingPanel(mName,mGraphicsMode);self.getGrid=function(){return mGrid};self.getAxisX=function(){return mAxisX};self.getAxisY=function(){return mAxisY};self.getTitleX=function(){return mTitleX};self.getTitleY=function(){return mTitleY};self.getTitle=function(){return mTitle};self.getFixedTickX=function(){return getGrid().getFixedTickX()};self.getFixedTickY=function(){return getGrid().getFixedTickY()};self.registerProperties=function(controller){EJSS_DRAWING2D.PlottingPanel.registerProperties(self,controller)};var mBottomGroup=EJSS_DRAWING2D.group(mName+".bottomgroup");mBottomGroup.setRelativePosition("SOUTH_WEST");mBottomGroup.panelChangeListener=function(event){if(event=="bounds"){var xmin=self.getRealWorldXMin();var xmax=self.getRealWorldXMax();var ymin=self.getRealWorldYMin();var ymax=self.getRealWorldYMax();var sx=Math.abs(xmax-xmin);var sy=Math.abs(ymax-ymin);mBottomGroup.setSize([sx,sy]);mBottomGroup.setPosition([xmin,ymin]);return true}};mBottomGroup.panelChangeListener("bounds");var mGrid=EJSS_DRAWING2D.grid(mName+".grid");mGrid.setGroup(mBottomGroup);mGrid.setRelativePosition("SOUTH_WEST");mGrid.setLineColorX("lightgray");mGrid.setShapeRenderingX("RENDER_CRISPEDGES");mGrid.setLineColorY("lightgray");mGrid.setShapeRenderingY("RENDER_CRISPEDGES");mGrid.setSize([1,1]);mGrid.setPosition([0,0]);mGrid.panelChangeListener=function(event){if(event=="bounds"){var xmin=self.getRealWorldXMin();var xmax=self.getRealWorldXMax();mGrid.setScaleX([xmin,xmax]);mGrid.setTicksXMode(self.getTypeScaleX());var ymin=self.getRealWorldYMin();var ymax=self.getRealWorldYMax();mGrid.setScaleY([ymin,ymax]);mGrid.setTicksYMode(self.getTypeScaleY());return true}};var mTopGroup=EJSS_DRAWING2D.group(mName+".topgroup");mTopGroup.setRelativePosition("SOUTH_WEST");mTopGroup.panelChangeListener=function(event){if(event=="bounds"){var xmin=self.getRealWorldXMin();var xmax=self.getRealWorldXMax();var ymin=self.getRealWorldYMin();var ymax=self.getRealWorldYMax();var sx=Math.abs(xmax-xmin);var sy=Math.abs(ymax-ymin);mTopGroup.setSize([sx,sy]);mTopGroup.setPosition([xmin,ymin]);return true}};mTopGroup.panelChangeListener("bounds");var mAxisX=EJSS_DRAWING2D.axis(mName+".axisX");mAxisX.setGroup(mTopGroup);mAxisX.setRelativePosition("WEST");mAxisX.getStyle().setLineColor("black");mAxisX.getStyle().setShapeRendering("RENDER_CRISPEDGES");mAxisX.getFont().setFontSize(10);mAxisX.setSize([1,1]);mAxisX.setPosition([0,0]);mAxisX.setOrient("AXIS_HORIZONTAL");mAxisX.panelChangeListener=function(event){if(event=="bounds"){var xmin=self.getRealWorldXMin();var xmax=self.getRealWorldXMax();mAxisX.setScale([xmin,xmax]);mAxisX.setTicksMode(self.getTypeScaleX());if(self.getInvertedScaleY()){mAxisX.setTextPosition("TICKS_DOWN");mTitleX.setMarginY(-30);mTitle.setMarginY(20)}else{mAxisX.setTextPosition("TICKS_UP");mTitleX.setMarginY(30);mTitle.setMarginY(-20)}return true}};mAxisX.setTicksMode(self.getTypeScaleX());var mAxisY=EJSS_DRAWING2D.axis(mName+".axisY");mAxisY.setGroup(mTopGroup);mAxisY.setRelativePosition("SOUTH");mAxisY.getStyle().setLineColor("black");mAxisY.getStyle().setShapeRendering("RENDER_CRISPEDGES");mAxisY.getFont().setFontSize(10);mAxisY.setSize([1,1]);mAxisY.setPosition([0,0]);mAxisY.setOrient("AXIS_VERTICAL");mAxisY.panelChangeListener=function(event){if(event=="bounds"){var ymin=self.getRealWorldYMin();var ymax=self.getRealWorldYMax();mAxisY.setScale([ymin,ymax]);mAxisY.setTicksMode(self.getTypeScaleY());mAxisY.setInvertedScaleY(self.getInvertedScaleY());return true}};mAxisY.setTicksMode(self.getTypeScaleY());var mTitleX=EJSS_DRAWING2D.text(mName+".titleX");mTitleX.setGroup(mTopGroup);mTitleX.setRelativePosition("CENTER");mTitleX.getFont().setFontSize(12);mTitleX.setPosition([.5,0]);mTitleX.setMarginY(30);mTitleX.setText("x");var mTitleY=EJSS_DRAWING2D.text(mName+".titleY");mTitleY.setGroup(mTopGroup);mTitleY.setRelativePosition("CENTER");mTitleY.getFont().setFontSize(12);mTitleY.setWritingMode("MODE_DOWNTOP");mTitleY.setPosition([0,.5]);mTitleY.setMarginX(-40);mTitleY.setText("y");var mTitle=EJSS_DRAWING2D.text(mName+".title");mTitle.setGroup(mTopGroup);mTitle.setRelativePosition("CENTER");mTitle.getFont().setFontSize(12);mTitle.setPosition([.5,1]);mTitle.setMarginY(-20);mTitle.setText("Plot");self.getStyle().setLineColor("black");self.getStyle().setFillColor("white");self.getStyle().setShapeRendering("RENDER_CRISPEDGES");self._25([50,50,50,50]);self.getGuttersStyle().setLineColor("black");self.getGuttersStyle().setFillColor("rgb(211,216,255)");self.getGuttersStyle().setShapeRendering("RENDER_CRISPEDGES");self.addDecoration(mBottomGroup);self.addDecoration(mGrid);self.addDecoration(mTopGroup,-1,true);self.addDecoration(mAxisX,-1,true);self.addDecoration(mAxisY,-1,true);self.addDecoration(mTitleX,-1,true);self.addDecoration(mTitleY,-1,true);self.addDecoration(mTitle,-1,true);return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Polygon={};EJSS_DRAWING2D.polygon=function(name){};EJSS_DRAWING2D.PolygonSet={};EJSS_DRAWING2D.polygonSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Ruler={};EJSS_DRAWING2D.ruler=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.ScalarField={registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Data",element.setData,element.getData);controller.registerProperty("MinimumX",element.setMinimumX,element.getMinimumX);controller.registerProperty("MaximumX",element.setMaximumX,element.getMaximumX);controller.registerProperty("MinimumY",element.setMinimumY,element.getMinimumY);controller.registerProperty("MaximumY",element.setMaximumY,element.getMaximumY);controller.registerProperty("MinimumZ",element.setMinimumZ,element.getMinimumZ);controller.registerProperty("MaximumZ",element.setMaximumZ,element.getMaximumZ);controller.registerProperty("Radius",element.setRadius,element.getRadius)}};EJSS_DRAWING2D.scalarField=function(name){var self=EJSS_DRAWING2D.element(name);var mData=[];var mxMin=-1;var mxMax=1;var myMin=-1;var myMax=1;var mzMin=-1;var mzMax=1;var mRadius=0;self._23=function(){return"ElementScalarField"};self.getMinimumX=function(){return mxMin};self.setMinimumX=function(min){if(mxMin!=min){mxMin=min;self.setChanged(true)}};self.getMaximumX=function(){return mxMax};self.setMaximumX=function(max){if(mxMax!=max){mxMax=max;self.setChanged(true)}};self.getMinimumY=function(){return myMin};self.setMinimumY=function(min){if(myMin!=min){myMin=min;self.setChanged(true)}};self.getMaximumY=function(){return myMax};self.setMaximumY=function(max){if(myMax!=max){myMax=max;self.setChanged(true)}};self.getMinimumZ=function(){return mzMin};self.setMinimumZ=function(min){if(mzMin!=min){mzMin=min;self.setChanged(true)}};self.getMaximumZ=function(){return mzMax};self.setMaximumZ=function(max){if(mzMax!=max){mzMax=max;self.setChanged(true)}};self.getRadius=function(){return mRadius};self.setRadius=function(radius){if(mRadius!=radius){mRadius=radius;self.setChanged(true)}};self.getData=function(){return mData};self.setData=function(data){mData=data||mData;self.setChanged(true)};self.registerProperties=function(controller){EJSS_DRAWING2D.ScalarField.registerProperties(self,controller)};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Segment={registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Offset",element.setRelativePosition,element.getRelativePosition)}};EJSS_DRAWING2D.segment=function(name){var self=EJSS_DRAWING2D.element(name);self._23=function(){return"ElementSegment"};self.registerProperties=function(controller){EJSS_DRAWING2D.Segment.registerProperties(self,controller)};self.setSize([.1,.1]);self.setRelativePosition("SOUTH_WEST");return self};EJSS_DRAWING2D.SegmentSet={};EJSS_DRAWING2D.segmentSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.SetSquare={};EJSS_DRAWING2D.setSquare=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Shape={NONE:0,ELLIPSE:1,RECTANGLE:2,ROUND_RECTANGLE:3,WHEEL:4,POINT:5,registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("ShapeType",element.setShapeType);controller.registerProperty("CornerRadius",element.setCornerRadius)},copyTo:function(source,dest){EJSS_DRAWING2D.Element.copyTo(source,dest);dest.setShapeType(source.getShapeType());dest.setCornerRadius(source.getCornerRadius())}};EJSS_DRAWING2D.shape=function(name){var self=EJSS_DRAWING2D.element(name);var mCornerRadius=10;var mShapeType=EJSS_DRAWING2D.Shape.ELLIPSE;self.setShapeType=function(shapeType){if(typeof shapeType==="string")mShapeType=EJSS_DRAWING2D.Shape[shapeType.toUpperCase()];else mShapeType=shapeType};self.getShapeType=function(){return mShapeType};self.setCornerRadius=function(radius){if(mCornerRadius!=radius){mCornerRadius=radius;self.setChanged(true)}};self.getCornerRadius=function(){return mCornerRadius};self._23=function(){return"ElementShape"};self.registerProperties=function(controller){EJSS_DRAWING2D.Shape.registerProperties(self,controller)};self.copyTo=function(element){EJSS_DRAWING2D.Shape.copyTo(self,element)};self.setSize([.1,.1]);self.setRelativePosition("CENTER");self.getStyle().setFillColor("Blue");self.getStyle().setLineColor("Black");return self};EJSS_DRAWING2D.ShapeSet={};EJSS_DRAWING2D.shapeSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.SimplePanel={GRAPHICS2D_SVG:"SVG",GRAPHICS2D_CANVAS:"Canvas",registerProperties:function(element,controller){controller.registerProperty("MinimumX",element.setWorldXMin,element.getWorldXMin);controller.registerProperty("MaximumX",element.setWorldXMax,element.getWorldXMax);controller.registerProperty("MinimumY",element.setWorldYMin,element.getWorldYMin);controller.registerProperty("MaximumY",element.setWorldYMax,element.getWorldYMax);controller.registerProperty("Bounds",element.setWorldCoordinates,element.getWorldCoordinates);controller.registerProperty("MarginX",element.setMarginX,element.getMarginX);controller.registerProperty("MarginY",element.setMarginY,element.getMarginY);controller.registerProperty("Parent",element.getGraphics().setParent,element.getGraphics().getParent);controller.registerProperty("Width",element.getGraphics().setWidth,element.getGraphics().getWidth);controller.registerProperty("Height",element.getGraphics().setHeight,element.getGraphics().getHeight);controller.registerProperty("Graphics",element.setGraphics);controller.registerProperty("Background",element.getStyle().setFillColor);controller.registerProperty("Foreground",element.getStyle().setLineColor);controller.registerProperty("LineColor",element.getStyle().setLineColor);controller.registerProperty("LineWidth",element.getStyle().setLineWidth);controller.registerProperty("DrawLines",element.getStyle().setDrawLines);controller.registerProperty("FillColor",element.getStyle().setFillColor);controller.registerProperty("DrawFill",element.getStyle().setDrawFill);controller.registerProperty("ShapeRendering",element.getStyle().setShapeRendering);controller.registerProperty("Visibility",element.getGraphics().getStyle().setVisibility);controller.registerProperty("Display",element.getGraphics().getStyle().setDisplay);controller.registerProperty("CSS",element.getGraphics().getStyle().setCSS)}};EJSS_DRAWING2D.simplePanel=function(mName){var self={};var mGraphics=EJSS_GRAPHICS.svgGraphics(mName);var mStyle=EJSS_DRAWING2D.style(mName);var mElements=[];var mElementsChanged=false;var mCollectersList=[];var mWorld={xminPreferred:-1,xmaxPreferred:1,yminPreferred:-1,ymaxPreferred:1,xorigin:0,yorigin:0,xscale:1,yscale:1};var mPanelChanged=true;var mMustScale=true;self.getName=function(){return mName};self.getGraphics=function(){return mGraphics};self.importGraphics=function(callback){return mGraphics.importSVG(callback)};self.getStyle=function(){return mStyle};self.setGraphics=function(type){if(type==EJSS_DRAWING2D.SimplePanel.GRAPHICS2D_SVG){mGraphics=EJSS_GRAPHICS.svgGraphics(mName)}else if(type==EJSS_DRAWING2D.SimplePanel.GRAPHICS2D_CANVAS){console.log("WARNING: setGraphics() - Canvas not supported")}else{console.log("WARNING: setGraphics() - Graphics not supported")}};self.setWorldXMin=function(xmin){if(xmin!==mWorld.xminPreferred){mWorld.xminPreferred=xmin;mMustScale=true}};self.getWorldXMin=function(){return mWorld.xminPreferred};self.setWorldXMax=function(xmax){if(xmax!==mWorld.xmaxPreferred){mWorld.xmaxPreferred=xmax;mMustScale=true}};self.getWorldXMax=function(){return mWorld.xmaxPreferred};self.setWorldYMin=function(ymin){if(ymin!==mWorld.yminPreferred){mWorld.yminPreferred=ymin;mMustScale=true}};self.getWorldYMin=function(){return mWorld.yminPreferred};self.setWorldYMax=function(ymax){if(ymax!==mWorld.ymaxPreferred){mWorld.ymaxPreferred=ymax;mMustScale=true}};self.getWorldYMax=function(){return mWorld.ymaxPreferred};self.setWorldCoordinates=function(bounds){self.setWorldXMin(bounds[0]);self.setWorldXMax(bounds[1]);self.setWorldYMin(bounds[2]);self.setWorldYMax(bounds[3])};self.getWorldCoordinates=function(){return[self.getWorldXMin(),self.getWorldXMax(),self.getWorldYMin(),self.getWorldYMax()]};self.addElement=function(element,position){EJSS_TOOLS.addToArray(mElements,element,position);element.setPanel(self);if(element.dataCollected)mCollectersList.push(element);mElementsChanged=true};self.removeElement=function(element){EJSS_TOOLS.removeFromArray(mElements,element);element.setPanel(null);if(element.dataCollected)EJSS_TOOLS.removeFromArray(mCollectersList,element);mElementsChanged=true};self.getElements=function(){return mElements};self.indexOfElement=function(element){return mElements.indexOf(element)};self.toPixelAxisY=function(y){return mWorld.yorigin-y-mWorld.yscale*mWorld.yminPreferred};self.toPixelAxisX=function(x){return mWorld.xorigin+x-mWorld.xscale*mWorld.xminPreferred};self._26=function(point){var pos=[];pos[0]=mWorld.xorigin+mWorld.xscale*(point[0]-mWorld.xminPreferred);pos[1]=mWorld.yorigin+mWorld.yscale*(point[1]-mWorld.yminPreferred);return pos};self.toPixelMod=function(mod){var pmod=[];pmod[0]=mod[0]*mWorld.xscale;pmod[1]=mod[1]*mWorld.yscale;return pmod};self.toPanelPosition=function(point){var pos=[];pos[0]=mWorld.xminPreferred+(point[0]-mWorld.xorigin)/mWorld.xscale;pos[1]=mWorld.yminPreferred+(point[1]-mWorld.yorigin)/mWorld.yscale;return pos};self.toPanelMod=function(mod){var pmod=[];pmod[0]=mWorld.xscale==0?0:mod[0]/mWorld.xscale;pmod[1]=mWorld.yscale==0?0:mod[1]/mWorld.yscale;return pmod};self.getPixelPositionWorldOrigin=function(){return[mWorld.xorigin,mWorld.yorigin]};self._27=function(){var width=mGraphics.getWidth();var height=mGraphics.getHeight();var xPixPerUnit=width/(mWorld.xmaxPreferred-mWorld.xminPreferred);var yPixPerUnit=height/(mWorld.ymaxPreferred-mWorld.yminPreferred);mWorld.xscale=xPixPerUnit;mWorld.yscale=-yPixPerUnit;mWorld.xorigin=.5;mWorld.yorigin=height+.5;mMustScale=false};self.reset=function(){mGraphics.reset()};self.render=function(){var reseted=false;if(mElementsChanged){mGraphics.reset();reseted=true;mElementsChanged=false}for(var i=0,n=mCollectersList.length;i<n;i++)mCollectersList[i].dataCollected();if(mMustScale)self._27();if(mPanelChanged||reseted){mGraphics.drawPanel(self)}mGraphics.draw(mElements,reseted);mPanelChanged=false;for(var i=0,n=mElements.length;i<n;i++)mElements[i].setChanged(false)};self.registerProperties=function(controller){EJSS_DRAWING2D.SimplePanel.registerProperties(self,controller)};mStyle.setLineColor("black");mStyle.setFillColor("rgb(239,239,255)");mStyle.setChangeListener(function(change){mPanelChanged=true});return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Spring={};EJSS_DRAWING2D.spring=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.SpringSet={};EJSS_DRAWING2D.springSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Tank={};EJSS_DRAWING2D.tank=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Text={MODE_TOPDOWN:0,MODE_RIGTHLEFT:1,MODE_DOWNTOP:2,MODE_LEFTRIGHT:3,copyTo:function(source,dest){EJSS_DRAWING2D.Element.copyTo(source,dest);EJSS_DRAWING2D.Font.copyTo(source.getFont(),dest.getFont());dest.setText(source.getText());dest.setWritingMode(source.getWritingMode())},registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Text",element.setText);controller.registerProperty("Framed",element.setFramed);controller.registerProperty("WritingMode",element.setWritingMode);controller.registerProperty("Font",function(e){element.setDrawingSize([-1,-1]);element.getFont().setFont(e)});controller.registerProperty("FontFamily",element.getFont().setFontFamily);controller.registerProperty("FontSize",function(e){element.setDrawingSize([-1,-1]);element.getFont().setFontSize(e)});controller.registerProperty("LetterSpacing",element.getFont().setLetterSpacing);controller.registerProperty("OutlineColor",element.getFont().setOutlineColor);controller.registerProperty("FontWeight",element.getFont().setFontWeight);controller.registerProperty("FillColor",element.getFont().setFillColor);controller.registerProperty("FontStyle",element.getFont().setFontStyle);controller.registerProperty("MarginX",element.getMarginX().setMarginX);controller.registerProperty("MarginY",element.getMarginY().setMarginY)}};EJSS_DRAWING2D.text=function(mName){var self=EJSS_DRAWING2D.element(mName);var mText="";var mWritingMode=EJSS_DRAWING2D.Text.MODE_LEFTRIGHT;var mFont=EJSS_DRAWING2D.font(mName);var mFramed=false;var mMarginX=0;var mMarginY=0;var mDrawingSize=[-1,-1];self._23=function(){return"ElementText"};self.setText=function(text){text=text+"";if(mText!=text){mText=text;self.setChanged(true);mDrawingSize=[-1,-1]}};self.getText=function(){return mText};self.setDrawingSize=function(drawingSize){mDrawingSize=drawingSize};self.getDrawingSize=function(){return mDrawingSize};self.getSizeX=function(){return mDrawingSize[0]};self.getSizeY=function(){return mDrawingSize[1]};self.setMarginX=function(margin){if(mMarginX!=margin){mMarginX=margin;self.setChanged(true)}};self.getMarginX=function(){return mMarginX};self.setMarginY=function(margin){if(mMarginY!=margin){mMarginY=margin;self.setChanged(true)}};self.getMarginY=function(){return mMarginY};self.getFont=function(){return mFont};self.setFramed=function(framed){if(mFramed!=framed){mFramed=framed;self.setChanged(true)}};self.getFramed=function(){return mFramed};self.setWritingMode=function(writemode){if(typeof writemode=="string")writemode=EJSS_DRAWING2D.Text[writemode.toUpperCase()];if(mWritingMode!=writemode){mWritingMode=writemode;self.setChanged(true)}};self.getWritingMode=function(){return mWritingMode};self.registerProperties=function(controller){EJSS_DRAWING2D.Text.registerProperties(self,controller)};self.copyTo=function(element){EJSS_DRAWING2D.Text.copyTo(self,element)};mFont.setChangeListener(function(change){self.setChanged(true)});self.setPixelSize(true);return self};EJSS_DRAWING2D.TextSet={};EJSS_DRAWING2D.textSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Trace={};EJSS_DRAWING2D.trace=function(mName){};EJSS_DRAWING2D.TraceSet={};EJSS_DRAWING2D.traceSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Trail={NO_CONNECTION:0,LINE_CONNECTION:1,copyTo:function(source,dest){EJSS_DRAWING2D.Element.copyTo(source,dest);dest.setActive(source.getActive());dest.setNoRepeat(source.getNoRepeat());dest.setClearAtInput(source.getClearAtInput());dest.setSkip(source.getSkip());dest.setInputLabels(source.getInputLabels());dest.setMaximumPoints(source.getMaximumPoints());dest.setConnectionType(source.getConnectionType());dest.setPoints(source.getPoints())},registerProperties:function(element,controller){EJSS_DRAWING2D.Element.registerProperties(element,controller);controller.registerProperty("Active",element.setActive,element.getActive);controller.registerProperty("NoRepeat",element.setNoRepeat,element.getNoRepeat);controller.registerProperty("ClearAtInput",element.setClearAtInput,element.getClearAtInput);controller.registerProperty("Skip",element.setSkip,element.getSkip);controller.registerProperty("ColumnNames",element.setInputLabels,element.getInputLabels);controller.registerProperty("Maximum",element.setMaximumPoints,element.getMaximumPoints);controller.registerProperty("ConnectionType",element.setConnectionType,element.getConnectionType);controller.registerProperty("Connected",element.setConnected,element.isConnected);controller.registerProperty("Points",element.setPoints,element.getPoints);controller.registerProperty("LastPoint",element.addPoint,element.getLastPoint);controller.registerProperty("Input",element.addPoints);controller.registerProperty("InputX",element.addXPoints);controller.registerProperty("InputY",element.addYPoints)}};EJSS_DRAWING2D.trail=function(name){var self=EJSS_DRAWING2D.element(name);var mActive=true;var mNoRepeat=false;var mClearAtInput=false;var mSkip=0;var mInputLabels=["x","y"];var mMaximum=0;var mConnectionType=EJSS_DRAWING2D.Trail.LINE_CONNECTION;var mCounter=0;var mIsEmpty=true;var mLastPoint=0;var mFlushPoint=0;var mCurrentList=[];var mSegmentList=[];var mSegmentStyle=[];var mTmpList=[];var mTmpLastXAdded=0;var mTmpLastYAdded=0;self._23=function(){return"ElementTrail"};self.setActive=function(active){if(mActive!=active){mActive=active;self.setChanged(true)}};self.getActive=function(){return mActive};self.setNoRepeat=function(noRepeat){if(mNoRepeat!=noRepeat){mNoRepeat=noRepeat;self.setChanged(true)}};self.getNoRepeat=function(){return mNoRepeat};self.setClearAtInput=function(clear){if(mClearAtInput!=clear){mClearAtInput=clear;self.setChanged(true)}};self.getClearAtInput=function(){return mClearAtInput};self.setSkip=function(skip){if(mSkip!=skip){mSkip=skip;mCounter=0;self.setChanged(true)}};self.getSkip=function(){return mSkip};self.setInputLabels=function(label){if(mInputLabels[0]!=label[0]||mInputLabels[1]!=label[1]){mInputLabels[0]=label[0];mInputLabels[1]=label[1];self.setChanged(true)}};self.getInputLabels=function(){return mInputLabels};self.setMaximumPoints=function(maximum){var max=Math.max(maximum,2);if(mMaximum!=max){mMaximum=max;self.setChanged(true)}};self.getMaximumPoints=function(){return mMaximum};self.setConnected=function(connected){if(connected)self.setConnectionType(EJSS_DRAWING2D.Trail.LINE_CONNECTION);else self.setConnectionType(EJSS_DRAWING2D.Trail.NO_CONNECTION)};self.isConnected=function(){return mConnectionType===EJSS_DRAWING2D.Trail.LINE_CONNECTION};self.setConnectionType=function(type){if(typeof type=="string")type=EJSS_DRAWING2D.Trail[type.toUpperCase()];if(mConnectionType!=type){mConnectionType=type;self.setChanged(true)}};self.getConnectionType=function(){return mConnectionType};self.addPoint=function(x,y,style){if(!mActive)return;if(mClearAtInput)self.initialize();if(x instanceof Array)addPoint(x[0],x[1],x[2]);else addPoint(x,y,style);self.setChanged(true)};self.addPoints=function(x,y){if(!mActive)return;if(mClearAtInput)self.initialize();if(typeof y=="undefined"||y===null){if(x[0]instanceof Array){for(var i=0,n=x.length;i<n;i++)addPoint(x[i][0],x[i][1],x[i][2])}else addPoint(x[0],x[1])}else{var n=Math.min(x.length,y.length);for(var i=0;i<n;i++)addPoint(x[i],y[i])}self.setChanged(true)};self.addXPoints=function(x){if(!mActive)return;var i=0;if(x instanceof Array){for(var n=x.length;i<n;i++){if(mTmpList[i])mTmpList[i]=[x[i],mTmpList[i][1],mTmpList[i][2]];else mTmpList[i]=[x[i],mTmpLastYAdded,mConnectionType]}mTmpLastXAdded=x[i]}else{if(mTmpList[i])mTmpList[i]=[x,mTmpList[i][1],mTmpList[i][2]];else mTmpList[i]=[x,mTmpLastYAdded,mConnectionType];i++;mTmpLastXAdded=x}while(mTmpList[i]){mTmpList[i]=[mTmpLastXAdded,mTmpList[i][1],mTmpList[i][2]];i++}};self.addYPoints=function(y){if(!mActive)return;var i=0;if(y instanceof Array){for(var n=y.length;i<n;i++){if(mTmpList[i])mTmpList[i]=[mTmpList[i][0],y[i],mTmpList[i][2]];else mTmpList[i]=[mTmpLastXAdded,y[i],mConnectionType]}mTmpLastYAdded=y[i]}else{if(mTmpList[i])mTmpList[i]=[mTmpList[i][0],y,mTmpList[i][2]];else mTmpList[i]=[mTmpLastXAdded,y,mConnectionType];i++;mTmpLastYAdded=y}while(mTmpList[i]){mTmpList[i]=[mTmpList[i][0],mTmpLastYAdded,mTmpList[i][2]];i++}};self.dataCollected=function(){if(mTmpList.length>0){self.addPoints(mTmpList);mTmpList=[];self.setChanged(true)}};self.setPoints=function(x,y){if(!mActive)return;self.clear();self.addPoints(x,y);self.setChanged(true)};self.moveToPoint=function(x,y){if(!mActive)return;if(mClearAtInput)self.initialize();if(x instanceof Array)addPoint(x[0],x[1],EJSS_DRAWING2D.Trail.NO_CONNECTION);else addPoint(x,y,EJSS_DRAWING2D.Trail.NO_CONNECTION);self.setChanged(true)};self.getSegmentsCount=function(){return mSegmentList.length};self.getSegmentPoints=function(index){return mSegmentList[index]};self.getSegmentStyle=function(index){return mSegmentStyle[index]};self.getCurrentPoints=function(){return mCurrentList};self.getPoints=function(){var points=[];var size=mSegmentList.length;for(var i=0;i<size;i++)points=points.concat(mSegmentList[i]);points=points.concat(mCurrentList);return points};self.getLastPoint=function(){return mLastPoint};self.reset=function(){self.clear()};self.clear=function(){mSegmentList=[];mSegmentStyle=[];self.initialize()};self.clearLastSegment=function(){if(mCurrentList.length<=0){mSegmentList.pop();mSegmentStyle.pop();self.setChanged(true)}self.initialize()};self.initialize=function(){mCurrentList=[];mFlushPoint=0;mIsEmpty=true;mCounter=0;mLastPoint=0;self.setChanged(true)};self.newSegment=function(){if(mFlushPoint!=0){var size=mCurrentList.length;mCurrentList[size]=self.formatPoint(mFlushPoint)}var size=mSegmentList.length;mSegmentList[size]=mCurrentList;var segmentStyle=EJSS_DRAWING2D.style(self.getName()+" #"+size);EJSS_DRAWING2D.Style.copyTo(self.getStyle(),segmentStyle);mSegmentStyle[size]=segmentStyle;self.initialize()};self.getBounds=function(element){var xmin,xmax,ymin,ymax;var points=self.getPoints();var len=points.length;if(len==0){xmin=xmax=ymin=ymax=0}else{xmax=xmin=points[0][0];ymax=ymin=points[0][1];for(var j=1;j<len;j++){var x=points[j][0],y=points[j][1];if(x>xmax)xmax=x;if(y>ymax)ymax=y;if(x<xmin)xmin=x;if(y<ymin)ymin=y}}var x=self.getX(),y=self.getY();var sx=self.getSizeX(),sy=self.getSizeY();var mx=sx/2,my=sy/2;var d=self.getRelativePositionOffset(sx,sy);return{left:x+d[0]-mx+xmin*sx,right:x+d[0]-mx+xmax*sx,top:y+d[1]-my+ymax*sy,bottom:y+d[1]-my+ymin*sy}};function addPoint(_x,_y,_type){if(isNaN(_x)||isNaN(_y)){mIsEmpty=true;return}if(mNoRepeat&&mLastPoint[0]==_x&&mLastPoint[1]==_y)return;if(typeof _type=="undefined"||_type===null)_type=mConnectionType;mFlushPoint=0;mLastPoint=self.formatPoint([_x,_y,_type]);if(mSkip>0){if(mCounter>0)mFlushPoint=self.formatPoint([_x,_y,_type]);if(++mCounter>=mSkip)mCounter=0}if(mFlushPoint==0){if(mMaximum>2&&mCurrentList.length>=mMaximum){mCurrentList.splice(0,1)}mCurrentList[mCurrentList.length]=self.formatPoint([_x,_y,_type]);mIsEmpty=false}}self.formatPoint=function(src){return src};self.registerProperties=function(controller){EJSS_DRAWING2D.Trail.registerProperties(self,controller)};self.copyTo=function(element){EJSS_DRAWING2D.Trail.copyTo(self,element)};self.setSize([1,1]);self.setRelativePosition("SOUTH_WEST");return self};EJSS_DRAWING2D.TrailSet={};EJSS_DRAWING2D.trailSet=function(mName){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.colorCoded=function(mNumColors,mPalette){var self=EJSS_DRAWING2D.colorMapper(mNumColors,mPalette);var mSymmetricZ=false;self.setSymmetricZ=function(symmetric){mSymmetricZ=symmetric};self.isSymmetricZ=function(){return mSymmetricZ};self.setAutoscale=function(values){var min=Number.MAX_VALUE;var max=Number.MIN_VALUE;for(var i=0,n=values.length;i<n;i++){var value=values[i];max=Math.max(max,value);min=Math.min(min,value)}var ceil=max;var floor=min;if(mSymmetricZ){ceil=Math.max(Math.abs(min),Math.abs(max));floor=-ceil}self.setScale(floor,ceil)};self.setAutoscaleArray2=function(values){var min=Number.MAX_VALUE;var max=Number.MIN_VALUE;for(var i=0,n=values.length;i<n;i++){for(var j=0,m=values[i].length;j<m;j++){var value=values[i][j];max=Math.max(max,value);min=Math.min(min,value)}}var ceil=max;var floor=min;if(mSymmetricZ){ceil=Math.max(Math.abs(min),Math.abs(max));floor=-ceil}self.setScale(floor,ceil)};self.setAutoscaleArray3=function(values){var min=Number.MAX_VALUE;var max=Number.MIN_VALUE;for(var i=0,n=values.length;i<n;i++){for(var j=0,m=values[i].length;j<m;j++){for(var k=0,p=values[i][j].length;k<p;k++){var value=values[i][j][k];max=Math.max(max,value);min=Math.min(min,value)}}}var ceil=max;var floor=min;if(mSymmetricZ){ceil=Math.max(Math.abs(min),Math.abs(max));floor=-ceil}self.setScale(floor,ceil)};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.ColorMapper={CUSTOM:-1,SPECTRUM:0,GRAYSCALE:1,DUALSHADE:2,RED:3,GREEN:4,BLUE:5,BLACK:6,WIREFRAME:7,NORENDER:8,REDBLUE_SHADE:9,getColorPalette:function(numColors,paletteType){function HSB2RGB(h,s,b){var hsb={h:Math.round(360*h),s:s,b:b};var rgb={r:0,g:0,b:0};if(hsb.s===0){rgb.r=rgb.g=rgb.b=hsb.h;return rgb}else{var Hi=Math.floor(hsb.h/60),f=hsb.h/60-Hi,p=hsb.b*(1-hsb.s),q=hsb.b*(1-f*hsb.s),t=hsb.b*(1-(1-f)*hsb.s);switch(Hi){case 0:rgb.r=hsb.b;rgb.g=t;rgb.b=p;break;case 1:rgb.r=q;rgb.g=hsb.b;rgb.b=p;break;case 2:rgb.r=p;rgb.g=hsb.b;rgb.b=t;break;case 3:rgb.r=p;rgb.g=q;rgb.b=hsb.b;break;case 4:rgb.r=t;rgb.g=p;rgb.b=hsb.b;break;case 5:rgb.r=hsb.b;rgb.g=p;rgb.b=q;break}rgb.r=Math.round(rgb.r*255);rgb.g=Math.round(rgb.g*255);rgb.b=Math.round(rgb.b*255);return rgb}}var ColorMapper=EJSS_DRAWING2D.ColorMapper;var colors=[];if(numColors<2)numColors=2;for(var i=0;i<numColors;i++){var level=i/(numColors-1)*.8;var porc1=1,porc2=1;var r=0,g=0,b=0;switch(paletteType){case ColorMapper.REDBLUE_SHADE:r=Math.floor(Math.max(0,-numColors-1+i*2)*255/(numColors-1));b=Math.floor(Math.max(0,numColors-1-i*2)*255/(numColors-1));colors[i]="rgb("+r+","+g+","+b+")";break;case ColorMapper.SPECTRUM:level=.8-level;var rgb=HSB2RGB(level,porc1,porc2);colors[i]="rgb("+rgb.r+","+rgb.g+","+rgb.b+")";break;case ColorMapper.GRAYSCALE:case ColorMapper.BLACK:r=g=b=Math.floor(i*255/(numColors-1));colors[i]="rgb("+r+","+g+","+b+")";break;case ColorMapper.RED:r=Math.floor(i*255/(numColors-1));colors[i]="rgb("+r+","+g+","+b+")";break;case ColorMapper.GREEN:g=Math.floor(i*255/(numColors-1));colors[i]="rgb("+r+","+g+","+b+")";break;case ColorMapper.BLUE:b=Math.floor(i*255/(numColors-1));colors[i]="rgb("+r+","+g+","+b+")";break;case ColorMapper.DUALSHADE:default:var tmp=i/(numColors-1);level=.8*(1-tmp);porc2=.2+1.6*Math.abs(.5-tmp);var rgb=HSB2RGB(level,porc1,porc2);colors[i]="rgb("+rgb.r+","+rgb.g+","+rgb.b+")";break}}return colors}};EJSS_DRAWING2D.colorMapper=function(mNumColors,mPalette){var ColorMapper=EJSS_DRAWING2D.ColorMapper;var self={};var mColors=[];var mFloorColor="darkgray";var mCeilColor="lightgray";var mFloor=-1;var mCeil=1;var mChangeListener;var mPaletteType;var mThresholds;self.setChangeListener=function(listener){mChangeListener=listener};self.setPaletteType=function(_paletteType){if(typeof _paletteType=="string")_paletteType=EJSS_DRAWING2D.ColorMapper[_paletteType.toUpperCase()];mPaletteType=_paletteType;mFloorColor="darkgray";mCeilColor="lightgray";if(mPaletteType==EJSS_DRAWING2D.ColorMapper.GRAYSCALE||mPaletteType==EJSS_DRAWING2D.ColorMapper.BLACK){mFloorColor="rgb(64,64,128)";mCeilColor="rgb(255,191,191)"}mNumColors=Math.max(2,mNumColors);mColors=ColorMapper.getColorPalette(mNumColors,mPaletteType);if(mChangeListener)mChangeListener("palette")};self.getColors=function(){return mColors};self.getFloorColor=function(){return mFloorColor};self.getCeilColor=function(){return mCeilColor};self.getNumColors=function(){return mNumColors};self.setFloorCeilColor=function(_floorColor,_ceilColor){mFloorColor=_floorColor;mCeilColor=_ceilColor};self.setScale=function(_floor,_ceil){mFloor=_floor;mCeil=_ceil;mThresholds=new Array(mColors.length+1);var delta=(mCeil-mFloor)/mColors.length;for(var i=0,n=mColors.length;i<n;i++)mThresholds[i]=mFloor+i*delta;mThresholds[mColors.length]=mCeil};self.getPaletteType=function(){return mPaletteType};self.setColorPalette=function(_colors){mFloorColor="darkgray";mCeilColor="lightgray";mColors=_colors;mNumColors=_colors.length;mPaletteType=EJSS_DRAWING2D.ColorMapper.CUSTOM;if(mChangeListener)mChangeListener("colors")};self.setNumberOfColors=function(_numColors){if(_numColors==mNumColors){return}mNumColors=_numColors;if(mPaletteType==EJSS_DRAWING2D.ColorMapper.CUSTOM){var newColors=[];for(var i=0,n=Math.min(colors.length,mNumColors);i<n;i++){newColors[i]=colors[i]}for(var i=colors.length;i<numColors;i++){newColors[i]=colors[colors.length-1]}colors=newColors}else{self.setPaletteType(mPaletteType)}if(mChangeListener)mChangeListener("numColors")};self.getNumberOfColors=function(){return mNumColors};self.doubleToIndex=function(value){if(mFloor-value>Number.MIN_VALUE){return-1}else if(value-mCeil>Number.MIN_VALUE){return mColors.length}var index=0;if(mCeil!=mFloor)index=Math.floor(mColors.length*(value-mFloor)/(mCeil-mFloor));index=Math.max(0,index);return Math.min(index,mColors.length-1)};self.indexToColor=function(index){if(index<0)return mFloorColor;if(index>=mColors.length)return mCeilColor;return mColors[index]};self.doubleToColor=function(value){return self.indexToColor(self.doubleToIndex())};self.getColorThresholds=function(){return mThresholds};self.setPaletteType(mPalette);self.setScale(-1,1);return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Font={FONTSTYLES:["normal","italic","oblique","initial"],FONTWEIGHTS:["normal","lighter","bold","bolder","initial","100","200","300","400","500","600","700","800","900"],copyTo:function(source,dest){dest.setFontFamily(source.getFontFamily());dest.setFontSize(source.getFontSizeString());dest.setLetterSpacing(source.getLetterSpacing());dest.setOutlineColor(source.getOutlineColor());dest.setOutlineWidth(source.getOutlineWidth());dest.setFontWeight(source.getFontWeight());dest.setFillColor(source.getFillColor())}};EJSS_DRAWING2D.font=function(mName){var self={};var mFontFamily="Arial";var mFontSize="20";var mLetterSpacing="normal";var mLineColor="none";var mLineWidth="1";var mFontWeight="normal";var mFillColor="black";var mFontStyle="none";var mChangeListener;self.setChangeListener=function(listener){mChangeListener=listener};self.setFontFamily=function(fontFamily){if(mFontFamily!=fontFamily){mFontFamily=fontFamily;if(mChangeListener)mChangeListener("fontFamily")}};self.getFontFamily=function(){return mFontFamily};self.setFontSize=function(fontSize){if(mFontSize!=fontSize){mFontSize=fontSize;if(mChangeListener)mChangeListener("fontSize")}};self.getFontSize=function(){var size;if(!isNaN(mFontSize)){size=+mFontSize}else if(mFontSize.indexOf("em")!=-1){size=+mFontSize.substr(0,mFontSize.indexOf("em"))*10}else if(mFontSize.indexOf("px")!=-1){size=+mFontSize.substr(0,mFontSize.indexOf("px"))}else if(mFontSize.indexOf("vh")!=-1){var h=Math.max(document.documentElement.clientHeight,window.innerHeight||0);size=h/100*+mFontSize.substr(0,mFontSize.indexOf("vh"))}else if(mFontSize.indexOf("vw")!=-1){var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);size=w/100*+mFontSize.substr(0,mFontSize.indexOf("vw"))}else{size=0}return size};self.getFontSizeString=function(){return mFontSize};self.setLetterSpacing=function(letterSpacing){if(mLetterSpacing!=letterSpacing){mLetterSpacing=letterSpacing;if(mChangeListener)mChangeListener("letterSpacing")}};self.getLetterSpacing=function(){return mLetterSpacing};self.getNumberLetterSpacing=function(){var spacing;if(!isNaN(mLetterSpacing)){spacing=+mLetterSpacing}else if(mLetterSpacing.indexOf("px")!=-1){spacing=+mLetterSpacing.substr(0,mLetterSpacing.indexOf("px"))}else{spacing=1}return spacing};self.setOutlineColor=function(lineColor){if(mLineColor!=lineColor){mLineColor=lineColor;if(mChangeListener)mChangeListener("lineColor")}};self.getOutlineColor=function(){return mLineColor};self.setOutlineWidth=function(lineWidth){if(mLineWidth!=lineWidth){mLineWidth=lineWidth;if(mChangeListener)mChangeListener("lineWidth")}};self.getOutlineWidth=function(){return mLineWidth};self.setFontWeight=function(fontWeight){fontWeight=fontWeight.toLowerCase();if(mFontWeight!=fontWeight&&EJSS_DRAWING2D.Font.FONTWEIGHTS.indexOf(fontWeight)>-1){mFontWeight=fontWeight;if(mChangeListener)mChangeListener("fontWeight")}};self.getFontWeight=function(){return mFontWeight};self.setFillColor=function(fillColor){if(mFillColor!=fillColor){mFillColor=fillColor;if(mChangeListener)mChangeListener("fillColor")}};self.getFillColor=function(){return mFillColor};self.setFontStyle=function(fontstyle){fontstyle=fontstyle.toLowerCase();if(mFontStyle!=fontstyle&&EJSS_DRAWING2D.Font.FONTSTYLES.indexOf(fontstyle)>-1){mFontStyle=fontstyle;if(mChangeListener)mChangeListener("fontstyle")}};self.getFontStyle=function(){return mFontStyle};self.getFont=function(){return mFontStyle+" "+mLineWidth+" "+mFontSize+" "+mFontFamily};self.setFont=function(recap){if(typeof recap!=="string"||recap.length<=0)return;var params=recap.split(" ");mFontStyle=params[0];mFontWeight=params[1];var sizes=params[2].split("/");mFontSize=sizes[0];if(params[3])mFontFamily=recap.substring(recap.indexOf(params[3]))};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.functionsParser=function(){var self={};function object(o){function F(){}F.prototype=o;return new F}var TNUMBER=0;var TOP1=1;var TOP2=2;var TVAR=3;var TFUNCALL=4;function Token(type_,index_,prio_,number_){this.type_=type_;this.index_=index_||0;this.prio_=prio_||0;this.number_=number_!==undefined&&number_!==null?number_:0;this.toString=function(){switch(this.type_){case TNUMBER:return this.number_;case TOP1:case TOP2:case TVAR:return this.index_;case TFUNCALL:return"CALL";default:return"Invalid Token"}}}function Expression(tokens,ops1,ops2,functions){this.tokens=tokens;this.ops1=ops1;this.ops2=ops2;this.functions=functions}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};function escapeValue(v){if(typeof v==="string"){escapable.lastIndex=0;return escapable.test(v)?"'"+v.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+v+"'"}return v}Expression.prototype={simplify:function(values){values=values||{};var nstack=[];var newexpression=[];var n1;var n2;var f;var L=this.tokens.length;var item;var i=0;for(i=0;i<L;i++){item=this.tokens[i];var type_=item.type_;if(type_===TNUMBER){nstack.push(item)}else if(type_===TVAR&&item.index_ in values){item=new Token(TNUMBER,0,0,values[item.index_]);nstack.push(item)}else if(type_===TOP2&&nstack.length>1){n2=nstack.pop();n1=nstack.pop();f=this.ops2[item.index_];item=new Token(TNUMBER,0,0,f(n1.number_,n2.number_));nstack.push(item)}else if(type_===TOP1&&nstack.length>0){n1=nstack.pop();f=this.ops1[item.index_];item=new Token(TNUMBER,0,0,f(n1.number_));nstack.push(item)}else{while(nstack.length>0){newexpression.push(nstack.shift())}newexpression.push(item)}}while(nstack.length>0){newexpression.push(nstack.shift())}return new Expression(newexpression,object(this.ops1),object(this.ops2),object(this.functions))},substitute:function(variable,expr){if(!(expr instanceof Expression)){expr=(new Parser).parse(String(expr))}var newexpression=[];var L=this.tokens.length;var item;var i=0;for(i=0;i<L;i++){item=this.tokens[i];var type_=item.type_;if(type_===TVAR&&item.index_===variable){for(var j=0;j<expr.tokens.length;j++){var expritem=expr.tokens[j];var replitem=new Token(expritem.type_,expritem.index_,expritem.prio_,expritem.number_);newexpression.push(replitem)}}else{newexpression.push(item)}}var ret=new Expression(newexpression,object(this.ops1),object(this.ops2),object(this.functions));return ret},evaluate:function(values){values=values||{};var nstack=[];var n1;var n2;var f;var L=this.tokens.length;var item;var i=0;for(i=0;i<L;i++){item=this.tokens[i];var type_=item.type_;if(type_===TNUMBER){nstack.push(item.number_)}else if(type_===TOP2){n2=nstack.pop();n1=nstack.pop();f=this.ops2[item.index_];nstack.push(f(n1,n2))}else if(type_===TVAR){if(item.index_ in values){nstack.push(values[item.index_])}else if(item.index_ in this.functions){nstack.push(this.functions[item.index_])}else{throw new Error("undefined variable: "+item.index_)}}else if(type_===TOP1){n1=nstack.pop();f=this.ops1[item.index_];nstack.push(f(n1))}else if(type_===TFUNCALL){n1=nstack.pop();f=nstack.pop();if(f.apply&&f.call){if(Object.prototype.toString.call(n1)=="[object Array]"){nstack.push(f.apply(undefined,n1))}else{nstack.push(f.call(undefined,n1))}}else{throw new Error(f+" is not a function")}}else{throw new Error("invalid Expression")}}if(nstack.length>1){throw new Error("invalid Expression (parity)")}return nstack[0]},toString:function(toJS){var nstack=[];var n1;var n2;var f;var L=this.tokens.length;var item;var i=0;for(i=0;i<L;i++){item=this.tokens[i];var type_=item.type_;if(type_===TNUMBER){nstack.push(escapeValue(item.number_))}else if(type_===TOP2){n2=nstack.pop();n1=nstack.pop();f=item.index_;if(toJS&&f=="^"){nstack.push("Math.pow("+n1+","+n2+")")}else{nstack.push("("+n1+f+n2+")")}}else if(type_===TVAR){nstack.push(item.index_)}else if(type_===TOP1){n1=nstack.pop();f=item.index_;if(f==="-"){nstack.push("("+f+n1+")")}else{nstack.push(f+"("+n1+")")}}else if(type_===TFUNCALL){n1=nstack.pop();f=nstack.pop();nstack.push(f+"("+n1+")")}else{throw new Error("invalid Expression")}}if(nstack.length>1){throw new Error("invalid Expression (parity)")}return nstack[0]},variables:function(){var L=this.tokens.length;var vars=[];for(var i=0;i<L;i++){var item=this.tokens[i];if(item.type_===TVAR&&vars.indexOf(item.index_)==-1){vars.push(item.index_)}}return vars},toJSFunction:function(param,variables){var f=new Function(param,"with(Parser.values) { return "+this.simplify(variables).toString(true)+"; }");return f}};function add(a,b){return Number(a)+Number(b)}function sub(a,b){return a-b}function mul(a,b){return a*b}function div(a,b){return a/b}function mod(a,b){return a%b}function concat(a,b){return""+a+b}function neg(a){return-a}function random(a){return Math.random()*(a||1)}function fac(a){a=Math.floor(a);var b=a;while(a>1){b=b*--a}return b}function pyt(a,b){return Math.sqrt(a*a+b*b)}function ifelse(a,b,c){if(a)return b;else return c}function step(a){if(a<0)return 0;return 1}function append(a,b){if(Object.prototype.toString.call(a)!="[object Array]"){return[a,b]}a=a.slice();a.push(b);return a}function greaterthan(a,b){return a>b?1:0}function lessthan(a,b){return a<b?1:0}function equalto(a,b){return a==b?1:0}function notequalto(a,b){return a!=b?1:0}function Parser(){this.success=false;this.errormsg="";this.expression="";this.pos=0;this.tokennumber=0;this.tokenprio=0;this.tokenindex=0;this.tmpprio=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":neg,neg:neg,exp:Math.exp};this.ops2={"+":add,"-":sub,"*":mul,"/":div,"%":mod,"^":Math.pow,",":append,"||":concat,">":greaterthan,"<":lessthan,"==":equalto,"!=":notequalto};this.functions={random:random,fac:fac,min:Math.min,max:Math.max,pyt:pyt,step:step,pow:Math.pow,atan2:Math.atan2,if:ifelse};this.consts={E:Math.E,pi:Math.PI,PI:Math.PI}}self.parse=function(expr){return(new Parser).parse(expr)};self.evaluate=function(expr,variables){return Parser.parse(expr).evaluate(variables)};Parser.Expression=Expression
;Parser.values={sign:Math.sign,sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:random,fac:fac,exp:Math.exp,min:Math.min,max:Math.max,pyt:pyt,ifelse:ifelse,step:step,pow:Math.pow,atan2:Math.atan2,E:Math.E,pi:Math.PI,PI:Math.PI};var PRIMARY=1<<0;var OPERATOR=1<<1;var FUNCTION=1<<2;var LPAREN=1<<3;var RPAREN=1<<4;var COMMA=1<<5;var SIGN=1<<6;var CALL=1<<7;var NULLARY_CALL=1<<8;Parser.prototype={parse:function(expr){this.errormsg="";this.success=true;var operstack=[];var tokenstack=[];this.tmpprio=0;var expected=PRIMARY|LPAREN|FUNCTION|SIGN;var noperators=0;this.expression=expr;this.pos=0;while(this.pos<this.expression.length){if(this.isOperator()){if(this.isSign()&&expected&SIGN){if(this.isNegativeSign()){this.tokenprio=2;this.tokenindex="-";noperators++;this.addfunc(tokenstack,operstack,TOP1)}expected=PRIMARY|LPAREN|FUNCTION|SIGN}else if(this.isComment()){}else{if((expected&OPERATOR)===0){this.error_parsing(this.pos,"unexpected operator")}noperators+=2;this.addfunc(tokenstack,operstack,TOP2);expected=PRIMARY|LPAREN|FUNCTION|SIGN}}else if(this.isNumber()){if((expected&PRIMARY)===0){this.error_parsing(this.pos,"unexpected number")}var token=new Token(TNUMBER,0,0,this.tokennumber);tokenstack.push(token);expected=OPERATOR|RPAREN|COMMA}else if(this.isString()){if((expected&PRIMARY)===0){this.error_parsing(this.pos,"unexpected string")}var token=new Token(TNUMBER,0,0,this.tokennumber);tokenstack.push(token);expected=OPERATOR|RPAREN|COMMA}else if(this.isLeftParenth()){if((expected&LPAREN)===0){this.error_parsing(this.pos,'unexpected "("')}if(expected&CALL){noperators+=2;this.tokenprio=-2;this.tokenindex=-1;this.addfunc(tokenstack,operstack,TFUNCALL)}expected=PRIMARY|LPAREN|FUNCTION|SIGN|NULLARY_CALL}else if(this.isRightParenth()){if(expected&NULLARY_CALL){var token=new Token(TNUMBER,0,0,[]);tokenstack.push(token)}else if((expected&RPAREN)===0){this.error_parsing(this.pos,'unexpected ")"')}expected=OPERATOR|RPAREN|COMMA|LPAREN|CALL}else if(this.isComma()){if((expected&COMMA)===0){this.error_parsing(this.pos,'unexpected ","')}this.addfunc(tokenstack,operstack,TOP2);noperators+=2;expected=PRIMARY|LPAREN|FUNCTION|SIGN}else if(this.isConst()){if((expected&PRIMARY)===0){this.error_parsing(this.pos,"unexpected constant")}var consttoken=new Token(TNUMBER,0,0,this.tokennumber);tokenstack.push(consttoken);expected=OPERATOR|RPAREN|COMMA}else if(this.isOp2()){if((expected&FUNCTION)===0){this.error_parsing(this.pos,"unexpected function")}this.addfunc(tokenstack,operstack,TOP2);noperators+=2;expected=LPAREN}else if(this.isOp1()){if((expected&FUNCTION)===0){this.error_parsing(this.pos,"unexpected function")}this.addfunc(tokenstack,operstack,TOP1);noperators++;expected=LPAREN}else if(this.isVar()){if((expected&PRIMARY)===0){this.error_parsing(this.pos,"unexpected variable")}var vartoken=new Token(TVAR,this.tokenindex,0,0);tokenstack.push(vartoken);expected=OPERATOR|RPAREN|COMMA|LPAREN|CALL}else if(this.isWhite()){}else{if(this.errormsg===""){this.error_parsing(this.pos,"unknown character")}else{this.error_parsing(this.pos,this.errormsg)}}}if(this.tmpprio<0||this.tmpprio>=10){this.error_parsing(this.pos,'unmatched "()"')}while(operstack.length>0){var tmp=operstack.pop();tokenstack.push(tmp)}if(noperators+1!==tokenstack.length){this.error_parsing(this.pos,"parity")}return new Expression(tokenstack,object(this.ops1),object(this.ops2),object(this.functions))},evaluate:function(expr,variables){return this.parse(expr).evaluate(variables)},error_parsing:function(column,msg){this.success=false;this.errormsg="parse error [column "+column+"]: "+msg;throw new Error(this.errormsg)},addfunc:function(tokenstack,operstack,type_){var operator=new Token(type_,this.tokenindex,this.tokenprio+this.tmpprio,0);while(operstack.length>0){if(operator.prio_<=operstack[operstack.length-1].prio_){tokenstack.push(operstack.pop())}else{break}}operstack.push(operator)},isNumber:function(){var r=false;var str="";while(this.pos<this.expression.length){var code=this.expression.charCodeAt(this.pos);if(code>=48&&code<=57||code===46){str+=this.expression.charAt(this.pos);this.pos++;this.tokennumber=parseFloat(str);r=true}else{break}}return r},unescape:function(v,pos){var buffer=[];var escaping=false;for(var i=0;i<v.length;i++){var c=v.charAt(i);if(escaping){switch(c){case"'":buffer.push("'");break;case"\\":buffer.push("\\");break;case"/":buffer.push("/");break;case"b":buffer.push("\b");break;case"f":buffer.push("\f");break;case"n":buffer.push("\n");break;case"r":buffer.push("\r");break;case"t":buffer.push("\t");break;case"u":var codePoint=parseInt(v.substring(i+1,i+5),16);buffer.push(String.fromCharCode(codePoint));i+=4;break;default:throw this.error_parsing(pos+i,"Illegal escape sequence: '\\"+c+"'")}escaping=false}else{if(c=="\\"){escaping=true}else{buffer.push(c)}}}return buffer.join("")},isString:function(){var r=false;var str="";var startpos=this.pos;if(this.pos<this.expression.length&&this.expression.charAt(this.pos)=="'"){this.pos++;while(this.pos<this.expression.length){var code=this.expression.charAt(this.pos);if(code!="'"||str.slice(-1)=="\\"){str+=this.expression.charAt(this.pos);this.pos++}else{this.pos++;this.tokennumber=this.unescape(str,startpos);r=true;break}}}return r},isConst:function(){var str;for(var i in this.consts){var L=i.length;str=this.expression.substr(this.pos,L);if(i===str){this.tokennumber=this.consts[i];this.pos+=L;return true}}return false},isOperator:function(){var code=this.expression.charCodeAt(this.pos);if(code===43){this.tokenprio=0;this.tokenindex="+"}else if(code===45){this.tokenprio=0;this.tokenindex="-"}else if(code===124){if(this.expression.charCodeAt(this.pos+1)===124){this.pos++;this.tokenprio=0;this.tokenindex="||"}else{return false}}else if(code===61){if(this.expression.charCodeAt(this.pos+1)===61){this.pos++;this.tokenprio=0;this.tokenindex="=="}else{return false}}else if(code===33){if(this.expression.charCodeAt(this.pos+1)===61){this.pos++;this.tokenprio=0;this.tokenindex="!="}else{return false}}else if(code===42){this.tokenprio=1;this.tokenindex="*"}else if(code===47){this.tokenprio=2;this.tokenindex="/"}else if(code===37){this.tokenprio=2;this.tokenindex="%"}else if(code===94){this.tokenprio=3;this.tokenindex="^"}else if(code===60){this.tokenprio=2;this.tokenindex="<"}else if(code===62){this.tokenprio=2;this.tokenindex=">"}else{return false}this.pos++;return true},isSign:function(){var code=this.expression.charCodeAt(this.pos-1);if(code===45||code===43){return true}return false},isPositiveSign:function(){var code=this.expression.charCodeAt(this.pos-1);if(code===43){return true}return false},isNegativeSign:function(){var code=this.expression.charCodeAt(this.pos-1);if(code===45){return true}return false},isLeftParenth:function(){var code=this.expression.charCodeAt(this.pos);if(code===40){this.pos++;this.tmpprio+=10;return true}return false},isRightParenth:function(){var code=this.expression.charCodeAt(this.pos);if(code===41){this.pos++;this.tmpprio-=10;return true}return false},isComma:function(){var code=this.expression.charCodeAt(this.pos);if(code===44){this.pos++;this.tokenprio=-1;this.tokenindex=",";return true}return false},isWhite:function(){var code=this.expression.charCodeAt(this.pos);if(code===32||code===9||code===10||code===13){this.pos++;return true}return false},isOp1:function(){var str="";for(var i=this.pos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()){if(i===this.pos||c!="_"&&(c<"0"||c>"9")){break}}str+=c}if(str.length>0&&str in this.ops1){this.tokenindex=str;this.tokenprio=5;this.pos+=str.length;return true}return false},isOp2:function(){var str="";for(var i=this.pos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()){if(i===this.pos||c!="_"&&(c<"0"||c>"9")){break}}str+=c}if(str.length>0&&str in this.ops2){this.tokenindex=str;this.tokenprio=5;this.pos+=str.length;return true}return false},isVar:function(){var str="";for(var i=this.pos;i<this.expression.length;i++){var c=this.expression.charAt(i);if(c.toUpperCase()===c.toLowerCase()){if(i===this.pos||c!="_"&&(c<"0"||c>"9")){break}}str+=c}if(str.length>0){this.tokenindex=str;this.tokenprio=4;this.pos+=str.length;return true}return false},isComment:function(){var code=this.expression.charCodeAt(this.pos-1);if(code===47&&this.expression.charCodeAt(this.pos)===42){this.pos=this.expression.indexOf("*/",this.pos)+2;if(this.pos===1){this.pos=this.expression.length}return true}return false}};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.InteractionTarget={ENABLED_FIXED:0,ENABLED_NONE:0,ENABLED_ANY:1,ENABLED_X:2,ENABLED_Y:3,ENABLED_NO_MOVE:4,SENSITIVITY_BOTH:0,SENSITIVITY_HORIZONTAL:1,SENSITIVITY_VERTICAL:2,SENSITIVITY_ANY:3,copyTo:function(source,dest){dest.setMotionEnabled(source.getMotionEnabled());dest.setAffectsGroup(source.getAffectsGroup());dest.setActionCommand(source.getActionCommand());dest.setDataObject(source.getDataObject());dest.setSensitivity(source.getSensitivity())}};EJSS_DRAWING2D.interactionTarget=function(mElement,mType,mPosition){var InteractionTarget=EJSS_DRAWING2D.InteractionTarget;var self={};var Element=EJSS_DRAWING2D.Element;var mMotionEnabled=InteractionTarget.ENABLED_NONE;var mAffectsGroup=false;var mCommand=null;var mDataObject=null;var mSensitivity=20;var mSensitivityType=InteractionTarget.SENSITIVITY_BOTH;self.getElement=function(){return mElement};self.getType=function(){return mType};self.setMotionEnabled=function(motion){if(typeof motion=="string"){value=InteractionTarget[motion.toUpperCase()];mMotionEnabled=typeof value==="undefined"?InteractionTarget.ENABLED_NONE:value}else mMotionEnabled=motion};self.getMotionEnabled=function(){return mMotionEnabled};self.setSensitivityType=function(sensitivityType){if(typeof sensitivityType=="string")mSensitivityType=InteractionTarget[sensitivityType.toUpperCase()];else mSensitivityType=sensitivityType};self.getSensitivityType=function(){return mSensitivityType};self.isEnabled=function(){return mMotionEnabled!=InteractionTarget.ENABLED_NONE};self.setPositionOffset=function(position){mPosition=position};self.getPositionOffset=function(){return mPosition};self.getPixelPosition=function(){var pos=mElement.getPixelPosition(true);var size=mElement.getPixelSizes(true);var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0];var y=pos[1]+offset[1];var inverted=mElement.getPanel().getInvertedScaleY();var d=Element.getRelativePositionOffset(mPosition,size[0],size[1],inverted);return[x-d[0],y-d[1]]};self.getPosition=function(){var pos=mElement.getAbsolutePosition(true);var size=mElement.getAbsoluteSize();var inverted=mElement.getPanel().getInvertedScaleY();var d=Element.getRelativePositionOffset(mPosition,size[0],size[1],inverted);var offset=mElement.getRelativePositionOffset(size);var x=pos[0]+offset[0]-d[0];var y=pos[1]+offset[1]-d[1];return[x,y]};self.setAffectsGroup=function(value){mAffectsGroup=value};self.getAffectsGroup=function(){return mAffectsGroup};self.setSensitivity=function(sense){mSensitivity=sense};self.getSensitivity=function(){return mSensitivity};self.setActionCommand=function(command){mCommand=command};self.getActionCommand=function(){return mCommand};self.setDataObject=function(object){mDataObject=object};self.getDataObject=function(){return mDataObject};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.PanelInteraction={TARGET_POSITION:0,TARGET_SIZE:1};EJSS_DRAWING2D.panelInteraction=function(mPanel){var self={};var PanelInteraction=EJSS_DRAWING2D.PanelInteraction;var mEnabled=false;var mStopGestures=false;var mStopMoveEvents=false;var mLastPoint=[];var mFirstPoint=[];var mPreviousPoint=[];var mOnlyTarget=null;var mIsPanelOnlyTarget=false;var mMouseIsDown=false;var mLastTime=0;var mPinching=0;var mPinchInitDistance=[0,0];var mPinchRelDistance=[0,0];var mZoomDelta=0;var mCursorTypeForMove="move";var mElementInteracted=0;self.reload=function(){mLastPoint=[];mFirstPoint=[];mPreviousPoint=[];mOnlyTarget=null;mMouseIsDown=false;mLastTime=0;mPinching=0;mPinchInitDistance=[0,0];mPinchRelDistance=[0,0];mZoomDelta=0;mElementInteracted=0;mEnabled=!mEnabled;self.setEnabled(!mEnabled);mStopGestures=!mStopGestures;self.setStopGestures(!mStopGestures)};self.getPanel=function(){return mPanel};self.getEnabled=function(){return mEnabled};self.setStopMoveEvents=function(stop){if(mStopMoveEvents!=stop){mStopMoveEvents=stop;if(mStopMoveEvents){self.setHandler("move",function(){return true})}else{self.setHandler("move",self.handleMouseMoveEvent)}}};self.setStopGestures=function(stop){if(mStopGestures!=stop){mStopGestures=stop;if(mStopGestures){self.setHandler("gesturestart",function(e){e.preventDefault();e.stopPropagation();return false});self.setHandler("gesturechange",function(e){e.preventDefault();e.stopPropagation();return false});self.setHandler("gestureend",function(e){e.preventDefault();e.stopPropagation();return false})}else{self.setHandler("gesturestart",function(){return true});self.setHandler("gesturechange",function(){return true});self.setHandler("gestureend",function(){return true})}}};self.setEnabled=function(enabled){if(mEnabled!=enabled){mEnabled=enabled;if(mEnabled){if(!mStopMoveEvents){self.setHandler("move",self.handleMouseMoveEvent)}self.setHandler("down",self.handleMouseDownEvent);self.setHandler("up",self.handleMouseUpEvent);self.setHandler("mousewheel",self.handleMouseWheelEvent)}else{self.setHandler("move",function(){return true});self.setHandler("down",function(){return true});self.setHandler("up",function(){return true});self.setHandler("mousewheel",function(){return true})}}};self.setCursorTypeForMove=function(type){mCursorTypeForMove=type};self.getInteractionPoint=function(){return mPanel.toPanelPosition(mLastPoint)};self.getInteractionDistance=function(){if(mPreviousPoint.length==0||mLastPoint.length==0)return[];var p=mPanel.toPanelPosition(mPreviousPoint);var l=mPanel.toPanelPosition(mLastPoint);return[p[0]-l[0],p[1]-l[1]]};self.getInteractionBounds=function(){if(mFirstPoint.length==0||mLastPoint.length==0)return[];var f=mPanel.toPanelPosition(mFirstPoint);var l=mPanel.toPanelPosition(mLastPoint);return[f[0],l[0],f[1],l[1]]};self.getInteractionZoomDelta=function(){if(mZoomDelta==0&&mPinchRelDistance[0]==0)return 0;if(mZoomDelta>0||mPinchRelDistance[0]>0)return 1;return-1};self.getInteractionElement=function(){return mOnlyTarget};self.clearInteractionElement=function(element){if(mOnlyTarget&&element===mOnlyTarget.getElement())mOnlyTarget=null};self.getOrientation=function(){return window.orientation};self.handleMouseMoveEvent=function(event){if(mStopGestures){event.preventDefault();event.stopPropagation()}var nFingers=typeof event.touches!="undefined"?event.touches.length:1;if(nFingers==2){var e0=event.touches[0];var e1=event.touches[1];var e0x=e0.clientX||e0.x;var e0y=e0.clientY||e0.y;var e1x=e1.clientX||e1.x;var e1y=e1.clientY||e1.y;if(mPinching!=0){var newDistance=[Math.abs(e0x-e1x),Math.abs(e0y-e1y)];var delta=[newDistance[0]-mPinchInitDistance[0],newDistance[1]-mPinchInitDistance[1]];if(delta[0]<8&&delta[0]>-8&&delta[1]<8&&delta[1]>-8){mPinchRelDistance=[0,0]}else{mPinchRelDistance=delta;mPinchInitDistance=newDistance}}else{mPinching=1;mPinchInitDistance=[Math.abs(e0x-e1x),Math.abs(e0y-e1y)];mPinchRelDistance=[0,0]}}else{mPinching=0;mPinchInitDistance=[0,0]}var locations=getEventLocations(event);mPreviousPoint=mLastPoint;mLastPoint=locations[locations.length-1];if(mMouseIsDown){if(mOnlyTarget!=null){var element=mOnlyTarget.getAffectsGroup()?mOnlyTarget.getElement().getGroup():mOnlyTarget.getElement();var point=mPanel.toPanelPosition(mLastPoint);var refpoint=mPanel.toPanelPosition(mPreviousPoint);propertiesChanged(element,mOnlyTarget,point,refpoint);element.getController().invokeAction("OnDrag");if(mEnabled)mPanel.getController().invokeAction("OnMove")}else if(mIsPanelOnlyTarget){if(mEnabled){mPanel.getController().invokeAction("OnDrag")}}else{var targetHitList=[];for(var i=0;i<locations.length;i++){var targetHit=self.findInteractionTarget(mPanel.getElements(),locations[i]);if(targetHit!=null){targetHitList.push(targetHit);var element=targetHit.getAffectsGroup()?targetHit.getElement().getGroup():targetHit.getElement();var point=mPanel.toPanelPosition(locations[i]);propertiesChanged(element,targetHit,point,targetHit.getPosition());element.getController().invokeAction("OnDrag");if(mEnabled)mPanel.getController().invokeAction("OnMove")}}if(mEnabled){if(mPinching==0)mPanel.getController().invokeAction("OnDrag");else if(mPinching==1&&targetHitList.length==0)mPanel.getController().invokeAction("OnZoom")}}}else{var targetHit=self.findInteractionTarget(mPanel.getElements(),locations[0]);if(targetHit===null){if(mOnlyTarget!=null)mOnlyTarget.getElement().getController().invokeAction("OnExit");if(mEnabled)mPanel.getController().invokeAction("OnMove");event.target.style.cursor="default"}else{if(mOnlyTarget!=targetHit){if(mOnlyTarget!=null)mOnlyTarget.getElement().getController().invokeAction("OnExit");targetHit.getElement().getController().invokeAction("OnEnter")}if(targetHit.isEnabled())event.target.style.cursor=mCursorTypeForMove;else event.target.style.cursor="default"}mOnlyTarget=targetHit}mPanel.getController().reportInteractions();return false};self.handleMouseDownEvent=function(event){mMouseIsDown=true;if(mStopMoveEvents){self.setHandler("move",self.handleMouseMoveEvent)}if(mStopGestures){event.preventDefault();event.stopPropagation()}var nFingers=typeof event.touches!="undefined"?event.touches.length:1;if(nFingers!=2){mPinching=0}var locations=getEventLocations(event);mFirstPoint=locations[0];mPreviousPoint=mFirstPoint;mLastPoint=locations[locations.length-1];var isPanelHit=false;var targetHit=null;for(var i=0;i<locations.length;i++){targetHit=self.findInteractionTarget(mPanel.getElements(),locations[i]);if(targetHit!==null){targetHit.getElement().getController().invokeAction("OnPress");event.target.style.cursor=mCursorTypeForMove}else if(mEnabled){mPanel.getController().invokeAction("OnPress");isPanelHit=true}}if(locations.length==1&&nFingers==1){mOnlyTarget=targetHit;mIsPanelOnlyTarget=isPanelHit}else{mOnlyTarget=null;mIsPanelOnlyTarget=false}mPanel.getController().reportInteractions();return false};self.handleMouseUpEvent=function(event){mMouseIsDown=false;if(mStopMoveEvents){self.setHandler("move",function(){return true})}if(mStopGestures){event.preventDefault();event.stopPropagation()}if(mPinching!=0){mPinching=0;mPinchRelDistance=[0,0];mPinchInitDistance=[0,0]}var locations=getEventLocations(event);mPreviousPoint=mLastPoint;mLastPoint=locations[locations.length-1];var dblclick=event.timeStamp-mLastTime<500;if(mOnlyTarget!=null){mOnlyTarget.getElement().getController().invokeAction("OnRelease");if(dblclick)mOnlyTarget.getElement().getController().invokeAction("OnDoubleClick")}else{for(var i=0;i<locations.length;i++){var targetHit=self.findInteractionTarget(mPanel.getElements(),locations[i]);if(targetHit!==null){targetHit.getElement().getController().invokeAction("OnRelease");if(dblclick)targetHit.getElement().getController().invokeAction("OnDoubleClick")}else if(mEnabled){mPanel.getController().invokeAction("OnRelease");if(dblclick)mPanel.getController().invokeAction("OnDoubleClick")}}}mLastTime=event.timeStamp;event.target.style.cursor="default";mPanel.getController().reportInteractions();return false};self.handleMouseWheelEvent=function(event){var nFingers=typeof event.touches!="undefined"?event.touches.length:0;if(nFingers==0){if(mStopGestures){event.preventDefault();event.stopPropagation()}mZoomDelta=Math.max(-1,Math.min(1,event.wheelDelta||-event.detail));mPanel.getController().invokeAction("OnZoom");mPanel.getController().reportInteractions()}};self.findInteractionTarget=function(elements,location){var InteractionTarget=EJSS_DRAWING2D.InteractionTarget;var target=null;for(var i=elements.length-1;i>=0;i--){var element=elements[i];if(element.isGroupVisible()){if(element.getElements){target=self.findInteractionTarget(element.getElements(),location);if(target!==null)return target}else{var targets=element.getInteractionTargets();for(var j=0;j<targets.length;j++){if(targets[j].isEnabled()){var sensitivity=targets[j].getSensitivity();if(sensitivity>0){var projectedPosition=targets[j].getPixelPosition();var selected=false;switch(targets[j].getSensitivityType()){case InteractionTarget.SENSITIVITY_HORIZONTAL:selected=Math.abs(projectedPosition[1]-location[1])<sensitivity;break;case InteractionTarget.SENSITIVITY_VERTICAL:selected=Math.abs(projectedPosition[0]-location[0])<sensitivity;break;case InteractionTarget.SENSITIVITY_ANY:selected=Math.abs(projectedPosition[0]-location[0])<sensitivity||Math.abs(projectedPosition[1]-location[1])<sensitivity;break;default:selected=Math.abs(projectedPosition[0]-location[0])<sensitivity&&Math.abs(projectedPosition[1]-location[1])<sensitivity;break}if(selected){mElementInteracted=i;return targets[j]}}}}if(mPinching!=0){target=element.getInteractionTarget(PanelInteraction.TARGET_SIZE);if(target.isEnabled()&&!target.getSensitivity()){var rect=element.getAbsoluteBounds();var pos=mPanel.toPanelPosition(location);if(rect.left<pos[0]&&rect.right>pos[0]&&rect.bottom<pos[1]&&rect.top>pos[1]){mElementInteracted=i;mPinching=2;return target}}}target=element.getInteractionTarget(PanelInteraction.TARGET_POSITION);if(target.isEnabled()&&!target.getSensitivity()){var rect=element.getAbsoluteBounds();var pos=mPanel.toPanelPosition(location);if(rect.left<pos[0]&&rect.right>pos[0]&&rect.bottom<pos[1]&&rect.top>pos[1]){mElementInteracted=i;return target}}}}}return null};self.getIndexElement=function(){return mElementInteracted};function propertiesChanged(element,target,point,targetPosition){var InteractionTarget=EJSS_DRAWING2D.InteractionTarget;var PanelInteraction=EJSS_DRAWING2D.PanelInteraction;if(target.getType()===PanelInteraction.TARGET_POSITION){var dx=point[0]-targetPosition[0];var dy=point[1]-targetPosition[1];switch(target.getMotionEnabled()){case InteractionTarget.ENABLED_ANY:element.setX(element.getX()+dx);element.setY(element.getY()+dy);element.getController().propertiesChanged("Position","X","Y");target.getElement().setChanged(true);element.setChanged(true);break;case InteractionTarget.ENABLED_X:element.setX(element.getX()+dx);element.getController().propertiesChanged("Position","X");target.getElement().setChanged(true);element.setChanged(true);break;case InteractionTarget.ENABLED_Y:element.setY(element.getY()+dy);element.getController().propertiesChanged("Position","Y");target.getElement().setChanged(true);element.setChanged(true);break}}else if(target.getType()===PanelInteraction.TARGET_SIZE){if(mPinching==2){var diff=mPanel.toPanelMod(mPinchRelDistance);var dx=diff[0];var dy=-diff[1]}else{var dx=point[0]-targetPosition[0];var dy=point[1]-targetPosition[1]}var targetElement=target.getElement();var absSize=targetElement.getAbsoluteSize();if(absSize[0]===0)absSize[0]=1e-5;if(absSize[1]===0)absSize[1]=1e-5;var rsizes=[dx/absSize[0],dy/absSize[1]];var size=element.getSize();if(size[0]===0&&rsizes[0]!==0)size[0]=1e-5;if(size[1]===0&&rsizes[0]!==0)size[1]=1e-5;switch(target.getMotionEnabled()){case InteractionTarget.ENABLED_ANY:element.setSizeX(size[0]+size[0]*rsizes[0]);element.setSizeY(size[1]+size[1]*rsizes[1]);element.getController().propertiesChanged("Size","SizeX","SizeY");target.getElement().setChanged(true);element.setChanged(true);break;case InteractionTarget.ENABLED_X:element.setSizeX(size[0]+size[0]*rsizes[0]);element.getController().propertiesChanged("Size","SizeX");target.getElement().setChanged(true);element.setChanged(true);break;case InteractionTarget.ENABLED_Y:element.setSizeY(size[1]+size[1]*rsizes[1]);element.getController().propertiesChanged("Size","SizeY");target.getElement().setChanged(true);element.setChanged(true);break}}}function getEventLocations(e){var box=mPanel.getGraphics().getBox();var oleft=box.left;var otop=box.top;var locations=[];if(typeof e.changedTouches!="undefined"){for(var i=0;i<e.changedTouches.length;i++){locations[i]=[];locations[i][0]=e.changedTouches[i].clientX-oleft;locations[i][1]=e.changedTouches[i].clientY-otop}}else{locations[0]=[];locations[0][0]=(e.clientX||e.x)-oleft;locations[0][1]=(e.clientY||e.y)-otop}return locations}self.setHandler=function(type,handler){var graphics=mPanel.getGraphics();var context=graphics.getEventContext();switch(type){case"move":context.addEventListener("mousemove",handler,false);context.addEventListener("touchmove",handler,false);break;case"down":context.addEventListener("mousedown",handler,false);context.addEventListener("touchstart",handler,false);break;case"up":context.addEventListener("mouseup",handler,false);context.addEventListener("touchend",handler,false);break;case"mousewheel":context.addEventListener("mousewheel",handler,false);break;case"gesturestart":context.addEventListener("gesturestart",handler,false);break;case"gesturechange":context.addEventListener("gesturechange",handler,false);break;case"gestureend":context.addEventListener("gestureend",handler,false);break;default:}return false};var _super_onorientationchange=window.onorientationchange;window.onorientationchange=function(){if(_super_onorientationchange)_super_onorientationchange();mPanel.getController().invokeAction("OnOrientationChange");mPanel.getController().reportInteractions()};var _super_onresize=window.onresize;window.onresize=function(){if(_super_onresize)_super_onresize();mPanel.getController().invokeAction("OnResize");mPanel.getController().reportInteractions()};self.setStopGestures(true);return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Style={RENDER_AUTO:"auto",RENDER_OPTSPEED:"optimizeSpeed",RENDER_CRISPEDGES:"crispEdges",RENDER_GEOPRECISION:"geometricPrecision",copyTo:function(source,dest){dest.setDrawLines(source.getDrawLines());dest.setLineColor(source.getLineColor());dest.setLineWidth(source.getLineWidth());dest.setDrawFill(source.getDrawFill());dest.setFillColor(source.getFillColor());dest.setAttributes(source.getAttributes());dest.setShapeRendering(source.getShapeRendering())}};EJSS_DRAWING2D.style=function(mName){var Style=EJSS_DRAWING2D.Style;var self={};var mDrawLines=true;var mLineColor="black";var mLineWidth=.5;var mDrawFill=true;var mFillColor="none";var mShapeRendering=Style.RENDER_AUTO;var mChangeListener;var mAttributes={};self.setChangeListener=function(listener){mChangeListener=listener};self.setDrawLines=function(draw){if(draw!=mDrawLines){mDrawLines=draw;if(mChangeListener)mChangeListener("drawlines")}};self.getDrawLines=function(){return mDrawLines};self.setLineColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mLineColor){mLineColor=color;if(mChangeListener)mChangeListener("linecolor")}return self};self.getLineColor=function(){return mLineColor};self.setLineWidth=function(width){if(width!=mLineWidth){mLineWidth=width;if(mChangeListener)mChangeListener("linewidth")}};self.getLineWidth=function(){return mLineWidth};self.setDrawFill=function(draw){if(draw!=mDrawFill){mDrawFill=draw;if(mChangeListener)mChangeListener("drawfill")}};self.getDrawFill=function(){return mDrawFill};self.setFillColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);if(color!=mFillColor){mFillColor=color;if(mChangeListener)mChangeListener("fillcolor")}};self.getFillColor=function(){return mFillColor};self.setShapeRendering=function(rendering){if(rendering.substring(0,6)=="RENDER")rendering=Style[rendering.toUpperCase()];if(mShapeRendering!=rendering){mShapeRendering=rendering;if(mChangeListener)mChangeListener("shaperendering")}};self.getShapeRendering=function(){return mShapeRendering};self.setAttributes=function(attr){if(attr!=mAttributes){mAttributes=attr;if(mChangeListener)mChangeListener("attributes")}};self.getAttributes=function(){return mAttributes};self.serialize=function(){return{mDrawLines:mDrawLines,mLineColor:mLineColor,mLineWidth:mLineWidth,mDrawFill:mDrawFill,mFillColor:mFillColor,mShapeRendering:mShapeRendering,mAttributes:mAttributes}};self.unserialize=function(json){mDrawLines=json.mDrawLines,mLineColor=json.mLineColor,mLineWidth=json.mLineWidth,mDrawFill=json.mDrawFill,mFillColor=json.mFillColor,mShapeRendering=json.mShapeRendering,mAttributes=json.mAttributes};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Transformation={compare:function(mtr1,mtr2){return mtr1.radians==mtr2.radians&&mtr1.a==mtr2.a&&mtr1.b==mtr2.b&&mtr1.c==mtr2.c&&mtr1.d==mtr2.d&&mtr1.e==mtr2.e&&mtr1.f==mtr2.f}};EJSS_DRAWING2D.transformation=function(transform){transform=transform||{a:1,b:0,c:0,d:1,e:0,f:0};var self={a:transform.a,c:transform.c,e:transform.e,b:transform.b,d:transform.d,f:transform.f,radians:0};self.toString=function(){return"a="+self.a+", c="+self.c+", e="+self.e+"\n"+"b="+self.b+", d="+self.d+", f="+self.f};self.setToIdentity=function(){self.a=1;self.c=0;self.e=0;self.b=0;self.d=1;self.f=0;radians=0};self.setTransform=function(tr){if(Array.isArray(tr)&&tr.length>5){self.a=tr[0];self.c=tr[2];self.e=tr[4];self.b=tr[1];self.d=tr[3];self.f=tr[5]}else{self.a=tr.a;self.c=tr.c;self.e=tr.e;self.b=tr.b;self.d=tr.d;self.f=tr.f;self.radians=tr.radians}};self.setToTranslation=function(x,y){self.a=1;self.c=0;self.e=x;self.b=0;self.d=1;self.f=y};self.setToRotation=function(radians){var cos=Math.cos(radians),sin=Math.sin(radians);self.a=cos;self.c=-sin;self.e=0;self.b=sin;self.d=cos;self.f=0;self.radians=radians};self.getRotation=function(){return self.radians};self.translate=function(dx,dy){self.e+=dx;self.f+=dy};self.scale=function(sx,sy){self.a*=sx;self.b*=sx;self.c*=sy;self.d*=sy};self.concatenate=function(tr){var a=self.a,b=self.b,c=self.c,d=self.d,e=self.e,f=self.f;self.a=a*tr.a+c*tr.b;self.b=b*tr.a+d*tr.b;self.c=a*tr.c+c*tr.d;self.d=b*tr.c+d*tr.d;self.e=a*tr.e+c*tr.f+e,self.f=b*tr.e+d*tr.f+f;self.radians+=tr.radians};self.transform=function(point){var x=point[0],y=point[1];point[0]=self.a*x+self.c*y+self.e;point[1]=self.b*x+self.d*y+self.f;return point};self.transformVector=function(vector){var x=vector[0],y=vector[1];vector[0]=self.a*x+self.c*y;vector[1]=self.b*x+self.d*y;return vector};self.inverseTransform=function(point){var a=self.a,b=self.b,c=self.c,d=self.d,e=self.e,f=self.f;var den=a*d-b*c;if(den===0)return null;var x=point[0],y=point[1];point[0]=(d*x-c*y+(c*f-d*e))/den;point[1]=(-b*x+a*y+(b*e-a*f))/den;return point};return self};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.Video={};EJSS_DRAWING2D.video=function(name){};var EJSS_DRAWING2D=EJSS_DRAWING2D||{};EJSS_DRAWING2D.WebCamImage={};EJSS_DRAWING2D.webCamImage=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.AnalyticCurve={};EJSS_DRAWING3D.analyticCurve=function(name){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.AnalyticSurface={};EJSS_DRAWING3D.analyticSurface=function(name){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Arrow={};EJSS_DRAWING3D.arrow=function(name){};EJSS_DRAWING3D.ArrowSet={};EJSS_DRAWING3D.arrowSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Basic={};EJSS_DRAWING3D.basic=function(name){};EJSS_DRAWING3D.BasicSet={};EJSS_DRAWING3D.basicSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Box={};EJSS_DRAWING3D.box=function(name){};EJSS_DRAWING3D.BoxSet={};EJSS_DRAWING3D.boxSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Cone={};EJSS_DRAWING3D.cone=function(name){};EJSS_DRAWING3D.ConeSet={};EJSS_DRAWING3D.coneSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Cylinder={};EJSS_DRAWING3D.cylinder=function(name){};EJSS_DRAWING3D.CylinderSet={};EJSS_DRAWING3D.cylinderSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Disk={};EJSS_DRAWING3D.disk=function(name){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.DrawingPanel={};EJSS_DRAWING3D.drawingPanel=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Element={};EJSS_DRAWING3D.element=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.ElementSet={};EJSS_DRAWING3D.elementSet=function(mConstructor,mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Ellipsoid={};EJSS_DRAWING3D.ellipsoid=function(name){};EJSS_DRAWING3D.EllipsoidSet={};EJSS_DRAWING3D.ellipsoidSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Group={};EJSS_DRAWING3D.group=function(name){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.panelInteraction=function(mPanel){var self={};var mEnabled=false;var mLastLocation=[0,0];var mDeltaX=0;var mDeltaY=0;var mMouseIsDown=false;var mUpLastTime=0;var mZoomLastTime=0;var mZoomDelta=0;var mLastZoom=0;var mPinching=false;var mPinchInitDistance=[0,0];self.getPanel=function(){return mPanel};self.getEnabled=function(){return mEnabled};self.setEnabled=function(enabled){if(mEnabled!=enabled){mEnabled=enabled;if(mEnabled){self.setHandler("move",self.handleMouseMoveEvent);self.setHandler("down",self.handleMouseDownEvent);self.setHandler("up",self.handleMouseUpEvent);self.setHandler("mousewheel",self.handleMouseWheelEvent)}else{self.setHandler("move",function(){});self.setHandler("down",function(){});self.setHandler("up",function(){});self.setHandler("mousewheel",function(){})}}};self.getInteractionPoint=function(){return mLastLocation};self.getInteractionDeltas=function(){return[mDeltaX,mDeltaY]};self.getInteractionZoomDelta=function(){return mZoomDelta};self.handleMouseWheelEvent=function(event){var nFingers=typeof event.touches!="undefined"?event.touches.length:0;if(nFingers==0){event.preventDefault();mZoomDelta=Math.max(-1,Math.min(1,event.wheelDelta||-event.detail));mPanel.getController().invokeAction("OnZoom");mPanel.getController().reportInteractions()}};self.handlePinchGesture=function(event){if(event.timeStamp-mZoomLastTime>100){event.preventDefault();if(event.scale<mLastZoom){mZoomDelta=1}else if(event.scale>=mLastZoom){mZoomDelta=-1}mLastZoom=event.scale;mPanel.getController().invokeAction("OnZoom");mPanel.getController().reportInteractions();mZoomLastTime=event.timeStamp}};self.handleMouseMoveEvent=function(event){var nFingers=typeof event.touches!="undefined"?event.touches.length:1;if(nFingers==1){var currentX=mLastLocation[0];var currentY=mLastLocation[1];mLastLocation=getEventLocation(event);mDeltaX=mLastLocation[0]-currentX;mDeltaY=mLastLocation[1]-currentY;if(mMouseIsDown){mPanel.getController().invokeAction("OnDrag");event.target.style.cursor="move"}else{event.target.style.cursor="default"}}if(nFingers==2){if(event.timeStamp-mZoomLastTime>25){event.preventDefault();var e0=event.touches[0];var e1=event.touches[1];var e0x=e0.clientX||e0.x;var e0y=e0.clientY||e0.y;var e1x=e1.clientX||e1.x;var e1y=e1.clientY||e1.y;if(mPinching){var newDistance=[Math.abs(e0x-e1x),Math.abs(e0y-e1y)];var delta=newDistance[0]-mPinchInitDistance[0];if(delta<3&&delta>-3){mZoomDelta=0}else{mZoomDelta=delta;mPinchInitDistance=newDistance}mPanel.getController().invokeAction("OnZoom")}else{mPinching=true;mPinchInitDistance=[Math.abs(e0x-e1x),Math.abs(e0y-e1y)];mZoomDelta=0}mZoomLastTime=event.timeStamp}}else{mPinching=false;mPinchInitDistance=[0,0]}mPanel.getController().reportInteractions()};self.handleMouseDownEvent=function(event){var nFingers=typeof event.touches!="undefined"?event.touches.length:1;if(nFingers==1){mMouseIsDown=true;mLastLocation=getEventLocation(event);mPanel.getController().invokeAction("OnPress");self.pick(mLastLocation[0],mLastLocation[1]);event.preventDefault();mPanel.getController().reportInteractions()}mPinching=false};self.handleMouseUpEvent=function(event){var nFingers=typeof event.touches!="undefined"?event.touches.length:1;if(nFingers==1){mMouseIsDown=false;mLastLocation=getEventLocation(event);mPanel.getController().invokeAction("OnRelease");event.target.style.cursor="default";if(event.timeStamp-mUpLastTime<500){mPanel.getController().invokeAction("OnDoubleClick")}mUpLastTime=event.timeStamp;mPanel.getController().reportInteractions()}mPinching=false};function getEventLocation(e){var x,y;var box=mPanel.getGraphics().getBox();var oleft=box.left;var otop=box.top;if(typeof e.changedTouches!="undefined"&&e.changedTouches.length===1){x=e.changedTouches[0].pageX;y=e.changedTouches[0].pageY}else{x=e.x||e.clientX;y=e.y||e.clientY}return[x-oleft,y-otop]}self.setHandler=function(type,handler){var graphics=mPanel.getGraphics();var context=graphics.getEventContext();switch(type){case"move":context.addEventListener("mousemove",handler,false);context.addEventListener("touchmove",handler,false);break;default:case"down":context.addEventListener("mousedown",handler,false);context.addEventListener("touchstart",handler,false);break;case"up":context.addEventListener("mouseup",handler,false);context.addEventListener("touchend",handler,false);break;case"mousewheel":context.addEventListener("mousewheel",handler,false);break;case"pinch":context.addEventListener("gesturestart",function(event){mLastZoom=1},false);context.addEventListener("gesturechange",handler,false);break}return false};self.pick=function(mousex,mousey){var x=mousex-1;var y=mousey-1;var w=1;var h=1;var gl=mPanel.getGraphics().getContext();if(!gl)return;var data=new Uint8Array(w*h*4);gl.readPixels(x,y,w,h,gl.RGBA,gl.UNSIGNED_BYTE,data);if(data.data)data=data.data};return self};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Style={copyTo:function(source,dest){dest.setClosedTop(source.getClosedTop());dest.setClosedBottom(source.getClosedBottom());dest.setClosedLeft(source.getClosedLeft());dest.setClosedRight(source.getClosedRight());dest.setDrawLines(source.getDrawLines());dest.setLineColor(source.getLineColor());dest.setLineWidth(source.getLineWidth());dest.setDrawFill(source.getDrawFill());dest.setTransparency(source.getTransparency());dest.setAmbientColor(source.getAmbientColor());dest.setFillColor(source.getFillColor());dest.setSpecularColor(source.getSpecularColor());dest.setAmbientReflection(source.getAmbientReflection());dest.setColorReflection(source.getColorReflection());dest.setSpecularReflection(source.getSpecularReflection());dest.setShininessVal(source.getShininessVal());dest.setPaletteFloor(source.getPaletteFloor());dest.setPaletteCeil(source.getPaletteCeil());dest.setPaletteFloorColor(source.getPaletteFloorColor());dest.setPaletteCeilColor(source.getPaletteCeilColor())}};EJSS_DRAWING3D.style=function(mName){var self={};var mClosedTop=true;var mClosedBottom=true;var mClosedLeft=true;var mClosedRight=true;var mLineColor=[0,0,0];var mLineWidth=.5;var mAmbientColor=[0,0,0];var mFillColor=[0,0,0];var mSpecularColor=[1,1,1];var mAmbientReflection=1;var mColorReflection=1;var mSpecularReflection=1;var mShininessVal=10;var mPaletteFloor;var mPaletteCeil;var mPaletteFloorColor=[1,0,-1];var mPaletteCeilColor=[-1,0,1];var mDrawLines=false;var mDrawFill=true;var mTransparency=0;var mProjChangeListener;var mMeshChangeListener;self.setProjChangeListener=function(listener){mProjChangeListener=listener};self.setMeshChangeListener=function(listener){mMeshChangeListener=listener};self.setClosedTop=function(closed){if(closed!=mClosedTop){mClosedTop=closed;if(mMeshChangeListener)mMeshChangeListener("closedtop")}};self.getClosedTop=function(){return mClosedTop};self.setClosedBottom=function(closed){if(closed!=mClosedBottom){mClosedBottom=closed;if(mMeshChangeListener)mMeshChangeListener("closedbottom")}};self.getClosedBottom=function(){return mClosedBottom};self.setClosedLeft=function(closed){if(closed!=mClosedLeft){mClosedLeft=closed;if(mMeshChangeListener)mMeshChangeListener("closedleft")}};self.getClosedLeft=function(){return mClosedLeft};self.setClosedRight=function(closed){if(closed!=mClosedRight){mClosedRight=closed;if(mMeshChangeListener)mMeshChangeListener("closedright")}};self.getClosedRight=function(){return mClosedRight};self.setDrawLines=function(draw){if(draw!=mDrawLines){mDrawLines=draw;if(mProjChangeListener)mProjChangeListener("drawlines")}};self.getDrawLines=function(){return mDrawLines};self.setLineColor=function(color){if(typeof color==="string")color=EJSS_TOOLS.DisplayColors.getArrayColor(color);if(!EJSS_TOOLS.compareArrays(color,mLineColor)){mLineColor=color.slice();if(mProjChangeListener)mProjChangeListener("linecolor")}return self};self.getLineColor=function(){return mLineColor};self.setLineWidth=function(width){if(width!=mLineWidth){mLineWidth=width;if(mProjChangeListener)mProjChangeListener("linewidth")}};self.getLineWidth=function(){return mLineWidth};self.setDrawFill=function(draw){if(draw!=mDrawFill){mDrawFill=draw;if(mProjChangeListener)mProjChangeListener("drawfill")}};self.getDrawFill=function(){return mDrawFill};self.setFillColor=function(color){if(typeof color==="string")color=EJSS_TOOLS.DisplayColors.getArrayColor(color);if(!EJSS_TOOLS.compareArrays(color,mFillColor)){mFillColor=color.slice();if(mProjChangeListener)mProjChangeListener("fillcolor")}};self.getFillColor=function(){return mFillColor};self.setAmbientColor=function(color){if(typeof color==="string")color=EJSS_TOOLS.DisplayColors.getArrayColor(color);if(!EJSS_TOOLS.compareArrays(color,mAmbientColor)){mAmbientColor=color.slice();if(mProjChangeListener)mProjChangeListener("ambientcolor")}};self.getAmbientColor=function(){return mAmbientColor};self.setSpecularColor=function(color){if(typeof color==="string")color=EJSS_TOOLS.DisplayColors.getArrayColor(color);if(!EJSS_TOOLS.compareArrays(color,mSpecularColor)){mSpecularColor=color.slice();if(mProjChangeListener)mProjChangeListener("specularcolor")}};self.getSpecularColor=function(){return mSpecularColor};self.setAmbientReflection=function(k){if(mAmbientReflection!=k){mAmbientReflection=k;if(mProjChangeListener)mProjChangeListener("ambientreflection")}};self.getAmbientReflection=function(){return mAmbientReflection};self.setColorReflection=function(k){if(mColorReflection!=k){mColorReflection=k;if(mProjChangeListener)mProjChangeListener("colorreflection")}};self.getColorReflection=function(){return mColorReflection};self.setSpecularReflection=function(k){if(mSpecularReflection!=k){mSpecularReflection=k;if(mProjChangeListener)mProjChangeListener("specularreflection")}};self.getSpecularReflection=function(){return mSpecularReflection};self.setShininessVal=function(shininess){if(mShininessVal!=shininess){mShininessVal=shininess;if(mProjChangeListener)mProjChangeListener("shininess")}};self.getShininessVal=function(){return mShininessVal};self.setTransparency=function(transparency){if(transparency!=mTransparency){mTransparency=transparency;if(mProjChangeListener)mProjChangeListener("transparency")}};self.getTransparency=function(){return mTransparency};self.setPaletteFloor=function(floor){if(floor&&!EJSS_TOOLS.compareArrays(floor,mPaletteFloor)){mPaletteFloor=floor.slice();if(mProjChangeListener)mProjChangeListener("palettefloor")}};self.getPaletteFloor=function(){return mPaletteFloor};self.setPaletteCeil=function(ceil){if(ceil&&!EJSS_TOOLS.compareArrays(ceil,mPaletteCeil)){mPaletteCeil=ceil.slice();if(mProjChangeListener)mProjChangeListener("paletteceil")}};self.getPaletteCeil=function(){return mPaletteCeil};self.setPaletteFloorColor=function(color){if(!EJSS_TOOLS.compareArrays(color,mPaletteFloorColor)){mPaletteFloorColor=color.slice();if(mProjChangeListener)mProjChangeListener("palettefloorcolor")}};self.getPaletteFloorColor=function(){return mPaletteFloorColor};self.setPaletteCeilColor=function(color){if(!EJSS_TOOLS.compareArrays(color,mPaletteCeilColor)){mPaletteCeilColor=color.slice();if(mProjChangeListener)mProjChangeListener("paletteceilcolor")}};self.getPaletteCeilColor=function(){return mPaletteCeilColor};return self};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Transformation={registerProperties:function(element,controller){element.setController(controller);controller.registerProperty("Parent",element.setParent,element.getParent);controller.registerProperty("Axis",element.setAxis,element.getAxis);controller.registerProperty("Angle",element.setAngle,element.getAngle);controller.registerProperty("Origin",element.setOrigin,element.getOrigin)}};EJSS_DRAWING3D.rotationX=function(mName){var self=EJSS_DRAWING3D.transformation();self.setAxis([1,0,0]);return self};EJSS_DRAWING3D.rotationY=function(mName){var self=EJSS_DRAWING3D.transformation();self.setAxis([0,1,0]);return self};EJSS_DRAWING3D.rotationZ=function(mName){var self=EJSS_DRAWING3D.transformation();self.setAxis([0,0,1]);return self};EJSS_DRAWING3D.transformation=function(mName){var self={};var mParent=null;var mArray=[0,0,0,1,0,0,0];var mController={propertiesChanged:function(){},invokeAction:function(){}};self.getArray=function(){return mArray};self.setChanged=function(changed){if(changed)mParent.setProjChanged(true)};self.setParent=function(parent){if(mParent){mParent.removeExtraTransformation(self)}mParent=parent;if(mParent){mParent.addExtraTransformation(self)}};self.getParent=function(){return mParent};self.setAngle=function(angle){mArray[0]=angle};self.getAngle=function(){return mArray[0]};self.setAxis=function(axis){mArray[1]=axis[0];mArray[2]=axis[1];mArray[3]=axis[2]};self.getAxis=function(){return mArray.slice(1,4)};self.setOrigin=function(origin){mArray[4]=origin[0];mArray[5]=origin[1];mArray[6]=origin[2]};self.getOrigin=function(){return mArray.slice(5)};self.getController=function(){return mController};self.setController=function(controller){mController=controller};self.registerProperties=function(controller){EJSS_DRAWING3D.Transformation.registerProperties(self,controller)};return self};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.analyticCurve=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.analyticSurface=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.arrow=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.basic=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.box=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.cylinder=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.ellipsoid=function(mGL,mElement){};var hasFloat32Array=typeof Float32Array!="undefined";function Matrix(){var m=Array.prototype.concat.apply([],arguments);if(!m.length){m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}this.m=hasFloat32Array?new Float32Array(m):m}Matrix.prototype={inverse:function(){return Matrix.inverse(this,new Matrix)},transpose:function(){return Matrix.transpose(this,new Matrix)},multiply:function(matrix){return Matrix.multiply(this,matrix,new Matrix)},transformPoint:function(v){var m=this.m;return new Vector(m[0]*v.x+m[1]*v.y+m[2]*v.z+m[3],m[4]*v.x+m[5]*v.y+m[6]*v.z+m[7],m[8]*v.x+m[9]*v.y+m[10]*v.z+m[11]).divide(m[12]*v.x+m[13]*v.y+m[14]*v.z+m[15])},transformVector:function(v){var m=this.m;return new Vector(m[0]*v.x+m[1]*v.y+m[2]*v.z,m[4]*v.x+m[5]*v.y+m[6]*v.z,m[8]*v.x+m[9]*v.y+m[10]*v.z)}};Matrix.inverse=function(matrix,result){result=result||new Matrix;var m=matrix.m,r=result.m;r[0]=m[5]*m[10]*m[15]-m[5]*m[14]*m[11]-m[6]*m[9]*m[15]+m[6]*m[13]*m[11]+m[7]*m[9]*m[14]-m[7]*m[13]*m[10];r[1]=-m[1]*m[10]*m[15]+m[1]*m[14]*m[11]+m[2]*m[9]*m[15]-m[2]*m[13]*m[11]-m[3]*m[9]*m[14]+m[3]*m[13]*m[10];r[2]=m[1]*m[6]*m[15]-m[1]*m[14]*m[7]-m[2]*m[5]*m[15]+m[2]*m[13]*m[7]+m[3]*m[5]*m[14]-m[3]*m[13]*m[6];r[3]=-m[1]*m[6]*m[11]+m[1]*m[10]*m[7]+m[2]*m[5]*m[11]-m[2]*m[9]*m[7]-m[3]*m[5]*m[10]+m[3]*m[9]*m[6];r[4]=-m[4]*m[10]*m[15]+m[4]*m[14]*m[11]+m[6]*m[8]*m[15]-m[6]*m[12]*m[11]-m[7]*m[8]*m[14]+m[7]*m[12]*m[10];r[5]=m[0]*m[10]*m[15]-m[0]*m[14]*m[11]-m[2]*m[8]*m[15]+m[2]*m[12]*m[11]+m[3]*m[8]*m[14]-m[3]*m[12]*m[10];r[6]=-m[0]*m[6]*m[15]+m[0]*m[14]*m[7]+m[2]*m[4]*m[15]-m[2]*m[12]*m[7]-m[3]*m[4]*m[14]+m[3]*m[12]*m[6];r[7]=m[0]*m[6]*m[11]-m[0]*m[10]*m[7]-m[2]*m[4]*m[11]+m[2]*m[8]*m[7]+m[3]*m[4]*m[10]-m[3]*m[8]*m[6];r[8]=m[4]*m[9]*m[15]-m[4]*m[13]*m[11]-m[5]*m[8]*m[15]+m[5]*m[12]*m[11]+m[7]*m[8]*m[13]-m[7]*m[12]*m[9];r[9]=-m[0]*m[9]*m[15]+m[0]*m[13]*m[11]+m[1]*m[8]*m[15]-m[1]*m[12]*m[11]-m[3]*m[8]*m[13]+m[3]*m[12]*m[9];r[10]=m[0]*m[5]*m[15]-m[0]*m[13]*m[7]-m[1]*m[4]*m[15]+m[1]*m[12]*m[7]+m[3]*m[4]*m[13]-m[3]*m[12]*m[5];r[11]=-m[0]*m[5]*m[11]+m[0]*m[9]*m[7]+m[1]*m[4]*m[11]-m[1]*m[8]*m[7]-m[3]*m[4]*m[9]+m[3]*m[8]*m[5];r[12]=-m[4]*m[9]*m[14]+m[4]*m[13]*m[10]+m[5]*m[8]*m[14]-m[5]*m[12]*m[10]-m[6]*m[8]*m[13]+m[6]*m[12]*m[9];r[13]=m[0]*m[9]*m[14]-m[0]*m[13]*m[10]-m[1]*m[8]*m[14]+m[1]*m[12]*m[10]+m[2]*m[8]*m[13]-m[2]*m[12]*m[9];r[14]=-m[0]*m[5]*m[14]+m[0]*m[13]*m[6]+m[1]*m[4]*m[14]-m[1]*m[12]*m[6]-m[2]*m[4]*m[13]+m[2]*m[12]*m[5];r[15]=m[0]*m[5]*m[10]-m[0]*m[9]*m[6]-m[1]*m[4]*m[10]+m[1]*m[8]*m[6]+m[2]*m[4]*m[9]-m[2]*m[8]*m[5];var det=m[0]*r[0]+m[1]*r[4]+m[2]*r[8]+m[3]*r[12];for(var i=0;i<16;i++)r[i]/=det;return result};Matrix.transpose=function(matrix,result){result=result||new Matrix;var m=matrix.m,r=result.m;r[0]=m[0];r[1]=m[4];r[2]=m[8];r[3]=m[12];r[4]=m[1];r[5]=m[5];r[6]=m[9];r[7]=m[13];r[8]=m[2];r[9]=m[6];r[10]=m[10];r[11]=m[14];r[12]=m[3];r[13]=m[7];r[14]=m[11];r[15]=m[15];return result};Matrix.multiply=function(left,right,result){result=result||new Matrix;var a=left.m,b=right.m,r=result.m;r[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];r[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];r[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];r[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];r[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];r[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];r[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14];r[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];r[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];r[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];r[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14]
;r[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];r[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];r[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];r[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];r[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];return result};Matrix.identity=function(result){result=result||new Matrix;var m=result.m;m[0]=m[5]=m[10]=m[15]=1;m[1]=m[2]=m[3]=m[4]=m[6]=m[7]=m[8]=m[9]=m[11]=m[12]=m[13]=m[14]=0;return result};Matrix.perspective=function(fov,aspect,near,far,result){var y=Math.tan(fov*Math.PI/360)*near;var x=y*aspect;return Matrix.frustum(-x,x,-y,y,near,far,result)};Matrix.frustum=function(l,r,b,t,n,f,result){result=result||new Matrix;var m=result.m;m[0]=2*n/(r-l);m[1]=0;m[2]=(r+l)/(r-l);m[3]=0;m[4]=0;m[5]=2*n/(t-b);m[6]=(t+b)/(t-b);m[7]=0;m[8]=0;m[9]=0;m[10]=-(f+n)/(f-n);m[11]=-2*f*n/(f-n);m[12]=0;m[13]=0;m[14]=-1;m[15]=0;return result};Matrix.ortho=function(l,r,b,t,n,f,result){result=result||new Matrix;var m=result.m;m[0]=2/(r-l);m[1]=0;m[2]=0;m[3]=-(r+l)/(r-l);m[4]=0;m[5]=2/(t-b);m[6]=0;m[7]=-(t+b)/(t-b);m[8]=0;m[9]=0;m[10]=-2/(f-n);m[11]=-(f+n)/(f-n);m[12]=0;m[13]=0;m[14]=0;m[15]=1;return result};Matrix.scale=function(x,y,z,result){result=result||new Matrix;var m=result.m;m[0]=x;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=y;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=z;m[11]=0;m[12]=0;m[13]=0;m[14]=0;m[15]=1;return result};Matrix.translate=function(x,y,z,result){result=result||new Matrix;var m=result.m;m[0]=1;m[1]=0;m[2]=0;m[3]=x;m[4]=0;m[5]=1;m[6]=0;m[7]=y;m[8]=0;m[9]=0;m[10]=1;m[11]=z;m[12]=0;m[13]=0;m[14]=0;m[15]=1;return result};Matrix.rotate=function(a,x,y,z,cx,cy,cz,result){if(!a||!x&&!y&&!z){return Matrix.identity(result)}result=result||new Matrix;var m=result.m;var d=Math.sqrt(x*x+y*y+z*z);x/=d;y/=d;z/=d;var c=Math.cos(a),s=Math.sin(a),t=1-c;m[0]=x*x*t+c;m[1]=x*y*t-z*s;m[2]=x*z*t+y*s;m[3]=cx-m[0]*cx-m[1]*cy-m[2]*cz;m[4]=y*x*t+z*s;m[5]=y*y*t+c;m[6]=y*z*t-x*s;m[7]=cy-m[4]*cx-m[5]*cy-m[6]*cz;m[8]=z*x*t-y*s;m[9]=z*y*t+x*s;m[10]=z*z*t+c;m[11]=cz-m[8]*cx-m[9]*cy-m[10]*cz;m[12]=0;m[13]=0;m[14]=0;m[15]=1;return result};Matrix.lookAt=function(ex,ey,ez,cx,cy,cz,ux,uy,uz,result){result=result||new Matrix;var m=result.m;var e=new Vector(ex,ey,ez);var c=new Vector(cx,cy,cz);var u=new Vector(ux,uy,uz);var f=e.subtract(c).unit();var s=u.cross(f).unit();var t=f.cross(s).unit();m[0]=s.x;m[1]=s.y;m[2]=s.z;m[3]=-s.dot(e);m[4]=t.x;m[5]=t.y;m[6]=t.z;m[7]=-t.dot(e);m[8]=f.x;m[9]=f.y;m[10]=f.z;m[11]=-f.dot(e);m[12]=0;m[13]=0;m[14]=0;m[15]=1;return result};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.mesh=function(mGL,id,options){};EJSS_WEBGLGRAPHICS.indexer=function(){var self={};var unique=[];var map={};self.getUnique=function(){return unique};self.add=function(obj){var key=JSON.stringify(obj);if(!(key in map)){map[key]=unique.length;unique.push(obj)}return map[key]};return self};EJSS_WEBGLGRAPHICS.buffer=function(mGL,target,type){var self={};var buffer=null;var target=target;var type=type;var mName="";var mData=[];self.setData=function(b){mData=b};self._0=function(name){mName=name};self.getBuffer=function(){return buffer};self.getName=function(){return mName};self.compile=function(tp){var data=[];for(var i=0,chunk=1e4;i<mData.length;i+=chunk){data=Array.prototype.concat.apply(data,mData.slice(i,i+chunk))}var spacing=mData.length?data.length/mData.length:0;if(spacing!=Math.round(spacing))throw"buffer elements not of consistent size, average size is "+spacing;buffer=buffer||mGL.createBuffer();buffer.length=data.length;buffer.spacing=spacing;mGL.bindBuffer(target,buffer);mGL.bufferData(target,new type(data),tp||mGL.STATIC_DRAW)};return self};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.plane=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.segment=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.Shader={};EJSS_WEBGLGRAPHICS.shader=function(mGL,mName,vertexSource,fragmentSource){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.spring=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.surface=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.text=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.Texture={};EJSS_WEBGLGRAPHICS.texture=function(mGL,width,height,options){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.trail=function(mGL,mElement){};var EJSS_WEBGLGRAPHICS=EJSS_WEBGLGRAPHICS||{};EJSS_WEBGLGRAPHICS.Utils={};EJSS_WEBGLGRAPHICS.Utils.regexMap=function(regex,text,callback){while((result=regex.exec(text))!=null){callback(result)}};EJSS_WEBGLGRAPHICS.Utils.isArray=function(obj){var str=Object.prototype.toString.call(obj);return str=="[object Array]"||str=="[object Float32Array]"};EJSS_WEBGLGRAPHICS.Utils.isNumber=function(obj){var str=Object.prototype.toString.call(obj);return str=="[object Number]"||str=="[object Boolean]"};function Vector(x,y,z){if(typeof x=="object"){this.x=x[0]||0;this.y=x[1]||0;this.z=x[2]||0}else{this.x=x||0;this.y=y||0;this.z=z||0}}Vector.prototype={setx:function(x){this.x=x},sety:function(y){this.y=y},setz:function(z){this.z=z},getx:function(){return this.x},gety:function(){return this.y},getz:function(){return this.z},negative:function(){return new Vector(-this.x,-this.y,-this.z)},add:function(v){if(v instanceof Vector)return new Vector(this.x+v.x,this.y+v.y,this.z+v.z);else return new Vector(this.x+v,this.y+v,this.z+v)},subtract:function(v){if(v instanceof Vector)return new Vector(this.x-v.x,this.y-v.y,this.z-v.z);else return new Vector(this.x-v,this.y-v,this.z-v)},multiply:function(v){if(v instanceof Vector)return new Vector(this.x*v.x,this.y*v.y,this.z*v.z);else return new Vector(this.x*v,this.y*v,this.z*v)},divide:function(v){if(v instanceof Vector)return new Vector(this.x/v.x,this.y/v.y,this.z/v.z);else return new Vector(this.x/v,this.y/v,this.z/v)},equals:function(v){return this.x==v.x&&this.y==v.y&&this.z==v.z},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z},cross:function(v){return new Vector(this.y*v.z-this.z*v.y,this.z*v.x-this.x*v.z,this.x*v.y-this.y*v.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},angle:function(v){return Math.acos(this.dot(v)/(this.length()*v.length()))},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},toArray:function(n){return[this.x,this.y,this.z].slice(0,n||3)},clone:function(){return new Vector(this.x,this.y,this.z)},init:function(x,y,z){this.x=x;this.y=y;this.z=z;return this}};Vector.negative=function(a,b){b.x=-a.x;b.y=-a.y;b.z=-a.z;return b};Vector.add=function(a,b,c){if(b instanceof Vector){c.x=a.x+b.x;c.y=a.y+b.y;c.z=a.z+b.z}else{c.x=a.x+b;c.y=a.y+b;c.z=a.z+b}return c};Vector.subtract=function(a,b,c){if(b instanceof Vector){c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z}else{c.x=a.x-b;c.y=a.y-b;c.z=a.z-b}return c};Vector.multiply=function(a,b,c){if(b instanceof Vector){c.x=a.x*b.x;c.y=a.y*b.y;c.z=a.z*b.z}else{c.x=a.x*b;c.y=a.y*b;c.z=a.z*b}return c};Vector.divide=function(a,b,c){if(b instanceof Vector){c.x=a.x/b.x;c.y=a.y/b.y;c.z=a.z/b.z}else{c.x=a.x/b;c.y=a.y/b;c.z=a.z/b}return c};Vector.cross=function(a,b,c){c.x=a.y*b.z-a.z*b.y;c.y=a.z*b.x-a.x*b.z;c.z=a.x*b.y-a.y*b.x;return c};Vector.unit=function(a,b){var length=a.length();b.x=a.x/length;b.y=a.y/length;b.z=a.z/length;return b};Vector.fromAngles=function(theta,phi){return new Vector(Math.cos(theta)*Math.cos(phi),Math.sin(phi),Math.sin(theta)*Math.cos(phi))};Vector.randomDirection=function(){return Vector.fromAngles(Math.random()*Math.PI*2,Math.asin(Math.random()*2-1))};Vector.min=function(a,b){return new Vector(Math.min(a.x,b.x),Math.min(a.y,b.y),Math.min(a.z,b.z))};Vector.max=function(a,b){return new Vector(Math.max(a.x,b.x),Math.max(a.y,b.y),Math.max(a.z,b.z))};Vector.lerp=function(a,b,fraction){return b.subtract(a).multiply(fraction).add(a)};Vector.fromArray=function(a){return new Vector(a[0],a[1],a[2])};var EJSS_GRAPHICS=EJSS_GRAPHICS||{};EJSS_GRAPHICS.WebGLGraphics={};EJSS_GRAPHICS.webGLGraphics=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Plane={};EJSS_DRAWING3D.plane=function(name){};EJSS_DRAWING3D.PlaneSet={};EJSS_DRAWING3D.planeSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Segment={};EJSS_DRAWING3D.segment=function(name){};EJSS_DRAWING3D.SegmentSet={};EJSS_DRAWING3D.segmentSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Sphere={};EJSS_DRAWING3D.sphere=function(name){};EJSS_DRAWING3D.SphereSet={};EJSS_DRAWING3D.sphereSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Spring={};EJSS_DRAWING3D.spring=function(name){};EJSS_DRAWING3D.SpringSet={};EJSS_DRAWING3D.springSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Surface={};EJSS_DRAWING3D.surface=function(name){};EJSS_DRAWING3D.SurfaceSet={};EJSS_DRAWING3D.surfaceSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Tetrahedron={};EJSS_DRAWING3D.tetrahedron=function(name){};EJSS_DRAWING3D.TetrahedronSet={};EJSS_DRAWING3D.tetrahedronSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Text={};EJSS_DRAWING3D.text=function(name){};EJSS_DRAWING3D.TextSet={};EJSS_DRAWING3D.textSet=function(mName){};var EJSS_DRAWING3D=EJSS_DRAWING3D||{};EJSS_DRAWING3D.Trail={};EJSS_DRAWING3D.trail=function(name){};EJSS_DRAWING3D.TrailSet={};EJSS_DRAWING3D.trailSet=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.ArrayPanel={};EJSS_INTERFACE.arrayPanel=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Audio={};EJSS_INTERFACE.audio=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.BoxPanel={registerProperties:function(element,controller){EJSS_INTERFACE.Panel.registerProperties(element,controller);controller.registerProperty("Draggable",element.setDraggable)},showOkDialog:function(message,okfunction,width){var mypanel=document.getElementById(".myBoxPanelOk")||EJSS_INTERFACE.boxPanel(".myBoxPanelOk").getDOMElement();var mybackpanel=document.getElementById(".myBoxPanelOk.back");var myMsg=document.getElementById(".myBoxPanelOk.msg");myMsg.style.visibility="visible";myMsg.innerHTML=message+"<br/>";var myOkButton=document.getElementById(".myBoxPanelOk.okbt");myOkButton.onclick=okfunction;myOkButton.style.display="inline";mypanel.style.width=width||"200px";if(mypanel.style.position=="fixed")mypanel.style.marginLeft=parseFloat(mypanel.style.width)/-2+"px";mypanel.style.visibility="visible";mybackpanel.style.visibility="visible"},showOkCancelDialog:function(message,okfunction,cancelfunction,width){var mypanel=document.getElementById(".myBoxPanelCancelOk")||EJSS_INTERFACE.boxPanel(".myBoxPanelCancelOk").getDOMElement();var mybackpanel=document.getElementById(".myBoxPanelCancelOk.back");var myMsg=document.getElementById(".myBoxPanelCancelOk.msg");myMsg.style.visibility="visible";myMsg.innerHTML=message+"<br/>";var myOkButton=document.getElementById(".myBoxPanelCancelOk.okbt");myOkButton.onclick=okfunction;myOkButton.style.display="inline";var myCancelButton=document.getElementById(".myBoxPanelCancelOk.cancelbt");myCancelButton.onclick=cancelfunction;myCancelButton.style.display="inline";mypanel.style.width=width||"200px";if(mypanel.style.position=="fixed")mypanel.style.marginLeft=parseFloat(mypanel.style.width)/-2+"px";mypanel.style.visibility="visible";mybackpanel.style.visibility="visible"},showInputDialog:function(message,okfunction,cancelfunction,width){var mypanel=document.getElementById(".BoxPanelInput")||EJSS_INTERFACE.boxPanel(".BoxPanelInput").getDOMElement();var mybackpanel=document.getElementById(".BoxPanelInput.back");var myMsg=document.getElementById(".BoxPanelInput.msg");myMsg.style.visibility="visible";myMsg.innerHTML=message;var myIn=document.getElementById(".BoxPanelInput.input");myIn.style.display="inline";var myOkButton=document.getElementById(".BoxPanelInput.okbt");myOkButton.onclick=function(){okfunction(myIn.value)};myOkButton.style.display="inline";var myCancelButton=document.getElementById(".BoxPanelInput.cancelbt");myCancelButton.onclick=cancelfunction;myCancelButton.style.display="inline";mypanel.style.width=width||"200px";if(mypanel.style.position=="fixed")mypanel.style.marginLeft=parseFloat(mypanel.style.width)/-2+"px";mypanel.style.visibility="visible";mybackpanel.style.visibility="visible"},showSelectDialog:function(message,options,okfunction,cancelfunction,size,width){var mypanel=document.getElementById(".BoxPanelSelect")||EJSS_INTERFACE.boxPanel(".BoxPanelSelect").getDOMElement();var mybackpanel=document.getElementById(".BoxPanelSelect.back");var myMsg=document.getElementById(".BoxPanelSelect.msg");myMsg.style.visibility="visible";myMsg.innerHTML=message;var mySelect=document.getElementById(".BoxPanelSelect.select");mySelect.innerHTML="";for(var i=0;i<options.text.length;i++){var option=document.createElement("option");if(option.value&&option.value[i])option.setAttribute("value",options.value[i]);option.innerHTML=options.text[i];mySelect.appendChild(option)}if(size)mySelect.size=size;mySelect.style.display="block";mySelect.style.margin="0 auto";var myOkButton=document.getElementById(".BoxPanelSelect.okbt");myOkButton.onclick=function(){okfunction(options.value[mySelect.selectedIndex])};myOkButton.style.display="inline";var myCancelButton=document.getElementById(".BoxPanelSelect.cancelbt");myCancelButton.onclick=cancelfunction;myCancelButton.style.display="inline";mypanel.style.width=width||"200px";if(mypanel.style.position=="fixed")mypanel.style.marginLeft=parseFloat(mypanel.style.width)/-2+"px";mypanel.style.visibility="visible";mybackpanel.style.visibility="visible"}};EJSS_INTERFACE.boxPanel=function(mName){var self=EJSS_INTERFACE.panel(mName);var offset={x:0,y:0};self.setVisibility=function(visible){mElement.style.visibility=visible;self.getStyle().setVisibility(visible)};self.setDraggable=function(draggable){if(draggable){self.getDOMElement().addEventListener("mousedown",mouseDown,false);self.getDOMElement().addEventListener("touchstart",mouseDown,false);window.addEventListener("mouseup",mouseUp,false);window.addEventListener("touchend",mouseUp,false)}else{self.getDOMElement().removeEventListener("mousedown",mouseDown,false);self.getDOMElement().removeEventListener("touchstart",mouseDown,false);window.removeEventListener("mouseup",mouseUp,false);window.removeEventListener("touchend",mouseUp,false)}};function mouseUp(){window.removeEventListener("mousemove",popupMove,true);window.removeEventListener("touchmove",popupMove,true)}function mouseDown(e){var box=self.getDOMElement().getBoundingClientRect();offset.x=e.clientX-box.left;offset.y=e.clientY-box.top;window.addEventListener("mousemove",popupMove,true)}function popupMove(e){self.getDOMElement().style.position="absolute";self.getDOMElement().style.margin="0px";var top=e.clientY-offset.y;var left=e.clientX-offset.x;self.getDOMElement().style.top=top+"px";self.getDOMElement().style.left=left+"px"}self.registerProperties=function(controller){EJSS_INTERFACE.BoxPanel.registerProperties(self,controller)};var mBackElement=document.createElement("div");document.body.appendChild(mBackElement);mBackElement.className="myBoxPanelBackground";mBackElement.id=mName+".back";mBackElement.style.backgroundColor="rgba(255, 255, 255, 0.3)";mBackElement.style.position="fixed";mBackElement.style.top="1%";mBackElement.style.left="1%";mBackElement.style.width="98%";mBackElement.style.height="98%";mBackElement.style.zIndex="99998";mBackElement.style.visibility="hidden";var mMsgElement=document.createElement("span");mMsgElement.id=mName+".msg";mMsgElement.style.visibility="hidden";self.getDOMElement().appendChild(mMsgElement);var mInputElement=document.createElement("input");mInputElement.id=mName+".input";mInputElement.type="text";mInputElement.style.display="none";mInputElement.size="20";self.getDOMElement().appendChild(mInputElement);var mSelectElement=document.createElement("select");mSelectElement.id=mName+".select";mSelectElement.style.display="none";mSelectElement.size="4";self.getDOMElement().appendChild(mSelectElement);var mOkBtElement=document.createElement("button");mOkBtElement.id=mName+".okbt";mOkBtElement.innerHTML="Ok";mOkBtElement.style.verticalAlign="middle";mOkBtElement.style.display="none";mOkBtElement.addEventListener("click",function(){document.getElementById(mName).style.visibility="hidden";document.getElementById(mName+".back").style.visibility="hidden";document.getElementById(mName+".msg").style.visibility="hidden";document.getElementById(mName+".input").style.display="none";document.getElementById(mName+".okbt").style.display="none";document.getElementById(mName+".cancelbt").style.display="none"});self.getDOMElement().appendChild(mOkBtElement);var mCancelBtElement=document.createElement("button");mCancelBtElement.id=mName+".cancelbt";mCancelBtElement.innerHTML="Cancel";mCancelBtElement.style.verticalAlign="middle";mCancelBtElement.style.display="none";mCancelBtElement.addEventListener("click",function(){document.getElementById(mName).style.visibility="hidden";document.getElementById(mName+".back").style.visibility="hidden";document.getElementById(mName+".msg").style.visibility="hidden";document.getElementById(mName+".input").style.display="none";document.getElementById(mName+".okbt").style.display="none";document.getElementById(mName+".cancelbt").style.display="none"});self.getDOMElement().appendChild(mCancelBtElement);self.getDOMElement().className="BoxPanel";self.getStyle().setCSS({position:"fixed",top:"25%",left:"50%"});self.getStyle().setCSS({zIndex:"99999",visibility:"hidden"});self.getStyle().setCSS({marginLeft:"-250px",width:"500px"});self.getStyle().setCSS({background:"lightgray"});self.getStyle().setCSS({borderWidth:"1px"});self.getStyle().setCSS({borderStyle:"solid"});self.getStyle().setCSS({borderColor:"red"});self.getStyle().setCSS({overflow:"hidden",wordWrap:"break-word"});self.setDraggable(true);return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Button={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Text",element.setText);controller.registerProperty("Disabled",element.setDisabled);controller.registerProperty("ImageUrl",element.setImageUrl);controller.registerAction("OnClick");controller.registerAction("OnPress");controller.registerAction("OnRelease")}};EJSS_INTERFACE.button=function(mName){var self=EJSS_INTERFACE.element(mName);var mUrl="";var mText="";self.setDisabled=function(disabled){self.getDOMElement().disabled=disabled};self.getDisabled=function(){return self.getDOMElement().disabled};self.setText=function(text){if(mText==text)return;mText=text;applyChange()};self.getText=function(){return mText};self.setImageUrl=function(url){var newUrl=self.getResourcePath(url);if(newUrl==mUrl)return;mUrl=newUrl;applyChange()};function applyChange(){self.getDOMElement().innerHTML="";if(mUrl.length>0)self.getDOMElement().innerHTML='<img style="vertical-align:inherit;-webkit-touch-callout:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;" src="'+mUrl+'"/>';if(mText.length>0)self.getDOMElement().innerHTML+='<span style="white-space:pre;-webkit-touch-callout:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;vertical-align:inherit;">'+mText.toString()+"</span>"}self.getImageUrl=function(){return mUrl};self.registerProperties=function(controller){EJSS_INTERFACE.Button.registerProperties(self,controller)};var mElement=document.createElement("button");mElement.id=mName;mElement.style.verticalAlign="middle";mElement.style.webkitTouchCallout="none";document.body.appendChild(mElement);self.setDOMElement(mElement);self.getDOMElement().oncontextmenu=function(e){e.preventDefault();e.stopPropagation();return false};self.getDOMElement().onmousedown=function(e){var controller=self.getController();if(controller)controller.invokeAction("OnPress").reportInteractions();e.preventDefault();e.stopPropagation();return false};self.getDOMElement().addEventListener("touchstart",function(e){var controller=self.getController();if(controller)controller.invokeAction("OnPress").reportInteractions();e.preventDefault();e.stopPropagation();return false});self.getDOMElement().onmouseup=function(e){var controller=self.getController();if(controller){controller.invokeAction("OnRelease");controller.invokeAction("OnClick").reportInteractions()}e.preventDefault();e.stopPropagation();return false};self.getDOMElement().addEventListener("touchend",function(e){var controller=self.getController();if(controller){controller.invokeAction("OnRelease");controller.invokeAction("OnClick").reportInteractions()}e.preventDefault();e.stopPropagation();return false});return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Canvas={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Height",element.setHeight);controller.registerProperty("Width",element.setWidth);controller.registerProperty("ImageData",element.setImageData);controller.registerProperty("Enabled",element.setEnabled,element.isEnabled);controller.registerAction("OnPress",element.getInteractionPoint);controller.registerAction("OnDrag",element.getInteractionPoint);controller.registerAction("OnRelease",element.getInteractionPoint);controller.registerAction("OnEnter",element.getInteractionPoint);controller.registerAction("OnExit",element.getInteractionPoint);controller.registerAction("OnMove",element.getInteractionPoint)}};EJSS_INTERFACE.canvas=function(mName){var self=EJSS_INTERFACE.element(mName);var mHeight=0;var mWidth=0;var mLastPoint=[0,0];var mImageData;var mDragging=false;var mEnabled;self.render=function(){if(mImageData)mContext.putImageData(mImageData,0,0)};self.setImageData=function(data){if(!mImageData)mImageData=mContext.createImageData(mWidth,mHeight);if(data.data)data=data.data;for(var i=0;i<data.length;i++)mImageData.data[i]=data[i]};self.clear=function(){mContext.clearRect(0,0,mWidth,mHeight)};self.setWidth=function(width){var element=self.getDOMElement();if(mWidth!=width){mWidth=width;if(typeof width==="string"&&width.indexOf("%")!=-1&&element.parentNode&&element.parentNode.offsetWidth){width=element.parentNode.offsetWidth*parseFloat(width)/100}else if(typeof width==="string"){width=parseFloat(width)}if(typeof width==="number"){element.setAttribute("width",width)}return true}return false};self.getWidth=function(){var element=self.getDOMElement();if(typeof mWidth==="string"&&mWidth.indexOf("%")!=-1&&element.parentNode&&element.parentNode.offsetWidth){var value=element.parentNode.offsetWidth*parseFloat(mWidth)/100;if(typeof value==="number"){var orig=element.getAttribute("width");if(value!=orig)element.setAttribute("width",value)}}return mWidth};self.setHeight=function(height){var element=self.getDOMElement();if(mHeight!=height){mHeight=height;if(typeof height==="string"&&height.indexOf("%")!=-1&&element.parentNode&&element.parentNode.offsetHeight){height=element.parentNode.offsetHeight*parseFloat(height)/100}self.getDOMElement().setAttribute("height",height);return true}return false};self.getHeight=function(){var element=self.getDOMElement();if(typeof mHeight==="string"&&mHeight.indexOf("%")!=-1&&element.parentNode&&element.parentNode.offsetHeight){value=element.parentNode.offsetHeight*parseFloat(mHeight)/100;if(typeof value==="number"){var orig=element.getAttribute("height");if(value!=orig)element.setAttribute("height",value)}}return mHeight};self.getContext=function(){return mContext};self.registerProperties=function(controller){EJSS_INTERFACE.Canvas.registerProperties(self,controller)};self.setEnabled=function(enabled){mEnabled=enabled;var element=self.getDOMElement();if(mEnabled){element.onmousedown=handlerOnPress;element.onmouseup=handlerOnRelease;element.onmouseover=handlerOnEnter;element.onmouseout=handlerOnExit;element.onmousemove=handlerOnMove;element.addEventListener("touchstart",handlerOnPress,false);element.addEventListener("touchend",handlerOnRelease,false);element.addEventListener("touchmove",handlerOnMove,false)}else{element.onmousedown=undefined;element.onmouseup=undefined;element.onmouseover=undefined;element.onmouseout=undefined;element.onmousemove=undefined;element.removeEventListener("touchstart",handlerOnPress);element.removeEventListener("touchend",handlerOnRelease);element.removeEventListener("touchmove",handlerOnMove)}};self.isEnabled=function(){return mEnabled};self.getInteractionPoint=self.getMousePosition=function(){return mLastPoint};function getLastEventLocation(e){var pos=EJSS_GRAPHICS.CanvasGraphics.getOffsetRect(self);var locations=[];if(typeof e.changedTouches!="undefined"){for(var i=0;i<e.changedTouches.length;i++){locations[i]=[];locations[i][0]=e.changedTouches[i].pageX-window.pageXOffset-pos.left;locations[i][1]=e.changedTouches[i].pageY-window.pageYOffset-pos.top}}else{locations[0]=[];locations[0][0]=(e.clientX||e.x)-pos.left;locations[0][1]=(e.clientY||e.y)-pos.top}return locations[0]}function handlerOnPress(e){e.preventDefault();var controller=self.getController();if(controller){mLastPoint=getLastEventLocation(e);controller.invokeAction("OnPress").reportInteractions()}mDragging=true;return false}function handlerOnRelease(e){e.preventDefault();var controller=self.getController();if(mDragging&&controller){mLastPoint=getLastEventLocation(e);controller.invokeAction("OnRelease").reportInteractions()}mDragging=false;return false}function handlerOnEnter(e){e.preventDefault();var controller=self.getController();mDragging=false;if(controller){mLastPoint=getLastEventLocation(e);controller.invokeAction("OnEnter").reportInteractions()}return false}function handlerOnExit(e){e.preventDefault();var controller=self.getController();mDragging=false;if(controller){mLastPoint=getLastEventLocation(e);controller.invokeAction("OnExit").reportInteractions()}return false}function handlerOnMove(e){e.preventDefault();var controller=self.getController();if(controller){mLastPoint=getLastEventLocation(e);if(mDragging)controller.invokeAction("OnDrag").reportInteractions();else controller.invokeAction("OnMove").reportInteractions()}return false}var mElement=document.createElement("canvas");mElement.setAttribute("id",mName);mElement.style.overflow="hidden";var mContext=mElement.getContext("2d");document.body.appendChild(mElement);self.setDOMElement(mElement);self.setEnabled(true);self.setWidth(500);self.setHeight(500);return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.CheckBox={};EJSS_INTERFACE.checkBox=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.ComboBox={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Options",element.setOptions,element.getOptions);controller.registerProperty("SelectedOptions",element.setSelectedOptions,element.getSelectedOptions);controller.registerProperty("Multiple",element.setMultiple);controller.registerProperty("Size",element.setSize);controller.registerAction("OnChange");controller.registerAction("OnFocus")}};EJSS_INTERFACE.comboBox=function(mName){var self=EJSS_INTERFACE.element(mName);var mOptions=[];self.registerProperties=function(controller){EJSS_INTERFACE.ComboBox.registerProperties(self,controller)};self.setSize=function(size){self.getDOMElement().size=size};self.getSize=function(){return self.getDOMElement().size};self.setMultiple=function(multiple){self.getDOMElement().multiple=multiple};self.getMultiple=function(){return self.getDOMElement().multiple};self.setSelectedOptions=function(options){var dom=self.getDOMElement();for(var i=0;i<dom.options.length;i++){dom.options[i].selected=false;for(var j=0;j<options.length;j++){if(dom.options[i].value==options[j]){dom.options[i].selected=true;break}}}};self.getSelectedOptions=function(){var mSelectedOptions=[];var dom=self.getDOMElement();for(var j=0,i=0;i<dom.options.length;i++){if(dom.options[i].selected)mSelectedOptions[j++]=dom.options[i].value}return mSelectedOptions};self.getSelectedOptionsIndexes=function(){var mSelectedOptionsIs=[];var dom=self.getDOMElement();for(var j=0,i=0;i<dom.options.length;i++){if(dom.options[i].selected)mSelectedOptionsIs[j++]=i}return mSelectedOptionsIs};self.setOptions=function(values){if(EJSS_TOOLS.compareArrays(mOptions,values))return;mOptions=[];var selected=self.getSelectedOptions();var dom=self.getDOMElement();dom.innerHTML="";for(var i=0;i<values.length;i++){var option=document.createElement("option");option.setAttribute("value",values[i]);option.innerHTML=values[i];dom.appendChild(option);mOptions[i]=values[i]}self.setSelectedOptions(selected)};self.getOptions=function(){var copyOptions=[];var dom=self.getDOMElement();for(var i=0;i<dom.options.length;i++){copyOptions[i]=dom.options[i].value}return copyOptions};self.setEditable=function(editable){self.getDOMElement().readOnly=!editable};self.getEditable=function(){return!self.getDOMElement().readOnly};var mElement=document.createElement("select");mElement.id=mName;document.body.appendChild(mElement);self.setDOMElement(mElement);self.getDOMElement().onfocus=function(){var controller=self.getController();self.getStyle().setBackgroundColor("white");if(controller){controller.propertiesChanged("Options");controller.invokeAction("OnFocus");controller.reportInteractions()}};self.getDOMElement().onchange=function(){var controller=self.getController();self.getStyle().setBackgroundColor("white");if(controller){controller.propertiesChanged("SelectedOptions");controller.invokeAction("OnChange");controller.reportInteractions()}};self.getDOMElement().onkeydown=function(){self.getStyle().setBackgroundColor("yellow")};self.getDOMElement().ontouchend=function(e){e.stopPropagation()};self.getDOMElement().onmouseup=function(e){e.stopPropagation()};return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.DataTable={};EJSS_INTERFACE.dataTable=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Element={registerProperties:function(element,controller){element.setController(controller);controller.registerProperty("Tooltip",element.setTitle);controller.registerProperty("Foreground",element.getStyle().setColor);controller.registerProperty("Background",element.getStyle().setBackgroundColor);controller.registerProperty("BackgroundImage",element.getStyle().setBackgroundImage);controller.registerProperty("BorderWidth",element.getStyle().setBorderWidth);controller.registerProperty("BorderColor",element.getStyle().setBorderColor);controller.registerProperty("BorderStyle",element.getStyle().setBorderStyle);controller.registerProperty("Padding",element.getStyle().setPadding);controller.registerProperty("Width",element.getStyle().setWidth,element.getStyle().getWidth);controller.registerProperty("Height",element.getStyle().setHeight,element.getStyle().getHeight);controller.registerProperty("LineHeight",element.getStyle().setLineHeight,element.getStyle().getLineHeight);controller.registerProperty("TextAlign",element.getStyle().setTextAlign);controller.registerProperty("VerticalAlign",element.getStyle().setVerticalAlign);controller.registerProperty("Visibility",element.getStyle().setVisibility);controller.registerProperty("Display",element.getStyle().setDisplay);controller.registerProperty("Disabled",element.setDisabled);controller.registerProperty("Float",element.getStyle().setFloat);controller.registerProperty("Position",element.getStyle().setPosition);controller.registerProperty("Left",element.getStyle().setLeft);controller.registerProperty("Top",element.getStyle().setTop);controller.registerProperty("Bottom",element.getStyle().setBottom);controller.registerProperty("Overflow",element.getStyle().setOverflow);controller.registerProperty("BoxShadow",element.getStyle().setShadow);controller.registerProperty("Margin",element.getStyle().setMargin);controller.registerProperty("Parent",element.setParent);controller.registerProperty("ClassName",element.setClassName);controller.registerProperty("CSS",element.getStyle().setCSS);controller.registerProperty("Font",element.getStyle().setFont);controller.registerProperty("FontFamily",element.getStyle().setFontFamily);controller.registerProperty("FontSize",element.getStyle().setFontSize);controller.registerProperty("LetterSpacing",element.getStyle().setLetterSpacing);controller.registerProperty("OutlineColor",element.getStyle().setOutlineColor);controller.registerProperty("FontWeight",element.getStyle().setFontWeight);controller.registerProperty("FillColor",element.getStyle().setFillColor);controller.registerProperty("FontStyle",element.getStyle().setFontStyle);controller.registerProperty("Transform",element.getStyle().setTransform);controller.registerProperty("WhiteSpace",element.getStyle().setWhiteSpace)}};EJSS_INTERFACE.element=function(mName){var self={};var mDOMElement;var mParent;var mStyle=EJSS_INTERFACE.style(mName);var mController=null;self.getDOMElement=function(){return mDOMElement};self.setDOMElement=function(element){mDOMElement=element};self.setParent=function(parent){mParent=parent;if(typeof parent=="string"){var domObject=document.getElementById(parent);domObject.appendChild(self.getDOMElement())}else if(parent.getDOMElement){parent.appendChild(self)}else{parent.appendChild(self.getDOMElement())}};self.getParent=function(){return mParent};self.getName=function(){return mName};self.getResourcePath=function(filename){return filename};self.setClassName=function(name){self.getDOMElement().className=name};self._23Name=function(){return self.getDOMElement().className};self.setDisabled=function(disabled){self.getDOMElement().disabled=disabled};self.getDisabled=function(){return self.getDOMElement().disabled};self.setTitle=function(title){self.getDOMElement().title=title};self.getTitle=function(){return self.getDOMElement().title};self.getStyle=function(){return mStyle};self.getController=function(){return mController};self.setController=function(controller){mController=controller};self.registerProperties=function(controller){EJSS_INTERFACE.Element.registerProperties(self,controller)};return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.FileUpload={registerProperties:function(element,controller){EJSS_INTERFACE.Button.registerProperties(element,controller);controller.registerProperty("Accept",element.setAccept,element.getAccpet);controller.registerProperty("Multiple",element.setMultiple,element.getMultiple);controller.registerAction("OnChange")}};EJSS_INTERFACE.fileUpload=function(mName){var self=EJSS_INTERFACE.button(mName);var mTarget={};self.getValue=function(){return self.getDOMElement().value};self.getTarget=function(){return mTarget};self.getAccept=function(){return self.getDOMElement().accept};self.setAccept=function(accept){self.getDOMElement().accept=accept};self.getMultiple=function(){return self.getDOMElement().multiple};self.setMultiple=function(multiple){self.getDOMElement().multiple=multiple};self.registerProperties=function(controller){EJSS_INTERFACE.FileUpload.registerProperties(self,controller)};var mElement=document.createElement("input");mElement.id=mName;mElement.type="file";mElement.style.display="none";self.getDOMElement().onmousedown=function(e){mElement.click();e.preventDefault();e.stopPropagation();return false};self.getDOMElement().ontouchstart=function(e){mElement.click();e.preventDefault();e.stopPropagation();return false};mElement.onchange=function(event){mTarget=event.target;var controller=self.getController();if(controller){controller.invokeAction("OnChange");controller.reportInteractions()}};return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.FunctionField={};EJSS_INTERFACE.functionField=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Html={};EJSS_INTERFACE.html=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Image={};EJSS_INTERFACE.image=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.ImageAndTextButton={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Text",element.setText);controller.registerProperty("ImageUrl",element.setImageUrl);controller.registerAction("OnClick")}};EJSS_INTERFACE.imageAndTextButton=function(mName){var self=EJSS_INTERFACE.element(mName);var mText="";var mUrl="";self.setText=function(text){mText=text.toString();self.getDOMElement().innerHTML=mUrl+mText};self.getText=function(){return mText};self.setImageUrl=function(url){mUrl='<img src="'+self.getResourcePath(url)+'"/>';self.getDOMElement().innerHTML=mUrl+mText};self.getImageUrl=function(){return mUrl};self.registerProperties=function(controller){EJSS_INTERFACE.ImageAndTextButton.registerProperties(self,controller)};var mElement=document.createElement("button");mElement.id=mName;mElement.style.borderStyle="none";mElement.style.background="inherit";mElement.style.cursor="inherit";mElement.style.webkitBoxShadow="inset 0 0px 0 rgba(255,255,255,0),0 0px 0px rgba(0,0,0,0)";document.body.appendChild(mElement);self.setDOMElement(mElement);self.getDOMElement().onclick=function(e){var controller=self.getController();if(controller)controller.invokeAction("OnClick").reportInteractions();e.preventDefault();e.stopPropagation();return false};return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Label={};EJSS_INTERFACE.label=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.MathML={};EJSS_INTERFACE.mathML=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Media={};EJSS_INTERFACE.media=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.MotionJPEG={};EJSS_INTERFACE.motionJPEG=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.NumberField={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Value",element.setValue,element.getValue);controller.registerProperty("Editable",element.setEditable);controller.registerProperty("Format",element.setFormat);controller.registerProperty("Size",element.setSize);controller.registerAction("OnChange")}};EJSS_INTERFACE.numberField=function(mName){var self=EJSS_INTERFACE.element(mName);var mDigits=3;var mCNotation=false;var mEdition=false;var mTmp="";self.registerProperties=function(controller){EJSS_INTERFACE.NumberField.registerProperties(self,controller)};self.enableEPub=function(){if(self.getDOMElement().disabled)self.getDOMElement().disabled=false};if(typeof _isEPub!=="undefined"&&_isEPub){self.render=function(){self.enableEPub()}}self.setValue=function(value){if(!mEdition){if(typeof value=="undefined")self.getDOMElement().value="value undefined";else{if(!isNaN(parseFloat(value))&&isFinite(value)){if(mCNotation){self.getDOMElement().value=parseFloat(value).toExponential(mDigits)}else{self.getDOMElement().value=parseFloat(value).toFixed(mDigits)}}else if(value===Number.POSITIVE_INFINITY){self.getDOMElement().value=""}else if(value===Number.NEGATIVE_INFINITY){self.getDOMElement().value="-"}else if(isNaN(value)){self.getDOMElement().value=""}}}};self.getValue=function(){var value=self.getDOMElement().value;if(!isNaN(parseFloat(value))&&isFinite(value)){value=parseFloat(value)}else if(value===""){value=Number.POSITIVE_INFINITY}else if(value==="-"){value=Number.NEGATIVE_INFINITY}else if(value===""){value=Number.NaN}return value};self.setEditable=function(editable){self.getDOMElement().readOnly=!editable;if(editable)self.getStyle().setBackgroundColor("white");else self.getStyle().setBackgroundColor("lightgrey")};self.getEditable=function(){return!self.getDOMElement().readOnly};self.setSize=function(value){self.getDOMElement().size=value};self.getSize=function(){return self.getDOMElement().size};self.setFormat=function(format){var index=format.indexOf(".");var indexE=format.toUpperCase().indexOf("E");if(indexE==-1){var digits=0
;if(index>=0)digits=Number(format.length-index-1);if(mCNotation||mDigits!=digits){mDigits=digits;mCNotation=false;self.setValue(self.getValue())}}else{var digits=0;if(index>=0)digits=Number(indexE-index-1);if(!mCNotation||mDigits!=digits){mDigits=digits;mCNotation=true;self.setValue(self.getValue())}}};function checkValue(){var value=self.getDOMElement().value;if(!isNaN(parseFloat(value))&&isFinite(value)){self.getStyle().setBackgroundColor("white");if(mTmp!=value){var controller=self.getController();if(controller){controller.propertiesChanged("Value");controller.invokeAction("OnChange");controller.reportInteractions()}}}else if(value===""||value==="-"||value==="")self.getStyle().setBackgroundColor("white");else{self.getStyle().setBackgroundColor("red");return false}return true}var mElement=document.createElement("input");mElement.type="tel";mElement.id=mName;mElement.value=0;document.body.appendChild(mElement);self.setDOMElement(mElement);self.getDOMElement().onkeydown=function(key){var dom=self.getDOMElement();if(!dom.readOnly){var ev=key||window.event;var charCode=ev.which?ev.which:ev.keyCode;if(charCode==13){mEdition=false;if(checkValue())mTmp=self.getDOMElement().value}else if(charCode==27){self.getDOMElement().value=mTmp}else{self.getStyle().setBackgroundColor("yellow");mEdition=true}}};self.getDOMElement().onfocus=function(dom){mTmp=self.getDOMElement().value};self.getDOMElement().onblur=function(dom){if(!dom.readOnly&&mEdition){mEdition=false;checkValue()}};self.getDOMElement().ontouchend=function(e){e.stopPropagation()};self.getDOMElement().onmouseup=function(e){e.stopPropagation()};if(typeof _isEPub!="undefined"&&_isEPub){self.getDOMElement().ontouchstart=function(event){if(self.getDOMElement().disabled)self.getDOMElement().disabled=false;self.getDOMElement().focus();event.stop()}}return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Panel={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Html",element.setHtml,element.getHtml);controller.registerAction("OnClick");controller.registerAction("OnPress");controller.registerAction("OnRelease");controller.registerAction("OnMove")}};EJSS_INTERFACE.panel=function(mName){var self=EJSS_INTERFACE.element(mName);self.appendChild=function(element){var child=element.getDOMElement();self.getDOMElement().appendChild(child)};self.removeChild=function(element){var child=element.getDOMElement();self.getDOMElement().removeChild(child)};self.insertBefore=function(newele,refele){var newchild=newele.getDOMElement();var refchild=refele.getDOMElement();self.getDOMElement().insertBefore(newchild,refchild)};self.setHtml=function(value){self.getDOMElement().innerHTML=value};self.getHtml=function(){return self.getDOMElement().innerHTML};self.registerProperties=function(controller){EJSS_INTERFACE.Panel.registerProperties(self,controller)};var mElement=document.createElement("div");mElement.id=mName;mElement.contenteditable=true;document.body.appendChild(mElement);self.setDOMElement(mElement);self.getStyle().setPadding("0px");self.getStyle().setMargin("0px");self.getStyle().setTextAlign("TEXTA_CENTER");self.getStyle().setCSS({display:"block","margin-left":"auto","margin-right":"auto"});self.getDOMElement().addEventListener("touchstart",function(event){var ips=document.getElementsByTagName("input");for(var i=0;ips.length>i;i++){ips[i].disabled=false}});self.getDOMElement().addEventListener("mousedown",function(e){var controller=self.getController();if(controller)controller.invokeAction("OnPress").reportInteractions()});self.getDOMElement().addEventListener("touchstart",function(e){var controller=self.getController();if(controller)controller.invokeAction("OnPress").reportInteractions()});self.getDOMElement().addEventListener("mouseup",function(e){var controller=self.getController();if(controller){controller.invokeAction("OnRelease");controller.invokeAction("OnClick").reportInteractions()}});self.getDOMElement().addEventListener("touchend",function(e){var controller=self.getController();if(controller){controller.invokeAction("OnRelease");controller.invokeAction("OnClick").reportInteractions()}});self.getDOMElement().addEventListener("mousemove",function(e){var controller=self.getController();if(controller){controller.invokeAction("OnMove").reportInteractions()}});self.getDOMElement().addEventListener("touchmove",function(e){var controller=self.getController();if(controller){controller.invokeAction("OnMove").reportInteractions()}});return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.PasswordField={};EJSS_INTERFACE.passwordField=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.RadioButton={};EJSS_INTERFACE.radioButton=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Separator={};EJSS_INTERFACE.separator=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Slider={};EJSS_INTERFACE.slider=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Style={BORDER_SOLID:"solid",BORDER_DOTTED:"dotted",BORDER_DASHED:"dashed",TEXTA_LEFT:"left",TEXTA_RIGHT:"right",TEXTA_CENTER:"center",TEXTA_JUSTIFY:"justify",VISIB_VISIBLE:"visible",VISIB_HIDDEN:"hidden",FLOAT_LEFT:"left",FLOAT_RIGHT:"right",FLOAT_NONE:"none",FLOAT_CENTER:"none",POSITION_STATIC:"static",POSITION_ABSOLUTE:"absolute",POSITION_FIXED:"fixed",POSITION_RELATIVE:"relative",POSITION_INHERIT:"inherit",OVERFLOW_VISIBLE:"visible",OVERFLOW_HIDDEN:"hidden",OVERFLOW_SCROLL:"scroll",OVERFLOW_AUTO:"auto",setCSS:function(element,css){var rdashAlpha=/-([\da-z])/gi;var fcamelCase=function(all,letter){return(letter+"").toUpperCase()};var style=element.style;if(typeof css!=="object"){var cssvals=css.trim().split("{");if(cssvals[0]&&cssvals[0].length>0){var classname=cssvals[0].trim();var x,classes=document.styleSheets[0].rules||document.styleSheets[0].cssRules;for(x=0;x<classes.length;x++){if(classes[x].selectorText==classname)break}var classesCss=classes[x].cssText?classes[x].cssText:classes[x].style.cssText;classesCss=classesCss.match(/{.*}/g)[0];var css_rows=classesCss.slice(1,classesCss.length-2).split(";");for(elem in css_rows){var elem_parts=css_rows[elem].split(":");if(elem_parts.length==2){var property_name=elem_parts[0].trim();var property_value=elem_parts[1].trim();var camelCase=property_name.replace(rdashAlpha,fcamelCase);style[camelCase]=property_value}}}if(cssvals[1]){var addition=cssvals[1].trim();var css_rows=addition.slice(0,addition.length-2).split(";");for(elem in css_rows){var elem_parts=css_rows[elem].split(":");if(elem_parts.length==2){var property_name=elem_parts[0].trim();var property_value=elem_parts[1].trim();var camelCase=property_name.replace(rdashAlpha,fcamelCase);style[camelCase]=property_value}}}}else{for(var prop in css){var camelCase=prop.replace(rdashAlpha,fcamelCase);style[camelCase]=css[prop]}}}};EJSS_INTERFACE.style=function(mName){var Style=EJSS_INTERFACE.Style;var self={};var mBorderColor="white";var mBorderWidth=0;var mBorderStyle=Style.BORDER_SOLID;self.setCSS=function(css){Style.setCSS(document.getElementById(mName),css)};self.setVisibility=function(visible){document.getElementById(mName).style.visibility=visible?"visible":"hidden"};self.getVisibility=function(){return document.getElementById(mName).style.visibility=="visible"};self.setVerticalAlign=function(value){document.getElementById(mName).style.verticalAlign=value};self.getVerticalAlign=function(){return document.getElementById(mName).style.verticalAlign};self.setTextAlign=function(value){if(value.substring(0,6)=="TEXTA_")value=Style[value.toUpperCase()];document.getElementById(mName).style.textAlign=value};self.getTextAlign=function(){return document.getElementById(mName).style.textAlign};self.setLineHeight=function(value){if(typeof value!=="string")value=value+"px";document.getElementById(mName).style.lineHeight=value};self.getLineHeight=function(){return document.getElementById(mName).style.lineHeight};self.setHeight=function(value){if(typeof value!=="string")value=value+"px";document.getElementById(mName).style.height=value};self.getHeight=function(){return document.getElementById(mName).style.height};self.setWidth=function(value){if(typeof value!=="string")value=value+"px";document.getElementById(mName).style.width=value};self.getWidth=function(){return document.getElementById(mName).style.width};self.setOverflow=function(overflow){if(overflow.substring(0,6)=="OVERFL")overflow=Style[overflow.toUpperCase()];document.getElementById(mName).style.overflow=overflow};self.getOverflow=function(){return document.getElementById(mName).style.overflow};self.setPosition=function(position){if(position.substring(0,6)=="POSITI")position=Style[position.toUpperCase()];document.getElementById(mName).style.position=position};self.getPosition=function(){return document.getElementById(mName).style.position};self.setFloat=function(floatstyle){if(floatstyle.substring(0,6)=="FLOAT_")floatstyle=Style[floatstyle.toUpperCase()];document.getElementById(mName).style.float=floatstyle};self.getFloat=function(){return document.getElementById(mName).style.float};self.setDisplay=function(displayStyle){document.getElementById(mName).style.display=displayStyle};self.getDisplay=function(){return document.getElementById(mName).style.display};self.setTop=function(top){document.getElementById(mName).style.top=top};self.getTop=function(){return document.getElementById(mName).style.top};self.setBottom=function(bottom){document.getElementById(mName).style.bottom=bottom};self.getBottom=function(){return document.getElementById(mName).style.bottom};self.setLeft=function(left){document.getElementById(mName).style.left=left};self.getLeft=function(){return document.getElementById(mName).style.left};self.setBorderStyle=function(style){if(style.substring(0,6)=="BORDER")style=Style[style.toUpperCase()];mBorderStyle=style;document.getElementById(mName).style.border=mBorderWidth+"px "+mBorderStyle+" "+mBorderColor};self.getBorderStyle=function(){return mBorderStyle};self.setBorderWidth=function(width){mBorderWidth=width;document.getElementById(mName).style.border=mBorderWidth+"px "+mBorderStyle+" "+mBorderColor};self.getBorderWidth=function(){return mBorderWidth};self.setBorderColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);mBorderColor=color;document.getElementById(mName).style.border=mBorderWidth+"px "+mBorderStyle+" "+mBorderColor};self.getBorderColor=function(){return mBorderColor};self.setPadding=function(padding){document.getElementById(mName).style.padding=padding};self.getPadding=function(){return document.getElementById(mName).style.padding};self.setShadow=function(shadow){if(shadow)document.getElementById(mName).style.boxShadow=shadow;else document.getElementById(mName).style.boxShadow=""};self.getShadow=function(){return document.getElementById(mName).style.boxShadow!=""};self.setMargin=function(margin){document.getElementById(mName).style.margin=margin};self.getMargin=function(){return document.getElementById(mName).style.margin};self.setBackgroundImage=function(url){document.getElementById(mName).style.backgroundImage="url("+url+")";document.getElementById(mName).style.backgroundSize="100% 100%"};self.getBackgroundImage=function(){return document.getElementById(mName).style.backgroundImage};self.setBackgroundColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);document.getElementById(mName).style.backgroundColor=color};self.getBackgroundColor=function(){return document.getElementById(mName).style.backgroundColor};self.setColor=function(color){if(typeof color!=="string")color=EJSS_TOOLS.DisplayColors.getLineColor(color);document.getElementById(mName).style.color=color};self.getColor=function(){return document.getElementById(mName).style.color};self.getFont=function(){return document.getElementById(mName).style.font};self.setFont=function(recap){if(typeof recap!=="string"||recap.length<=0)return;var style=document.getElementById(mName).style;var params=recap.split(" ");style.fontStyle=params[0];style.fontWeight=params[1];var sizes=params[2].split("/");style.fontSize=sizes[0];if(sizes[1])style.lineHeight=sizes[1];if(params[3])style.fontFamily=recap.substring(recap.indexOf(params[3]))};self.setFontStyle=function(fontStyle){document.getElementById(mName).style.fontStyle=fontStyle};self.getFontStyle=function(){return document.getElementById(mName).style.fontStyle};self.setFontFamily=function(fontFamily){document.getElementById(mName).style.fontFamily=fontFamily};self.getFontFamily=function(){return document.getElementById(mName).style.fontFamily};self.setFontSize=function(fontSize){document.getElementById(mName).style.fontSize=fontSize};self.getFontSize=function(){return document.getElementById(mName).style.fontSize};self.setLetterSpacing=function(letterSpacing){document.getElementById(mName).style.letterSpacing=letterSpacing};self.getLetterSpacing=function(){return document.getElementById(mName).style.letterSpacing};self.setOutlineColor=function(lineColor){document.getElementById(mName).style.stroke=lineColor};self.getOutlineColor=function(){return document.getElementById(mName).style.stroke};self.setFontWeight=function(lineWidth){document.getElementById(mName).style.fontWeight=lineWidth};self.getFontWeight=function(){return document.getElementById(mName).style.fontWeight};self.setFillColor=function(fillColor){document.getElementById(mName).style.fill=fillColor};self.getFillColor=function(){return document.getElementById(mName).style.fill};self.setTransform=function(transform){document.getElementById(mName).style.transform=transform;document.getElementById(mName).style["-ms-transform"]=transform;document.getElementById(mName).style["-webkit-transform"]=transform};self.getTransform=function(){return document.getElementById(mName).style.transform};self.setWhiteSpace=function(whiteSpace){document.getElementById(mName).style.whiteSpace=whiteSpace};self.getWhiteSpace=function(){return document.getElementById(mName).style.whiteSpace};return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.SvgGraphics={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Height",element.setHeight);controller.registerProperty("Width",element.setWidth)}};EJSS_INTERFACE.svgGraphics=function(mName){var self=EJSS_INTERFACE.element(mName);var mHeight=0;var mWidth=0;self.setWidth=function(width){if(mWidth!=width){mWidth=width;self.getDOMElement().setAttribute("width",mWidth);return true}return false};self.getWidth=function(){return mWidth};self.setHeight=function(height){if(mHeight!=height){mHeight=height;self.getDOMElement().setAttribute("height",mHeight);return true}return false};self.getHeight=function(){return mHeight};self.registerProperties=function(controller){EJSS_INTERFACE.SvgGraphics.registerProperties(self,controller)};var mElement=document.createElementNS("http://www.w3.org/2000/svg","svg");mElement.setAttribute("id",mName);mElement.style.overflow="hidden";mElement.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");document.body.appendChild(mElement);self.setDOMElement(mElement);self.setWidth(500);self.setHeight(500);return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.TabbedPanel={registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("Titles",element.setTitles,element.getTitles);controller.registerProperty("Selected",element.setSelected,element.getSelected);controller.registerProperty("Font",element.setFont);controller.registerProperty("Foreground",element.setColor);controller.registerProperty("Background",element.setBackgroundColor);controller.registerProperty("FillColor",element.setFillColor)}};EJSS_INTERFACE.tabbedPanel=function(mName){var self=EJSS_INTERFACE.element(mName);var mTitles=[];var mSelected=0;var mBackground=null;self.appendChild=function(element){var child=element.getDOMElement();mDIVElement.appendChild(child);select()};self.removeChild=function(element){var child=element.getDOMElement();mDIVElement.removeChild(child);select()};self.insertBefore=function(newele,refele){var newchild=newele.getDOMElement();var refchild=refele.getDOMElement();mDIVElement.insertBefore(newchild,refchild);select()};self.getTitles=function(){return mTitles};self.setTitles=function(items){if(!EJSS_TOOLS.compareArrays(mTitles,items)){mTitles=items;updateTitles()}};self.getSelected=function(){return mSelected};self.setSelected=function(index){if(mSelected!=index){mSelected=index;select()}};self.registerProperties=function(controller){EJSS_INTERFACE.TabbedPanel.registerProperties(self,controller)};function updateTitles(){mTABElement.innerHTML="";for(var i=0;i<mTitles.length;i++){var title=mTitles[i];var mLIElement=document.createElement("li");mLIElement.className="_TabbedPanel.li";mLIElement.id=mName+".item";mTABElement.appendChild(mLIElement);mLIElement.style.background=mBackground?mBackground:self.getStyle().getBackgroundColor();mLIElement.onmouseover=function(){this.style.cursor="pointer"};mLIElement.onmouseout=function(){this.style.cursor="auto"};var mAElement=document.createElement("a");mAElement.className="_TabbedPanel.a";mAElement.id=mName+".item.a."+i;mAElement.innerHTML=title;mLIElement.appendChild(mAElement);mAElement.style.color=self.getStyle().getColor();mAElement.style.fontStyle=self.getStyle().getFontStyle();mAElement.style.fontWeight=self.getStyle().getFontWeight();mAElement.style.fontSize=self.getStyle().getFontSize();mAElement.style.fontFamily=self.getStyle().getFontFamily();mAElement.style.lineHeight=self.getStyle().getLineHeight();mAElement.onclick=function(){var parts=this.id.split(".");mSelected=parseInt(parts[parts.length-1]);select()};select()}}function select(){for(var j=0;j<mDIVElement.childNodes.length;j++){mDIVElement.childNodes[j].style.display="none"}if(mDIVElement.childNodes.length>mSelected)mDIVElement.childNodes[mSelected].style.display="block";for(var j=0;j<mTABElement.childNodes.length;j++){mTABElement.childNodes[j].firstChild.style.backgroundColor="transparent"}if(mTABElement.childNodes.length>mSelected)mTABElement.childNodes[mSelected].firstChild.style.backgroundColor=self.getStyle().getFillColor()}self.setFont=function(font){self.getStyle().setFont(font);updateTitles()};self.setFillColor=function(color){self.getStyle().setFillColor(color);select()};self.setBackgroundColor=function(color){mBackground=color;updateTitles()};self.setColor=function(color){self.getStyle().setColor(color);updateTitles()};var mElement=document.createElement("span");mElement.className="_TabbedPanel.span";mElement.id=mName;document.body.appendChild(mElement);self.setDOMElement(mElement);var mTABElement=document.createElement("ul");mTABElement.className="_TabbedPanel.ul";mTABElement.id=mName+".ul";mElement.appendChild(mTABElement);var mDIVElement=document.createElement("span");mDIVElement.id=mName+".divs";mElement.appendChild(mDIVElement);updateTitles();self.getStyle().setFillColor("#ccc");return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.TextArea={};EJSS_INTERFACE.textArea=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.TextField={};EJSS_INTERFACE.textField=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.TwoStateButton={OFF:false,ON:true,registerProperties:function(element,controller){EJSS_INTERFACE.Element.registerProperties(element,controller);controller.registerProperty("TextOn",element.setTextOn);controller.registerProperty("ImageOnUrl",element.setImageUrlOn);controller.registerProperty("TextOff",element.setTextOff);controller.registerProperty("ImageOffUrl",element.setImageUrlOff);controller.registerProperty("State",element.setState,element.getState);controller.registerAction("OnClick");controller.registerAction("OffClick")}};EJSS_INTERFACE.twoStateButton=function(mName){var TSButton=EJSS_INTERFACE.TwoStateButton;var self=EJSS_INTERFACE.element(mName);var mUrlOn="";var mUrlOff="";var mTextOn="";var mTextOff="";var mState=-1;self.setTextOff=function(text){mTextOff=text;applyChange()};self.getTextOff=function(){return mTextOff};self.setImageUrlOff=function(url){var newUrl=self.getResourcePath(url);if(newUrl==mUrlOff)return;mUrlOff=newUrl;applyChange()};self.getImageUrlOff=function(){return mUrlOff};self.setTextOn=function(text){mTextOn=text;applyChange()};self.getTextOn=function(){return mTextOn};self.setImageUrlOn=function(url){var newUrl=self.getResourcePath(url);if(newUrl==mUrlOn)return;mUrlOn=newUrl;applyChange()};self.getImageUrlOn=function(){return mUrlOn};self.setState=function(state){if(typeof state=="string")state=TSButton[state.toUpperCase()];if(state!=mState){mState=state;applyChange()}};self.getState=function(){return mState};function applyChange(){self.getDOMElement().innerHTML="";if(mState){if(mUrlOn.length>0)self.getDOMElement().innerHTML='<img style="vertical-align:inherit;-webkit-touch-callout:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;" src="'+mUrlOn+'"/>';if(mTextOn.length>0)self.getDOMElement().innerHTML+='<span style="white-space:pre;vertical-align:inherit;-webkit-touch-callout:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;">'+mTextOn.toString()+"</span>"}else{if(mUrlOff.length>0)self.getDOMElement().innerHTML='<img style="vertical-align:inherit;-webkit-touch-callout:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;" src="'+mUrlOff+'"/>';if(mTextOff.length>0)self.getDOMElement().innerHTML+='<span style="white-space:pre;vertical-align:inherit;-webkit-touch-callout:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;">'+mTextOff.toString()+"</span>"}}self.registerProperties=function(controller){EJSS_INTERFACE.TwoStateButton.registerProperties(self,controller)};var mElement=document.createElement("button");mElement.id=mName;mElement.style.verticalAlign="middle";mElement.style.webkitTouchCallout="none";document.body.appendChild(mElement);self.setDOMElement(mElement);self.getDOMElement().oncontextmenu=function(e){e.preventDefault();e.stopPropagation();return false};function onClickListener(e){var state=self.getState();self.setState(!state);var controller=self.getController();if(controller){controller.propertiesChanged("State");if(state)controller.invokeAction("OnClick");else controller.invokeAction("OffClick");controller.reportInteractions()}e.preventDefault();e.stopPropagation();return false}self.getDOMElement().addEventListener("mouseup",onClickListener);self.getDOMElement().addEventListener("touchend",onClickListener);return self};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.Video={};EJSS_INTERFACE.video=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.WebGLCanvas={};EJSS_INTERFACE.webGLCanvas=function(mName){};var EJSS_INTERFACE=EJSS_INTERFACE||{};EJSS_INTERFACE.WrappedPanel={};EJSS_INTERFACE.wrappedPanel=function(mName){};var EJSS_CORE=EJSS_CORE||{};EJSS_CORE.Model={MODE_JAVA_STYLE:1,MODE_RESPECT_TIME:2,MODE_RESPECT_DELAY:3};EJSS_CORE.createAnimation=function(){var self={};var MINIMUM_DELAY=1;var mDelay=MINIMUM_DELAY;var mStepsPerDisplay=1;var mAbortSPDLoop=false;var mShouldUpdateView=true;var mAutoplay=false;var mShouldBreak=false;var mLastTime=+new Date;var mIsPlaying=false;var mView=null;var mInitialRealTime=NaN;var mSleepTime=mDelay;var mExcededTime=0;var mMinimumDelay=10;var mCurrentTimeOut;var mRunCount=0;var mRunTime=+new Date;var mFocus=true;var mRunAlways=false;var mOnloadFunc;var mPendingTasks=[];var mRunningMode=EJSS_CORE.Model.MODE_JAVA_STYLE;self.setView=function(view){mView=view;mView._12(function(){if(!mIsPlaying){if(mView._16(mRunCount,mRunTime,mIsPlaying)){self.automaticResetSolvers();self.update()}}})};self.getView=function(){return mView};self.serialize=function(){var encodedModel={};if(self._userSerialize)encodedModel=self._userSerialize();var encodedView=mView.serialize();var encoded={model:encodedModel,view:encodedView};return JSON.stringify(encoded,function(key,value){if(typeof value=="number"){if(isNaN(value))value="__NaN";else if(!isFinite(value))value="__Infinity"}return value})};self.unserialize=function(json){var encoded=JSON.parse(json,function(key,value){if(value=="__NaN")value=NaN;else if(value=="__Infinity")value=Infinity;return value});if(encoded.model){var encodedModel=encoded.model;if(self._userUnserialize)self._userUnserialize(encodedModel)}if(encoded.view){var encodedView=encoded.view;mView.unserialize(encodedView)}};self.setMode=function(mode){self.setRunningMode(mode)};self.setRunningMode=function(mode){if(typeof mode==="string")mRunningMode=EJSS_CORE.Model[mode.toUpperCase()];else mRunningMode=mode};self.getMode=function(){return mRunningMode};self.setRunAlways=function(always){mRunAlways=always};self.setPauseOnPageExit=function(pause){mRunAlways=!pause};self.setFPS=function(fps){mDelay=Math.max(1e3/fps,MINIMUM_DELAY)};self.getFPS=function(){return Math.floor(1e3/mDelay)};self.setDelay=function(delay){mDelay=Math.max(delay,0)};self.getDelay=function(delay){return mDelay};self.setMinimumDelay=function(delay){mMinimumDelay=Math.max(delay,0)};self.setStepsPerDisplay=function(steps){if(steps>=1)mStepsPerDisplay=steps};self.setUpdateView=function(mustDo){mShouldUpdateView=mustDo};self.setAutoplay=function(play){mAutoplay=play};self.isPlaying=function(){return mIsPlaying};self.isPaused=function(){return!mIsPlaying};self.getRunCount=function(){return mRunCount};self.getRunTime=function(){return mRunTime};self.initRunCountAndTime=function(){mRunCount=0;mRunTime=+new Date};self.resetRealTime=function(){var now=+Date();mInitialRealTime=1e3*self.getRealTime()-now};self.play=function(){if(mIsPlaying)return;mLastTime=+new Date;mSleepTime=mDelay;mIsPlaying=true;mCurrentTimeOut=window.setTimeout(self.run,mMinimumDelay)};self.pause=function(){mIsPlaying=false;mAbortSPDLoop=true;if(mCurrentTimeOut!=0){window.clearTimeout(mCurrentTimeOut);mCurrentTimeOut=0}};self.run=function(){mRunCount++;mRunTime=+new Date;var timeout=1;var elapsed;if(!mIsPlaying)return;if(mFocus||mRunAlways){switch(mRunningMode){default:case EJSS_CORE.Model.MODE_JAVA_STYLE:self.step();mLastTime=+new Date;elapsed=mLastTime-mRunTime;timeout=Math.max(mMinimumDelay,mDelay-elapsed);break;case EJSS_CORE.Model.MODE_RESPECT_DELAY:self.step();timeout=mDelay;mLastTime=+new Date;break;case EJSS_CORE.Model.MODE_RESPECT_TIME:elapsed=mRunTime-mLastTime;if(elapsed>=mSleepTime-mExcededTime){var step=0;if(mSleepTime){step=Math.floor((elapsed+mExcededTime)/mSleepTime);mExcededTime=elapsed+mExcededTime-step*mSleepTime}var stepModelTime=self.step(step);if(mSleepTime&&stepModelTime>elapsed&&step>100){alert("Imposible running with delay "+mSleepTime+" ms.");mIsPlaying=false;processSafeTasks();mExcededTime=0}mSleepTime=mDelay;mLastTime=mRunTime}break}var thisTimeOut=mCurrentTimeOut;self._readCapturedInteractions();if(mView._16(mRunCount,mRunTime,mIsPlaying)||processSafeTasks()){self.automaticResetSolvers();self.update()}if(thisTimeOut!=mCurrentTimeOut)return}else{mLastTime=+new Date}if(mView._16(mRunCount,mRunTime,mIsPlaying)||processSafeTasks()){self.automaticResetSolvers();self.update()}mCurrentTimeOut=window.setTimeout(self.run,timeout)};self.onExit=function(){self.pause();mView._16(mRunCount,mRunTime,mIsPlaying);processSafeTasks();self.freeMemory()};self.performTaskSafely=function(taskFunction){if(!mIsPlaying){console.log("Calling the task now! ");taskFunction();self.automaticResetSolvers();self.update(true)}else{console.log("Delaying the task! ");mPendingTasks.push(taskFunction)}};function processSafeTasks(){if(mPendingTasks.length==0)return false;var tasks=mPendingTasks.slice();mPendingTasks=[];for(var i=0;i<tasks.length;i++)tasks[i]();return true}self.reset=function(reuseview){if(!reuseview){self.pause();self.resetModel()}mView._14(false);mView._reset();if(!reuseview){mView._15();mView._initialize();self.initializeModel()}self.updateModel();if(mShouldUpdateView){mView._update();mView._render()}else mView._collectData();mView._14(true);if(mAutoplay)self.play();mView._resized()};self.initialize=function(){mView._initialize();self.initializeModel();self.updateModel();if(mShouldUpdateView){mView._update();mView._render()}else mView._collectData()};self.update=function(forceIt){if(!(mFocus||mRunAlways||forceIt))return;self.updateModel();if(mShouldUpdateView){mView._update();mView._render()}else mView._collectData();if(processSafeTasks()){self.automaticResetSolvers();self.updateModel();if(mShouldUpdateView){mView._update();mView._render()}else mView._collectData()}};self.step=function(forceStepsPerDisplay){var now=+new Date;if(!forceStepsPerDisplay)forceStepsPerDisplay=1;var steps=Math.max(forceStepsPerDisplay,mStepsPerDisplay);if(steps>1){mAbortSPDLoop=false;for(var i=1;i<steps;i++){if(mAbortSPDLoop){self.update();return}self.stepModel();self.updateModel();mView._collectData()}}self.stepModel();var stepModelTime=+new Date-now;self.update();return stepModelTime};self.setShouldBreak=function(shouldDo){mShouldBreak=shouldDo};self.getShouldBreak=function(){return mShouldBreak};self._autoSelectView=function(viewsInfo){var height=screen.height;var width=screen.width;var sel=[];var min=Number.MAX_VALUE;for(var i=0;i<viewsInfo.length;i++){var dis=width-viewsInfo[i]["width"];if(dis>=0){if(dis<min){min=dis;sel=[i]}else if(dis==min){sel.push(i)}}}var ret=-1;min=Number.MAX_VALUE;for(var i=0;i<sel.length;i++){var dis=Math.abs(height-viewsInfo[sel[i]]["height"]);if(dis<min){min=dis;ret=sel[i]}}return ret};self.addToOnload=function(onloadfunc){mOnloadFunc=onloadfunc};self.onload=function(){if(typeof mOnloadFunc=="function")mOnloadFunc()};self.parseInputParameters=function(inputParameters){if(typeof inputParameters==="string"||inputParameters instanceof String){try{inputParameters=EJSS_TOOLS.Decode.hex_to_ascii(inputParameters);inputParameters=EJSS_TOOLS.Decode.decode(inputParameters);if(inputParameters[0]=="'"&&inputParameters[inputParameters.length-1]=="'")inputParameters=inputParameters.substring(1,inputParameters.length-1);else if(inputParameters[0]=='"'&&inputParameters[inputParameters.length-1]=='"')inputParameters=inputParameters.substring(1,inputParameters.length-1);inputParameters=JSON.parse(inputParameters)}catch(exception){console.log("Error trying to parse input parameters: "+inputParameters);return null}}return inputParameters};var mResetList=[];var mInitializationList=[];var mEvolutionList=[];var mFixedRelationsList=[];self.getRealTime=function(){return NaN};self.automaticResetSolvers=function(){};self.freeMemory=function(){};self.addToReset=function(aFunction){mResetList.push(aFunction)};self.addToInitialization=function(aFunction){mInitializationList.push(aFunction)};self.addToEvolution=function(aFunction){mEvolutionList.push(aFunction)};self.addToFixedRelations=function(aFunction){mFixedRelationsList.push(aFunction)};self.addFixedRel=function(code){_model.addToFixedRelations(function(){eval(code)})};self.resetModel=function(){processFunctionList(mResetList)};self.initializeModel=function(){processFunctionList(mInitializationList)};self.stepModel=function(){processFunctionList(mEvolutionList)};self.updateModel=function(){processFunctionList(mFixedRelationsList)};function processFunctionList(functionList){for(var i=0,n=functionList.length;i<n;i++){mShouldBreak=false;functionList[i]();if(mShouldBreak)return}}window.onblur=function(){mFocus=false;if(mView)mView._onBlur()};window.onfocus=function(){mFocus=true;if(mView)mView._onFocus()};var _super_onorientationchange=window.onorientationchange;window.onorientationchange=function(){if(_super_onorientationchange)_super_onorientationchange();if(mView)mView._resized()};var _super_onresize=window.onresize;window.onresize=function(){if(_super_onresize)_super_onresize();if(mView)mView._resized()};return self};var EJSS_CORE=EJSS_CORE||{};EJSS_CORE.createAnimationLMS=function(){var self=EJSS_CORE.createAnimation();var SAVETEXT_Q="Choose a name for the file";var READFILE_Q="Select a file to read";var context_id;var user_id;var ejsapp_id;var moodle_upload_file;var moodle_send_file_list;self.sendCallback=function(){};self.setStatusParams=function(_context_id,_user_id,_ejsapp_id,_moodle_upload_file,_moodle_send_file_list,_moodle_callback){context_id=_context_id;user_id=_user_id;ejsapp_id=_ejsapp_id;moodle_upload_file=_moodle_upload_file;moodle_send_file_list=_moodle_send_file_list;if(_moodle_callback)self.sendCallback=_moodle_callback};self.sendSnapshot=function(svgpanel,user_file,callback_ok,callback_error){if(!moodle_upload_file)return;svgpanel.importGraphics(function(png){var http=new XMLHttpRequest;var params="user_file="+user_file+"&file="+encodeURIComponent(png)+"&type=png"+"&context_id="+context_id+"&user_id="+user_id+"&ejsapp_id="+ejsapp_id;http.open("POST",moodle_upload_file,true);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){if(callback_ok)callback_ok()}else{if(callback_error)callback_error()}};http.send(params)})};self.sendState=function(user_file,callback_ok,callback_error){if(!moodle_upload_file)return;var json=self.serialize();var http=new XMLHttpRequest;var params="user_file="+user_file+"&file="+encodeURIComponent(json)+"&type=json"+"&context_id="+context_id+"&user_id="+user_id+"&ejsapp_id="+ejsapp_id;http.open("POST",moodle_upload_file,true);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){if(callback_ok)callback_ok()}else{if(callback_error)callback_error()}};http.send(params)};self.sendText=function(user_file,content,type,callback_ok,callback_error){if(!moodle_upload_file)return;var http=new XMLHttpRequest;var params="user_file="+user_file+"&file="+encodeURIComponent(content)+"&type="+type+"&context_id="+context_id+"&user_id="+user_id+"&ejsapp_id="+ejsapp_id;http.open("POST",moodle_upload_file,true);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){if(callback_ok)callback_ok()}else{if(callback_error)callback_error()}};http.send(params)};self.getState=function(url,callback_ok,callback_error){var http=new XMLHttpRequest;http.open("GET",url,true);http.setRequestHeader("Cache-Control","no-cache");http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){self.unserialize(http.responseText);if(callback_ok)callback_ok()}else{if(callback_error)callback_error()}};http.send()};self.getText=function(url,callback_ok,callback_error){var http=new XMLHttpRequest;http.open("GET",url,true);http.setRequestHeader("Cache-Control","no-cache");http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){if(callback_ok)callback_ok(http.responseText)}else{if(callback_error)callback_error()}};http.send()};self.getStateFiles=function(type,callback_ok,callback_error){if(!ejsapp_id)return;var http=new XMLHttpRequest;var get_url=moodle_send_file_list+"?ejsapp_id="+ejsapp_id+"&type="+type;http.open("GET",get_url,true);http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){var list={};list["name"]=[];list["url"]=[];var data=JSON.parse(http.responseText);for(var i=0;i<data.file_names.length;i++){list["name"].push(data.file_names[i].file_name);list["url"].push(data.file_paths[i].file_path)}if(callback_ok)callback_ok(list)}else{if(callback_error)callback_error()}};http.send()};self.saveText=function(name,type,content){if(!content){var content=type;type=null}if(context_id)EJSS_INTERFACE.BoxPanel.showInputDialog(SAVETEXT_Q,function(name){self.sendText(name,content,type,function(){self.sendCallback()})});else self.sendText(name,content,type,function(){self.sendCallback()})};self.saveState=function(name){if(context_id)EJSS_INTERFACE.BoxPanel.showInputDialog(SAVETEXT_Q,function(name){self.sendState(name,function(){self.sendCallback()})});else self.sendState(name,function(){self.sendCallback()})};self.saveImage=function(name,panelname){var view=self.getView();if(context_id)EJSS_INTERFACE.BoxPanel.showInputDialog(SAVETEXT_Q,function(name){self.sendSnapshot(view[panelname],name,function(){self.sendCallback()})});else self.sendSnapshot(view[panelname],name,function(){self.sendCallback()})};self.readState=function(url,type){if(!url){var tp=typeof type!=="undefined"?type:".json";self.getStateFiles(tp,function(lf){var options={text:lf.name,value:lf.url};EJSS_INTERFACE.BoxPanel.showSelectDialog(READFILE_Q,options,function(url){self.getState(url)})})}else self.getState(url)};self.readText=function(url,type,varname_or_callback){if(!url){self.getStateFiles(type,function(lf){var options={text:lf.name,value:lf.url};EJSS_INTERFACE.BoxPanel.showSelectDialog(READFILE_Q,options,function(url){self.getText(url,function(text){if(typeof varname_or_callback==="function"){varname_or_callback(text)}else{var json={};json[varname_or_callback]=text;self._userUnserialize(json)}})})})}else self.getText(url,function(text){if(typeof varname_or_callback==="function"){varname_or_callback(text)}else{var json={};json[varname_or_callback]=text;self._userUnserialize(json)}})};var mUserEvents=[];var mWebSocket;var mEventSource;var _stylesBak={};var _isPlayingCaptureStream=false;self.getEventInteractionsStream=function(event){var target=event.target||event.srcElement;var myevent={pageX:event.pageX,pageY:event.pageY,offsetLeft:target.offsetLeft,offsetTop:target.offsetTop,target:target.id,timeStamp:+new Date};myevent["runCount"]=self.getRunCount();myevent["runTime"]=self.getRunTime();myevent["type"]=event.type;myevent["event"]="touch";mWebSocket.send(JSON.stringify(myevent))};self.startCaptureStream=function(port,win,fail,open,close){var loc=window.location;var uri=loc.protocol==="https:"?"wss:":"ws:";uri+="//"+loc.host+":"+port;try{mWebSocket=new WebSocket(uri);if(typeof win!=="undefined")win();mWebSocket.onopen=function(){self.initRunCountAndTime();self.getView().registerInteractions(mWebSocket);document.addEventListener("mousemove",self.getEventInteractionsStream);document.addEventListener("touchmove",self.getEventInteractionsStream);document.addEventListener("mousedown",self.getEventInteractionsStream);document.addEventListener("touchstart",self.getEventInteractionsStream)};mWebSocket.onclose=function(evt){self.stopCaptureStream();close(evt)};mWebSocket.onmessage=function(evt){console.log("Message is received: "+evt.data)}}catch(exception){if(typeof fail!=="undefined")fail(exception);return}};self.stopCaptureStream=function(){try{mWebSocket.close()}catch(exception){}self.getView().unregisterInteractions();document.removeEventListener("mousemove",self.getEventInteractionsStream);document.removeEventListener("touchmove",self.getEventInteractionsStream);document.removeEventListener("mousedown",self.getEventInteractionsStream);document.removeEventListener("touchstart",self.getEventInteractionsStream)};self.playCaptureStream=function(uri,win,fail,open,close){var FREC=10;if(_isPlayingCaptureStream)return;_isPlayingCaptureStream=true;var captured=[];try{mEventSource=new EventSource(uri);if(typeof win!=="undefined")win();mEventSource.onopen=open;mEventSource.onclose=function(evt){var s=document.getElementById("_my_mouse");if(s)document.body.removeChild(s);close(evt)};mEventSource.onmessage=function(evt){var alldata=JSON.parse(evt.data);console.log("Now: "+Date.now()+"-"+alldata.timeStamp);captured=captured.concat(alldata.interactions)}}catch(exception){if(typeof fail!=="undefined")fail(exception);return}setTimeout(function(){self.initRunCountAndTime();_capturedInteractions=[];var lastTime=0;var ixCaptured=0;var crun=0;var ctime=0;var ltime=0;var diffLeft=0;var diffTop=0;var myTimer=setInterval(function(){var view=self.getView();var ix=ixCaptured;while(ix<captured.length){var data=captured[ix++];if(typeof data["isPlaying"]!=="undefined"&&data["isPlaying"]){_capturedInteractions.push(data);ixCaptured++}else if(data.runCount==crun&&ctime>=data.timeStamp-data.runTime&&ltime<=data.timeStamp-data.runTime){ixCaptured++;ltime=data.timeStamp-data.runTime;for(var i in _stylesBak){var element=view[i];element.getDOMElement().style.border=_stylesBak[i]}_stylesBak={};if(typeof data.event!=="undefined"){var x=data.pageX;var y=data.pageY;var target=data.target;if(typeof target!=="undefined"&&target.length>0){var element=document.getElementById(target);if(element!=null){diffLeft=data.offsetLeft-element.offsetLeft;diffTop=data.offsetTop-element.offsetTop}}x-=diffLeft;y+=diffTop;var s=document.getElementById("_my_mouse");if(!s){var s=document.createElement("div");s.id="_my_mouse";s.style.position="absolute";s.style.margin="0";s.style.border="3px solid red";document.body.appendChild(s)}s.style.left=x+"px";s.style.top=y+"px"}else if(typeof data.property!=="undefined"){var element=view[data.element];element.propertyChanged(data.property,data.data).reportInteractions()}else if(typeof data.action!=="undefined"){var element=view[data.element];element.invokeAction(data.action).reportInteractions();if(typeof _stylesBak[element.getName()]=="undefined")_stylesBak[element.getName()]=element.getDOMElement().style.border;element.getDOMElement().style.border="1px solid red"}}}var runCount=self.getRunCount();if(crun!=runCount){crun=runCount;ctime=0;ltime=0}else{ctime+=FREC}if(!_isPlayingCaptureStream){clearInterval(myTimer)}},FREC)},1e3)};self.pauseCaptureStream=function(){try{mEventSource.close()}catch(exception){}_isPlayingCaptureStream=false};self.getEventInteractions=function(event){var target=event.target||event.srcElement;var myevent={pageX:event.pageX,pageY:event.pageY,offsetLeft:target.offsetLeft,offsetTop:target.offsetTop,target:target.id,timeStamp:+new Date};myevent["runCount"]=self.getRunCount();myevent["runTime"]=self.getRunTime()
;myevent["type"]=event.type;myevent["event"]="touch";mUserEvents.push(myevent)};self.startCapture=function(){self.initRunCountAndTime();self.getView().registerInteractions();mUserEvents=[];document.addEventListener("mousemove",self.getEventInteractions);document.addEventListener("touchmove",self.getEventInteractions);document.addEventListener("mousedown",self.getEventInteractions);document.addEventListener("touchstart",self.getEventInteractions)};self.getCapture=function(){var interactions={interactions:self.getView().getRegInteractions(),events:mUserEvents};return interactions};self.stopCapture=function(){self.getView().unregisterInteractions();document.removeEventListener("mousemove",self.getEventInteractions);document.removeEventListener("touchmove",self.getEventInteractions);document.removeEventListener("mousedown",self.getEventInteractions);document.removeEventListener("touchstart",self.getEventInteractions);return self.getCapture()};self._readCapturedInteractions=function(){var view=self.getView();var n=_capturedInteractions.length;for(var i=0;i<n;i++){var inter=_capturedInteractions[i];if(inter["runCount"]==self.getRunCount()&&inter["isPlaying"]){if(inter.property!=="undefined"){var element=view[inter.element];element.propertyChanged(inter.property,inter.data).reportInteractions()}if(inter.action!=="undefined"){var element=view[inter.element];element.invokeAction(inter.action).reportInteractions();if(typeof _stylesBak[element.getName()]=="undefined")_stylesBak[element.getName()]=element.getDOMElement().style.border;element.getDOMElement().style.border="1px solid red"}inter["runCount"]=-1}}};var _isPlayingCapture=false;var _resetPlayingCapture=false;var _stepPlayingCapture=1;var _isPlayingBeforePause=false;var _capturedInteractions=[];self.playCapture=function(captured,callback,step){var FREC=10;var actions=captured.interactions;var lactions=actions.length;var caction=0;var events=captured.events;var levents=events.length;var cevent=0;if(_isPlayingCapture)return;_isPlayingCapture=true;_resetPlayingCapture=false;self.reset();if(typeof step!=="undefined")_stepPlayingCapture=step;self.setDelay(self.getDelay()/_stepPlayingCapture);self.initRunCountAndTime();_capturedInteractions=actions;var crun=0;var ctime=0;var diffLeft=0;var diffTop=0;var myTimer=setInterval(function(){var view=self.getView();for(var i in _stylesBak){var element=view[i];element.getDOMElement().style.border=_stylesBak[i]}_stylesBak={};if(_isPlayingCapture){while(caction<lactions&&actions[caction]["runCount"]<=crun&&ctime>=actions[caction].timeStamp-actions[caction].runTime){if(!actions[caction]["isPlaying"]){if(actions[caction].property!=="undefined"){var element=view[actions[caction].element];element.propertyChanged(actions[caction].property,actions[caction].data).reportInteractions()}if(actions[caction].action!=="undefined"){var element=view[actions[caction].element];element.invokeAction(actions[caction].action).reportInteractions();if(typeof _stylesBak[element.getName()]=="undefined")_stylesBak[element.getName()]=element.getDOMElement().style.border;element.getDOMElement().style.border="1px solid red"}}caction++}while(cevent<levents&&events[cevent]["runCount"]<=crun&&ctime>=events[cevent].timeStamp-events[cevent].runTime){var x=events[cevent].pageX;var y=events[cevent].pageY;var target=events[cevent].target;if(typeof target!=="undefined"&&target.length>0){var element=document.getElementById(target);if(element!=null){diffLeft=events[cevent].offsetLeft-element.offsetLeft;diffTop=events[cevent].offsetTop-element.offsetTop}}x-=diffLeft;y+=diffTop;var s=document.getElementById("_my_mouse");if(!s){var s=document.createElement("div");s.id="_my_mouse";s.style.position="absolute";s.style.margin="0";s.style.border="3px solid red";document.body.appendChild(s)}s.style.left=x+"px";s.style.top=y+"px";cevent++}var runCount=self.getRunCount();if(crun!=runCount){crun=runCount;ctime=0}else{ctime+=FREC*_stepPlayingCapture}if(cevent>=levents&&caction>=lactions){var s=document.getElementById("_my_mouse");if(s)document.body.removeChild(s);clearInterval(myTimer);_isPlayingCapture=false;self.setDelay(self.getDelay()*_stepPlayingCapture);_capturedInteractions=[];callback()}}if(_resetPlayingCapture){clearInterval(myTimer);_isPlayingCapture=false;self.setDelay(self.getDelay()*_stepPlayingCapture);_capturedInteractions=[];callback()}},FREC)};self.pauseCapture=function(){_isPlayingBeforePause=self.isPlaying();self.pause();_isPlayingCapture=false};self.resumeCapture=function(){if(_isPlayingBeforePause)self.play();_isPlayingCapture=true};self.resetCapture=function(){_resetPlayingCapture=true};self.changeCaptureStep=function(step){self.setDelay(self.getDelay()*_stepPlayingCapture);_stepPlayingCapture=step;self.setDelay(self.getDelay()/_stepPlayingCapture)};var mModelCalls=[];var mIsRegModelCalls=false;self.pushRegModelCalls=function(func){var mycall={function:func,timeStamp:+new Date};mycall["runCount"]=self.getRunCount();mycall["runTime"]=self.getRunTime();mModelCalls.push(mycall)};self.startRegister=function(events){if(!mIsRegModelCalls){mIsRegModelCalls=true;self.initRunCountAndTime();self.getView().registerInteractions();mModelCalls=[];mUserEvents=[];if(events){document.addEventListener("mousemove",self.getEventInteractions);document.addEventListener("touchmove",self.getEventInteractions);document.addEventListener("mousedown",self.getEventInteractions);document.addEventListener("touchstart",self.getEventInteractions)}}};self.getRegister=function(empty){var interactions={interactions:self.getView().getRegInteractions(empty),model:mModelCalls,events:mUserEvents};if(empty){mModelCalls=[];mUserEvents=[]}return interactions};self.stopRegister=function(){self.getView().unregisterInteractions();mIsRegModelCalls=false;document.removeEventListener("mousemove",self.getEventInteractions);document.removeEventListener("touchmove",self.getEventInteractions);document.removeEventListener("mousedown",self.getEventInteractions);document.removeEventListener("touchstart",self.getEventInteractions);return self.getRegister()};self.sendRegister=function(empty,callback_ok,callback_error){if(!moodle_upload_file)return;var json=JSON.stringify(self.getRegister(empty),function(key,value){if(typeof value=="number"){if(isNaN(value))value="__NaN";else if(!isFinite(value))value="__Infinity"}return value});var http=new XMLHttpRequest;var params="file="+encodeURIComponent(json)+"&type=actions"+"&user_id="+user_id+"&ejsapp_id="+ejsapp_id;http.open("POST",moodle_upload_file,true);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){if(callback_ok)callback_ok()}else{if(callback_error)callback_error()}};http.send(params)};self.___play=self.play;self.play=function(){if(mIsRegModelCalls)self.pushRegModelCalls("play");self.___play()};self.___pause=self.pause;self.pause=function(){if(mIsRegModelCalls)self.pushRegModelCalls("pause");self.___pause()};self.___reset=self.reset;self.reset=function(reuseview){if(mIsRegModelCalls)self.pushRegModelCalls("reset");self.___reset()};self.___initialize=self.initialize;self.initialize=function(){if(mIsRegModelCalls)self.pushRegModelCalls("initialize");self.___initialize()};return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.Bootstrap2IntervalData={};EJSS_ODE_INTERPOLATION.bootstrap2IntervalData=function(aState,aRate,bState,bRate,ode){var self=EJSS_ODE_INTERPOLATION.bootstrapIntervalData(aState,aRate,bState,bRate,ode);var mBt2_c2;var mBt2_c3;var mBt2_c4;var mBt2_c5;self.interpolate=function(time,index){var deltaTime=self.getDeltaTime();var leftState=self.getLeftState();var leftRate=self.getLeftRate();var step=(time-self.getLeft())/deltaTime;return leftState[index]+step*(deltaTime*leftRate[index]+step*(mBt2_c2[index]+step*(mBt2_c3[index]+step*(mBt2_c4[index]+step*mBt2_c5[index]))))};self.interpolateState=function(time,state,beginIndex,length){self.bootstrap2((time-self.getLeft())/self.getDeltaTime(),state,beginIndex,length);return state};self.bootstrap2=function(step,state,beginIndex,length){var deltaTime=self.getDeltaTime();var leftState=self.getLeftState();var leftRate=self.getLeftRate();var index=beginIndex;for(var i=0;i<length;i++){state[i]=leftState[index]+step*(deltaTime*leftRate[index]+step*(mBt2_c2[index]+step*(mBt2_c3[index]+step*(mBt2_c4[index]+step*mBt2_c5[index]))));index++}};var BETA1=.7;var BETA2=.85;var bt2_den=2*BETA1*(BETA1-1)*BETA2*(BETA2-1)*(BETA2-BETA1)*(10*BETA1*BETA2-5*BETA2-5*BETA1+3);var bt2_cf11=BETA1*(-3*BETA1+2);var bt2_cf01=BETA1*(-3*BETA1+4)-1;var bt2_cys1=6*BETA1*(BETA1-1);var bt2_cf12=BETA2*(-3*BETA2+2);var bt2_cf02=BETA2*(-3*BETA2+4)-1;var bt2_cys2=6*BETA2*(BETA2-1);var bt2_m44=BETA1*(2+BETA1*(-6+4*BETA1));var bt2_m54=BETA2*(2+BETA2*(-6+4*BETA2));var bt2_m45=BETA1*(4+BETA1*(-9+5*BETA1*BETA1));var bt2_m55=BETA2*(4+BETA2*(-9+5*BETA2*BETA2));var dimension=aState.length;var timeIndex=dimension-1;var deltaTime=self.getDeltaTime();var state_bt2=new Array(dimension);var rate_bt21=new Array(dimension);var rate_bt22=new Array(dimension);mBt2_c2=new Array(dimension);mBt2_c3=new Array(dimension);mBt2_c4=new Array(dimension);mBt2_c5=new Array(dimension);self.bootstrap1(BETA1,state_bt2,0,timeIndex);state_bt2[timeIndex]=self.getLeft()+BETA1*deltaTime;ode.getRate(state_bt2,rate_bt21);self.bootstrap1(BETA2,state_bt2,0,timeIndex);state_bt2[timeIndex]=self.getLeft()+BETA2*deltaTime;ode.getRate(state_bt2,rate_bt22);for(var i=0;i<dimension;i++){var dif=bState[i]-aState[i];var f0=deltaTime*aRate[i];var f1=deltaTime*bRate[i];var e1=deltaTime*rate_bt21[i]+bt2_cf11*f1+bt2_cf01*f0+bt2_cys1*dif;var e2=deltaTime*rate_bt22[i]+bt2_cf12*f1+bt2_cf02*f0+bt2_cys2*dif;var c4=(bt2_m55*e1-bt2_m45*e2)/bt2_den;var c5=(bt2_m44*e2-bt2_m54*e1)/bt2_den;var c3=f1+f0-2*dif-2*c4-3*c5;mBt2_c5[i]=c5;mBt2_c4[i]=c4;mBt2_c3[i]=c3;mBt2_c2[i]=dif-f0-c3-c4-c5}return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.BootstrapIntervalData={};EJSS_ODE_INTERPOLATION.bootstrapIntervalData=function(aState,aRate,bState,bRate,ode){var self=EJSS_ODE_INTERPOLATION.hermiteIntervalData(aState,aRate,bState,bRate);var mBt1_c2;var mBt1_c3;var mBt1_c4;self.interpolate=function(time,index){var deltaTime=self.getDeltaTime();var leftState=self.getLeftState();var leftRate=self.getLeftRate();var step=(time-self.getLeft())/deltaTime;return leftState[index]+step*(deltaTime*leftRate[index]+step*(mBt1_c2[index]+step*(mBt1_c3[index]+step*mBt1_c4[index])))};self.interpolateState=function(time,state,beginIndex,length){self.bootstrap1((time-self.getLeft())/self.getDeltaTime(),state,beginIndex,length);return state};self.bootstrap1=function(step,state,beginIndex,length){var deltaTime=self.getDeltaTime();var leftState=self.getLeftState();var leftRate=self.getLeftRate();var index=beginIndex;for(var i=0;i<length;i++){state[i]=leftState[index]+step*(deltaTime*leftRate[index]+step*(mBt1_c2[index]+step*(mBt1_c3[index]+step*mBt1_c4[index])));index++}};var ALPHA=.25;var bt1_den=ALPHA*(ALPHA-1)*(4*ALPHA-2);var bt1_cf1=ALPHA*(-3*ALPHA+2);var bt1_cf0=ALPHA*(-3*ALPHA+4)-1;var bt1_cys=6*ALPHA*(ALPHA-1);var dimension=aState.length;var deltaTime=self.getDeltaTime();var state_bt1=new Array(dimension);var rate_bt1=new Array(dimension);mBt1_c2=new Array(dimension);mBt1_c3=new Array(dimension);mBt1_c4=new Array(dimension);self.hermite(ALPHA,state_bt1,0,dimension-1);state_bt1[dimension-1]=self.getLeft()+ALPHA*deltaTime;ode.getRate(state_bt1,rate_bt1);for(var i=0;i<dimension;i++){var dif=bState[i]-aState[i];var f0=deltaTime*aRate[i];var f1=deltaTime*bRate[i];var c4=(deltaTime*rate_bt1[i]+bt1_cf1*f1+bt1_cf0*f0+bt1_cys*dif)/bt1_den;var c3=f1+f0-2*dif-2*c4;mBt1_c4[i]=c4;mBt1_c3[i]=c3;mBt1_c2[i]=dif-f0-c3-c4}return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.ConstantConditionData={};EJSS_ODE_INTERPOLATION.constantConditionData=function(aState){var self=EJSS_ODE_INTERPOLATION.intervalData(Number.NaN,Number.NaN);var mState;self.interpolate=function(time,index){return mState[index]};self.interpolateState=function(time,state,beginIndex,length){var index=beginIndex;for(var i=0;i<length;i++){state[i]=mState[index];index++}return state};var dimension=aState.length;mState=new Array(dimension);for(var i=0;i<dimension;i++){mState[i]=aState[i]}return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.Dopri5IntervalData={};EJSS_ODE_INTERPOLATION.dopri5IntervalData=function(aState,bState,coeffs){var self=EJSS_ODE_INTERPOLATION.extraStepsIntervalData(aState,bState,coeffs);self.interpolate=function(time,index){var theta=(time-self.getLeft())/self.getDeltaTime();var theta1=1-theta;var coeffs=self.getCoeffs();return coeffs[0][index]+theta*(coeffs[1][index]+theta1*(coeffs[2][index]+theta*(coeffs[3][index]+theta1*coeffs[4][index])))};self.interpolateState=function(time,state,beginIndex,length){var theta=(time-self.getLeft())/self.getDeltaTime();var theta1=1-theta;var coeffs=self.getCoeffs();var index=beginIndex;for(var i=0;i<length;i++){state[i]=coeffs[0][index]+theta*(coeffs[1][index]+theta1*(coeffs[2][index]+theta*(coeffs[3][index]+theta1*coeffs[4][index])));index++}return state};return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.Dopri853IntervalData={};EJSS_ODE_INTERPOLATION.dopri853IntervalData=function(aState,bState,coeffs){var self=EJSS_ODE_INTERPOLATION.extraStepsIntervalData(aState,bState,coeffs);self.interpolate=function(time,index){var theta=(time-self.getLeft())/self.getDeltaTime();var theta1=1-theta;var coeffs=self.getCoeffs();return coeffs[0][index]+theta*(coeffs[1][index]+theta1*(coeffs[2][index]+theta*(coeffs[3][index]+theta1*(coeffs[4][index]+theta*(coeffs[5][index]+theta1*(coeffs[6][index]+theta*coeffs[7][index]))))))};self.interpolateState=function(time,state,beginIndex,length){var theta=(time-self.getLeft())/self.getDeltaTime();var theta1=1-theta;var coeffs=self.getCoeffs();var index=beginIndex;for(var i=0;i<length;i++){state[i]=coeffs[0][index]+theta*(coeffs[1][index]+theta1*(coeffs[2][index]+theta*(coeffs[3][index]+theta1*(coeffs[4][index]+theta*(coeffs[5][index]+theta1*(coeffs[6][index]+theta*coeffs[7][index]))))));index++}return state};return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.EulerIntervalData={};EJSS_ODE_INTERPOLATION.eulerIntervalData=function(state,rate,right){var self=EJSS_ODE_INTERPOLATION.intervalData(state[state.length-1],right);var mLeftState;var mLeftRate;self.interpolate=function(time,index){var step=time-self.getLeft();return mLeftState[index]+step*mLeftRate[index]};self.interpolateState=function(time,state,beginIndex,length){var step=time-self.getLeft();var index=beginIndex;for(var i=0;i<length;i++){state[i]=mLeftState[index]+step*mLeftRate[index];index++}return state};var dimension=state.length;mLeftState=new Array(dimension);mLeftRate=new Array(dimension);for(var i=0;i<dimension;i++){mLeftState[i]=state[i];mLeftRate[i]=rate[i]}return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.EulerRichardsonIntervalData={};EJSS_ODE_INTERPOLATION.eulerRichardsonIntervalData=function(state,rate,right,K2){var self=EJSS_ODE_INTERPOLATION.intervalData(state[state.length-1],right);var mTimeIndex;var mStepSize;var mLeftState;var mLeftRate;var mK2;self.interpolate=function(time,index){var theta=(time-self.getLeft())/mStepSize;var b2=theta*theta*mStepSize;var b1=mStepSize*theta-b2;return mLeftState[index]+b1*mLeftRate[index]+b2*mK2[index]};self.interpolateState=function(time,state,beginIndex,length){var theta=(time-self.getLeft())/mStepSize;var b2=theta*theta*mStepSize;var b1=mStepSize*theta-b2;var index=beginIndex;for(var i=0;i<length;i++){state[i]=mLeftState[index]+b1*mLeftRate[index]+b2*mK2[index];index++}return state};var dimension=state.length;mLeftState=new Array(dimension);mLeftRate=new Array(dimension);mK2=new Array(dimension);for(var i=0;i<dimension;i++){mLeftState[i]=state[i];mLeftRate[i]=rate[i];mK2[i]=K2[i]}mTimeIndex=dimension-1;mStepSize=right-state[mTimeIndex];return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.ExtraStepsIntervalData={};EJSS_ODE_INTERPOLATION.extraStepsIntervalData=function(aState,bState,coeffs){var self=EJSS_ODE_INTERPOLATION.intervalData(aState[aState.length-1],bState[bState.length-1]);var mTimeIndex;var mDeltaTime;var mCoeffs;self.getTimeIndex=function(){return mTimeIndex};self.getDeltaTime=function(){return mDeltaTime};self.getCoeffs=function(){return mCoeffs};var dimension=aState.length;mTimeIndex=dimension-1;mDeltaTime=bState[mTimeIndex]-aState[mTimeIndex];var length=coeffs.length;mCoeffs=new Array(length);for(var i=0;i<length;i++){mCoeffs[i]=new Array(dimension);for(var j=0;j<dimension;j++){mCoeffs[i][j]=coeffs[i][j]}}return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.HermiteIntervalData={};EJSS_ODE_INTERPOLATION.hermiteIntervalData=function(aState,aRate,bState,bRate){var self=EJSS_ODE_INTERPOLATION.intervalData(aState[aState.length-1],bState[bState.length-1]);var mTimeIndex;var mDeltaTime;var mLeftState;var mLeftRate;var mRightState;var mRightRate;self.getTimeIndex=function(){return mTimeIndex};self.getDeltaTime=function(){return mDeltaTime};self.getLeftState=function(){return mLeftState};self.getLeftRate=function(){return mLeftRate};self.interpolate=function(time,index){var theta=(time-self.getLeft())/mDeltaTime;var minus1=theta-1;var prod1=theta*minus1;var prod2=prod1*(1-2*theta);var coefX0=-minus1-prod2;var coefX1=theta+prod2;var coefF0=prod1*minus1*mDeltaTime;var coefF1=prod1*theta*mDeltaTime;return coefX0*mLeftState[index]+coefX1*mRightState[index]+coefF0*mLeftRate[index]+coefF1*mRightRate[index]};self.interpolateState=function(time,state,beginIndex,length){self.hermite((time-self.getLeft())/mDeltaTime,state,beginIndex,length);return state};self.hermite=function(theta,state,beginIndex,length){var minus1=theta-1;var prod1=theta*minus1;var prod2=prod1*(1-2*theta);var coefX0=-minus1-prod2;var coefX1=theta+prod2;var coefF0=prod1*minus1*mDeltaTime;var coefF1=prod1*theta*mDeltaTime;var index=beginIndex;for(var i=0;i<length;i++){state[i]=coefX0*mLeftState[index]+coefX1*mRightState[index]+coefF0*mLeftRate[index]+coefF1*mRightRate[index];index++}};var dimension=aState.length;mLeftState=new Array(dimension);mLeftRate=new Array(dimension);mRightState=new Array(dimension);mRightRate=new Array(dimension);for(var i=0;i<dimension;i++){mLeftState[i]=aState[i];mLeftRate[i]=aRate[i];mRightState[i]=bState[i];mRightRate[i]=bRate[i]}mTimeIndex=dimension-1;mDeltaTime=bState[mTimeIndex]-aState[mTimeIndex];return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.InitialConditionData={};EJSS_ODE_INTERPOLATION.initialConditionData=function(mDDE){var self=EJSS_ODE_INTERPOLATION.intervalData(Number.NaN,Number.NaN);var mState;self.interpolate=function(time,index){mDDE.getInitialCondition(time,mState);return mState[index]};self.interpolateState=function(time,state,beginIndex,length){mDDE.getInitialCondition(time,mState);var index=beginIndex;for(var i=0;i<length;i++){state[i]=mState[index];index++}return state};var state=mDDE.getState();var dimension=state.length;mState=new Array(dimension);return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.IntervalData={};EJSS_ODE_INTERPOLATION.intervalData=function(mLeft,mRight){var self={};self.getLeft=function(){return mLeft};self.getRight=function(){return mRight};self.setRight=function(rightSide){mRight=rightSide};self.interpolate=function(time,index){return Number.NaN};self.interpolateState=function(time,state,beginIndex,length){return state};return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.Radau5IntervalData={};EJSS_ODE_INTERPOLATION.radau5IntervalData=function(aState,aRate,coeffs){var self=EJSS_ODE_INTERPOLATION.extraStepsIntervalData(aState,bState,coeffs);var mFinalTime=bState[bState.length-1];self.interpolate=function(time,index){var theta=(time-mFinalTime)/self.getDeltaTime();var coeffs=self.getCoeffs();var c1m1=EJSS_ODE_SOLVERS.Radau5.c1m1;var c2m1=EJSS_ODE_SOLVERS.Radau5.c2m1;return coeffs[0][index]+theta*(coeffs[1][index]+(theta-c2m1)*(coeffs[2][index]+(theta-c1m1)*coeffs[3][index]))};self.interpolateState=function(time,state,beginIndex,length){var theta=(time-mFinalTime)/mDeltaTime;var coeffs=self.getCoeffs();var c1m1=EJSS_ODE_SOLVERS.Radau5.c1m1;var c2m1=EJSS_ODE_SOLVERS.Radau5.c2m1;var index=beginIndex;for(var i=0;i<length;i++){state[i]=coeffs[0][index]+theta*(coeffs[1][index]+(theta-c2m1)*(coeffs[2][index]+(theta-c1m1)*coeffs[3][index]));index++}return state};return self};var EJSS_ODE_INTERPOLATION=EJSS_ODE_INTERPOLATION||{};EJSS_ODE_INTERPOLATION.StateHistory={};EJSS_ODE_INTERPOLATION.stateHistory=function(ode){var self={};var mIntervalList=[];var mForwards=true;var mLastResourceInterval;var mMinimumLength=0;var mUserLength=0;var mActualLength=0;self.setLength=function(length){mUserLength=Math.abs(length);mActualLength=Math.max(mMinimumLength,mUserLength)};self.setMinimumLength=function(length){mMinimumLength=Math.abs(length);mActualLength=Math.max(mMinimumLength,mUserLength)};self.addIntervalData=function(data){mForwards=data.getLeft()<=data.getRight();var length=mIntervalList.length;if(mIntervalList.length>0){var lastIndex=mIntervalList.length-1;var lastInterval=mIntervalList[lastIndex];var toRemove=0;if(mForwards){while(lastInterval!=null&&lastInterval.getLeft()>=data.getLeft()){toRemove++;lastIndex--;if(lastIndex<0)lastInterval=null;else lastInterval=mIntervalList[lastIndex]}if(lastInterval!=null&&data.getLeft()<lastInterval.getRight())lastInterval.setRight(data.getLeft())}else{while(lastInterval!=null&&lastInterval.getLeft()<=data.getLeft()){toRemove++;lastIndex--;if(lastIndex<0)lastInterval=null;else lastInterval=mIntervalList[lastIndex]}if(lastInterval!=null&&data.getLeft()>lastInterval.getRight())lastInterval.setRight(data.getLeft())}if(toRemove>0)mIntervalList.splice(lastIndex,toRemove)}mIntervalList.push(data)};self.toString=function(){var txt="History has now "+mIntervalList.length+" intervals: ";for(var i=0,n=mIntervalList.length;i<n;i++){var interval=mIntervalList[i];if(i>0)txt+=", ";txt+=" ["+interval.getLeft()+","+interval.getRight()+")"}return txt};self.clearAll=function(){mIntervalList=[]};self.clean=function(currentTime){if(!isFinite(mActualLength))return;if(mActualLength==0){clearAll();return}var toBeRemoved=0;var length=mIntervalList.length;if(mForwards){currentTime-=mActualLength;for(var i=0;i<length;i++){var interval=mIntervalList[i];if(interval.getRight()>currentTime)break;toBeRemoved++}}else{currentTime+=mActualLength;for(var i=0;i<length;i++){var interval=mIntervalList[i];if(interval.getRight()<currentTime)break;toBeRemoved++}}if(toBeRemoved>0)mIntervalList.splice(0,toBeRemoved)};self.findInterval=function(time){var length=mIntervalList.length;if(mForwards){for(var i=length-1;i>=0;i--){var interval=mIntervalList[i];if(interval.getLeft()<=time)return interval}}else{for(var i=length-1;i>=0;i--){var interval=mIntervalList[i];if(interval.getLeft()>=time)return interval}}return mLastResourceInterval};self.interpolate=function(time,index){var interval=self.findInterval(time);return interval.interpolate(time,index)};self.interpolateState=function(time,state,beginIndex,length){var interval=self.findInterval(time);if(!length)length=state.length;if(!beginIndex)beginIndex=0;return interval.interpolateState(time,state,beginIndex,length)};if(ode.getInitialCondition){mLastResourceInterval=EJSS_ODE_INTERPOLATION.initialConditionData(ode);ode.setStateHistory(self)}else{mLastResourceInterval=EJSS_ODE_INTERPOLATION.constantConditionData(ode.getState())}return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.EVENT_TYPE={STATE_EVENT:0,POSITIVE_EVENT:1,CROSSING_EVENT:2};EJSS_ODE_SOLVERS.EVENT_METHOD={BISECTION:0,SECANT:1};EJSS_ODE_SOLVERS.ERROR={NO_ERROR:0,INTERNAL_SOLVER_ERROR:1,EVENT_NOT_FOUND:2,ILLEGAL_EVENT_STATE:3,ZENO_EFFECT:4,TOO_MANY_STEPS_ERROR:5,DISCONTINUITY_PRODUCED_ERROR:6,DID_NOT_CONVERGE:7};EJSS_ODE_SOLVERS.DISCONTINUITY_CODE={DISCONTINUITY_PRODUCED_ERROR:0,NO_DISCONTINUITY_ALONG_STEP:1,DISCONTINUITY_ALONG_STEP:2,DISCONTINUITY_JUST_PASSED:3,DISCONTINUITY_EXACTLY_ON_STEP:4};EJSS_ODE_SOLVERS.InterpolatorEventSolver={};EJSS_ODE_SOLVERS.interpolatorEventSolver=function(mSolverEngine,mODE){var self={};var mEnableExceptions=true;var mUseBestInterpolation=false;var mStepSize=.1;var mAbsoluteTolerance=Number.NaN;var mRelativeTolerance=Number.NaN;var mMaxEventStep=Number.POSITIVE_INFINITY;var mZenoMaximumAllowedTimes=500;var mProximityThreshold=2*Number.MIN_VALUE;var mCoalesceCloseEvents=true;var mMaxInternalSteps=1e4;var mRunsForwards=mStepSize>0;var mDimension;var mTimeIndex;var mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;var mErrorMessage="No error";var mNumberOfAttempts=0;var mTest_ode_state;var mIntermediate_ode_state;var mEventList=[];var mHappened=[];var mTemp_list=[];var mLastEventDataTime=Number.NaN;var mLastEventData=null;var mZenoCounter=0;var mZenoList=[];var mCurrentEventData=null;var mHasEventsOrDiscontinuities=false;var mHasDiscontinuities=false;var mDiscontinuityAtEnd=null;var mDiscontinuityList=[];var mDDEdiscontinuity=null;var mDDEdiscontinuityMaxIterations=100;var mDDEdiscontinuityTolerance=1e-8;var sEPSILON=Number.NaN;self.getEPSILON=function(){if(isNaN(sEPSILON)){sEPSILON=1;while(sEPSILON+1!=1)sEPSILON/=2;sEPSILON*=2}return sEPSILON};self.setEnableExceptions=function(enable){mEnableExceptions=enable};self.setBestInterpolation=function(best){mUseBestInterpolation=best};self.setHistoryLength=function(length){mSolverEngine.getStateHistory().setLength(length)};self.setStepSize=function(stepSize){if(mStepSize==stepSize)return;mStepSize=stepSize;mRunsForwards=mStepSize>0;self.setInternalStepSize(mSolverEngine.getStepSize())};self.getStepSize=function(){return mStepSize};self.setEstimateFirstStep=function(estimate){mSolverEngine.setEstimateFirstStep(estimate)};self.setInternalStepSize=function(stepSize){mSolverEngine.setStepSize(mRunsForwards?Math.abs(stepSize):-Math.abs(stepSize))};self.setMaximumInternalStepSize=function(stepSize){mSolverEngine.setMaximumStepSize(stepSize)};self.setMaximumInternalSteps=function(steps){mMaxInternalSteps=steps};self.setTolerances=function(absTol,relTol){mSolverEngine.setTolerances(mAbsoluteTolerance=Math.abs(absTol),mRelativeTolerance=Math.abs(relTol))};self.setTolerance=function(tol){setTolerances(tol,0)};self.getTolerance=function(){return Math.max(mAbsoluteTolerance,mRelativeTolerance)};self.setDDETolerance=function(tol){mDDEdiscontinuityTolerance=tol};self.getDDETolerance=function(){return mDDEdiscontinuityTolerance};self.setDDEIterations=function(iterations){mDDEdiscontinuityMaxIterations=iterations};self.getDDEIterations=function(){return mDDEdiscontinuityMaxIterations};self.addEvent=function(event){mEventList.push(EJSS_ODE_SOLVERS.eventData(self,event,mODE.getState()));mHasEventsOrDiscontinuities=true};self.removeEvent=function(event){var index=-1;var length=mEventList.length;for(var i=0;i<length;i++){var data=mEventList[i];if(data.getEvent()==event){index=i;break}}if(index>=0){var foundData=mEventList[index];if(mLastEventData==foundData){mLastEventData=null;mZenoCounter=0}if(mCurrentEventData==foundData)mCurrentEventData=null;mEventList.splice(index,1)}mHasEventsOrDiscontinuities=mHasDiscontinuities||mEventList.length>0};self.addDiscontinuity=function(discontinuity){mDiscontinuityList.push(EJSS_ODE_SOLVERS.discontinuityData(self,discontinuity,mODE.getState()));mHasDiscontinuities=true;mHasEventsOrDiscontinuities=true};self.removeDiscontinuity=function(discontinuity){var index=-1;var length=mDiscontinuityList.length;for(var i=0;i<length;i++){var data=mDiscontinuityList[i];if(data.getDiscontinuity()==discontinuity){index=i;break}}if(index>=0){mDiscontinuityList.splice(index,1)}mHasDiscontinuities=mDiscontinuityList.length>0;mHasEventsOrDiscontinuities=mHasDiscontinuities||mEventList.length>0};self.removeAllEvents=function(){mEventList=[];mDiscontinuityList=[];mHasDiscontinuities=false;mHasEventsOrDiscontinuities=false;if(mDDEdiscontinuity!=null)self.addDiscontinuity(mDDEdiscontinuity)};self.setMaximumEventStep=function(step){mMaxEventStep=Math.abs(step)};self.getMaximumEventStep=function(){return mMaxEventStep};self.setCoalesceCloseEvents=function(coalesce){mCoalesceCloseEvents=coalesce};self.isCoalesceCloseEvents=function(){return mCoalesceCloseEvents};self.setEventProximityThreshold=function(threshold){mProximityThreshold=threshold};self.getEventProximityThreshold=function(){return mProximityThreshold};self.setZenoEffectDetection=function(times){mZenoMaximumAllowedTimes=times};self.getZenoEffectDetection=function(){return mZenoMaximumAllowedTimes};self.addZenoEffectListener=function(listener){mZenoList.push(listener)};self.removeZenoEffectListener=function(listener){var length=mZenoList.length;for(var i=0;i<length;i++){if(mZenoList[i]==listener){mZenoList.splice(i,1);return}}};self.setZeroZenoCounter=function(){mZenoCounter=0};self.getSolverEngine=function(){return mSolverEngine};self.getODE=function(){return mODE};self.getStateHistory=function(){return mSolverEngine.getStateHistory()};self.getErrorCode=function(){return mErrorCode};self.getErrorMessage=function(){return mErrorMessage};self.getCounter=function(){return mSolverEngine.getCounter()};self.getNumberOfAttempts=function(){return mNumberOfAttempts};self.getInternalStepSize=function(){return mSolverEngine.getInternalStepSize()};self.getIndependentVariableValue=function(){return mODE.getState()[mTimeIndex]};self.getCurrentTime=function(){return mODE.getState()[mTimeIndex]};self.getRunsForwards=function(){return mRunsForwards};self.getCurrentEventData=function(){return mCurrentEventData};self.getLastEventData=function(){return mLastEventData};self.getLastEventDataTime=function(){return mLastEventDataTime};self.initialize=function(stepSize){var i,length,state;mStepSize=stepSize;mRunsForwards=mStepSize>0;mSolverEngine.initialize(mStepSize);state=mODE.getState();mDimension=state.length;mTimeIndex=mDimension-1;mTest_ode_state=new Array(mDimension);mIntermediate_ode_state=new Array(mDimension);mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;mErrorMessage="No error";mZenoCounter=0;mLastEventData=null;mCurrentEventData=null;if(mDDEdiscontinuity!==null){mDDEdiscontinuity.initialize(state);self.removeDiscontinuity(mDDEdiscontinuity);self.addDiscontinuity(mDDEdiscontinuity)}length=mEventList.length;for(i=0;i<length;i++)mEventList[i].reset(state);length=mDiscontinuityList.length;for(i=0;i<length;i++)mDiscontinuityList[i].reset(state)};self.step=function(){if(mHasEventsOrDiscontinuities)return stepWithEvents();return stepWithoutEvents()};self.maxStep=function(){if(mHasEventsOrDiscontinuities)return maxStepWithEvents();return maxStepWithoutEvents()};self.userReinitialize=function(){mCurrentEventData=null;self.reinitialize()};self.reinitialize=function(){var i,length;var state=mODE.getState();mSolverEngine.reinitialize(state);mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;mErrorMessage="No error";if(mDDEdiscontinuity!=null)mDDEdiscontinuity.reset(state);length=mEventList.length;for(i=0;i<length;i++)mEventList[i].reset(state);length=mDiscontinuityList.length;for(i=0;i<length;i++)mDiscontinuityList[i].reset(state);mDiscontinuityAtEnd=null};self.resetDiscontinuities=function(state){if(mDDEdiscontinuity!==null){mDDEdiscontinuity.reset(state);var length=mDiscontinuityList.length;for(var i=0;i<length;i++)mDiscontinuityList[i].reset(state)}};self.checkDiscontinuity=function(state,isEndOfInterval){var length=mDiscontinuityList.length;var justHappened=null;for(var i=0;i<length;i++){var data=mDiscontinuityList[i];var h=data.getDiscontinuity().evaluate(state);data.setH(h);switch(data.getCurrentPosition()){default:case EJSS_ODE_SOLVERS.ProblemData.POSITIVE:if(h<=0){
return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_ALONG_STEP}if(h<data.getDiscontinuity().getTolerance())justHappened=data;break;case EJSS_ODE_SOLVERS.ProblemData.SMALL_POSITIVE:if(h<=0&&data.hasPositiveFlag()){self.error(EJSS_ODE_SOLVERS.ERROR.ILLEGAL_EVENT_STATE,"The system started from an illegal state at "+state[mTimeIndex]+" for the discontinuity "+data.getDiscontinuity());return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR}break;case EJSS_ODE_SOLVERS.ProblemData.ZERO:if(h<0&&data.hasPositiveFlag()){self.error(EJSS_ODE_SOLVERS.ERROR.ILLEGAL_EVENT_STATE,"The system started from an illegal state at "+state[mTimeIndex]+" for the discontinuity "+data.getDiscontinuity());return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR}else if(h>0&&data.hasNegativeFlag()){self.error(EJSS_ODE_SOLVERS.ERROR.ILLEGAL_EVENT_STATE,"The system started from an illegal state at "+state[mTimeIndex]+" for the discontinuity "+data.getDiscontinuity());return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR}break;case EJSS_ODE_SOLVERS.ProblemData.SMALL_NEGATIVE:if(data.hasNegativeFlag()&&h>=0){self.error(EJSS_ODE_SOLVERS.ERROR.ILLEGAL_EVENT_STATE,"The system started from an illegal state at "+state[mTimeIndex]+" for the discontinuity "+data.getDiscontinuity());return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR}break;case EJSS_ODE_SOLVERS.ProblemData.NEGATIVE:if(h>0){return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_ALONG_STEP}if(h>-data.getDiscontinuity().getTolerance())justHappened=data;break}}if(justHappened!=null){if(isEndOfInterval){mDiscontinuityAtEnd=justHappened;mDiscontinuityAtEnd.setTime(state[mTimeIndex])}return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_EXACTLY_ON_STEP}return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.NO_DISCONTINUITY_ALONG_STEP};function doTheInterpolation(time,state){if(mUseBestInterpolation)mSolverEngine.bestInterpolate(time,state);else mSolverEngine.interpolate(time,state)}self.error=function(code,msg){mErrorCode=code;mErrorMessage=msg;if(mEnableExceptions)throw{name:"ODE Solver exception",solver:mSolverEngine,message:msg};return Number.NaN};function maxStepWithoutEvents(){var state=mODE.getState();var rate=mSolverEngine.getCurrentRate();var tBegin=state[mTimeIndex];if(tBegin+rate[mTimeIndex]==tBegin)return 0;var max_t=mSolverEngine.getMaximumTime(false);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver at "+state[mTimeIndex]);if(tBegin==max_t){max_t=mSolverEngine.internalStep(false);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver at max step at "+state[mTimeIndex])}doTheInterpolation(max_t,state);return max_t-tBegin}function stepWithoutEvents(){var state=mODE.getState();var rate=mSolverEngine.getCurrentRate();var tBegin=state[mTimeIndex];if(tBegin+rate[mTimeIndex]==tBegin)return 0;var tEnd=state[mTimeIndex]+mStepSize;var max_t=mSolverEngine.getMaximumTime(false);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver at "+state[mTimeIndex]);var counter=0;if(mRunsForwards){while(max_t<tEnd){max_t=mSolverEngine.internalStep(false);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver forwards at "+state[mTimeIndex]);if(++counter>mMaxInternalSteps){var initTime=state[mTimeIndex];var currentTime=mSolverEngine.bestInterpolate(tEnd,new Array(mDimension))[mTimeIndex];return self.error(EJSS_ODE_SOLVERS.ERROR.TOO_MANY_STEPS_ERROR,"The solver exceeded the maximum of "+mMaxInternalSteps+" internal steps\nat "+currentTime+", starting from "+initTime+" for an step of "+mStepSize)}}}else{while(max_t>tEnd){max_t=mSolverEngine.internalStep(false);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver backwards at "+state[mTimeIndex]);if(++counter>mMaxInternalSteps)return self.error(EJSS_ODE_SOLVERS.ERROR.TOO_MANY_STEPS_ERROR,"The solver exceeded the number of internal steps at "+state[mTimeIndex])}}doTheInterpolation(tEnd,state);return mStepSize}function maxStepWithEvents(){var state=mODE.getState();if(mZenoMaximumAllowedTimes>0&&mZenoCounter>mZenoMaximumAllowedTimes){if(callZenoAction(state))return 0}var tBegin=state[mTimeIndex];var rate=mSolverEngine.getCurrentRate();if(tBegin+rate[mTimeIndex]==tBegin)return 0;var max_t=mSolverEngine.getMaximumTime(mHasDiscontinuities);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver at "+state[mTimeIndex]);if(tBegin==max_t){max_t=mSolverEngine.internalStep(mHasDiscontinuities);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver forwards at "+state[mTimeIndex])}if(mLastEventData!=null){if(!isNaN(mLastEventData.getMaxAdvance())){max_t=mRunsForwards?Math.min(max_t,mLastEventData.getMaxAdvance()):Math.max(max_t,mLastEventData.getMaxAdvance())}}var tTest=mRunsForwards?Math.min(tBegin+mMaxEventStep,max_t):Math.max(tBegin-mMaxEventStep,max_t);while(true){var problem=null;mCurrentEventData=null;doTheInterpolation(tTest,mTest_ode_state);problem=self.findFirstEvent(state,tTest,mTest_ode_state);if(problem==null&&mDiscontinuityAtEnd!=null&&mDiscontinuityAtEnd.getTime()<=tTest)problem=mDiscontinuityAtEnd;if(problem==null){if(tTest==max_t){for(var i=0;i<mDimension;i++)state[i]=mTest_ode_state[i];updateEventsAndDiscontinuities(state[mTimeIndex]);return max_t-tBegin}tTest=mRunsForwards?Math.min(tTest+mMaxEventStep,max_t):Math.max(tTest-mMaxEventStep,max_t);continue}mCurrentEventData=problem;if(mUseBestInterpolation)mSolverEngine.bestInterpolate(problem.getTime(),state);else for(var i=0;i<mDimension;i++)state[i]=mTest_ode_state[i];var timeBefore=state[mTimeIndex];problem.action();self.reinitialize();state=mODE.getState();if(timeBefore!=state[mTimeIndex]){mZenoCounter=0;mLastEventData=null;mCurrentEventData=null;problem.reset(state);return problem.getTime()-tBegin}if(mLastEventData!=null){if(Math.abs(mLastEventDataTime-problem.getTime())<mProximityThreshold){mZenoCounter++}else mZenoCounter=0}mLastEventData=problem;mLastEventDataTime=problem.getTime();return problem.getTime()-tBegin}}function stepWithEvents(){var state=mODE.getState();if(mZenoMaximumAllowedTimes>0&&mZenoCounter>mZenoMaximumAllowedTimes){if(callZenoAction(state))return 0}var tBegin=state[mTimeIndex];var rate=mSolverEngine.getCurrentRate();if(tBegin+rate[mTimeIndex]==tBegin)return 0;var tEnd=tBegin+mStepSize;var max_t=mSolverEngine.getMaximumTime(mHasDiscontinuities);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver at "+state[mTimeIndex]);var tTest=mRunsForwards?Math.min(tBegin+mMaxEventStep,tEnd):Math.max(tBegin-mMaxEventStep,tEnd);var counter=0;while(true){var problem=null;mCurrentEventData=null;var notYetThere=mRunsForwards?max_t<tTest:max_t>tTest;if(notYetThere){mSolverEngine.bestInterpolate(max_t,mTest_ode_state);problem=self.findFirstEvent(state,max_t,mTest_ode_state);if(problem==null)problem=mDiscontinuityAtEnd;if(problem==null){for(var i=0;i<mDimension;i++)state[i]=mTest_ode_state[i];updateEventsAndDiscontinuities(state[mTimeIndex]);max_t=mSolverEngine.internalStep(mHasDiscontinuities);if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver looking for an event at "+state[mTimeIndex]);if(++counter>mMaxInternalSteps)return self.error(EJSS_ODE_SOLVERS.ERROR.TOO_MANY_STEPS_ERROR,"The solver exceeded the number of internal steps at "+state[mTimeIndex]);continue}}else{doTheInterpolation(tTest,mTest_ode_state);problem=self.findFirstEvent(state,tTest,mTest_ode_state);if(problem==null&&mDiscontinuityAtEnd!=null&&mDiscontinuityAtEnd.time<=tTest)problem=mDiscontinuityAtEnd;if(problem==null){if(tTest==tEnd){for(var i=0;i<mDimension;i++)state[i]=mTest_ode_state[i];updateEventsAndDiscontinuities(state[mTimeIndex]);return tEnd-tBegin}tTest=mRunsForwards?Math.min(tTest+mMaxEventStep,tEnd):Math.max(tTest-mMaxEventStep,tEnd);continue}}mCurrentEventData=problem;if(mUseBestInterpolation)mSolverEngine.bestInterpolate(problem.getTime(),state);else for(var i=0;i<mDimension;i++)state[i]=mTest_ode_state[i];var timeBefore=state[mTimeIndex];var wantsToQuit=problem.action();self.reinitialize();counter=0;state=mODE.getState();if(timeBefore!=state[mTimeIndex]){mZenoCounter=0;mLastEventData=null;mCurrentEventData=null;problem.reset(state);return problem.getTime()-tBegin}if(mLastEventData!=null){if(Math.abs(mLastEventDataTime-problem.getTime())<mProximityThreshold){mZenoCounter++;if(mCoalesceCloseEvents)wantsToQuit=false}else mZenoCounter=0}mLastEventData=problem;mLastEventDataTime=problem.getTime();if(wantsToQuit)return problem.getTime()-tBegin;if(mZenoMaximumAllowedTimes>0&&mZenoCounter>mZenoMaximumAllowedTimes){if(callZenoAction(state))return problem.getTime()-tBegin}mDiscontinuityAtEnd=null;max_t=mSolverEngine.getMaximumTime(mHasDiscontinuities);if(!isNaN(problem.getMaxAdvance())){max_t=mRunsForwards?Math.min(max_t,problem.getMaxAdvance()):Math.max(max_t,problem.getMaxAdvance())}if(isNaN(max_t))return self.error(EJSS_ODE_SOLVERS.ERROR.INTERNAL_SOLVER_ERROR,"Error when stepping the solver after an event at "+state[mTimeIndex])}}function updateEventsAndDiscontinuities(time){var i,length;length=mEventList.length;for(i=0;i<length;i++){var data=mEventList[i];data.findPosition(time,data.getH())}length=mDiscontinuityList.length;for(i=0;i<length;i++){var data=mDiscontinuityList[i];data.findPosition(time,data.getH())}}function callZenoAction(state){if(mZenoList.length<=0){self.error(EJSS_ODE_SOLVERS.ERROR.ZENO_EFFECT,"A Zeno-like effect has been detected.\nLast event was "+mLastEventData.getProblem()+" which took place at "+mLastEventDataTime);return true}var returnAtZeno=false;var i;var length=mZenoList.length;for(i=0;i<length;i++){var listener=mZenoList[i];if(listener.zenoEffectAction(mLastEventData.getProblem(),state))returnAtZeno=true}mZenoCounter=0;return returnAtZeno}self.findFirstEvent=function(current_state,tFinal,final_state){var i,length;mNumberOfAttempts=0;var happensAtT1=happensRightNow(current_state[mTimeIndex],final_state,mHappened,"at t1");if(happensAtT1!=null){happensAtT1.time=current_state[mTimeIndex];happensAtT1.maxAdvance=tFinal;for(i=0;i<mDimension;i++)final_state[i]=current_state[i];return happensAtT1}if(mHappened.length<=0)return null;var doItAgain=true;length=mEventList.length;for(i=0;i<length;i++){var eventData=mEventList[i];eventData.setHAfter(eventData.getH())}while(doItAgain){mNumberOfAttempts++;var tTest=nextPointToCheck(mHappened,current_state[mTimeIndex],tFinal);doTheInterpolation(tTest,mIntermediate_ode_state);var shortDurationEvent=happensRightNow(current_state[mTimeIndex],mIntermediate_ode_state,mTemp_list,"short");if(shortDurationEvent!=null){shortDurationEvent.time=current_state[mTimeIndex];shortDurationEvent.maxAdvance=tTest;for(i=0;i<mDimension;i++)final_state[i]=current_state[i];return shortDurationEvent}if(mTemp_list.length<=0){var happensInTtest=null;length=mHappened.length;for(i=0;i<length;i++){var eventData=mHappened[i];if(eventData.getCurrentPosition()==EJSS_ODE_SOLVERS.ProblemData.POSITIVE){if(eventData.getH()<eventData.getEvent().getTolerance()){happensInTtest=eventData;break}}else{if(eventData.getH()>-eventData.getEvent().getTolerance()){happensInTtest=eventData;break}}}if(happensInTtest!=null){happensInTtest.time=tTest;happensInTtest.maxAdvance=tFinal;for(i=0;i<mDimension;i++)final_state[i]=mIntermediate_ode_state[i];return happensInTtest}for(i=0;i<mDimension;i++)current_state[i]=mIntermediate_ode_state[i];length=mEventList.length;for(i=0;i<length;i++){var eventData=mEventList[i];eventData.findPosition(current_state[mTimeIndex],eventData.getH())}var happensNowInTtest=happensRightNow(current_state[mTimeIndex],final_state,mHappened,"at tTest");if(happensNowInTtest!=null){happensNowInTtest.time=current_state[mTimeIndex];happensNowInTtest.maxAdvance=tFinal;for(i=0;i<mDimension;i++)final_state[i]=current_state[i];return happensNowInTtest}}else{var notPreviousFound=true;var happensInTtest=null;length=mTemp_list.length;for(i=0;i<length;i++){var data=mTemp_list[i];if(data.getCurrentPosition()==EJSS_ODE_SOLVERS.ProblemData.POSITIVE){if(data.getH()<=-data.getEvent().getTolerance()){notPreviousFound=false;break}happensInTtest=data}else{if(data.getH()>=data.getEvent().getTolerance()){notPreviousFound=false;break}happensInTtest=data}}if(notPreviousFound&&happensInTtest!=null){happensInTtest.time=tTest;happensInTtest.maxAdvance=tFinal;for(i=0;i<mDimension;i++)final_state[i]=mIntermediate_ode_state[i];return happensInTtest}tFinal=tTest;for(i=0;i<mDimension;i++)final_state[i]=mIntermediate_ode_state[i];length=mEventList.length;for(i=0;i<length;i++){var eventData=mEventList[i];eventData.setHAfter(eventData.getH())}mHappened=[];length=mTemp_list.length;for(i=0;i<length;i++)mHappened.push(mTemp_list[i])}length=mHappened.length;for(i=0;i<length;i++){var data=mHappened[i];if(mNumberOfAttempts>data.getEvent().getMaxIterations()){doItAgain=false;break}}}var remaining=mHappened[0];self.error(EJSS_ODE_SOLVERS.ERROR.EVENT_NOT_FOUND,"Warning : Event not found after "+mNumberOfAttempts+" attempts at t="+current_state[mTimeIndex]+" h="+remaining.getH()+".\nPlease check the code of your event, decrease the initial step size, the tolerance of the solver,"+"\nor the event maximum step, or increase the maximum number of attempts."+"\nFirst event remaining in the queue: "+remaining.getEvent());remaining.setTime((current_state[mTimeIndex]+tFinal)/2);remaining.setMaxAdvance(Number.NaN);mSolverEngine.bestInterpolate(remaining.time,final_state);return remaining};function happensRightNow(currentTime,final_state,list,id){list.splice(0,list.length);var length=mEventList.length;for(var i=0;i<length;i++){var eventData=mEventList[i];eventData.setH(eventData.getEvent().evaluate(final_state));switch(eventData.getCurrentPosition()){default:case EJSS_ODE_SOLVERS.ProblemData.POSITIVE:if(eventData.getH()<=0)list.push(eventData);break;case EJSS_ODE_SOLVERS.ProblemData.SMALL_POSITIVE:if(eventData.getH()<=0&&(eventData.hasPositiveFlag()||eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.STATE_EVENT))return eventData;break;case EJSS_ODE_SOLVERS.ProblemData.ZERO:if(eventData.getH()<0){if(eventData.hasPositiveFlag()||eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.STATE_EVENT)return eventData}else if(eventData.getH()>0){if(eventData.hasNegativeFlag()&&eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.CROSSING_EVENT)return eventData}break;case EJSS_ODE_SOLVERS.ProblemData.SMALL_NEGATIVE:if(eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.STATE_EVENT){if(eventData.getH()<=-eventData.getEvent().getTolerance())return eventData}else if(eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.CROSSING_EVENT){if(eventData.hasNegativeFlag()&&eventData.getH()>=0)return eventData}break;case EJSS_ODE_SOLVERS.ProblemData.NEGATIVE:if(eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.CROSSING_EVENT){if(eventData.getH()>=0)list.push(eventData)}else if(eventData.getEventType()==EJSS_ODE_SOLVERS.EVENT_TYPE.STATE_EVENT){self.error(EJSS_ODE_SOLVERS.ERROR.ILLEGAL_EVENT_STATE,"The system started from an illegal state at "+currentTime+" for the state event "+eventData.getEvent());return eventData}break}}return null}function nextPointToCheck(list,t1,t2){var i,length=list.length;var hB,tFirst=t2,dt=t2-t1,tMiddle=(t1+t2)/2;if(mRunsForwards){for(i=0;i<length;i++){var eventData=list[i];switch(eventData.getEvent().getRootFindingMethod()){default:case EJSS_ODE_SOLVERS.EVENT_METHOD.BISECTION:tFirst=Math.min(tFirst,tMiddle);break;case EJSS_ODE_SOLVERS.EVENT_METHOD.SECANT:hB=eventData.getHBefore();tFirst=Math.min(tFirst,t1-hB*dt/(eventData.getHAfter()-hB));break}}}else{for(i=0;i<length;i++){var eventData=list[i];switch(eventData.getEvent().getRootFindingMethod()){default:case EJSS_ODE_SOLVERS.EVENT_METHOD.BISECTION:tFirst=Math.max(tFirst,tMiddle);break;case EJSS_ODE_SOLVERS.EVENT_METHOD.SECANT:hB=eventData.getHBefore();tFirst=Math.max(tFirst,t1-hB*dt/(eventData.getHAfter()-hB));break}}}return tFirst}if(mODE.getDelays){mDDEdiscontinuity=EJSS_ODE_SOLVERS.ddeDiscontinuity(self,mODE)}mSolverEngine.setODE(self,mODE);return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.BogackiShampine23={B3_1:2/9,B3_2:1/3,B3_3:4/9,B2_1:7/24,B2_2:1/4,B2_3:1/3,B2_4:1/8};EJSS_ODE_SOLVERS.bogackiShampine23=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTimeAdaptive(3);var mRate2,mRate3,mOrder2;var superAllocateOtherArrays=self.allocateOtherArrays;self.getNumberOfEvaluations=function(){return 3};self.allocateOtherArrays=function(){superAllocateOtherArrays();mRate2=new Array(self.getDimension());mRate3=new Array(self.getDimension());mOrder2=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var halfStep=step/2;var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.BogackiShampine23;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*initialRate[i];ode.getRate(state,mRate2);var threeQuarterStep=.75*step;for(i=0;i<dimension;i++)state[i]=initialState[i]+threeQuarterStep*mRate2[i];ode.getRate(state,mRate3);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B3_1*initialRate[i]+CTS.B3_2*mRate2[i]+CTS.B3_3*mRate3[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var halfStep=step/2;var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.BogackiShampine23;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);var threeQuarterStep=.75*step;for(i=0;i<dimension;i++)state[i]=initialState[i]+threeQuarterStep*mRate2[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate3);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B3_1*initialRate[i]+CTS.B3_2*mRate2[i]+CTS.B3_3*mRate3[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();return EJSS_ODE_INTERPOLATION.hermiteIntervalData(initialState,initialRate,finalState,finalRate)};self.computeApproximation=function(step){var ode=self.getODE();var timeIndex=self.getTimeIndex();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();ode.getRate(finalState,finalRate);var CTS=EJSS_ODE_SOLVERS.BogackiShampine23;for(var i=0;i<timeIndex;i++)mOrder2[i]=initialState[i]+step*(CTS.B2_1*initialRate[i]+CTS.B2_2*mRate2[i]+CTS.B2_3*mRate3[i]+CTS.B2_4*finalRate[i]);mOrder2[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return self.computeError(mOrder2)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.CashKarp45={A_11:1/5,A_21:3/40,A_22:9/40,A_31:3/10,A_32:-9/10,A_33:6/5,A_41:-11/54,A_42:5/2,A_43:-70/27,A_44:35/27,A_51:1631/55296,A_52:175/512,A_53:575/13824,A_54:44275/110592,A_55:253/4096,B4_1:2825/27648,B4_2:0,B4_3:18575/48384,B4_4:13525/55296,B4_5:277/14336,B4_6:1/4,B5_1:37/378,B5_2:0,B5_3:250/621,B5_4:125/594,B5_5:0,B5_6:512/1771};EJSS_ODE_SOLVERS.cashKarp45=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTimeAdaptive(5);var mRate2,mRate3,mRate4,mRate5,mRate6,mOrder4;var superAllocateOtherArrays=self.allocateOtherArrays;self.getNumberOfEvaluations=function(){return 6};self.allocateOtherArrays=function(){superAllocateOtherArrays();mRate2=new Array(self.getDimension());mRate3=new Array(self.getDimension());mRate4=new Array(self.getDimension());mRate5=new Array(self.getDimension());mRate6=new Array(self.getDimension());mOrder4=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.CashKarp45;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_32*mRate2[i]+CTS.A_33*mRate3[i]);ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_42*mRate2[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_52*mRate2[i]+CTS.A_53*mRate3[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);ode.getRate(state,mRate6);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B5_1*initialRate[i]+CTS.B5_2*mRate2[i]+CTS.B5_3*mRate3[i]+CTS.B5_4*mRate4[i]+CTS.B5_5*mRate5[i]+CTS.B5_6*mRate6[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.CashKarp45;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_32*mRate2[i]+CTS.A_33*mRate3[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_42*mRate2[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_52*mRate2[i]+CTS.A_53*mRate3[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate6);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B5_1*initialRate[i]+CTS.B5_2*mRate2[i]+CTS.B5_3*mRate3[i]+CTS.B5_4*mRate4[i]+CTS.B5_5*mRate5[i]+CTS.B5_6*mRate6[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();ode.getRate(finalState,finalRate);return EJSS_ODE_INTERPOLATION.bootstrap2IntervalData(initialState,initialRate,finalState,finalRate,ode)};self.computeApproximation=function(step){var timeIndex=self.getTimeIndex();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var CTS=EJSS_ODE_SOLVERS.CashKarp45;for(var i=0;i<timeIndex;i++)mOrder4[i]=initialState[i]+step*(CTS.B4_1*initialRate[i]+CTS.B4_2*mRate2[i]+CTS.B4_3*mRate3[i]+CTS.B4_4*mRate4[i]+CTS.B4_5*mRate5[i]+CTS.B4_6*mRate6[i]);mOrder4[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return self.computeError(mOrder4)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.DoPri5={A_11:1/5,A_21:3/40,A_22:9/40,A_31:44/45,A_32:-56/15,A_33:32/9,A_41:19372/6561,A_42:-25360/2187,A_43:64448/6561,A_44:-212/729,A_51:9017/3168,A_52:-355/33,A_53:46732/5247,A_54:49/176,A_55:-5103/18656,B5_1:35/384,B5_2:0,B5_3:500/1113,B5_4:125/192,B5_5:-2187/6784,B5_6:11/84,D_1:-12715105075/11282082432,D_2:0,D_3:87487479700/32700410799,D_4:-10690763975/1880347072,D_5:701980252875/199316789632,D_6:-1453857185/822651844,D_7:69997945/29380423,E_1:71/57600,E_2:0,E_3:-71/16695,E_4:71/1920,E_5:-17253/339200,E_6:22/525,E_7:-1/40};EJSS_ODE_SOLVERS.doPri5=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTimeAdaptive(5);var mRate2,mRate3,mRate4,mRate5,mRate6,mCoeffs;var superAllocateOtherArrays=self.allocateOtherArrays;self.getNumberOfEvaluations=function(){return 6};self.allocateOtherArrays=function(){superAllocateOtherArrays();var dim=self.getDimension();mRate2=new Array(dim);mRate3=new Array(dim);mRate4=new Array(dim);mRate5=new Array(dim);mRate6=new Array(dim);mCoeffs=new Array(5);for(var i=0;i<5;i++)mCoeffs[i]=new Array(dim)};self.computeIntermediateStep=function(step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.DoPri5;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_32*mRate2[i]+CTS.A_33*mRate3[i]);ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_42*mRate2[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_52*mRate2[i]+CTS.A_53*mRate3[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);ode.getRate(state,mRate6);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B5_1*initialRate[i]+CTS.B5_2*mRate2[i]+CTS.B5_3*mRate3[i]+CTS.B5_4*mRate4[i]+CTS.B5_5*mRate5[i]+CTS.B5_6*mRate6[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.DoPri5;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_32*mRate2[i]+CTS.A_33*mRate3[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_42*mRate2[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_52*mRate2[i]+CTS.A_53*mRate3[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate6);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B5_1*initialRate[i]+CTS.B5_2*mRate2[i]+CTS.B5_3*mRate3[i]+CTS.B5_4*mRate4[i]+CTS.B5_5*mRate5[i]+CTS.B5_6*mRate6[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState()
;var finalRate=self.getFinalRate();var CTS=EJSS_ODE_SOLVERS.DoPri5;var dimension=self.getDimension();var timeIndex=dimension-1;var dt=finalState[timeIndex]-initialState[timeIndex];for(var i=0;i<dimension;i++){var initStateI=initialState[i];var initRateI=initialRate[i];var finalRateI=finalRate[i];mCoeffs[0][i]=initStateI;var coeff1i=finalState[i]-initStateI;var coeff2i=dt*initRateI-coeff1i;mCoeffs[3][i]=coeff1i-dt*finalRateI-coeff2i;mCoeffs[4][i]=dt*(CTS.D_1*initRateI+CTS.D_2*mRate2[i]+CTS.D_3*mRate3[i]+CTS.D_4*mRate4[i]+CTS.D_5*mRate5[i]+CTS.D_6*mRate6[i]+CTS.D_7*finalRateI);mCoeffs[1][i]=coeff1i;mCoeffs[2][i]=coeff2i}return EJSS_ODE_INTERPOLATION.dopri5IntervalData(initialState,finalState,mCoeffs)};self.computeApproximation=function(step){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();var absTol=self.getAbsTol();var relTol=self.getRelTol();var CTS=EJSS_ODE_SOLVERS.DoPri5;var dimension=self.getDimension();ode.getRate(finalState,finalRate);var error=0;for(var i=0;i<dimension;i++){var sk=absTol[i]+relTol[i]*Math.max(Math.abs(finalState[i]),Math.abs(initialState[i]));var errorI=(CTS.E_1*initialRate[i]+CTS.E_2*mRate2[i]+CTS.E_3*mRate3[i]+CTS.E_4*mRate4[i]+CTS.E_5*mRate5[i]+CTS.E_6*mRate6[i]+CTS.E_7*finalRate[i])/sk;error+=errorI*errorI}return Math.sqrt(error/dimension)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.DoPri853={A_11:.05260015195876773,A_21:.0197250569845379,A_22:.0591751709536137,A_31:.02958758547680685,A_32:0,A_33:.08876275643042054,A_41:.2413651341592667,A_42:0,A_43:-.8845494793282861,A_44:.924834003261792,A_51:.037037037037037035,A_52:0,A_53:0,A_54:.17082860872947386,A_55:.12546768756682242,A_61:.037109375,A_62:0,A_63:0,A_64:.17025221101954405,A_65:.06021653898045596,A_66:-.017578125,A_71:.03709200011850479,A_72:0,A_73:0,A_74:.17038392571223998,A_75:.10726203044637328,A_76:-.015319437748624402,A_77:.008273789163814023,A_81:.6241109587160757,A_82:0,A_83:0,A_84:-3.3608926294469414,A_85:-.868219346841726,A_86:27.59209969944671,A_87:20.154067550477894,A_88:-43.48988418106996,A_91:.47766253643826434,A_92:0,A_93:0,A_94:-2.4881146199716677,A_95:-.590290826836843,A_96:21.230051448181193,A_97:15.279233632882423,A_98:-33.28821096898486,A_99:-.020331201708508627,A_101:-.9371424300859873,A_102:0,A_103:0,A_104:5.186372428844064,A_105:1.0914373489967295,A_106:-8.149787010746927,A_107:-18.52006565999696,A_108:22.739487099350505,A_109:2.4936055526796523,A_1010:-3.0467644718982196,A_111:2.273310147516538,A_112:0,A_113:0,A_114:-10.53449546673725,A_115:-2.0008720582248625,A_116:-17.9589318631188,A_117:27.94888452941996,A_118:-2.8589982771350235,A_119:-8.87285693353063,A_1110:12.360567175794303,A_1111:.6433927460157636,B8_1:.054293734116568765,B8_2:0,B8_3:0,B8_4:0,B8_5:0,B8_6:4.450312892752409,B8_7:1.8915178993145003,B8_8:-5.801203960010585,B8_9:.3111643669578199,B8_10:-.1521609496625161,B8_11:.20136540080403034,B8_12:.04471061572777259,AD13_1:.056167502283047954,AD13_2:0,AD13_3:0,AD13_4:0,AD13_5:0,AD13_6:0,AD13_7:.25350021021662483,AD13_8:-.2462390374708025,AD13_9:-.12419142326381637,AD13_10:.15329179827876568,AD13_11:.00820105229563469,AD13_12:.007567897660545699,AD13_13:-.008298,AD14_1:.03183464816350214,AD14_2:0,AD14_3:0,AD14_4:0,AD14_5:0,AD14_6:.028300909672366776,AD14_7:.053541988307438566,AD14_8:-.05492374857139099,AD14_9:0,AD14_10:0,AD14_11:-.00010834732869724932,AD14_12:.0003825710908356584,AD14_13:-.00034046500868740456,AD14_14:.1413124436746325,AD15_1:-.42889630158379194,AD15_2:0,AD15_3:0,AD15_4:0,AD15_5:0,AD15_6:-4.697621415361164,AD15_7:7.683421196062599,AD15_8:4.06898981839711,AD15_9:.3567271874552811,AD15_10:0,AD15_11:0,AD15_12:0,AD15_13:-.0013990241651590145,AD15_14:2.9475147891527724,AD15_15:-9.15095847217987,D4_1:-8.428938276109013,D4_2:0,D4_3:0,D4_4:0,D4_5:0,D4_6:.5667149535193777,D4_7:-3.0689499459498917,D4_8:2.38466765651207,D4_9:2.117034582445028,D4_10:-.871391583777973,D4_11:2.2404374302607883,D4_12:.6315787787694688,D4_13:-.08899033645133331,D4_14:18.148505520854727,D4_15:-9.194632392478356,D4_16:-4.436036387594894,D5_1:10.427508642579134,D5_2:0,D5_3:0,D5_4:0,D5_5:0,D5_6:242.28349177525817,D5_7:165.20045171727028,D5_8:-374.5467547226902,D5_9:-22.113666853125306,D5_10:7.733432668472264,D5_11:-30.674084731089398,D5_12:-9.332130526430229,D5_13:15.697238121770845,D5_14:-31.139403219565178,D5_15:-9.35292435884448,D5_16:35.81684148639408,D6_1:19.985053242002433,D6_2:0,D6_3:0,D6_4:0,D6_5:0,D6_6:-387.0373087493518,D6_7:-189.17813819516758,D6_8:527.8081592054236,D6_9:-11.57390253995963,D6_10:6.8812326946963,D6_11:-1.0006050966910838,D6_12:.7777137798053443,D6_13:-2.778205752353508,D6_14:-60.19669523126412,D6_15:84.32040550667716,D6_16:11.99229113618279,D7_1:-25.69393346270375,D7_2:0,D7_3:0,D7_4:0,D7_5:0,D7_6:-154.18974869023643,D7_7:-231.5293791760455,D7_8:357.6391179106141,D7_9:93.40532418362432,D7_10:-37.45832313645163,D7_11:104.0996495089623,D7_12:29.8402934266605,D7_13:-43.53345659001114,D7_14:96.32455395918828,D7_15:-39.17726167561544,D7_16:-149.72683625798564,E3_1:-.18980075407240762,E3_2:0,E3_3:0,E3_4:0,E3_5:0,E3_6:4.450312892752409,E3_7:1.8915178993145003,E3_8:-5.801203960010585,E3_9:-.42268232132379197,E3_10:-.1521609496625161,E3_11:.20136540080403034,E3_12:.022651792198360825,E5_1:.01312004499419488,E5_2:0,E5_3:0,E5_4:0,E5_5:0,E5_6:-1.2251564463762044,E5_7:-.4957589496572502,E5_8:1.6643771824549864,E5_9:-.35032884874997366,E5_10:.3341791187130175,E5_11:.08192320648511571,E5_12:-.022355307863886294};EJSS_ODE_SOLVERS.doPri853=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTimeAdaptive(8);var mRate2,mRate3,mRate4,mRate5,mRate6,mRate7,mRate8,mRate9;var mRate10,mRate11,mRate12,mRate14,mRate15,mRate16,mAuxState;var mCoeffs;var superAllocateOtherArrays=self.allocateOtherArrays;self.getNumberOfEvaluations=function(){return 16};self.allocateOtherArrays=function(){superAllocateOtherArrays();var dim=self.getDimension();mRate2=new Array(dim);mRate3=new Array(dim);mRate4=new Array(dim);mRate5=new Array(dim);mRate6=new Array(dim);mRate7=new Array(dim);mRate8=new Array(dim);mRate9=new Array(dim);mRate10=new Array(dim);mRate11=new Array(dim);mRate12=new Array(dim);mRate13=new Array(dim);mRate14=new Array(dim);mRate15=new Array(dim);mRate16=new Array(dim);mAuxState=new Array(dim);mCoeffs=new Array(8);for(var i=0;i<8;i++)mCoeffs[i]=new Array(dim)};self.computeIntermediateStep=function(step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.DoPri853;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_32*mRate2[i]+CTS.A_33*mRate3[i]);ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_42*mRate2[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_52*mRate2[i]+CTS.A_53*mRate3[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);ode.getRate(state,mRate6);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_61*initialRate[i]+CTS.A_62*mRate2[i]+CTS.A_63*mRate3[i]+CTS.A_64*mRate4[i]+CTS.A_65*mRate5[i]+CTS.A_66*mRate6[i]);ode.getRate(state,mRate7);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_71*initialRate[i]+CTS.A_72*mRate2[i]+CTS.A_73*mRate3[i]+CTS.A_74*mRate4[i]+CTS.A_75*mRate5[i]+CTS.A_76*mRate6[i]+CTS.A_77*mRate7[i]);ode.getRate(state,mRate8);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_81*initialRate[i]+CTS.A_82*mRate2[i]+CTS.A_83*mRate3[i]+CTS.A_84*mRate4[i]+CTS.A_85*mRate5[i]+CTS.A_86*mRate6[i]+CTS.A_87*mRate7[i]+CTS.A_88*mRate8[i]);ode.getRate(state,mRate9);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_91*initialRate[i]+CTS.A_92*mRate2[i]+CTS.A_93*mRate3[i]+CTS.A_94*mRate4[i]+CTS.A_95*mRate5[i]+CTS.A_96*mRate6[i]+CTS.A_97*mRate7[i]+CTS.A_98*mRate8[i]+CTS.A_99*mRate9[i]);ode.getRate(state,mRate10);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_101*initialRate[i]+CTS.A_102*mRate2[i]+CTS.A_103*mRate3[i]+CTS.A_104*mRate4[i]+CTS.A_105*mRate5[i]+CTS.A_106*mRate6[i]+CTS.A_107*mRate7[i]+CTS.A_108*mRate8[i]+CTS.A_109*mRate9[i]+CTS.A_1010*mRate10[i]);ode.getRate(state,mRate11);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_111*initialRate[i]+CTS.A_112*mRate2[i]+CTS.A_113*mRate3[i]+CTS.A_114*mRate4[i]+CTS.A_115*mRate5[i]+CTS.A_116*mRate6[i]+CTS.A_117*mRate7[i]+CTS.A_118*mRate8[i]+CTS.A_119*mRate9[i]+CTS.A_1110*mRate10[i]+CTS.A_1111*mRate11[i]);ode.getRate(state,mRate12);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B8_1*initialRate[i]+CTS.B8_2*mRate2[i]+CTS.B8_3*mRate3[i]+CTS.B8_4*mRate4[i]+CTS.B8_5*mRate5[i]+CTS.B8_6*mRate6[i]+CTS.B8_7*mRate7[i]+CTS.B8_8*mRate8[i]+CTS.B8_9*mRate9[i]+CTS.B8_10*mRate10[i]+CTS.B8_11*mRate11[i]+CTS.B8_12*mRate12[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.DoPri853;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_32*mRate2[i]+CTS.A_33*mRate3[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_42*mRate2[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_52*mRate2[i]+CTS.A_53*mRate3[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate6);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_61*initialRate[i]+CTS.A_62*mRate2[i]+CTS.A_63*mRate3[i]+CTS.A_64*mRate4[i]+CTS.A_65*mRate5[i]+CTS.A_66*mRate6[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate7);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_71*initialRate[i]+CTS.A_72*mRate2[i]+CTS.A_73*mRate3[i]+CTS.A_74*mRate4[i]+CTS.A_75*mRate5[i]+CTS.A_76*mRate6[i]+CTS.A_77*mRate7[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate8);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_81*initialRate[i]+CTS.A_82*mRate2[i]+CTS.A_83*mRate3[i]+CTS.A_84*mRate4[i]+CTS.A_85*mRate5[i]+CTS.A_86*mRate6[i]+CTS.A_87*mRate7[i]+CTS.A_88*mRate8[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate9);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_91*initialRate[i]+CTS.A_92*mRate2[i]+CTS.A_93*mRate3[i]+CTS.A_94*mRate4[i]+CTS.A_95*mRate5[i]+CTS.A_96*mRate6[i]+CTS.A_97*mRate7[i]+CTS.A_98*mRate8[i]+CTS.A_99*mRate9[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate10);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_101*initialRate[i]+CTS.A_102*mRate2[i]+CTS.A_103*mRate3[i]+CTS.A_104*mRate4[i]+CTS.A_105*mRate5[i]+CTS.A_106*mRate6[i]+CTS.A_107*mRate7[i]+CTS.A_108*mRate8[i]+CTS.A_109*mRate9[i]+CTS.A_1010*mRate10[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate11);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_111*initialRate[i]+CTS.A_112*mRate2[i]+CTS.A_113*mRate3[i]+CTS.A_114*mRate4[i]+CTS.A_115*mRate5[i]+CTS.A_116*mRate6[i]+CTS.A_117*mRate7[i]+CTS.A_118*mRate8[i]+CTS.A_119*mRate9[i]+CTS.A_1110*mRate10[i]+CTS.A_1111*mRate11[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate12);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B8_1*initialRate[i]+CTS.B8_2*mRate2[i]+CTS.B8_3*mRate3[i]+CTS.B8_4*mRate4[i]+CTS.B8_5*mRate5[i]+CTS.B8_6*mRate6[i]+CTS.B8_7*mRate7[i]+CTS.B8_8*mRate8[i]+CTS.B8_9*mRate9[i]+CTS.B8_10*mRate10[i]+CTS.B8_11*mRate11[i]+CTS.B8_12*mRate12[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();var CTS=EJSS_ODE_SOLVERS.DoPri853;var dimension=self.getDimension();var timeIndex=dimension-1;var i;ode.getRate(finalState,finalRate);var deltaTime=finalState[timeIndex]-initialState[timeIndex];for(i=0;i<dimension;i++)mAuxState[i]=initialState[i]+deltaTime*(CTS.AD13_1*initialRate[i]+CTS.AD13_2*mRate2[i]+CTS.AD13_3*mRate3[i]+CTS.AD13_4*mRate4[i]+CTS.AD13_5*mRate5[i]+CTS.AD13_6*mRate6[i]+CTS.AD13_7*mRate7[i]+CTS.AD13_8*mRate8[i]+CTS.AD13_9*mRate9[i]+CTS.AD13_10*mRate10[i]+CTS.AD13_11*mRate11[i]+CTS.AD13_12*mRate12[i]+CTS.AD13_13*finalRate[i]);ode.getRate(mAuxState,mRate14);for(i=0;i<dimension;i++)mAuxState[i]=initialState[i]+deltaTime*(CTS.AD14_1*initialRate[i]+CTS.AD14_2*mRate2[i]+CTS.AD14_3*mRate3[i]+CTS.AD14_4*mRate4[i]+CTS.AD14_5*mRate5[i]+CTS.AD14_6*mRate6[i]+CTS.AD14_7*mRate7[i]+CTS.AD14_8*mRate8[i]+CTS.AD14_9*mRate9[i]+CTS.AD14_10*mRate10[i]+CTS.AD14_11*mRate11[i]+CTS.AD14_12*mRate12[i]+CTS.AD14_13*finalRate[i]+CTS.AD14_14*mRate14[i]);ode.getRate(mAuxState,mRate15);for(i=0;i<dimension;i++)mAuxState[i]=initialState[i]+deltaTime*(CTS.AD15_1*initialRate[i]+CTS.AD15_2*mRate2[i]+CTS.AD15_3*mRate3[i]+CTS.AD15_4*mRate4[i]+CTS.AD15_5*mRate5[i]+CTS.AD15_6*mRate6[i]+CTS.AD15_7*mRate7[i]+CTS.AD15_8*mRate8[i]+CTS.AD15_9*mRate9[i]+CTS.AD15_10*mRate10[i]+CTS.AD15_11*mRate11[i]+CTS.AD15_12*mRate12[i]+CTS.AD15_13*finalRate[i]+CTS.AD15_14*mRate14[i]+CTS.AD15_15*mRate15[i]);ode.getRate(mAuxState,mRate16);for(i=0;i<dimension;i++){mCoeffs[0][i]=initialState[i];mCoeffs[1][i]=finalState[i]-initialState[i];mCoeffs[2][i]=deltaTime*initialRate[i]-mCoeffs[1][i];mCoeffs[3][i]=mCoeffs[1][i]-deltaTime*finalRate[i]-mCoeffs[2][i];mCoeffs[4][i]=deltaTime*(CTS.D4_1*initialRate[i]+CTS.D4_2*mRate2[i]+CTS.D4_3*mRate3[i]+CTS.D4_4*mRate4[i]+CTS.D4_5*mRate5[i]+CTS.D4_6*mRate6[i]+CTS.D4_7*mRate7[i]+CTS.D4_8*mRate8[i]+CTS.D4_9*mRate9[i]+CTS.D4_10*mRate10[i]+CTS.D4_11*mRate11[i]+CTS.D4_12*mRate12[i]+CTS.D4_13*finalRate[i]+CTS.D4_14*mRate14[i]+CTS.D4_15*mRate15[i]+CTS.D4_16*mRate16[i]);mCoeffs[5][i]=deltaTime*(CTS.D5_1*initialRate[i]+CTS.D5_2*mRate2[i]+CTS.D5_3*mRate3[i]+CTS.D5_4*mRate4[i]+CTS.D5_5*mRate5[i]+CTS.D5_6*mRate6[i]+CTS.D5_7*mRate7[i]+CTS.D5_8*mRate8[i]+CTS.D5_9*mRate9[i]+CTS.D5_10*mRate10[i]+CTS.D5_11*mRate11[i]+CTS.D5_12*mRate12[i]+CTS.D5_13*finalRate[i]+CTS.D5_14*mRate14[i]+CTS.D5_15*mRate15[i]+CTS.D5_16*mRate16[i]);mCoeffs[6][i]=deltaTime*(CTS.D6_1*initialRate[i]+CTS.D6_2*mRate2[i]+CTS.D6_3*mRate3[i]+CTS.D6_4*mRate4[i]+CTS.D6_5*mRate5[i]+CTS.D6_6*mRate6[i]+CTS.D6_7*mRate7[i]+CTS.D6_8*mRate8[i]+CTS.D6_9*mRate9[i]+CTS.D6_10*mRate10[i]+CTS.D6_11*mRate11[i]+CTS.D6_12*mRate12[i]+CTS.D6_13*finalRate[i]+CTS.D6_14*mRate14[i]+CTS.D6_15*mRate15[i]+CTS.D6_16*mRate16[i]);mCoeffs[7][i]=deltaTime*(CTS.D7_1*initialRate[i]+CTS.D7_2*mRate2[i]+CTS.D7_3*mRate3[i]+CTS.D7_4*mRate4[i]+CTS.D7_5*mRate5[i]+CTS.D7_6*mRate6[i]+CTS.D7_7*mRate7[i]+CTS.D7_8*mRate8[i]+CTS.D7_9*mRate9[i]+CTS.D7_10*mRate10[i]+CTS.D7_11*mRate11[i]+CTS.D7_12*mRate12[i]+CTS.D7_13*finalRate[i]+CTS.D7_14*mRate14[i]+CTS.D7_15*mRate15[i]+CTS.D7_16*mRate16[i])}return EJSS_ODE_INTERPOLATION.dopri853IntervalData(initialState,finalState,mCoeffs)};self.computeApproximation=function(step){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();var absTol=self.getAbsTol();var relTol=self.getRelTol();var CTS=EJSS_ODE_SOLVERS.DoPri853;var dimension=self.getDimension();var error3=0,error5=0;for(var i=0;i<dimension;i++){var sk=absTol[i]+relTol[i]*Math.max(Math.abs(finalState[i]),Math.abs(initialState[i]));var errorI3=(CTS.E3_1*initialRate[i]+CTS.E3_2*mRate2[i]+CTS.E3_3*mRate3[i]+CTS.E3_4*mRate4[i]+CTS.E3_5*mRate5[i]+CTS.E3_6*mRate6[i]+CTS.E3_7*mRate7[i]+CTS.E3_8*mRate8[i]+CTS.E3_9*mRate9[i]+CTS.E3_10*mRate10[i]+CTS.E3_11*mRate11[i]+CTS.E3_12*mRate12[i])/sk;error3+=errorI3*errorI3;var errorI5=(CTS.E5_1*initialRate[i]+CTS.E5_2*mRate2[i]+CTS.E5_3*mRate5[i]+CTS.E5_4*mRate4[i]+CTS.E5_5*mRate5[i]+CTS.E5_6*mRate6[i]+CTS.E5_7*mRate7[i]+CTS.E5_8*mRate8[i]+CTS.E5_9*mRate9[i]+CTS.E5_10*mRate10[i]+CTS.E5_11*mRate11[i]+CTS.E5_12*mRate12[i])/sk;error5+=errorI5*errorI5}var den=error5+.01*error3;if(den<=0)den=1;return Math.abs(step)*error5*Math.sqrt(1/(dimension*den))};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.Euler={};EJSS_ODE_SOLVERS.euler=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTime();self.getNumberOfEvaluations=function(){return 1};self.computeIntermediateStep=function(step,state){var dimension=self.getDimension();var initialState=self.getInitialState();var initialRate=self.getInitialRate();for(var i=0;i<dimension;i++)state[i]=initialState[i]+step*initialRate[i]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){self.computeIntermediateStep(step,state);return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();ode.getRate(finalState,finalRate);return EJSS_ODE_INTERPOLATION.eulerIntervalData(initialState,initialRate,finalState[self.getTimeIndex()])};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.EulerRichardson={};EJSS_ODE_SOLVERS.eulerRichardson=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTime();var mRate2;self.getNumberOfEvaluations=function(){return 2};self.allocateOtherArrays=function(){mRate2=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var halfStep=step/2;var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*mRate2[i];state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var halfStep=step/2;var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*mRate2[i];state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();var timeIndex=self.getDimension()-1;ode.getRate(finalState,finalRate);return EJSS_ODE_INTERPOLATION.eulerRichardsonIntervalData(initialState,initialRate,finalState[timeIndex],mRate2)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.Fehlberg8={};EJSS_ODE_SOLVERS.fehlberg8=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTime();var mRate2,mRate3,mRate4,mRate5,mRate6,mRate7,mRate8,mRate9,mRate10,mRate11;self.getNumberOfEvaluations=function(){return 13};self.allocateOtherArrays=function(){mRate2=new Array(self.getDimension());mRate3=new Array(self.getDimension());mRate4=new Array(self.getDimension());mRate5=new Array(self.getDimension());mRate6=new Array(self.getDimension());mRate7=new Array(self.getDimension());mRate8=new Array(self.getDimension());mRate9=new Array(self.getDimension());mRate10=new Array(self.getDimension());mRate11=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.Fehlberg78;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_33*mRate3[i]);ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);ode.getRate(state,mRate6);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_61*initialRate[i]+CTS.A_64*mRate4[i]+CTS.A_65*mRate5[i]+CTS.A_66*mRate6[i]);ode.getRate(state,mRate7);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_71*initialRate[i]+CTS.A_75*mRate5[i]+CTS.A_76*mRate6[i]+CTS.A_77*mRate7[i]);ode.getRate(state,mRate8);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_81*initialRate[i]+CTS.A_84*mRate4[i]+CTS.A_85*mRate5[i]+CTS.A_86*mRate6[i]+CTS.A_87*mRate7[i]+CTS.A_88*mRate8[i]);ode.getRate(state,mRate9);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_91*initialRate[i]+CTS.A_94*mRate4[i]+CTS.A_95*mRate5[i]+CTS.A_96*mRate6[i]+CTS.A_97*mRate7[i]+CTS.A_98*mRate8[i]+CTS.A_99*mRate9[i]);ode.getRate(state,mRate10);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_101*initialRate[i]+CTS.A_104*mRate4[i]+CTS.A_105*mRate5[i]+CTS.A_106*mRate6[i]+CTS.A_107*mRate7[i]+CTS.A_108*mRate8[i]+CTS.A_109*mRate9[i]+CTS.A_1010*mRate10[i]);ode.getRate(state,mRate11);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B7_1*initialRate[i]+CTS.B7_6*mRate6[i]+CTS.B7_7*mRate7[i]+CTS.B7_8*mRate8[i]+CTS.B7_9*mRate9[i]+CTS.B7_10*mRate10[i]+CTS.B7_11*mRate11[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var timeRate=initialRate[timeIndex];var CTS=EJSS_ODE_SOLVERS.Fehlberg78;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_33*mRate3[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate6);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_61*initialRate[i]+CTS.A_64*mRate4[i]+CTS.A_65*mRate5[i]+CTS.A_66*mRate6[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate7);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_71*initialRate[i]+CTS.A_75*mRate5[i]+CTS.A_76*mRate6[i]+CTS.A_77*mRate7[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate8);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_81*initialRate[i]+CTS.A_84*mRate4[i]+CTS.A_85*mRate5[i]+CTS.A_86*mRate6[i]+CTS.A_87*mRate7[i]+CTS.A_88*mRate8[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate9);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_91*initialRate[i]+CTS.A_94*mRate4[i]+CTS.A_95*mRate5[i]+CTS.A_96*mRate6[i]+CTS.A_97*mRate7[i]+CTS.A_98*mRate8[i]+CTS.A_99*mRate9[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate10)
;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_101*initialRate[i]+CTS.A_104*mRate4[i]+CTS.A_105*mRate5[i]+CTS.A_106*mRate6[i]+CTS.A_107*mRate7[i]+CTS.A_108*mRate8[i]+CTS.A_109*mRate9[i]+CTS.A_1010*mRate10[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate11);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B7_1*initialRate[i]+CTS.B7_6*mRate6[i]+CTS.B7_7*mRate7[i]+CTS.B7_8*mRate8[i]+CTS.B7_9*mRate9[i]+CTS.B7_10*mRate10[i]+CTS.B7_11*mRate11[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();ode.getRate(finalState,finalRate);return EJSS_ODE_INTERPOLATION.bootstrap2IntervalData(initialState,initialRate,finalState,finalRate,ode)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.Fehlberg78={A_11:2/27,A_21:1/36,A_22:1/12,A_31:1/24,A_33:1/8,A_41:5/12,A_43:-25/16,A_44:25/16,A_51:1/20,A_54:1/4,A_55:1/5,A_61:-25/108,A_64:125/108,A_65:-65/27,A_66:125/54,A_71:31/300,A_75:61/225,A_76:-2/9,A_77:13/900,A_81:2,A_84:-53/6,A_85:704/45,A_86:-107/9,A_87:67/90,A_88:3,A_91:-91/108,A_94:23/108,A_95:-976/135,A_96:311/54,A_97:-19/60,A_98:17/6,A_99:-1/12,A_101:2383/4100,A_104:-341/164,A_105:4496/1025,A_106:-301/82,A_107:2133/4100,A_108:45/82,A_109:45/164,A_1010:18/41,A_111:3/205,A_116:-6/41,A_117:-3/205,A_118:-3/41,A_119:3/41,A_1110:6/41,A_121:-1777/4100,A_124:-341/164,A_125:4496/1025,A_126:-289/82,A_127:2193/4100,A_128:51/82,A_129:33/164,A_1210:12/41,A_1212:1,B7_1:41/840,B7_6:34/105,B7_7:9/35,B7_8:9/35,B7_9:9/280,B7_10:9/280,B7_11:41/840,B8_6:34/105,B8_7:9/35,B8_8:9/35,B8_9:9/280,B8_10:9/280,B8_12:41/840,B8_13:41/840};EJSS_ODE_SOLVERS.fehlberg78=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTimeAdaptive(7);var mRate2,mRate3,mRate4,mRate5,mRate6,mRate7,mRate8,mRate9,mRate10,mRate11,mRate12,mRate13;var superAllocateOtherArrays=self.allocateOtherArrays;self.getNumberOfEvaluations=function(){return 6};self.allocateOtherArrays=function(){superAllocateOtherArrays();mRate2=new Array(self.getDimension());mRate3=new Array(self.getDimension());mRate4=new Array(self.getDimension());mRate5=new Array(self.getDimension());mRate6=new Array(self.getDimension());mRate7=new Array(self.getDimension());mRate8=new Array(self.getDimension());mRate9=new Array(self.getDimension());mRate10=new Array(self.getDimension());mRate11=new Array(self.getDimension());mRate12=new Array(self.getDimension());mRate13=new Array(self.getDimension());mOrder8=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.Fehlberg78;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_33*mRate3[i]);ode.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);ode.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);ode.getRate(state,mRate6);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_61*initialRate[i]+CTS.A_64*mRate4[i]+CTS.A_65*mRate5[i]+CTS.A_66*mRate6[i]);ode.getRate(state,mRate7);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_71*initialRate[i]+CTS.A_75*mRate5[i]+CTS.A_76*mRate6[i]+CTS.A_77*mRate7[i]);ode.getRate(state,mRate8);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_81*initialRate[i]+CTS.A_84*mRate4[i]+CTS.A_85*mRate5[i]+CTS.A_86*mRate6[i]+CTS.A_87*mRate7[i]+CTS.A_88*mRate8[i]);ode.getRate(state,mRate9);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_91*initialRate[i]+CTS.A_94*mRate4[i]+CTS.A_95*mRate5[i]+CTS.A_96*mRate6[i]+CTS.A_97*mRate7[i]+CTS.A_98*mRate8[i]+CTS.A_99*mRate9[i]);ode.getRate(state,mRate10);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_101*initialRate[i]+CTS.A_104*mRate4[i]+CTS.A_105*mRate5[i]+CTS.A_106*mRate6[i]+CTS.A_107*mRate7[i]+CTS.A_108*mRate8[i]+CTS.A_109*mRate9[i]+CTS.A_1010*mRate10[i]);ode.getRate(state,mRate11);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_111*initialRate[i]+CTS.A_116*mRate6[i]+CTS.A_117*mRate7[i]+CTS.A_118*mRate8[i]+CTS.A_119*mRate9[i]+CTS.A_1110*mRate10[i]);ode.getRate(state,mRate12);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_121*initialRate[i]+CTS.A_124*mRate4[i]+CTS.A_125*mRate5[i]+CTS.A_126*mRate6[i]+CTS.A_127*mRate7[i]+CTS.A_128*mRate8[i]+CTS.A_129*mRate9[i]+CTS.A_1210*mRate10[i]+CTS.A_1212*mRate12[i]);ode.getRate(state,mRate13);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B7_1*initialRate[i]+CTS.B7_6*mRate6[i]+CTS.B7_7*mRate7[i]+CTS.B7_8*mRate8[i]+CTS.B7_9*mRate9[i]+CTS.B7_10*mRate10[i]+CTS.B7_11*mRate11[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CTS=EJSS_ODE_SOLVERS.Fehlberg78;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+step*CTS.A_11*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_21*initialRate[i]+CTS.A_22*mRate2[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_31*initialRate[i]+CTS.A_33*mRate3[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate4);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_41*initialRate[i]+CTS.A_43*mRate3[i]+CTS.A_44*mRate4[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate5);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_51*initialRate[i]+CTS.A_54*mRate4[i]+CTS.A_55*mRate5[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate6);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_61*initialRate[i]+CTS.A_64*mRate4[i]+CTS.A_65*mRate5[i]+CTS.A_66*mRate6[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate7);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_71*initialRate[i]+CTS.A_75*mRate5[i]+CTS.A_76*mRate6[i]+CTS.A_77*mRate7[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate8);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_81*initialRate[i]+CTS.A_84*mRate4[i]+CTS.A_85*mRate5[i]+CTS.A_86*mRate6[i]+CTS.A_87*mRate7[i]+CTS.A_88*mRate8[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate9);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_91*initialRate[i]+CTS.A_94*mRate4[i]+CTS.A_95*mRate5[i]+CTS.A_96*mRate6[i]+CTS.A_97*mRate7[i]+CTS.A_98*mRate8[i]+CTS.A_99*mRate9[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate10);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_101*initialRate[i]+CTS.A_104*mRate4[i]+CTS.A_105*mRate5[i]+CTS.A_106*mRate6[i]+CTS.A_107*mRate7[i]+CTS.A_108*mRate8[i]+CTS.A_109*mRate9[i]+CTS.A_1010*mRate10[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate11);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_111*initialRate[i]+CTS.A_116*mRate6[i]+CTS.A_117*mRate7[i]+CTS.A_118*mRate8[i]+CTS.A_119*mRate9[i]+CTS.A_1110*mRate10[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate12);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*(CTS.A_121*initialRate[i]+CTS.A_124*mRate4[i]+CTS.A_125*mRate5[i]+CTS.A_126*mRate6[i]+CTS.A_127*mRate7[i]+CTS.A_128*mRate8[i]+CTS.A_129*mRate9[i]+CTS.A_1210*mRate10[i]+CTS.A_1212*mRate12[i]);switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}mODE.getRate(state,mRate13);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(CTS.B7_1*initialRate[i]+CTS.B7_6*mRate6[i]+CTS.B7_7*mRate7[i]+CTS.B7_8*mRate8[i]+CTS.B7_9*mRate9[i]+CTS.B7_10*mRate10[i]+CTS.B7_11*mRate11[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();ode.getRate(finalState,finalRate);return EJSS_ODE_INTERPOLATION.bootstrap2IntervalData(initialState,initialRate,finalState,finalRate,ode)};self.computeApproximation=function(step){var timeIndex=self.getTimeIndex();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var CTS=EJSS_ODE_SOLVERS.Fehlberg78;for(var i=0;i<timeIndex;i++)mOrder8[i]=initialState[i]+step*(CTS.B8_6*mRate6[i]+CTS.B8_7*mRate7[i]+CTS.B8_8*mRate8[i]+CTS.B8_9*mRate9[i]+CTS.B8_10*mRate10[i]+CTS.B8_12*mRate12[i]+CTS.B8_13*mRate13[i]);mOrder8[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return self.computeError(mOrder8)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.RungeKutta4={};EJSS_ODE_SOLVERS.rungeKutta4=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTime();var mRate2,mRate3,mRate4;self.getNumberOfEvaluations=function(){return 4};self.allocateOtherArrays=function(){mRate2=new Array(self.getDimension());mRate3=new Array(self.getDimension());mRate4=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var halfStep=step/2;var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*initialRate[i];ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*mRate2[i];ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*mRate3[i];ode.getRate(state,mRate4);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(initialRate[i]+2*mRate2[i]+2*mRate3[i]+mRate4[i])/6;state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var halfStep=step/2;var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*initialRate[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);for(i=0;i<dimension;i++)state[i]=initialState[i]+halfStep*mRate2[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate3);for(i=0;i<dimension;i++)state[i]=initialState[i]+step*mRate3[i];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate4);for(i=0;i<timeIndex;i++)state[i]=initialState[i]+step*(initialRate[i]+2*mRate2[i]+2*mRate3[i]+mRate4[i])/6;state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex];return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();ode.getRate(finalState,finalRate);return EJSS_ODE_INTERPOLATION.bootstrapIntervalData(initialState,initialRate,finalState,finalRate,ode)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.SolverEngineDiscreteTime={};EJSS_ODE_SOLVERS.solverEngineDiscreteTime=function(){var self={};var mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;var mDimension;var mTimeIndex;var mAccumulatedEvaluations=0;var mStepSize=.1;var mMaximumStepSize=Number.POSITIVE_INFINITY;var mInitialTime=0;var mFinalTime=0;var mInitialState;var mInitialRate;var mFinalState;var mFinalRate;var mODE;var mEventSolver;var mStateHistory;self.getNumberOfEvaluations=function(){return 0};self.allocateOtherArrays=function(){};self.computeIntermediateStep=function(step,state){return null};self.computeCarefulIntermediateStep=function(solver,step,state){return EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.NO_DISCONTINUITY_ALONG_STEP};self.computeFinalRateAndCreateIntervalData=function(){return null};self.getODE=function(){return mODE};self.getEventSolver=function(){return mEventSolver};self.getDimension=function(){return mDimension};self.getTimeIndex=function(){return mTimeIndex};self.getInitialTime=function(){return mInitialTime};self.getInitialState=function(){return mInitialState};self.getInitialRate=function(){return mInitialRate};self.getFinalState=function(){return mFinalState};self.getFinalRate=function(){return mFinalRate};self.setFinalTime=function(time){mFinalTime=time};self.getFinalTime=function(){return mFinalTime};self.setErrorCode=function(code){mErrorCode=code};self.addToEvaluations=function(evals){mAccumulatedEvaluations+=evals};self.setODE=function(eventSolver,ode){mEventSolver=eventSolver;mODE=ode;var state=mODE.getState();mDimension=state.length;mTimeIndex=mDimension-1;mStateHistory=EJSS_ODE_INTERPOLATION.stateHistory(ode);if(mODE.getMaximumDelay){mStateHistory.setMinimumLength(mODE.getMaximumDelay())}};self.initialize=function(stepSize){mStepSize=stepSize;var state=mODE.getState();if(mInitialState==null||mInitialState.length!=state.length){mDimension=state.length;mTimeIndex=mDimension-1;mInitialState=new Array(mDimension);mInitialRate=new Array(mDimension);mFinalState=new Array(mDimension);mFinalRate=new Array(mDimension);self.allocateOtherArrays()}mAccumulatedEvaluations=0;mStateHistory.clearAll();if(mODE.getMaximumDelay){mStateHistory.setMinimumLength(Math.max(Math.abs(mODE.getMaximumDelay()),Math.abs(stepSize)))}else mStateHistory.setMinimumLength(stepSize);self.reinitialize(state)};self.reinitialize=function(state){mInitialTime=state[mTimeIndex];for(var i=0;i<mDimension;i++)mInitialState[i]=state[i];mODE.getRate(mInitialState,mInitialRate);mFinalTime=Number.NaN;mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR};self.getCurrentRate=function(){return mInitialRate};self.setStepSize=function(stepSize){mStepSize=stepSize;if(mODE.getMaximumDelay){mStateHistory.setMinimumLength(Math.max(Math.abs(mODE.getMaximumDelay()),Math.abs(stepSize)))}else mStateHistory.setMinimumLength(stepSize)};self.setMaximumStepSize=function(stepSize){mMaximumStepSize=Math.abs(stepSize)};self.getMaximumStepSize=function(){return mMaximumStepSize};self.getStepSize=function(){return mStepSize};self.getInternalStepSize=function(){return mFinalTime-mInitialTime};self.setEstimateFirstStep=function(estimate){};self.setTolerances=function(absTol,relTol){};self.getMaximumTime=function(withDiscontinuities){if(mErrorCode!=EJSS_ODE_SOLVERS.ERROR.NO_ERROR)return Number.NaN;if(isNaN(mFinalTime)){self.computeOneStep(withDiscontinuities)}return mFinalTime};self.internalStep=function(withDiscontinuities){var i;mInitialTime=mFinalTime;mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;for(i=0;i<mDimension;i++)mInitialState[i]=mFinalState[i];for(i=0;i<mDimension;i++)mInitialRate[i]=mFinalRate[i];self.computeOneStep(withDiscontinuities);return mFinalTime};self.getCounter=function(){return mAccumulatedEvaluations};self.getStateHistory=function(){return mStateHistory};self.interpolate=function(time,state){return mStateHistory.interpolateState(time,state)};self.bestInterpolate=function(time,state){var i;if(isNaN(mFinalTime))return null;if(time==mFinalTime){for(i=0;i<mDimension;i++)state[i]=mFinalState[i];return state}if(time==mInitialTime){for(i=0;i<mDimension;i++)state[i]=mInitialState[i];return state}self.computeIntermediateStep(time-mInitialTime,state);return state};self.getActualStepSize=function(){return mStepSize};self.findTheDiscontinuity=function(step){var counter=0;var left=0;var right=step;var lastValid=0;var maxAttempts=mEventSolver.getDDEIterations();var EPSILON=mEventSolver.getEPSILON();while(counter<maxAttempts){if(Math.abs(left-right)<EPSILON){break}var testPoint=(left+right)/2;switch(self.computeCarefulIntermediateStep(mEventSolver,testPoint,mFinalState)){default:case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR:return Number.NaN;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.NO_DISCONTINUITY_ALONG_STEP:lastValid=mFinalState[mTimeIndex];left=testPoint;break;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_EXACTLY_ON_STEP:return mFinalState[mTimeIndex];case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED:right=right-(right-left)/4;break;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_ALONG_STEP:right=testPoint;break}counter++}self.computeCarefulIntermediateStep(mEventSolver,lastValid,mFinalState);return lastValid};self.computeOneStep=function(hasDiscontinuities){var step=mStepSize;if(hasDiscontinuities){switch(self.computeCarefulIntermediateStep(mEventSolver,step,mFinalState)){case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR:mFinalTime=Number.NaN;return;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.NO_DISCONTINUITY_ALONG_STEP:case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_EXACTLY_ON_STEP:mFinalTime=mFinalState[mTimeIndex];break;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED:case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_ALONG_STEP:mFinalTime=self.findTheDiscontinuity(step);break}if(isNaN(mFinalTime)){mErrorCode=EJSS_ODE_SOLVERS.ERROR.DISCONTINUITY_PRODUCED_ERROR;return}}else{self.computeIntermediateStep(step,mFinalState);mFinalTime=mFinalState[mTimeIndex]}mAccumulatedEvaluations+=self.getNumberOfEvaluations();mStateHistory.clean(mInitialTime);mStateHistory.addIntervalData(self.computeFinalRateAndCreateIntervalData())};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive={FAC1:.33,FAC2:6,BETA:0,SAFE:.9};EJSS_ODE_SOLVERS.solverEngineDiscreteTimeAdaptive=function(mMethodOrder){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTime();var mExpO1=1/mMethodOrder-EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.BETA*.75;var mErrOld=1e-4;var mFactor=0;var mEstimate=false;var mActualStepSize;var mAbsoluteTolerance=Number.NaN;var mRelativeTolerance=Number.NaN;var mAbsTol;var mRelTol;var superReinitialize=self.reinitialize;var superSetMaximumStepSize=self.setMaximumStepSize;self.computeApproximation=function(step){};self.getAbsTol=function(){return mAbsTol};self.getRelTol=function(){return mRelTol};self.allocateOtherArrays=function(){var dimension=self.getDimension();mAbsTol=new Array(dimension);mRelTol=new Array(dimension);self.setTolerances(1e-6,1e-6)};self.reinitialize=function(state){superReinitialize(state);if(mEstimate)mActualStepSize=limitStepSize(estimateFirstStepSize(self.getStepSize()));else mActualStepSize=limitStepSize(self.getStepSize())};self.setEstimateFirstStep=function(estimate){mEstimate=estimate};self.setMaximumStepSize=function(stepSize){superSetMaximumStepSize(stepSize);mActualStepSize=limitStepSize(mActualStepSize)};self.setTolerances=function(absTol,relTol){var i;var dimension=self.getDimension();if(absTol instanceof Array){mAbsoluteTolerance=mRelativeTolerance=Number.NaN;for(i=0;i<dimension;i++){mAbsTol[i]=absTol[i];mRelTol[i]=relTol[i]}}else{if(mAbsoluteTolerance==absTol&&mRelativeTolerance==relTol)return;mAbsoluteTolerance=absTol;mRelativeTolerance=relTol;for(i=0;i<dimension;i++){mAbsTol[i]=absTol;mRelTol[i]=relTol}}mFinalTime=Number.NaN;mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;if(mEstimate)mActualStepSize=limitStepSize(estimateFirstStepSize(self.getStepSize()));else mActualStepSize=limitStepSize(self.getStepSize())};self.computeOneStep=function(hasDiscontinuities){var eventSolver=self.getEventSolver();var finalState=self.getFinalState();mErrorCode=EJSS_ODE_SOLVERS.ERROR.NO_ERROR;for(var iterations=0;iterations<500;iterations++){if(hasDiscontinuities){switch(self.computeCarefulIntermediateStep(eventSolver,mActualStepSize,finalState)){case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR:self.setFinalTime(Number.NaN);return;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.NO_DISCONTINUITY_ALONG_STEP:case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_EXACTLY_ON_STEP:self.setFinalTime(finalState[self.getTimeIndex()]);break;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED:case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_ALONG_STEP:var finalTime=self.findTheDiscontinuity(mActualStepSize);self.setFinalTime(finalTime);mActualStepSize=finalTime-self.getInitialTime();break}if(isNaN(self.getFinalTime())){self.setErrorCode(EJSS_ODE_SOLVERS.ERROR.DISCONTINUITY_PRODUCED_ERROR);return}}else{self.computeIntermediateStep(mActualStepSize,finalState);self.setFinalTime(finalState[self.getTimeIndex()])}var err=self.computeApproximation(mActualStepSize);self.addToEvaluations(self.getNumberOfEvaluations());if(err<=1){self.getStateHistory().clean(self.getInitialTime());self.getStateHistory().addIntervalData(self.computeFinalRateAndCreateIntervalData());if(iterations>0)mActualStepSize=limitStepSize(mActualStepSize>0?Math.min(mActualStepSize,estimatedStepSize(err)):Math.max(mActualStepSize,estimatedStepSize(err)));else mActualStepSize=limitStepSize(estimatedStepSize(err));return}mActualStepSize=limitStepSize(mActualStepSize>0?Math.min(mActualStepSize,estimatedStepSize(err)):Math.max(mActualStepSize,estimatedStepSize(err)))}self.setFinalTime(Number.NaN);self.setErrorCode(EJSS_ODE_SOLVERS.ERROR.DID_NOT_CONVERGE)};self.getActualStepSize=function(){return mActualStepSize};self.computeError=function(state){var error=0;var dimension=self.getDimension();var initialState=self.getInitialState();var finalState=self.getFinalState();for(var i=0;i<dimension;i++){var sk=mAbsTol[i]+mRelTol[i]*Math.max(Math.abs(finalState[i]),Math.abs(initialState[i]));var errorI=(finalState[i]-state[i])/sk;error+=errorI*errorI}return Math.sqrt(error/dimension)};function estimatedStepSize(err){var fac11=0;if(err!=0){fac11=Math.pow(err,mExpO1);mFactor=fac11/Math.exp(EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.BETA*Math.log(mErrOld));mFactor=Math.max(1/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.FAC2,Math.min(1/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.FAC1,mFactor/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.SAFE))}else{fac11=1/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.FAC1;mFactor=1/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.FAC2}if(err<=1){mErrOld=Math.max(err,1e-4);return mActualStepSize/mFactor}return mActualStepSize/Math.min(1/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.FAC1,fac11/EJSS_ODE_SOLVERS.SolverEngineDiscreteTimeAdaptive.SAFE)}function limitStepSize(intendedStep){var ode=self.getODE();var delays;var i,length;if(intendedStep>=0){if(ode.getDelays){delays=ode.getDelays(self.getInitialState());length=delays.length;for(i=0;i<length;i++)intendedStep=Math.min(intendedStep,delays[i]/2)}return Math.min(intendedStep,self.getMaximumStepSize())}if(ode.getDelays){delays=ode.getDelays(self.getInitialState());length=delays.length;for(i=0;i<length;i++)intendedStep=Math.max(intendedStep,delays[i]/2)}return Math.max(intendedStep,-self.getMaximumStepSize())}function estimateFirstStepSize(hMax){var i;var dimension=self.getDimension();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var ode=self.getODE();var posneg=hMax<0?-1:1;hMax=Math.abs(hMax);var normF=0,normX=0;for(i=0;i<dimension;i++){var sk=mAbsTol[i]+mRelTol[i]*Math.abs(initialState[i]);var aux=initialRate[i]/sk;normF+=aux*aux;aux=initialState[i]/sk;normX+=aux*aux}var h;if(normF<=1e-10||normX<=1e-10)h=1e-6;else h=Math.sqrt(normX/normF)*.01;h=posneg*Math.min(h,hMax);if(ode.getDelays){var eventSolver=self.getEventSolver();eventSolver.resetDiscontinuities(initialState);var counter=0;var done=false;while(!done){for(i=0;i<dimension;i++)finalState[i]=initialState[i]+h*initialRate[i];switch(eventSolver.checkDiscontinuity(finalState,false)){case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_PRODUCED_ERROR:return Number.NaN;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_JUST_PASSED:case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_ALONG_STEP:h=h/2;break;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.DISCONTINUITY_EXACTLY_ON_STEP:done=true;break;case EJSS_ODE_SOLVERS.DISCONTINUITY_CODE.NO_DISCONTINUITY_ALONG_STEP:done=true;break}if(++counter>100)return Number.NaN}}else{for(i=0;i<dimension;i++)finalState[i]=initialState[i]+h*initialRate[i]}ode.getRate(finalState,finalRate);var der2=0;for(i=0;i<dimension;i++){var sk=mAbsTol[i]+mRelTol[i]*Math.abs(initialState[i]);var aux=(finalRate[i]-initialRate[i])/sk;der2+=aux*aux}der2=Math.sqrt(der2)/h;var der12=Math.max(Math.abs(der2),Math.sqrt(normF));var h1;if(der12<=1e-15)h1=Math.max(1e-6,Math.abs(h)*.001);else h1=Math.exp(1/mMethodOrder*Math.log(.01/der12));h=posneg*Math.min(100*h,h1);if(hMax!=0)h=posneg*Math.min(Math.abs(h),hMax);return h}return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.VelocityVerlet={};EJSS_ODE_SOLVERS.velocityVerlet=function(){var self=EJSS_ODE_SOLVERS.solverEngineDiscreteTime();var mAccelerationIndependentOfVelocity;var mRate2;superSetODE=self.setODE;self.setODE=function(eventSolver,ode){superSetODE(eventSolver,ode);if(ode.isAccelerationIndependentOfVelocity)mAccelerationIndependentOfVelocity=ode.isAccelerationIndependentOfVelocity();else mAccelerationIndependentOfVelocity=false};self.getNumberOfEvaluations=function(){return 2};self.allocateOtherArrays=function(){mRate2=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var i;var dt2=step*step/2;for(i=0;i<timeIndex;i+=2)state[i]=initialState[i]+step*initialRate[i]+dt2*initialRate[i+1];ode.getRate(state,mRate2);var halfStep=step/2;for(i=1;i<timeIndex;i+=2)state[i]=initialState[i]+halfStep*(initialRate[i]+mRate2[i]);state[timeIndex]=self.getInitialTime()+step*initialRate[timeIndex]};self.computeCarefulIntermediateStep=function(eventSolver,step,state){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var dimension=self.getDimension();var timeIndex=dimension-1;var CODE=EJSS_ODE_SOLVERS.DISCONTINUITY_CODE;var i;var dt2=step*step/2
;for(i=0;i<timeIndex;i+=2)state[i]=initialState[i]+step*initialRate[i]+dt2*initialRate[i+1];switch(eventSolver.checkDiscontinuity(state,false)){case CODE.DISCONTINUITY_PRODUCED_ERROR:return CODE.DISCONTINUITY_PRODUCED_ERROR;case CODE.DISCONTINUITY_JUST_PASSED:return CODE.DISCONTINUITY_JUST_PASSED;case CODE.DISCONTINUITY_ALONG_STEP:return CODE.DISCONTINUITY_ALONG_STEP;case CODE.DISCONTINUITY_EXACTLY_ON_STEP:break;case CODE.NO_DISCONTINUITY_ALONG_STEP:break}ode.getRate(state,mRate2);var halfStep=step/2;for(i=1;i<timeIndex;i+=2)state[i]=initialState[i]+halfStep*(initialRate[i]+mRate2[i]);state[timeIndex]=self.getInitialTime()+step*timeRate;return eventSolver.checkDiscontinuity(state,true)};self.computeFinalRateAndCreateIntervalData=function(){var ode=self.getODE();var initialState=self.getInitialState();var initialRate=self.getInitialRate();var finalState=self.getFinalState();var finalRate=self.getFinalRate();var timeIndex=self.getDimension()-1;if(mAccelerationIndependentOfVelocity){for(var i=0,j=1;i<timeIndex;i+=2,j+=2){finalRate[i]=finalState[j];finalRate[j]=mRate2[j]}finalRate[timeIndex]=mRate2[timeIndex]}else{ode.getRate(finalState,finalRate);self.addToEvaluations(self.getNumberOfEvaluations())}return new EJSS_ODE_INTERPOLATION.hermiteIntervalData(initialState,initialRate,finalState,finalRate)};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.DDEDiscontinuity={};EJSS_ODE_SOLVERS.ddeDiscontinuity=function(mSolver,mDDE){var self={};var mDiscontinuities=[];var mDiIndex=[];var mRateForCorrections=[];self.initialize=function(state){if(mSolver.getRunsForwards())mDiscontinuities.push(Number.NEGATIVE_INFINITY);else mDiscontinuities.push(Number.POSITIVE_INFINITY);var initDisc=mDDE.getInitialConditionDiscontinuities();if(initDisc!=null){var length=initDisc.length;for(var i=0;i<length;i++)mDiscontinuities.push(initDisc[i])}mDiscontinuities.push(state[state.length-1]);var delays=mDDE.getDelays(state);mDiIndex=new Array(delays.length);self.reset(state);mRateForCorrections=new Array(state.length)};self.reset=function(state){var length=mDiIndex.length;for(var i=0;i<length;i++)mDiIndex[i]=0;update(state)};function update(state){var i;var delays=mDDE.getDelays(state);var n=delays.length;var discCount=mDiscontinuities.length;var timeIndex=state.length-1;if(mSolver.getRunsForwards()){for(i=0;i<n;i++){var limit=state[timeIndex]-delays[i]+self.getTolerance();for(var index=mDiIndex[i];index<discCount;index++){var disc=mDiscontinuities[index];if(disc>limit){mDiIndex[i]=index;break}}}}else{for(i=0;i<n;i++){var limit=state[timeIndex]-delays[i]-self.getTolerance();for(var index=mDiIndex[i];index<discCount;index++){var disc=mDiscontinuities[index];if(disc<limit){mDiIndex[i]=index;break}}}}}self.evaluate=function(state){var i;var t=state[state.length-1];var delays=mDDE.getDelays(state);var n=delays.length;if(mSolver.getRunsForwards()){var min=Number.POSITIVE_INFINITY;for(i=0;i<n;i++){var di=mDiscontinuities[mDiIndex[i]];min=Math.min(min,delays[i]+di-t)}return min}else{var max=Number.NEGATIVE_INFINITY;for(i=0;i<n;i++){var di=mDiscontinuities[mDiIndex[i]];max=Math.max(max,delays[i]+di-t)}return max}};function correctTime(state){var i;var dimension=state.length;var timeIndex=dimension-1;var step=self.getTolerance()/20;var maxIterations=mSolver.getDDEIterations();var history=mSolver.getStateHistory();var counter=0;if(mSolver.getRunsForwards()){while(++counter<maxIterations){mDDE.getRate(state,mRateForCorrections);history.addIntervalData(EJSS_ODE_INTERPOLATION.eulerIntervalData(state,mRateForCorrections,state[timeIndex]+step));for(i=0;i<dimension;i++)state[i]+=step*mRateForCorrections[i];var h=self.evaluate(state);if(h<0){return state[timeIndex]}}}else{while(++counter<maxIterations){mDDE.getRate(state,mRateForCorrections);history.addIntervalData(EJSS_ODE_INTERPOLATION.eulerIntervalData(state,mRateForCorrections,state[timeIndex]-step));for(i=0;i<dimension;i++)state[i]-=step*mRateForCorrections[i];var h=evaluate(state);if(h>0)return state[timeIndex]}}return Number.NaN}self.action=function(){var state=mDDE.getState();var time=correctTime(state);mDiscontinuities.push(time);var eventData=mSolver.findFirstEvent(state,time,state);if(eventData!=null){mCurrentEventData=eventData;eventData.action()}return true};self.getTolerance=function(){return mSolver.getDDETolerance()};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.ProblemData={POSITIVE:2,SMALL_POSITIVE:1,ZERO:0,SMALL_NEGATIVE:-1,NEGATIVE:-2};EJSS_ODE_SOLVERS.eventData=function(mSolver,mEvent,mState){var self={};var mEventType=mEvent.getTypeOfEvent();var mTimeIndex=mState.length-1;var mPositiveFlag;var mNegativeFlag;var mCurrentPosition;var mHBefore;var mHAfter;var mH;var mTime;var mMaxAdvance;self.getEvent=function(){return mEvent};self.getEventType=function(){return mEventType};self.setH=function(h){mH=h};self.getH=function(){return mH};self.getTime=function(){return mTime};self.setTime=function(time){mTime=time};self.hasPositiveFlag=function(){return mPositiveFlag};self.hasNegativeFlag=function(){return mNegativeFlag};self.getHBefore=function(){return mHBefore};self.setHAfter=function(h){mHAfter=h};self.getHAfter=function(){return mHAfter};self.getCurrentPosition=function(){return mCurrentPosition};self.getMaxAdvance=function(){return mMaxAdvance};self.setMaxAdvance=function(advance){mMaxAdvance=advance};self.action=function(){return mEvent.action()};self.getProblem=function(){return mEvent};self.reset=function(state){mPositiveFlag=false;mNegativeFlag=false;var h=mEvent.evaluate(state);self.findPosition(state[mTimeIndex],h);if(mSolver.getCurrentEventData()!=self){if(mEventType==EJSS_ODE_SOLVERS.EVENT_TYPE.CROSSING_EVENT){if(h>0)mPositiveFlag=true;else if(h<0)mNegativeFlag=true}else if(mEventType==EJSS_ODE_SOLVERS.EVENT_TYPE.POSITIVE_EVENT){if(h>0)mPositiveFlag=true}}};self.findPosition=function(time,hValue){mHBefore=hValue;if(mHBefore>=mEvent.getTolerance()){mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.POSITIVE;mPositiveFlag=true}else if(mHBefore>0)mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.SMALL_POSITIVE;else if(mHBefore==0)mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.ZERO;else if(mHBefore>-mEvent.getTolerance())mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.SMALL_NEGATIVE;else{mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.NEGATIVE;mNegativeFlag=true}if(mEventType==EJSS_ODE_SOLVERS.EVENT_TYPE.STATE_EVENT&&mCurrentPosition==EJSS_ODE_SOLVERS.ProblemData.NEGATIVE){var msg="The state event "+mEvent+" is in an illegal state: "+mHBefore+" at "+time;if(mSolver.getLastEventData()==null)msg+="\nThere was no previous event";else msg+="\nLast previous event was "+mSolver.getLastEventData().getProblem()+", which took place at "+mSolver.getLastEventDataTime();mSolver.error(EJSS_ODE_SOLVERS.ERROR.ILLEGAL_EVENT_STATE,msg)}};self.reset(mState);return self};EJSS_ODE_SOLVERS.discontinuityData=function(mSolver,mDiscontinuity,mState){var self={};var mTimeIndex=mState.length-1;var mPositiveFlag;var mNegativeFlag;var mCurrentPosition;var mHBefore;var mH;var mTime;self.getDiscontinuity=function(){return mDiscontinuity};self.setH=function(h){mH=h};self.getH=function(){return mH};self.setTime=function(time){mTime=time};self.getTime=function(){return mTime};self.hasPositiveFlag=function(){return mPositiveFlag};self.hasNegativeFlag=function(){return mNegativeFlag};self.getHBefore=function(){return mHBefore};self.setHAfter=function(h){mHAfter=h};self.getHAfter=function(){return mHAfter};self.getCurrentPosition=function(){return mCurrentPosition};self.getMaxAdvance=function(){return Number.NaN};self.action=function(){return mDiscontinuity.action()};self.getProblem=function(){return mDiscontinuity};self.reset=function(state){mPositiveFlag=false;mNegativeFlag=false;var h=mDiscontinuity.evaluate(state);self.findPosition(state[mTimeIndex],h);if(mSolver.getCurrentEventData()!=self){if(h>0)mPositiveFlag=true;else if(h<0)mNegativeFlag=true}};self.findPosition=function(time,hValue){mHBefore=hValue;if(mHBefore>=mDiscontinuity.getTolerance()){mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.POSITIVE;mPositiveFlag=true}else if(mHBefore>0)mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.SMALL_POSITIVE;else if(mHBefore==0)mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.ZERO;else if(mHBefore>-mDiscontinuity.getTolerance())mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.SMALL_NEGATIVE;else{mCurrentPosition=EJSS_ODE_SOLVERS.ProblemData.NEGATIVE;mNegativeFlag=true}};self.reset(mState);return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.ODEMultistepSolver={NO_ERROR:0,DID_NOT_CONVERGE:1};EJSS_ODE_SOLVERS.createODEMultistepSolver=function(mODE){var self={};var sMaxMessages=3;var mErr_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR;var mMaxIterations=200;var mEnableExceptions=false;var mErr_msg="";var mFixedStepSize=.1;var mInternalODE=EJSS_ODE_SOLVERS.createODEMultistepSolverInternalODE(mODE);var mODEEngine=EJSS_ODE_SOLVERS.createCashKarp45(mInternalODE);self.enableRuntimeExceptions=function(enable){mEnableExceptions=enable};self.setMaxIterations=function(n){mMaxIterations=Math.max(1,n)};self.setTolerance=function(tol){tol=Math.abs(tol);mODEEngine.setTolerance(tol)};self.getTolerance=function(){return mODEEngine.getTolerance()};self.getErrorCode=function(){return mErr_code};self.initialize=function(stepSize){mMaxMessages=4;mErr_msg="";mErr_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR;mFixedStepSize=stepSize;mInternalODE.setInitialConditions();mODEEngine.initialize(stepSize)};self.setStepSize=function(stepSize){mMaxMessages=4;mFixedStepSize=stepSize;if(stepSize<0){mODEEngine.setStepSize(Math.max(-Math.abs(mODEEngine.getStepSize()),stepSize))}else{mODEEngine.setStepSize(Math.min(mODEEngine.getStepSize(),stepSize))}};self.setMaximumNumberOfErrorMessages=function(n){mMaxMessages=n};self.getStepSize=function(){return mFixedStepSize};self.step=function(){mErr_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR;mInternalODE.setInitialConditions();var remainder=0;if(mFixedStepSize>0){remainder=plus()}else{remainder=minus()}mInternalODE.update();return mFixedStepSize-remainder};function plus(){var tol=mODEEngine.getTolerance();var remainder=mFixedStepSize;if(mODEEngine.getStepSize()<=0||mODEEngine.getStepSize()>mFixedStepSize||mFixedStepSize-mODEEngine.getStepSize()==mFixedStepSize){mODEEngine.setStepSize(mFixedStepSize)}var counter=0;while(remainder>tol*mFixedStepSize){counter++;var oldRemainder=remainder;if(remainder<mODEEngine.getStepSize()){var tempStep=mODEEngine.getStepSize();mODEEngine.setStepSize(remainder);var delta=mODEEngine.step();remainder-=delta;mODEEngine.setStepSize(tempStep)}else{remainder-=mODEEngine.step()}if(mODEEngine.getErrorCode()!=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR||Math.abs(oldRemainder-remainder)<=Number.MIN_VALUE||tol*mFixedStepSize/10>mODEEngine.getStepSize()||counter>mMaxIterations){mErr_msg="ODEMultiStep did not converge. Remainder="+remainder;mErr_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.DID_NOT_CONVERGE;if(mEnableExceptions){throw mErr_msg}if(mMaxMessages>0){mMaxMessages--;console.log(mErr_msg)}break}}return remainder}function minus(){var tol=mODEEngine.getTolerance();var remainder=mFixedStepSize;if(mODEEngine.getStepSize()>=0||mODEEngine.getStepSize()<mFixedStepSize||mFixedStepSize-mODEEngine.getStepSize()==mFixedStepSize){mODEEngine.setStepSize(mFixedStepSize)}var counter=0;while(remainder<tol*mFixedStepSize){counter++;var oldRemainder=remainder;if(remainder>mODEEngine.getStepSize()){var tempStep=mODEEngine.getStepSize();mODEEngine.setStepSize(remainder);var delta=mODEEngine.step();remainder-=delta;mODEEngine.setStepSize(tempStep)}else{remainder-=mODEEngine.step()}if(mODEEngine.getErrorCode()!=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR||Math.abs(oldRemainder-remainder)<=Number.MIN_VALUE||tol*mFixedStepSize/10<mODEEngine.getStepSize()||counter>mMaxIterations){mErr_msg="ODEMultiStep did not converge. Remainder="+remainder;mErr_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.DID_NOT_CONVERGE;if(enableExceptions){throw mErr_msg}if(mMaxMessages>0){mMaxMessages--;console.log(mErr_msg)}}}return remainder}return self};EJSS_ODE_SOLVERS.createODEMultistepSolverInternalODE=function(mODE){var self={};var mEngineState=[];self.getRate=function(state,rate){mODE.getRate(state,rate)};self.getState=function(){return mEngineState};self.setInitialConditions=function(){var state=mODE.getState();if(state==null){return}if(mEngineState==null||mEngineState.length!=state.length){mEngineState=new Array(state.length)}for(var i=0,n=state.length;i<n;i++){mEngineState[i]=state[i]}};self.update=function(){var state=mODE.getState();for(var i=0,n=state.length;i<n;i++){state[i]=mEngineState[i]}};self.setInitialConditions();return self};EJSS_ODE_SOLVERS.createCashKarp45=function(mODE){var self={};var sA=[[1/5],[3/40,9/40],[3/10,-9/10,6/5],[-11/54,5/2,-70/27,35/27],[1631/55296,175/512,575/13824,44275/110592,253/4096]];var sB5=[37/378,0,250/621,125/594,0,512/1771];var sEr=[277/64512,0,-6925/370944,6925/202752,277/14336,-277/7084];var sNumStages=6;var mError_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR;var mStepSize=.01;var mNumEqn=0;var mTemp_state=[];var mK=[];var mTruncErr;var mTol=1e-6;var mEnableExceptions=false;self.enableRuntimeExpecptions=function(enable){mEnableExceptions=enable};self.setStepSize=function(stepSize){mStepSize=stepSize};self.getStepSize=function(){return mStepSize};self.setTolerance=function(tol){mTol=Math.abs(tol);if(mTol<1e-12){var err_msg="Error: Cash-Karp ODE solver tolerance cannot be smaller than 1.0e-12.";if(mEnableExceptions){throw err_msg}console.log(err_msg);mTol=1e-12}};self.getTolerance=function(){return mTol};self.getErrorCode=function(){return mError_code};self.initialize=function(stepSize){mStepSize=stepSize;var state=mODE.getState();if(state==null){return}if(mNumEqn!=state.length){mNumEqn=state.length;mTemp_state=new Array(mNumEqn);mK=new Array(sNumStages);for(var i=0;i<sNumStages;i++)mK[i]=new Array(mNumEqn)}};self.step=function(){var i,j,s;var iterations=10;var currentStep=mStepSize;var error=0;var state=mODE.getState();mError_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.NO_ERROR;mODE.getRate(state,mK[0]);do{iterations--;currentStep=mStepSize;for(s=1;s<sNumStages;s++){for(i=0;i<mNumEqn;i++){mTemp_state[i]=state[i];for(j=0;j<s;j++){mTemp_state[i]=mTemp_state[i]+mStepSize*sA[s-1][j]*mK[j][i]}}mODE.getRate(mTemp_state,mK[s])}error=0;for(i=0;i<mNumEqn;i++){mTruncErr=0;for(s=0;s<sNumStages;s++){mTruncErr=mTruncErr+mStepSize*sEr[s]*mK[s][i]}error=Math.max(error,Math.abs(mTruncErr))}if(error<=Number.MIN_VALUE){error=mTol/1e5}if(error>mTol){var fac=.9*Math.pow(error/mTol,-.25);mStepSize=mStepSize*Math.max(fac,.1)}else if(error<mTol/10){var fac=.9*Math.pow(error/mTol,-.2);if(fac>1){mStepSize=mStepSize*Math.min(fac,10)}}}while(error>mTol&&iterations>0);for(i=0;i<mNumEqn;i++){for(s=0;s<sNumStages;s++){state[i]+=currentStep*sB5[s]*mK[s][i]}}if(iterations==0){mError_code=EJSS_ODE_SOLVERS.ODEMultistepSolver.DID_NOT_CONVERGE;if(mEnableExceptions){throw"DormanPrince45 ODE solver did not converge."}}return currentStep};self.initialize(mStepSize);return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.createEulerODESolver=function(mODE){var self=EJSS_ODE_SOLVERS.createSolverInterpolatorDiscreteTime(mODE);var mRate;var super_initialize=self.initialize;self.initialize=function(stepSize){super_initialize(stepSize);mRate=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){mODE.getRate(state,mRate);for(var i=0,n=state.length;i<n;i++){state[i]=state[i]+step*mRate[i]}return state};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.createRungeKutta4ODESolver=function(mODE){var self=EJSS_ODE_SOLVERS.createSolverInterpolatorDiscreteTime(mODE);var initialState;var mRate1,mRate2,mRate3,mRate4;var super_initialize=self.initialize;self.initialize=function(stepSize){super_initialize(stepSize);initialState=new Array(self.getDimension());mRate1=new Array(self.getDimension());mRate2=new Array(self.getDimension());mRate3=new Array(self.getDimension());mRate4=new Array(self.getDimension())};self.computeIntermediateStep=function(step,state){mODE.getRate(state,mRate1);for(var i=0,n=state.length;i<n;i++){initialState[i]=state[i];state[i]=initialState[i]+step*mRate1[i]/2}mODE.getRate(state,mRate2);for(var i=0,n=state.length;i<n;i++){state[i]=initialState[i]+step*mRate2[i]/2}mODE.getRate(state,mRate3);for(var i=0,n=state.length;i<n;i++){state[i]=initialState[i]+step*mRate3[i]}mODE.getRate(state,mRate4);for(var i=0,n=state.length;i<n;i++){state[i]=initialState[i]+step*(mRate1[i]+2*mRate2[i]+2*mRate3[i]+mRate4[i])/6}return state};return self};var EJSS_ODE_SOLVERS=EJSS_ODE_SOLVERS||{};EJSS_ODE_SOLVERS.SolverInterpolatorDiscreteTime={};EJSS_ODE_SOLVERS.createSolverInterpolatorDiscreteTime=function(mODE){var self={};var mErrorCode=0;var mDimension;var mTimeIndex;var mAccumulatedEvaluations=0;var mStepSize=.1;var mMaximumStepSize=Number.POSITIVE_INFINITY;var mInitialTime=0;var mFinalTime=0;var mInitialState;var mInitialRate;var mFinalState;var mFinalRate;var mRelativeTolerance=0;var mIsDDE=false;var mDiscontinuities=[];var mNextDiscontinuity;var mStateHistoryLength;self.getNumberOfEvaluations=function(){return 0};self.allocateOtherArrays=function(){};self.computeIntermediateStep=function(step,state){return null};self.computeCarefulIntermediateStep=function(eventSolver,step,state){return 0};self.setTolerance=function(tolerance){mRelativeTolerance=Math.abs(tolerance)};self.getDimension=function(){return mDimension};self.initialize=function(stepSize){mStepSize=stepSize;var state=mODE.getState();mDimension=state.length};self.step=function(){var state=mODE.getState();self.computeIntermediateStep(mStepSize,state);return 0};self.setStepSize=function(stepSize){mStepSize=stepSize};self.getStepSize=function(){return mStepSize};return self};var EJSS_CORE=EJSS_CORE||{};EJSS_CORE.createRemoteView=function(mContainer,mLocalModelPort,mModelsURL,mModel){var self=EJSS_CORE.createView(mContainer);var mNumOpenTries=10;var mOpenTimeout=500;var mWebsocket;var mMessages={};var mIsOpen=false;var mOpenTry=0;var mCurrentData={};var mVariableList=[];var mActionList=[];var mPropertyChangesList=[];var mActionsInvokedList=[];var mUpdating=false;var mDelayedUpdate=false;var mVarsMetadata=[];var mMethodsMetadata=[];var mLinkingURL="";var mShowLinkingButtons=true;var mServerModelPort=0;var wrap;var mUri="";var countTo=0;self._23=function(){return"ConnectionWS"};function sendMessage(command,data){if(!mIsOpen)return;if(data!==undefined){mWebsocket.send(command+JSON.stringify(data))}else{mWebsocket.send(command)}var f=mWebsocket.onmessage;mWebsocket.onmessage=null;mWebsocket.onmessage=f}function processInput(input){console.log(" --\x3e Processing input: "+input);var message;var usefulValues={};if(input.charAt(0)=="{"){message=JSON.parse(input);var method="";if(message.hasOwnProperty("method")){method=message.method;if(method=="reset")self._reset();else if(method=="initialize")self._initialize();else if(wrap!=undefined){usefulValues=wrap.extract(input);mCurrentData=usefulValues;coallesce(self._update)}}if(message.hasOwnProperty("apiVersion")){console.log("Metadata Obtained");wrap=new wrapper(mWebsocket,input);for(var variable in mVariableList){wrap.get(mVariableList[variable],true)}}}else{processNotSmartInput(input)}}function processNotSmartInput(input){var message;switch(input.charAt(0)){case"R":self._reset();break;case"I":self._initialize();break;case"U":mCurrentData=JSON.parse(input.substring(1));coallesce(self._update);break;case"C":mCurrentData=JSON.parse(input.substring(1));coallesce(self._collectData);break;case"M":message=JSON.parse(input.substring(1));if(!self[message.method])console.log("View function: <"+message.method+"> with data: <"+message.data+"> ignored. View function does not exist.");else self[message.method](message.data);break;case"P":message=JSON.parse(input.substring(1));if(self[message.element])self[message.element].setProperty(message.property,message.value);else console.log("setProperty<"+message.property+"> with value: <"+message.value+"> to element <"+message.element+"> ignored. Element does not exist!");break;case"E":message=JSON.parse(input.substring(1));if(self[message.element])self[message.element][message.method](message.data);else console.log("Message <"+message.method+"> to element <"+message.element+"> ignored. Element does not exist!");break;case"F":message=JSON.parse(input.substring(1));if(self[message.element])self[message.element][message.method](message.data);else console.log("Message with object <"+message.method+"> to element <"+message.element+"> ignored. Element does not exist!");break;case"D":message=JSON.parse(input.substring(1));mVarsMetadata=message.variables;mMethodsMetadata=message.methods;break;default:console.log("Not known message: Ignoring");break}}function coallesce(viewFunction){viewFunction();self._render()}self._connectToServer=function(){try{mWebsocket=new WebSocket(mUri);console.log("Connecting... (readyState "+mWebsocket.readyState+")");mWebsocket.onopen=function(message){mIsOpen=true;mOpenTry=0;console.log("Openhd Event: "+message.type+" - Message: "+message.data);sendMessage("",{method:"getMetadata"})};mWebsocket.onclose=function(message){if(mOpenTry<mNumOpenTries){window.setTimeout(function(){self._connectToServer()},mOpenTimeout);mOpenTry++}mIsOpen=false;console.log("Closehd Event: "+message.type+" - Message: "+message.data+" - Reopen: "+mOpenTry)};mWebsocket.onerror=function(message){mIsOpen=false;console.log("Errorhd Event: "+message.type+" - Message: "+message.data)};mWebsocket.onmessage=function(message){processInput(message.data)}}catch(exception){console.log(exception)}self._update();self._render()};self._getValue=function(variable){if(mIsOpen)return mCurrentData[variable];return self._10(variable)};super_registerVariable=self._5;super_registerAction=self._7;super_startUp=self._11;self._11=function(){super_startUp();self._connectToServer()};self._5=function(variable,initialValue,inputOnly){super_registerVariable(variable,initialValue);if(inputOnly){self._13(variable,function(){return self._getValue(variable)},null,initialValue)}else{mVariableList.push(variable);self._13(variable,function(){return self._getValue(variable)},function(value){mPropertyChangesList.push({name:variable,value:value})},initialValue)}};self._7=function(action){super_registerAction(action);mActionList.push(action);self._setAction(action,function(data){mActionsInvokedList.push({name:action,argument:data})})};self._18=function(){self._16();var names={};var values={};if(mPropertyChangesList.length>0){for(var propChange in mPropertyChangesList){if(mPropertyChangesList[propChange].hasOwnProperty("name"))names[propChange]=mPropertyChangesList[propChange].name;values[propChange]=mPropertyChangesList[propChange].value}wrap.set(names,values,"")}if(mActionsInvokedList.length>0){for(var actInvoke in mActionsInvokedList){wrap.callAction(mActionsInvokedList[actInvoke].name,[mActionsInvokedList[actInvoke].argument])}}mPropertyChangesList=[];mActionsInvokedList=[]};self._17=function(){return mActionsInvokedList.length};self.getLinkingURL=function(){return mLinkingURL};self.createLinkingButtons=function(){self._9(EJSS_INTERFACE.button,"_linkingButton_").setAction("OnClick",function(){var str=self.getLinkingURL();window.alert(str.toString())}).setProperties({Text:"@",FontSize:"8px"});self._9(EJSS_INTERFACE.button,"_qrButton_").setAction("OnClick",function(){var str=encodeURIComponent(self.getLinkingURL());var url="https://chart.googleapis.com/chart?cht=qr&chl="+str+"&chs=400";window.open(url,"_blank")}).setProperties({Text:"QR",FontSize:"8px"})};self.hiddenLinkingButtons=function(){_view._linkingButton_.setVisibility("hidden");_view._qrButton_.setVisibility("hidden")};self.showLinkingButtons=function(){_view._linkingButton_.setVisibility("visible");_view._qrButton_.setVisibility("visible")};if(window.location.protocol.indexOf("file")!=-1){if(typeof mLocalModelPort=="undefined"||mLocalModelPort===null||mLocalModelPort==0){mLocalModelPort=8800}mUri="ws://localhost:"+mLocalModelPort;mShowLinkingButtons=false}else{if(history.state){mServerModelPort=history.state.mServerModelPort;mShowLinkingButtons=false}if(typeof mModelsURL=="undefined"||mModelsURL===null||mModelsURL==""){var host=window.location.host;var proto=window.location.protocol;mModelsURL=proto+"//"+host+"/ejsS_library/models"}if(typeof mModel=="undefined"||mModel===null||mModel==""){var index=window.location.href.lastIndexOf("/_view");mModel=window.location.href.slice(mModelsURL.length,index)}var xmlhttp=new XMLHttpRequest;if(mServerModelPort>0){xmlhttp.open("GET",mModelsURL+"/broker.php?model="+mModel+"&port="+mServerModelPort,true)}else{xmlhttp.open("GET",mModelsURL+"/broker.php?model="+mModel,true)}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var response=JSON.parse(xmlhttp.responseText);mUri=response.webserver;mLinkingURL=mModelsURL+"/linking.php?model="+mModel+"&port="+response.port;if(mShowLinkingButtons)self.createLinkingButtons();self._11()}else console.log("WARNING: server no response!")};xmlhttp.send()}return self};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.addToArray=function(array,object,position){EJSS_TOOLS.removeFromArray(array,object);if(position>=0)array.splice(position,0,object);else array.push(object)};EJSS_TOOLS.arrayObjectIndexOf=function(array,object){return array.indexOf(object)};EJSS_TOOLS.removeFromArray=function(array,object){var index=array.indexOf(object);if(index>=0)array.splice(index,1)};EJSS_TOOLS.compareArrays=function(array1,array2){if(!array1||!array2)return false;if(!array1 instanceof Array||!array2 instanceof Array){return array1==array2}if(array1.length!=array2.length)return false;for(var i=0;i<array1.length;i++){if(array1[i]instanceof Array&&array2[i]instanceof Array){if(!EJSS_TOOLS.compareArrays(array1[i],array2[i]))return false}else if(array1[i]!=array2[i]){return false}}return true};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.ConnectionWS={};EJSS_TOOLS.connectionWS=function(mUri){var self={};var websocket;var messages={};var open;self._23=function(){return"ConnectionWS"};self.get=function(property){var result=messages[property];if(typeof result!="undefined"||result==null)return result};self.set=function(property,args){console.log("set:"+property+":"+args.toString());console.log("set:is open="+open);if(open){var message=property+" "+args.toString();websocket.send(message);self.reset()}};self.reset=function(){var f=websocket.onmessage;websocket.onmessage=null;websocket.onmessage=f};function connect(){try{websocket=new WebSocket(mUri);console.log("Connecting... (readyState "+websocket.readyState+")")}catch(exception){console.log(exception)}}function listener(event,handler){switch(event){case"onopen":websocket.onopen=function(e){handler(e)};break;case"onmessage":websocket.onmessage=function(e){handler(e)};break;case"onclose":websocket.onclose=function(e){handler(e)};break;case"onerror":websocket.onerror=function(e){handler(e)};break;default:break}}function messagehd(message){var words=message.data.split(" ");messages[words[0]]=message.data.substring(words[0].length+1)}function openhd(message){open=true;console.log("Openhd Event: "+message.type+" - Message: "+message.data)}function closehd(message){open=false;console.log("Closehd Event: "+message.type+" - Message: "+message.data)}function errorhd(message){open=false;console.log("Errorhd Event: "+message.type+" - Message: "+message.data)}connect();listener("onopen",openhd);listener("onclose",closehd);listener("onerror",errorhd);listener("onmessage",messagehd);return self};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.Decode={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",hex_to_ascii:function(input){var hex=input.toString();var str="";for(var n=0;n<hex.length;n+=2){str+=String.fromCharCode(parseInt(hex.substr(n,2),16))}return str},decode:function(input){input=""+input;var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}}output=EJSS_TOOLS.Decode._utf8_decode(output);return output},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.DisplayColors={phaseColors:{},lineColors:["rgb(255,0,0)","rgb(0,240,0)","rgb(0,0,255)","rgb(240,240,0)","rgb(0,240,240)","rgb(255,0,255)"],markerColors:["rgb(255,0,0)","rgb(0,240,0)","rgb(0,0,255)","rgb(240,240,0)","rgb(0,240,240)","rgb(255,0,255)"],arrayColors:{black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,160],darkcyan:[0,240,240],darkgray:[64,64,64],darkgreen:[0,240,0],darkgrey:[64,64,64],darkyellow:[240,240,0],gray:[125,125,125],green:[0,255,0],grey:[125,125,125],lightblue:[173,216,230],lightgray:[192,192,192],lightgrey:[192,192,192],magenta:[255,0,255],maroon:[128,0,0],olive:[128,128,0],orange:[255,165,0],pink:[255,175,175],purple:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},getLineColor:function(index){var color=EJSS_TOOLS.DisplayColors.lineColors[index];if(color===undefined){var h=index*360/12%360;color="hsl("+h+",100%,50%)";EJSS_TOOLS.DisplayColors.lineColors[index]=color}return color},getMarkerColor:function(index){var color=EJSS_TOOLS.DisplayColors.markerColors[index];if(color===undefined){var h=index*360/12%360;color="hsl("+h+",100%,100%)";EJSS_TOOLS.DisplayColors.markerColors[index]=color}return color},getArrayColor:function(str){str=str.toLowerCase();if(str.indexOf("rgb")==0){var color=str.substring(4,str.length-1).replace(/ /g,"").split(",")}else if(str.indexOf("#")==0){str=str.slice(1);str=str.toUpperCase();var hex_alphabets="0123456789ABCDEF";var color=new Array(3);var k=0;var int1,int2;for(var i=0;i<6;i+=2){int1=hex_alphabets.indexOf(str.charAt(i));int2=hex_alphabets.indexOf(str.charAt(i+1));color[k]=int1*16+int2;k++}}else{var color=EJSS_TOOLS.DisplayColors.arrayColors[str];if(color===undefined){color=EJSS_TOOLS.DisplayColors.arrayColors["black"]}}return[color[0]/255,color[1]/255,color[2]/255]}};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.enumeration=function(namesToValues){var enumeration=function(){throw"Can't Instantiate Enumerations"};var proto=enumeration.prototype={constructor:enumeration,toString:function(){return this.name},valueOf:function(){return this.value},toJSON:function(){return this.name}};enumeration.values=[];for(var name in namesToValues){var e=inherit(proto);e.name=name;e.value=namesToValues[name];enumeration[name]=e;enumeration.values.push(e)}enumeration.foreach=function(f,c){for(var i=0;i<this.values.length;i++)f.call(c,this.values[i])};return enumeration};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.File={JSLoaded:"",SingletonDownload:document.createElement("input"),SingletonUpload:document.createElement("input"),loadJSfile:function(filename,scriptLoaded){if(EJSS_TOOLS.File.JSLoaded.indexOf("["+filename+"]")!=-1){console.log("File already loaded "+filename);scriptLoaded();return}EJSS_TOOLS.File.JSLoaded+="["+filename+"]"
;var fileref=document.createElement("script");fileref.setAttribute("type","text/javascript");fileref.setAttribute("src",filename);if(typeof scriptLoaded!="undefined")fileref.onload=scriptLoaded;document.getElementsByTagName("head")[0].appendChild(fileref)},plainName:function(filename){var index=filename.lastIndexOf("/");if(index>=0)filename=filename.substring(index+1);index=filename.indexOf(".");if(index>0)filename=filename.substring(0,index);return filename},downloadText:function(filename,text){var blob=new Blob([content]);EJSS_TOOLS.File.SingletonDownload=document.createElement("a");EJSS_TOOLS.File.SingletonDownload.href=window.URL.createObjectURL(blob);EJSS_TOOLS.File.SingletonDownload.download=filename;EJSS_TOOLS.File.SingletonDownload.click();window.URL.revokeObjectURL(blob)},uploadText:function(model,action){EJSS_TOOLS.File.SingletonUpload.type="file";EJSS_TOOLS.File.SingletonUpload.accept="text/*";EJSS_TOOLS.File.SingletonUpload.multiple=false;EJSS_TOOLS.File.SingletonUpload.onchange=function(event){var reader=new FileReader;reader.onload=function(progressEvent){var parameter=this.result;model.performTaskSafely(function(){action(parameter)});EJSS_TOOLS.File.SingletonUpload.value=""};reader.readAsText(event.target.files[0])};EJSS_TOOLS.File.SingletonUpload.click()},loadScript:function(scriptsrc){var s=document.createElement("script");s.type="text/javascript";s.src=scriptsrc;document.getElementsByTagName("head")[0].appendChild(s)},loadJSONFile:function(url,callback){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var myArr=JSON.parse(xmlhttp.responseText);callback(myArr)}};xmlhttp.open("GET",url,true);xmlhttp.send()},requestShortUrl:function(json,callback){var encoded=escape("http://urlecho.appspot.com/echo?status=200&Content-Type=text/plain&body="+json);EJSS_TOOLS.File.CALLBACK=callback;EJSS_TOOLS.File.callFunction=function(data){EJSS_TOOLS.File.CALLBACK(data.shortUrl)};if(document.getElementById("__rtShortUrl")==null){var scb=document.createElement("script");scb.type="text/javascript";scb.id="__rtShortUrl";scb.innerHTML="function rtShortUrl(data) { EJSS_TOOLS.File.callFunction(data); }";document.getElementsByTagName("head")[0].appendChild(scb)}var s=document.getElementById("_requestShortUrl");if(s!=null)document.getElementsByTagName("head")[0].removeChild(s);s=document.createElement("script");s.id="_requestShortUrl";s.type="text/javascript";s.src="http://b1t.co/Site/api/External/MakeUrlWithGet?callback=rtShortUrl&url="+encoded;document.getElementsByTagName("head")[0].appendChild(s)}};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.JsonrpcBuilder={template:{METHOD:"${METHOD}",PARAMS:"${PARAMS}",ID:"${ID}",REQUEST:'{jsonrpc: "2.0", method: ${METHOD}, params: ${PARAMS}, id: ${ID}}',RESPONSE_OK:'{jsonrpc: "2.0", result: ${RESULT}, params: ${PARAMS}, id: ${ID}}',RESPONSE_ERROR:'{jsonrpc: "2.0", method: ${METHOD}, params: ${PARAMS}, id: ${ID}}',ERROR:'{code: "2.0", message: ${MESSAGE}, data: ${DATA}}'},request:function(method,params,id){if(params&&!(params instanceof Array))throw new InvalidParamsException;var request={jsonrpc:"2.0",method:method};if(params)request.params=params;if(id)request.id=id;return request},response:function(result,id){return{jsonrpc:"2.0",result:result,id:id}},responseWithError:function(error,id){return{jsonrpc:"2.0",error:error,id:id}},error:function(code,message,data){return{code:code,message:message,data:data}},parseResponse:function(resString){var response=null;try{response=JSON.parse(resString)}catch(error){console.log(error)}return response!=null?response.result:null}};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.JsonrpcClient={methods:{connect:"connect",open:"open",getMetadata:"getMetadata",getValue:"getValue",setValue:"setValue",close:"close",disconnect:"disconnect"}};EJSS_TOOLS.jsonrpcClient=function(mHost,mPort){var self={};var JsonrpcClient=EJSS_TOOLS.JsonrpcClient;var JsonrpcBuilder=EJSS_TOOLS.JsonrpcBuilder;var websocket;var mCallback={};var mOpenCallback;var mCloseCallback;var mErrorCallback;var mMessageCallback;self.connect=function(callback){return callMethod(JsonrpcClient.methods.connect,null,callback)};self.open=function(callback){return callMethod(JsonrpcClient.methods.open,null,callback)};self.getValue=function(name,callback){return callMethod(JsonrpcClient.methods.getValue,[name],callback)};self.setValue=function(data,callback){return callMethod(JsonrpcClient.methods.setValue,data,callback)};self.getMetadata=function(callback){return callMethod(JsonrpcClient.methods.getMetadata,null,callback)};self.disconnect=function(callback){return callMethod(JsonrpcClient.methods.disconnect,null,callback)};self.close=function(callback){return callMethod(JsonrpcClient.methods.close,null,callback)};function idGenerator(len){var text="";var charset="abcdefghijklmnopqrstuvwxyz";for(var i=0;i<len;i++)text+=charset.charAt(Math.floor(Math.random()*charset.length));return text}function callMethod(method,params,callback,_id){var id=_id?_id:idGenerator(12);if(callback)mCallback[id]=callback;var request=JsonrpcBuilder.request(method,params,id);websocket.send(JSON.stringify(request))}self.init=function(opencb,messcb,errorcb,closecb){try{mOpenCallback=opencb;mErrorCallback=errorcb;mCloseCallback=closecb;mMessageCallback=messcb;var uri="ws://"+mHost;if(mPort)uri+=":"+mPort;websocket=new WebSocket(uri);addListener();console.log("Connecting... (readyState "+websocket.readyState+")")}catch(exception){console.log(exception)}};self.finish=function(){try{websocket.close()}catch(exception){console.log(exception)}};function addListener(){websocket.onopen=function(message){if(mOpenCallback)mOpenCallback(message);console.log("Openhd Event: "+message.type+" - Message: "+message.data)};websocket.onmessage=function(message){var data=JSON.parse(message.data);if(mMessageCallback)mMessageCallback(mCallback);if(data.id&&mCallback[data.id])mCallback[data.id](data.result)};websocket.onclose=function(emessage){if(mCloseCallback)mCloseCallback(message);console.log("Closehd Event: "+message.type+" - Message: "+message.data)};websocket.onerror=function(message){if(mErrorCallback)mErrorCallback(message);console.log("Errorhd Event: "+message.type+" - Message: "+message.data)}}return self};var EJSS_TOOLS=EJSS_TOOLS||{};EJSS_TOOLS.Mathematics={TWO_PI:2*3.1415926,TO_RADIANS:Math.PI/180,LOG10SCALE:1/Math.log(10),cosineAndSine:[],cosineAndSineForDegrees:function(degrees){degrees%=360;if(degrees<0)degrees+=360;var values=this.cosineAndSine[degrees];if(values===undefined){var radians=degrees*this.TO_RADIANS;values=[Math.cos(radians),Math.sin(radians)]}return values},radians:function(degrees){return degrees*Math.PI/180},degrees:function(radians){var angle=radians*180/Math.PI;var r=angle%360;angle=r*360<0?r+360:r;return angle},norm:function(v){var sum=0;for(var i=0;i<v.length;i++)sum+=v[i]*v[i];return Math.sqrt(sum)},crossProduct:function(v1,v2){return[v1[1]*v2[2]-v1[2]*v2[1],v1[2]*v2[0]-v1[0]*v2[2],v1[0]*v2[1]-v1[1]*v2[0]]},normalize:function(v){var r=EJSS_TOOLS.Mathematics.norm(v);if(r==0)return v;return[v[0]/r,v[1]/r,v[2]/r]},normalTo:function(v){if(v[0]==0){return[1,0,0]}else if(v[1]==0){return[0,1,0]}else if(v[2]==0){return[0,0,1]}else{var norm=EJSS_TOOLS.Mathematics.norm(v);return[-v[1]/norm,v[0]/norm,0]}},rotate:function(vc,v,radians){var cos=Math.cos(radians),sin=Math.sin(radians),nx=cos*(v[0]-vc[0])+sin*(v[1]-vc[1])+vc[0],ny=cos*(v[1]-vc[1])-sin*(v[0]-vc[0])+vc[1];return[nx,ny]}};sensors={iOS_accelerometer:{x:0,y:0,z:0},iOS_gyroscope:{x:0,y:0,z:0},setAccelerometer:function(accvalue){var value=JSON.parse(accvalue);var accelerometer=eval(value.result);if(window.innerWidth>window.innerHeight)sensors.iOS_accelerometer={x:accelerometer.y,y:-accelerometer.x,z:accelerometer.z};else sensors.iOS_accelerometer=accelerometer},setGyroscope:function(gyrvalue){var value=JSON.parse(gyrvalue);var gyroscope=eval(value.result);if(window.innerWidth>window.innerHeight)sensors.iOS_gyroscope={x:gyroscope.y,y:-gyroscope.x,z:gyroscope.z};else sensors.iOS_gyroscope=gyroscope},iOS_staccelerometer:{x:0,y:0,z:0},iOS_stgyroscope:{x:0,y:0,z:0},iOS_stmagnetometer:{x:0,y:0,z:0},iOS_sthumidity:0,iOS_sttempamb:0,iOS_sttempir:0,iOS_stpressure:0,setSensorTag:function(stvalue){var value=JSON.parse(stvalue);var results=eval(value.result);sensors.iOS_staccelerometer={x:results.accx,y:results.accy,z:results.accz};sensors.iOS_stgyroscope={x:results.gyrox,y:results.gyroy,z:results.gyroz};sensors.iOS_stmagnetometer={x:results.magx,y:results.magy,z:results.magz};sensors.iOS_sthumidity=results.hum;sensors.iOS_sttempamb=results.tamb;sensors.iOS_sttempir=results.tir;sensors.iOS_stpressure=results.press},calliOSFunction:function(functionName,args,successCallback,errorCallback){var url="ejss://";var callInfo={};callInfo.functionname=functionName;if(successCallback)callInfo.success=successCallback;if(errorCallback)callInfo.error=errorCallback;if(args)callInfo.args=args;url+=JSON.stringify(callInfo);window.location=url},isSupportedSensorTag:function(){var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);return is_iOSwebview},runSensorTag:function(accperiod,magperiod){var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_iOSwebview){var args=[];args[0]=accperiod;args[1]=magperiod;sensors.calliOSFunction("runSensorTag",args,"sensors.setSensorTag")}},stopSensorTag:function(){var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_iOSwebview){sensors.calliOSFunction("stopSensorTag")}},getSensorTagAccelerometer:function(){return sensors.iOS_staccelerometer},getSensorTagGyroscope:function(){return sensors.iOS_stgyroscope},getSensorTagMagnetometer:function(){return sensors.iOS_stmagnetometer},getSensorTagTempAmb:function(){return sensors.iOS_sttempamb},getSensorTagTempIR:function(){return sensors.iOS_sttempir},getSensorTagPressure:function(){return sensors.iOS_stpressure},getSensorTagHumidity:function(){return sensors.iOS_sthumidity},isAccelerometer:function(){var is_Androidwebview=window.android&&window.android.isAccelerometer();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);return is_Androidwebview||is_iOSwebview},runAccelerometer:function(){var is_Androidwebview=window.android&&window.android.isAccelerometer();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_Androidwebview){window.android.runAccelerometer()}else if(is_iOSwebview){sensors.calliOSFunction("runAccelerometer","","sensors.setAccelerometer")}},stopAccelerometer:function(){var is_Androidwebview=window.android&&window.android.isAccelerometer();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_Androidwebview){window.android.stopAccelerometer()}else if(is_iOSwebview){sensors.calliOSFunction("stopAccelerometer")}},getAccelerometer:function(){var is_Androidwebview=window.android&&window.android.isAccelerometer();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_Androidwebview){var value=eval(window.android.getAccelerometer());if(window.innerWidth>window.innerHeight)return value;else return{x:value.y,y:-value.x,z:value.z}}else if(is_iOSwebview){return sensors.iOS_accelerometer}return{x:0,y:0,z:0}},isGyroscope:function(){var is_Androidwebview=window.android&&window.android.isGyroscope();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);return is_Androidwebview||is_iOSwebview},runGyroscope:function(){var is_Androidwebview=window.android&&window.android.isGyroscope();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_Androidwebview){window.android.runGyroscope()}else if(is_iOSwebview){sensors.calliOSFunction("runGyroscope","","sensors.setGyroscope")}},stopGyroscope:function(){var is_Androidwebview=window.android&&window.android.isGyroscope();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_Androidwebview){window.android.stopGyroscope()}else if(is_iOSwebview){sensors.calliOSFunction("stopGyroscope")}},getGyroscope:function(){var is_Androidwebview=window.android&&window.android.isGyroscope();var is_iOSwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(is_Androidwebview){var value=eval(window.android.getGyroscope());if(window.innerWidth>window.innerHeight)return value;else return{x:value.y,y:-value.x,z:value.z}}else if(is_iOSwebview){return sensors.iOS_gyroscope}return{x:0,y:0,z:0}},isGravity:function(){var is_Androidwebview=window.android&&window.android.isGravity();return is_Androidwebview},runGravity:function(){var is_Androidwebview=window.android&&window.android.isGravity();if(is_Androidwebview){window.android.runGravity()}},stopGravity:function(){var is_Androidwebview=window.android&&window.android.isGravity();if(is_Androidwebview){window.android.stopGravity()}},getGravity:function(){var is_Androidwebview=window.android&&window.android.isGravity();if(is_Androidwebview){return window.android.getGravity()}return{x:0,y:0,z:0}},isLinearAcceleration:function(){var is_Androidwebview=window.android&&window.android.isLinearAcceleration();return is_Androidwebview},runLinearAcceleration:function(){var is_Androidwebview=window.android&&window.android.isLinearAcceleration();if(is_Androidwebview){window.android.runLinearAcceleration()}},stopLinearAcceleration:function(){var is_Androidwebview=window.android&&window.android.isLinearAcceleration();if(is_Androidwebview){window.android.stopLinearAcceleration()}},getLinearAcceleration:function(){var is_Androidwebview=window.android&&window.android.isLinearAcceleration();if(is_Androidwebview){return window.android.getLinearAcceleration()}return{x:0,y:0,z:0}},isRotationVector:function(){var is_Androidwebview=window.android&&window.android.isRotationVector();return is_Androidwebview},runRotationVector:function(){var is_Androidwebview=window.android&&window.android.isRotationVector();if(is_Androidwebview){window.android.runRotationVector()}},stopRotationVector:function(){var is_Androidwebview=window.android&&window.android.isRotationVector();if(is_Androidwebview){window.android.stopRotationVector()}},getRotationVector:function(){var is_Androidwebview=window.android&&window.android.isRotationVector();if(is_Androidwebview){return window.android.getRotationVector()}return{x:0,y:0,z:0}},isMagneticField:function(){var is_Androidwebview=window.android&&window.android.isMagneticField();return is_Androidwebview},runMagneticField:function(){var is_Androidwebview=window.android&&window.android.isMagneticField();if(is_Androidwebview){window.android.runMagneticField()}},stopMagneticField:function(){var is_Androidwebview=window.android&&window.android.isMagneticField();if(is_Androidwebview){window.android.stopMagneticField()}},getMagneticField:function(){var is_Androidwebview=window.android&&window.android.isMagneticField();if(is_Androidwebview){return window.android.getMagneticField()}return{x:0,y:0,z:0}},isAmbientTemperature:function(){var is_Androidwebview=window.android&&window.android.isAmbientTemperature();return is_Androidwebview},runAmbientTemperature:function(){var is_Androidwebview=window.android&&window.android.isAmbientTemperature();if(is_Androidwebview){window.android.runAmbientTemperature()}},stopAmbientTemperature:function(){var is_Androidwebview=window.android&&window.android.isAmbientTemperature();if(is_Androidwebview){window.android.stopAmbientTemperature()}},getAmbientTemperature:function(){var is_Androidwebview=window.android&&window.android.isAmbientTemperature();if(is_Androidwebview){return window.android.getAmbientTemperature()}return 0},isLight:function(){var is_Androidwebview=window.android&&window.android.isLight();return is_Androidwebview},runLight:function(){var is_Androidwebview=window.android&&window.android.isLight();if(is_Androidwebview){window.android.runLight()}},stopLight:function(){var is_Androidwebview=window.android&&window.android.isLight();if(is_Androidwebview){window.android.stopLight()}},getLight:function(){var is_Androidwebview=window.android&&window.android.isLight();if(is_Androidwebview){return window.android.getLight()}return 0},isPressure:function(){var is_Androidwebview=window.android&&window.android.isPressure();return is_Androidwebview},runPressure:function(){var is_Androidwebview=window.android&&window.android.isPressure();if(is_Androidwebview){window.android.runPressure()}},stopPressure:function(){var is_Androidwebview=window.android&&window.android.isPressure();if(is_Androidwebview){window.android.stopPressure()}},getPressure:function(){var is_Androidwebview=window.android&&window.android.isPressure();if(is_Androidwebview){return window.android.getPressure()}return 0},isHumidity:function(){var is_Androidwebview=window.android&&window.android.isHumidity();return is_Androidwebview},runHumidity:function(){var is_Androidwebview=window.android&&window.android.isHumidity();if(is_Androidwebview){window.android.runHumidity()}},stopHumidity:function(){var is_Androidwebview=window.android&&window.android.isHumidity();if(is_Androidwebview){window.android.stopHumidity()}},getHumidity:function(){var is_Androidwebview=window.android&&window.android.isHumidity();if(is_Androidwebview){return window.android.getHumidity()}return 0}};function _smartDevice(ws,data){this.websocket=ws;this.loadMetadata(data);return this}_smartDevice.prototype={metadata:"",apis:[],models:"",modelsTemplate:[],apisFn:[],loadMetadata:function(data){this.metadata=JSON.parse(data)},loadModels:function(){this.models=this.metadata.models},loadApis:function(){this.apis=this.metadata.apis},getModelTemplate:function(name){if(this.models.hasOwnProperty(name)){var model=JSON.parse(JSON.stringify(this.models[name]));var name=model.id;var properties=model.properties;return model}else{writeToScreen('<span style="color: red;">ERROR:</span> '+name+" is not a key -> "+"Model Not found");return null}},generateMethodCall:function(operationName){for(var i=0;i<this.apis.length;i++){var api=this.apis[i];var operations=api.operations;for(var j=0;j<operations.length;j++){var op=operations[j];if(op.nickname==operationName||operationName==undefined){var parameters=op.parameters[0];var usingModel=this.getModelTemplate(parameters.type);var params=usingModel.properties;var required;if(usingModel.hasOwnProperty("required"))required=usingModel.required;var jsonTosend="{";var paramToSend=[];var notFirstTime=false;for(var par in params){if(notFirstTime){jsonTosend+=","}else notFirstTime=true;jsonTosend+="'"+par+"' : "+par;paramToSend.push(par)}jsonTosend+="}";var body="{";if(required!=undefined){for(var req in required){body+="if( "+required[req]+"== undefined)  { \n"+"console.log('Required parameter, "+required[req]+" : must be an input'); \n"+"return null;} \n"}}body+="this.websocket.send(JSON.stringify("+jsonTosend+"))";body+="}";this[op.nickname]=new Function(paramToSend,body)}}}return true},generateModelFilling:function(modelName){for(var mod in this.models){if(mod==modelName||modelName==undefined){var usingModel=this.models[mod];var params=usingModel.properties;var required;if(usingModel.hasOwnProperty("required"))required=usingModel.required;var paramToSend=[];var body="";body+="{\n";body+="\t var json2send=this.getModelTemplate('"+mod+"').properties;\n";for(var par in params){paramToSend.push(par);body+="\t if( "+par+" != undefined)  { \n";body+="\t\t json2send['"+par+"']="+par+";  \n";body+="\t }else{\n";body+="\t\t delete json2send."+par+";\n";body+="\t }\n"}if(required!=undefined){for(var req in required){body+="\t if( "+req+"== undefined)  { \n"+"\t\t console.log('Required parameter, "+req+" : must be an input'); \n"+"\t\t return null; \n";body+="\t }\n"}}body+="\t return json2send;";body+="}";this["fill"+mod]=new Function(paramToSend,body)}}return true},bindFunctions:function(){},searchMethod:function(methodName){for(var i=0;i<this.apis.length;i++){var api=this.apis[i];var operations=api.operations;for(var j=0;j<operations.length;j++){var op=operations[j];if(op.nickname==methodName){return op}}}},isValidMessage:function(strMsg,type){var jsonMsg=strMsg;if(jsonMsg.hasOwnProperty("method")){var metadataMethod=this.searchMethod(jsonMsg.method)}else if(type!=undefined){var metadataMethod=this.searchMethod(type)}else{return false}var responseModel=this.getModelTemplate(metadataMethod.type);var validMsg=false;var req="";for(var i=0;i<responseModel.required.length;i++){req=responseModel.required[i];if(!jsonMsg.hasOwnProperty(req)){validMsg=false;console.log("Error processinMessage : "+strMsg+" -> Property : "+req+" is a required field");return validMsg}else{validMsg=true}}return validMsg},extract:function(names,strMsg){if(this.isValidMessage(strMsg)){var dataExtracted={};for(var i=0;i<names.length;i++){name=names[i];dataExtracted[name]=strMsg[name]}return dataExtracted}return undefined}};function wrapper(ws,data){if(ws.hasOwnProperty("ip")){wsUri="ws://"+ws.ip+":"+ws.port+"/";this.websocket=new WebSocket(wsUri)}else{this.websocket=ws}this.smartdevice=new _smartDevice(this.websocket,data);this.smartdevice.loadApis();this.smartdevice.loadModels();this.smartdevice.generateMethodCall();this.smartdevice.generateModelFilling()}wrapper.prototype={methods:{connect:"connect",disconnect:"disconnect",get:"get",set:"set",callAction:"callAction",extract:"extract",eval:"eval",open:"open",step:"step"},post:function(method,params){if(method==undefined&&!params.hasOwnProperty("method"))return;else if(method!=undefined&&!params.hasOwnProperty("method"))params["method"]=method;websocket.send(params)},sync:function(callback){if(callback!=undefined){callback(response)}},connect:function(callback){this.smartdevice=new _smartDevice(fullData);this.smartdevice.loadApis();this.smartdevice.loadModels();this.smartdevice.generateMethodCall()},disconnect:function(callback){},get:function(vars,eachStep,callback){if(eachStep===undefined||eachStep==false)this.smartdevice.getSensorData("getSensorData",vars);else{this.smartdevice.getSensorData("getSensorData",vars,[this.smartdevice.fillConfigurationItem("updateFrequency",2)])}},set:function(vars,values,auth,callback){if(vars.length==1)this.smartdevice.sendActuatorData(auth,"sendActuatorData","modelVars",[vars],[values]);else this.smartdevice.sendActuatorData(auth,"sendActuatorData","modelVars",vars,values)},callAction:function(nickname,params,callback){this.smartdevice.callAction("","callAction","modelMethods",nickname,params)},extract:function(strMsg,callback){var jsonMsg=JSON.parse(strMsg);var vars={};if(jsonMsg.hasOwnProperty("method")){var method=jsonMsg.method;var extracted={};if(method=="getSensorData"){vars=["sensorId","responseData"]}else if(method=="sendActuatorData"){vars=["lastMeasured","accessrole","payload","observerMode"]}else if(method=="getSensorMetadata"){vars=["sensors"]}else if(method=="getActuatorMetadata"){vars=["actuators"]}else if(method=="getActionsMetadata"){vars=["sensors"]}else if(method=="callAction"){vars=["method","callerName","nickName","params"]}else if(method=="actionDataResponse"){vars=["method","nickName"]}else{console.log("The method : "+jsonMsg.method+" is not handled in this wrapper. \n"+"Will be ignored.");return undefined}}extracted=this.smartdevice.extract(vars,jsonMsg);return this.toEjssReadable(method,extracted)},eval:function(code,callback){},open:function(model,callback){},step:function(vars,callback){},toEjssReadable:function(method,dataExtracted){if(method=="getSensorData"){var nameValue={};var valueNames=dataExtracted.responseData.valueNames;var dataValues=dataExtracted.responseData.data;for(var i=0;i<valueNames.length;i++){nameValue[valueNames[i]]=dataValues[i]}return nameValue}else if(method=="sendActuatorData"){return true}else if(method=="getSensorMetadata"){return dataExtracted}else if(method=="getActuatorMetadata"){return dataExtracted}else if(method=="getActionsMetadata"){return dataExtracted}else if(method=="callAction"){return dataExtracted}else if(method=="actionDataResponse"){return dataExtracted}else{console.log("The method : "+method+" is nor handled in this wrapper. \n"+"Will be ignored.");return undefined}}};var EJSS_CORE=EJSS_CORE||{};EJSS_CORE.createView=function(container){var self={};var mTopLevelElement;var mReporter;var mVariablesList={};var mActionsList={};var mUnnamedUpdateList=[];var mUpdateList=[];var mResetableList=[];var mInitializableList=[];var mRenderList=[];var mTouchList=[];var mCollectersList=[];var mInteractionList=[];var mEnableEPubList=[];var mAdjustPositionList=[];var mFontResizeListenerList=[];var mResizeListenerList=[];var mOrientationChangeListenerList=[];var mReadingInteractions=false;var mReportNeeded=true;var mInitValueList=[];var mResourcePath;var mLibraryPath;var mRegInteractions=[];var mIsRegInteractions=false;var mWSRegInteractions;var mDescriptionPages=[];var mOnBlurList=[];var mOnFocusList=[];var mDummyContainer;self._getTopLevelElement=function(){return mTopLevelElement};self._1=function(){mTopLevelElement.innerHTML="";mVariablesList={};mActionsList={};mUnnamedUpdateList=[];mUpdateList=[];mInitValueList=[];mResetableList=[];mInitializableList=[];mRenderList=[];mTouchList=[];mCollectersList=[];mEnableEPubList=[];mAdjustPositionList=[];mFontResizeListenerList=[];mResizeListenerList=[];mOrientationChangeListenerList=[];mInteractionList=[];mReadingInteractions=false;mReportNeeded=true};self._2=function(path){mResourcePath=path};function startsWith(fullStr,str){return fullStr.match("^"+str)==str}self._3=function(filename,forIbooks){if(filename==null||filename.length<=0)return filename;if(startsWith(filename,"local:"))return filename;if(startsWith(filename,"data:"))return filename;if(startsWith(filename,"http:")||startsWith(filename,"https:")||startsWith(filename,"ws:"))return filename;if(typeof __base64Images!=="undefined"){var base64=__base64Images[filename];if(base64)return base64}if(mLibraryPath&&!startsWith(filename,mLibraryPath)&&filename.charAt(0)=="/"){filename=mLibraryPath+"images"+filename}else if(mResourcePath&&!startsWith(filename,mResourcePath)&&filename.charAt(0)!="/"){filename=mResourcePath+filename}if(forIbooks&&startsWith(window.location.protocol,"ibooks")){var path=window.location.pathname;path=path.substring(0,path.lastIndexOf("/"));if(startsWith(filename,"./"))filename=filename.substring(2);filename=window.location.protocol+"://"+window.location.host+"/"+path+"/"+filename}return filename};self._4=function(path){mLibraryPath=path};self._showDocument=function(url){window.open(self._3(url))};self._addDescriptionPage=function(name,url){mDescriptionPages[name]=url};self._openDescriptionPage=function(name){var url=mDescriptionPages[name];if(url)window.open(self._3(url));else console.log("Desription page not found: "+name)};self._5=function(variable,initialValue){mVariablesList[variable]={getter:null,setter:null,listeners:[],collectors:[],value:initialValue}};self._5s=function(variables){for(var i=0;i<variables.length;i++)self._5(variables[i])};self._7=function(action){mActionsList[action]={action:null}};self._7s=function(actions){for(var i=0;i<actions.length;i++)self._7(actions[i])};self._9=function(constructor,name,parent,args){var controlElement=EJSS_CORE.promoteToControlElement(constructor(name,args),self,name);if(controlElement.render)mRenderList.push(controlElement);if(controlElement.touch)mTouchList.push(controlElement);if(controlElement.dataCollected)mCollectersList.push(controlElement);if(controlElement.reset)mResetableList.push(controlElement);if(controlElement.initialize)mInitializableList.push(controlElement);if(controlElement.enableEPub)mEnableEPubList.push(controlElement);if(controlElement.adjustPosition)mAdjustPositionList.push(controlElement);if(name)self[name]=controlElement;if(parent)controlElement.setProperty("Parent",parent);return controlElement};self._10=function(variable){var variableDefinition=mVariablesList[variable];if(variableDefinition!==undefined)return variableDefinition.value;return undefined};self._11=function(){self._reset();self._15();self._initialize();self._update();self._render()};self._setRootProperty=function(model,property,value){switch(property){case"RunAlways":model.setRunAlways(value);break;case"OnBlur":self._addOnBlurAction(value);break;case"OnFocus":self._addOnFocusAction(value);break;case"InnerHTML":self._setInnerHTML(value);break;case"OnResize":self._addResizeListener(value);break;case"OnOrientationChange":self._addOrientationChangeListener(value);break;default:console.log("WARNING: View property not registered : "+property);break}};self._12=function(reporter){mReporter=reporter};self._13=function(variable,getter,setter,initialValue){var variableDefinition=mVariablesList[variable];if(!variableDefinition)console.log("WARNING: view._setAccessors() - Variable not found : "+variable);else{variableDefinition.getter=getter;variableDefinition.setter=setter;variableDefinition.value=initialValue;var index=mUpdateList.indexOf(variableDefinition);if(variableDefinition.getter){if(variableDefinition.listeners.length>0&&index<0)mUpdateList.push(variableDefinition)}else{if(index>=0)mUpdateList.splice(index,1)}index=mInitValueList.indexOf(variableDefinition);if(variableDefinition.value){if(variableDefinition.listeners.length>0&&index<0)mInitValueList.push(variableDefinition)}else{if(index>=0)mInitValueList.splice(index,1)}}return variableDefinition};self._setAction=function(action,whatToDo){var actionDefinition=mActionsList[action];if(!actionDefinition)console.log("WARNING: view._setAction() - Action not found : "+action);else actionDefinition.action=whatToDo;return actionDefinition};self._14=function(needed){mReportNeeded=needed};self._reset=function(){for(var i=0,n=mResetableList.length;i<n;i++)mResetableList[i].reset()};self._15=function(){for(var i=0,n=mInitValueList.length;i<n;i++){var variableDefinition=mInitValueList[i];var value=variableDefinition.value;if(value){var listeners=variableDefinition.listeners;for(var j=0,m=listeners.length;j<m;j++)listeners[j](value)}}};self._initialize=function(){for(var i=0,n=mInitializableList.length;i<n;i++)mInitializableList[i].initialize()};self._update=function(){var i,n;for(i=0,n=mUpdateList.length;i<n;i++){var variableDefinition=mUpdateList[i];var listeners=variableDefinition.listeners;var value=variableDefinition.getter();for(var j=0,m=listeners.length;j<m;j++)listeners[j](value)}for(i=0,n=mUnnamedUpdateList.length;i<n;i++){var unnamedDefinition=mUnnamedUpdateList[i];unnamedDefinition.propertySetter(unnamedDefinition.getter())}};self._collectData=function(){var i,n;for(i=0,n=mUpdateList.length;i<n;i++){var variableDefinition=mUpdateList[i];var listeners=variableDefinition.collectors;var value=variableDefinition.getter();for(var j=0,m=listeners.length;j<m;j++)listeners[j](value)}for(i=0,n=mUnnamedUpdateList.length;i<n;i++){var unnamedDefinition=mUnnamedUpdateList[i];if(unnamedDefinition.isCollector)unnamedDefinition.propertySetter(unnamedDefinition.getter())}for(i=0,n=mCollectersList.length;i<n;i++)mCollectersList[i].dataCollected()};self._render=function(){for(var i=0,n=mRenderList.length;i<n;i++)mRenderList[i].render()};self._touch=function(){for(var i=0,n=mTouchList.length;i<n;i++)mTouchList[i].touch()};self._enableEPub=function(){if(typeof _isEPub!=="undefined"&&_isEPub)for(var i=0,n=mEnableEPubList.length;i<n;i++)mEnableEPubList[i].enableEPub()};self._addFontResizeListener=function(listener){mFontResizeListenerList.push(listener)};self._fontResized=function(iBase,iSize,iDelta){for(var i=0,n=mAdjustPositionList.length;i<n;i++)mAdjustPositionList[i].adjustPosition();if(iBase){
for(var j=0,m=mFontResizeListenerList.length;j<m;j++)mFontResizeListenerList[j](iBase,iSize,iDelta)}};self._addResizeListener=function(listener){mResizeListenerList.push(listener)};self._resized=function(){var data={width:window.innerWidth,height:window.innerHeight};for(var i=0,n=mAdjustPositionList.length;i<n;i++)mAdjustPositionList[i].adjustPosition();for(var j=0,m=mResizeListenerList.length;j<m;j++)mResizeListenerList[j](data)};self._addOrientationChangeListener=function(listener){mOrientationChangeListenerList.push(listener)};self._orientationChanged=function(width,height){var data={width:window.innerWidth,height:window.innerHeight};for(var i=0,n=mAdjustPositionList.length;i<n;i++)mAdjustPositionList[i].adjustPosition();for(var j=0,m=mOrientationChangeListenerList.length;j<m;j++)mOrientationChangeListenerList[j](data)};self._16=function(runCount,runTime,isPlaying){var n=mInteractionList.length;if(n<=0)return false;mReadingInteractions=true;for(var i=0;i<n;i++){var interaction=mInteractionList[i];if(self.isRegInteractions()){var inter=interaction["interaction"];inter["data"]=interaction.data;inter["runCount"]=runCount;inter["runTime"]=runTime;inter["isPlaying"]=isPlaying;inter["timeStamp"]=Date.now();self.pushRegInteractions(inter)}if(interaction.data&&interaction.data.info)interaction.what(interaction.data.info,interaction.data);else interaction.what(interaction.data)}mInteractionList=[];mReadingInteractions=false;return true};self._17=function(){return mInteractionList.length};self._addOnBlurAction=function(listener){mOnBlurList.push(listener)};self._onBlur=function(){for(var j=0,m=mOnBlurList.length;j<m;j++)mOnBlurList[j]()};self._addOnFocusAction=function(listener){mOnFocusList.push(listener)};self._onFocus=function(){for(var j=0,m=mOnFocusList.length;j<m;j++)mOnFocusList[j]()};self._setInnerHTML=function(htmlCode){if(typeof mDummyContainer==="undefined"){mDummyContainer=document.createElement("div");document.body.appendChild(mDummyContainer)}mDummyContainer.innerHTML=htmlCode};self._18=function(){if(mReporter&&mReportNeeded)mReporter()};self._19=function(variable,propertySetter,isCollector){var variableDefinition=mVariablesList[variable];if(!variableDefinition)console.log("WARNING: view._19() - Variable not found : "+variable);else{if(variableDefinition.listeners.indexOf(propertySetter)<0){variableDefinition.listeners.push(propertySetter);if(isCollector)variableDefinition.collectors.push(propertySetter)}if(variableDefinition.getter){if(mUpdateList.indexOf(variableDefinition)<0)mUpdateList.push(variableDefinition)}if(variableDefinition.value){if(mInitValueList.indexOf(variableDefinition)<0)mInitValueList.push(variableDefinition)}}return variableDefinition};self._20=function(getter,propertySetter,isCollector){var found=false;for(var i=0,n=mUnnamedUpdateList.length;i<n;i++){var unnamedDefinition=mUnnamedUpdateList[i];if(unnamedDefinition.propertySetter===propertySetter){unnamedDefinition.getter=getter;found=true;break}}if(!found){mUnnamedUpdateList.push({getter:getter,propertySetter:propertySetter,isCollector:isCollector})}return found};self._21=function(action){var actionDefinition=mActionsList[action];if(!actionDefinition)console.log("WARNING: view._21() - Action not found : "+action);return actionDefinition};self._22=function(action,data,interaction){if(!mReporter){action(data);return}if(!mReadingInteractions&&mReportNeeded)mInteractionList.push({what:action,data:data,interaction:interaction})};self._format=function(value,format){var index=format.indexOf(".");var digits=0;if(index>=0)digits=Number(format.length-index-1);return parseFloat(value).toFixed(digits)};self.print=function(str){var ta=document.getElementsByTagName("textarea");if(ta.length)ta[0].innerHTML=str;else console.log(str)};self._setVisible=function(visibility){if(visibility)mTopLevelElement.style.display="inherit";else mTopLevelElement.style.display="none"};self._switchVisibility=function(){self._setVisible(mTopLevelElement.style.display=="none")};self.serialize=function(){var encoded={};for(key in self){if(self[key].serialize){encoded[key]=self[key].serialize()}}return encoded};self.unserialize=function(decoded){for(key in decoded){if(self[key]&&self[key].unserialize){self[key].unserialize(decoded[key])}else{console.log("Impossible unserialize: "+key)}}};self.registerInteractions=function(websocket){mRegInteractions=[];mWSRegInteractions=websocket;mIsRegInteractions=true};self.unregisterInteractions=function(){mIsRegInteractions=false};self.getRegInteractions=function(empty){if(empty)mRegInteractions=[];return mRegInteractions};self.isRegInteractions=function(){return mIsRegInteractions};self.pushRegInteractions=function(action){if(typeof mWSRegInteractions!=="undefined")mWSRegInteractions.send(JSON.stringify(action));else mRegInteractions.push(action)};if(typeof container=="string"){mTopLevelElement=self[container]=document.getElementById(container)}else mTopLevelElement=container;return self};EJSS_CORE.promoteToControlElement=function(mElement,mView,mName){mName=mName||"unnamed";var mDataObject=null;var mProperties={};var mActions={};mElement.getView=function(){return mView};mElement._0=function(name){mName=name};mElement.getName=function(){return mName};mElement.getResourcePath=function(filename){return mView._3(filename)};mElement.setDataObject=function(data){mDataObject=data};mElement.getDataObject=function(data){return mDataObject};mElement.registerProperty=function(property,setter,getter){mProperties[property]={setter:setter,getter:getter,variable:null,variableSetter:null};return mElement};mElement.registerAction=function(action,helperFunction,processFunction,actionFunction){mActions[action]={action:null,helper:helperFunction,process:processFunction};if(actionFunction)mElement.setAction(action,actionFunction);return mElement};mElement.setProperty=function(property,value){var actionDefinition=mActions[property];if(actionDefinition){return mElement.setAction(property,value)}var propertyDefinition=mProperties[property];if(!propertyDefinition){console.log("WARNING: ControlElement setProperty() - Property not registered : "+property+" for element : "+mElement.getName())}else propertyDefinition.setter(value);return mElement};mElement.setProperties=function(properties){for(var key in properties)mElement.setProperty(key,properties[key]);return mElement};mElement.linkProperty=function(property,variableOrGetter,setter){var propertyDefinition=mProperties[property];if(!propertyDefinition){console.log("WARNING: ControlElement linkProperty() - Element property not registered : "+property+" for element : "+mElement.getName());return mElement}if(typeof variableOrGetter==="string"){var viewVariable=mView._19(variableOrGetter,propertyDefinition.setter,mElement.dataCollected);if(!viewVariable){console.log("WARNING: ControlElement linkProperty() - element : "+mElement.getName()+" - property :"+property+" - View variable not registered : "+variableOrGetter);return mElement}if(setter==="InputOnly"){}else propertyDefinition.variable=viewVariable;propertyDefinition.variableSetter=null}else{mView._20(variableOrGetter,propertyDefinition.setter,mElement.dataCollected);propertyDefinition.variableSetter=setter;propertyDefinition.variable=null}return mElement};mElement.linkProperties=function(properties){for(var key in properties)mElement.linkProperty(key,properties[key]);return mElement};mElement.setAction=function(name,action){var actionDefinition=mActions[name];if(!actionDefinition){console.log("WARNING: ControlElement setAction() - action not registered : "+name+" for element : "+mElement.getName);return mElement}if(typeof action==="string"){var viewAction=mView._21(action);if(!viewAction){console.log("WARNING: ControlElement setAction() - element : "+mElement.getName()+" - View action not registered : "+action);return mElement}actionDefinition.action=viewAction}else{actionDefinition.action={action:action}}return mElement};mElement.setActions=function(actions){for(var key in actions)mElement.setAction(key,actions[key]);return mElement};mElement.invokeAction=function(name){var ia={};if(mView.isRegInteractions())ia={action:name,element:mElement.getName(),timeStamp:Date.now()};var actionDefinition=mActions[name];if(actionDefinition){if(actionDefinition.process){mView._22(actionDefinition.process,null,ia)}if(actionDefinition.action){var data=actionDefinition.helper?actionDefinition.helper():null;mView._22(actionDefinition.action.action,data,ia)}}return mElement};mElement.invokeImmediateAction=function(name){var actionDefinition=mActions[name];if(actionDefinition){if(actionDefinition.process){actionDefinition.process(null)}if(actionDefinition.action){var data=actionDefinition.helper?actionDefinition.helper():null;actionDefinition.action.action(data)}}return mElement};mElement.propertiesChanged=function(){for(var i=0,n=arguments.length;i<n;i++)mElement.propertyChanged(arguments[i]);return mElement};mElement.propertyChanged=function(property,data){var ia={};if(mView.isRegInteractions())ia={property:property,element:mElement.getName(),timeStamp:Date.now()};var propertyDefinition=mProperties[property];if(propertyDefinition){var setter=propertyDefinition.variableSetter;if(!setter){if(propertyDefinition.variable)setter=propertyDefinition.variable.setter}if(!setter){if(propertyDefinition.setter)setter=propertyDefinition.setter}if(setter){var value=typeof data!=="undefined"?data:propertyDefinition.getter();mView._22(setter,value,ia)}}return mElement};mElement.immediatePropertyChanged=function(property,data){var ia={};var propertyDefinition=mProperties[property];if(propertyDefinition){var setter=propertyDefinition.variableSetter;if(!setter){if(propertyDefinition.variable)setter=propertyDefinition.variable.setter}if(!setter){if(propertyDefinition.setter)setter=propertyDefinition.setter}if(setter){var value=typeof data!=="undefined"?data:propertyDefinition.getter();setter(value)}}return mElement};mElement.reportInteractions=function(actions,properties){var i,n;if(actions)for(i=0,n=actions.length;i<n;i++)mElement.invokeAction(actions[i]);if(properties)for(i=0,n=properties.length;i<n;i++)mElement.propertiesChanged(properties[i]);if(mView._17()>0)mView._18();return mElement};mElement.getProperty=function(property,value){var propertyDefinition=mProperties[property];if(propertyDefinition&&propertyDefinition.getter)return propertyDefinition.getter();return undefined};mElement.getProperties=function(){return mProperties};mElement.registerProperty("name",mElement._0,mElement.getName);if(mElement.registerProperties)mElement.registerProperties(mElement);return mElement};

/* _inputParameters: an object with different values for the model parameters */
function PICUP_marsmission_EJSStemplate(_topFrame,_libraryPath,_codebasePath, _inputParameters) {
  var _model = EJSS_CORE.createAnimationLMS();
  var _view;
  var _isPlaying = false;
  var _isPaused = true;
  var _isMobile = (navigator===undefined) ? false : navigator.userAgent.match(/iPhone|iPad|iPod|Android|BlackBerry|Opera Mini|IEMobile/i);

var _stringProperties = {};
  var _tools = {
    showInputDialog : EJSS_INTERFACE.BoxPanel.showInputDialog,
    showOkDialog : EJSS_INTERFACE.BoxPanel.showOkDialog,
    showOkCancelDialog : EJSS_INTERFACE.BoxPanel.showOkCancelDialog,
    downloadText: EJSS_TOOLS.File.downloadText,
    uploadText: function(action) { EJSS_TOOLS.File.uploadText(_model,action); } 
  };


  function _play()  { _isPaused = false; _isPlaying = true;  _model.play();  }
  function _pause() { _isPaused = true;  _isPlaying = false; _model.pause(); }
  function _step()  { _pause();  _model.step(); }
  function _reset() { _model.reset();  _isPaused = _model.isPaused(); _isPlaying = _model.isPlaying(); }
  _model._play  = _play;
  _model._pause = _pause;
  _model._step  = _step;
  _model._reset = _reset;
  function _update() { _model.update(); }
  function _initialize() { _model.initialize(); }
  function _setFPS(_fps) { _model.setFPS(_fps); }
  function _setDelay(_delay) { _model.setDelay(_delay); }
  function _setStepsPerDisplay(_spd) { _model.setStepsPerDisplay(_spd); }
  function _setUpdateView(_updateView) { _model.setUpdateView(_updateView); }
  function _setAutoplay(_auto) { _model.setAutoplay(_auto); }
  function _println(_message) { console.log(_message); }

  function _breakAfterThisPage() { _model.setShouldBreak(true); }

  function _resetSolvers() { if (_model.resetSolvers) _model.resetSolvers(); }

  function _saveText(name,type,content) { if (_model.saveText) _model.saveText(name,type,content); }

  function _saveState(name) { if (_model.saveState) _model.saveState(name); }

  function _saveImage(name,panelname) { if (_model.saveImage) _model.saveImage(name,panelname); }

  function _readState(url,type) { if (_model.readState) _model.readState(url,type); }

  function _readText(url,type,varname) { if (_model.readText) _model.readText(url,type,varname); }

  function _getStringProperty(propertyName) {
    var _value = _stringProperties[propertyName];
    if (_value===undefined) return propertyName;
    else return _value;
  }
  var __pagesEnabled = [];
  function _setPageEnabled(pageName,enabled) { __pagesEnabled[pageName] = enabled; }

  var marspos; // EjsS Model.Variables.NasaData.marspos
  var marsvel; // EjsS Model.Variables.NasaData.marsvel
  var earthpos; // EjsS Model.Variables.NasaData.earthpos
  var earthvel; // EjsS Model.Variables.NasaData.earthvel
  var pearth; // EjsS Model.Variables.NasaData.pearth
  var pmars; // EjsS Model.Variables.NasaData.pmars
  var sunpos; // EjsS Model.Variables.NasaData.sunpos
  var range; // EjsS Model.Variables.NasaData.range
  var suntoearth; // EjsS Model.Variables.NasaData.suntoearth
  var suntomars; // EjsS Model.Variables.NasaData.suntomars
  var AU; // EjsS Model.Variables.NasaData.AU
  var G; // EjsS Model.Variables.NasaData.G

  var marsy; // EjsS Model.Variables.PlanetDataforsliderstowork.marsy
  var marsx; // EjsS Model.Variables.PlanetDataforsliderstowork.marsx
  var marsvelx; // EjsS Model.Variables.PlanetDataforsliderstowork.marsvelx
  var marsvely; // EjsS Model.Variables.PlanetDataforsliderstowork.marsvely
  var earthx; // EjsS Model.Variables.PlanetDataforsliderstowork.earthx
  var earthy; // EjsS Model.Variables.PlanetDataforsliderstowork.earthy
  var earthvelx; // EjsS Model.Variables.PlanetDataforsliderstowork.earthvelx
  var earthvely; // EjsS Model.Variables.PlanetDataforsliderstowork.earthvely

  var Dsun; // EjsS Model.Variables.PlanetData2.Dsun
  var Dearth; // EjsS Model.Variables.PlanetData2.Dearth
  var Dmars; // EjsS Model.Variables.PlanetData2.Dmars
  var Msun; // EjsS Model.Variables.PlanetData2.Msun
  var Mearth; // EjsS Model.Variables.PlanetData2.Mearth
  var Mmars; // EjsS Model.Variables.PlanetData2.Mmars
  var day; // EjsS Model.Variables.PlanetData2.day
  var dt; // EjsS Model.Variables.PlanetData2.dt
  var t; // EjsS Model.Variables.PlanetData2.t
  var tstr; // EjsS Model.Variables.PlanetData2.tstr
  var cproduct; // EjsS Model.Variables.PlanetData2.cproduct
  var launchstr; // EjsS Model.Variables.PlanetData2.launchstr

  var dt2; // EjsS Model.Variables.ComboBox.dt2
  var box; // EjsS Model.Variables.ComboBox.box
  var color; // EjsS Model.Variables.ComboBox.color
  var editable; // EjsS Model.Variables.ComboBox.editable

  var font; // EjsS Model.Variables.Display.font
  var fontb; // EjsS Model.Variables.Display.fontb

  var exercise1; // EjsS Model.Variables.exercise1.exercise1

  var launchday; // EjsS Model.Variables.exercise2,3launch.launchday
  var rinitial; // EjsS Model.Variables.exercise2,3launch.rinitial
  var marsrocketdist; // EjsS Model.Variables.exercise2,3launch.marsrocketdist
  var vinitial; // EjsS Model.Variables.exercise2,3launch.vinitial
  var normv; // EjsS Model.Variables.exercise2,3launch.normv
  var dvxslider; // EjsS Model.Variables.exercise2,3launch.dvxslider
  var dvyslider; // EjsS Model.Variables.exercise2,3launch.dvyslider
  var dv; // EjsS Model.Variables.exercise2,3launch.dv
  var v; // EjsS Model.Variables.exercise2,3launch.v
  var Mrocket; // EjsS Model.Variables.exercise2,3launch.Mrocket
  var rocketx; // EjsS Model.Variables.exercise2,3launch.rocketx
  var rockety; // EjsS Model.Variables.exercise2,3launch.rockety
  var scale1; // EjsS Model.Variables.exercise2,3launch.scale1
  var ArrowSizex; // EjsS Model.Variables.exercise2,3launch.ArrowSizex
  var ArrowSizey; // EjsS Model.Variables.exercise2,3launch.ArrowSizey
  var vrocket; // EjsS Model.Variables.exercise2,3launch.vrocket
  var procket; // EjsS Model.Variables.exercise2,3launch.procket
  var rocketLaunched; // EjsS Model.Variables.exercise2,3launch.rocketLaunched
  var justNowLaunched; // EjsS Model.Variables.exercise2,3launch.justNowLaunched
  var rocketarrowvisible; // EjsS Model.Variables.exercise2,3launch.rocketarrowvisible
  var dx; // EjsS Model.Variables.exercise2,3launch.dx
  var dy; // EjsS Model.Variables.exercise2,3launch.dy

  _model.getOdes = function() { return []; };

  _model.removeEvents = function(){
  };

  function _serialize() { return _model.serialize(); }

  _model._userSerialize = function() {
    return {
      marspos : marspos,
      marsvel : marsvel,
      earthpos : earthpos,
      earthvel : earthvel,
      pearth : pearth,
      pmars : pmars,
      sunpos : sunpos,
      range : range,
      suntoearth : suntoearth,
      suntomars : suntomars,
      AU : AU,
      G : G,
      marsy : marsy,
      marsx : marsx,
      marsvelx : marsvelx,
      marsvely : marsvely,
      earthx : earthx,
      earthy : earthy,
      earthvelx : earthvelx,
      earthvely : earthvely,
      Dsun : Dsun,
      Dearth : Dearth,
      Dmars : Dmars,
      Msun : Msun,
      Mearth : Mearth,
      Mmars : Mmars,
      day : day,
      dt : dt,
      t : t,
      tstr : tstr,
      cproduct : cproduct,
      launchstr : launchstr,
      dt2 : dt2,
      box : box,
      color : color,
      editable : editable,
      font : font,
      fontb : fontb,
      exercise1 : exercise1,
      launchday : launchday,
      rinitial : rinitial,
      marsrocketdist : marsrocketdist,
      vinitial : vinitial,
      normv : normv,
      dvxslider : dvxslider,
      dvyslider : dvyslider,
      dv : dv,
      v : v,
      Mrocket : Mrocket,
      rocketx : rocketx,
      rockety : rockety,
      scale1 : scale1,
      ArrowSizex : ArrowSizex,
      ArrowSizey : ArrowSizey,
      vrocket : vrocket,
      procket : procket,
      rocketLaunched : rocketLaunched,
      justNowLaunched : justNowLaunched,
      rocketarrowvisible : rocketarrowvisible,
      dx : dx,
      dy : dy
    };
  };

  function _serializePublic() { return _model.serializePublic(); }

  _model._userSerializePublic = function() {
    return {
      marspos : marspos,
      marsvel : marsvel,
      earthpos : earthpos,
      earthvel : earthvel,
      pearth : pearth,
      pmars : pmars,
      sunpos : sunpos,
      range : range,
      suntoearth : suntoearth,
      suntomars : suntomars,
      AU : AU,
      G : G,
      marsy : marsy,
      marsx : marsx,
      marsvelx : marsvelx,
      marsvely : marsvely,
      earthx : earthx,
      earthy : earthy,
      earthvelx : earthvelx,
      earthvely : earthvely,
      Dsun : Dsun,
      Dearth : Dearth,
      Dmars : Dmars,
      Msun : Msun,
      Mearth : Mearth,
      Mmars : Mmars,
      day : day,
      dt : dt,
      t : t,
      tstr : tstr,
      cproduct : cproduct,
      launchstr : launchstr,
      dt2 : dt2,
      box : box,
      color : color,
      editable : editable,
      font : font,
      fontb : fontb,
      exercise1 : exercise1,
      launchday : launchday,
      rinitial : rinitial,
      marsrocketdist : marsrocketdist,
      vinitial : vinitial,
      normv : normv,
      dvxslider : dvxslider,
      dvyslider : dvyslider,
      dv : dv,
      v : v,
      Mrocket : Mrocket,
      rocketx : rocketx,
      rockety : rockety,
      scale1 : scale1,
      ArrowSizex : ArrowSizex,
      ArrowSizey : ArrowSizey,
      vrocket : vrocket,
      procket : procket,
      rocketLaunched : rocketLaunched,
      justNowLaunched : justNowLaunched,
      rocketarrowvisible : rocketarrowvisible,
      dx : dx,
      dy : dy
    };
  };

  _model._readParameters = function(json) {
    if(typeof json.marspos != "undefined") marspos = json.marspos;
    if(typeof json.marsvel != "undefined") marsvel = json.marsvel;
    if(typeof json.earthpos != "undefined") earthpos = json.earthpos;
    if(typeof json.earthvel != "undefined") earthvel = json.earthvel;
    if(typeof json.pearth != "undefined") pearth = json.pearth;
    if(typeof json.pmars != "undefined") pmars = json.pmars;
    if(typeof json.sunpos != "undefined") sunpos = json.sunpos;
    if(typeof json.range != "undefined") range = json.range;
    if(typeof json.suntoearth != "undefined") suntoearth = json.suntoearth;
    if(typeof json.suntomars != "undefined") suntomars = json.suntomars;
    if(typeof json.AU != "undefined") AU = json.AU;
    if(typeof json.G != "undefined") G = json.G;
    if(typeof json.marsy != "undefined") marsy = json.marsy;
    if(typeof json.marsx != "undefined") marsx = json.marsx;
    if(typeof json.marsvelx != "undefined") marsvelx = json.marsvelx;
    if(typeof json.marsvely != "undefined") marsvely = json.marsvely;
    if(typeof json.earthx != "undefined") earthx = json.earthx;
    if(typeof json.earthy != "undefined") earthy = json.earthy;
    if(typeof json.earthvelx != "undefined") earthvelx = json.earthvelx;
    if(typeof json.earthvely != "undefined") earthvely = json.earthvely;
    if(typeof json.Dsun != "undefined") Dsun = json.Dsun;
    if(typeof json.Dearth != "undefined") Dearth = json.Dearth;
    if(typeof json.Dmars != "undefined") Dmars = json.Dmars;
    if(typeof json.Msun != "undefined") Msun = json.Msun;
    if(typeof json.Mearth != "undefined") Mearth = json.Mearth;
    if(typeof json.Mmars != "undefined") Mmars = json.Mmars;
    if(typeof json.day != "undefined") day = json.day;
    if(typeof json.dt != "undefined") dt = json.dt;
    if(typeof json.t != "undefined") t = json.t;
    if(typeof json.tstr != "undefined") tstr = json.tstr;
    if(typeof json.cproduct != "undefined") cproduct = json.cproduct;
    if(typeof json.launchstr != "undefined") launchstr = json.launchstr;
    if(typeof json.dt2 != "undefined") dt2 = json.dt2;
    if(typeof json.box != "undefined") box = json.box;
    if(typeof json.color != "undefined") color = json.color;
    if(typeof json.editable != "undefined") editable = json.editable;
    if(typeof json.font != "undefined") font = json.font;
    if(typeof json.fontb != "undefined") fontb = json.fontb;
    if(typeof json.exercise1 != "undefined") exercise1 = json.exercise1;
    if(typeof json.launchday != "undefined") launchday = json.launchday;
    if(typeof json.rinitial != "undefined") rinitial = json.rinitial;
    if(typeof json.marsrocketdist != "undefined") marsrocketdist = json.marsrocketdist;
    if(typeof json.vinitial != "undefined") vinitial = json.vinitial;
    if(typeof json.normv != "undefined") normv = json.normv;
    if(typeof json.dvxslider != "undefined") dvxslider = json.dvxslider;
    if(typeof json.dvyslider != "undefined") dvyslider = json.dvyslider;
    if(typeof json.dv != "undefined") dv = json.dv;
    if(typeof json.v != "undefined") v = json.v;
    if(typeof json.Mrocket != "undefined") Mrocket = json.Mrocket;
    if(typeof json.rocketx != "undefined") rocketx = json.rocketx;
    if(typeof json.rockety != "undefined") rockety = json.rockety;
    if(typeof json.scale1 != "undefined") scale1 = json.scale1;
    if(typeof json.ArrowSizex != "undefined") ArrowSizex = json.ArrowSizex;
    if(typeof json.ArrowSizey != "undefined") ArrowSizey = json.ArrowSizey;
    if(typeof json.vrocket != "undefined") vrocket = json.vrocket;
    if(typeof json.procket != "undefined") procket = json.procket;
    if(typeof json.rocketLaunched != "undefined") rocketLaunched = json.rocketLaunched;
    if(typeof json.justNowLaunched != "undefined") justNowLaunched = json.justNowLaunched;
    if(typeof json.rocketarrowvisible != "undefined") rocketarrowvisible = json.rocketarrowvisible;
    if(typeof json.dx != "undefined") dx = json.dx;
    if(typeof json.dy != "undefined") dy = json.dy;
  };

  _model._readParametersPublic = function(json) {
    if(typeof json.marspos != "undefined") marspos = json.marspos;
    if(typeof json.marsvel != "undefined") marsvel = json.marsvel;
    if(typeof json.earthpos != "undefined") earthpos = json.earthpos;
    if(typeof json.earthvel != "undefined") earthvel = json.earthvel;
    if(typeof json.pearth != "undefined") pearth = json.pearth;
    if(typeof json.pmars != "undefined") pmars = json.pmars;
    if(typeof json.sunpos != "undefined") sunpos = json.sunpos;
    if(typeof json.range != "undefined") range = json.range;
    if(typeof json.suntoearth != "undefined") suntoearth = json.suntoearth;
    if(typeof json.suntomars != "undefined") suntomars = json.suntomars;
    if(typeof json.AU != "undefined") AU = json.AU;
    if(typeof json.G != "undefined") G = json.G;
    if(typeof json.marsy != "undefined") marsy = json.marsy;
    if(typeof json.marsx != "undefined") marsx = json.marsx;
    if(typeof json.marsvelx != "undefined") marsvelx = json.marsvelx;
    if(typeof json.marsvely != "undefined") marsvely = json.marsvely;
    if(typeof json.earthx != "undefined") earthx = json.earthx;
    if(typeof json.earthy != "undefined") earthy = json.earthy;
    if(typeof json.earthvelx != "undefined") earthvelx = json.earthvelx;
    if(typeof json.earthvely != "undefined") earthvely = json.earthvely;
    if(typeof json.Dsun != "undefined") Dsun = json.Dsun;
    if(typeof json.Dearth != "undefined") Dearth = json.Dearth;
    if(typeof json.Dmars != "undefined") Dmars = json.Dmars;
    if(typeof json.Msun != "undefined") Msun = json.Msun;
    if(typeof json.Mearth != "undefined") Mearth = json.Mearth;
    if(typeof json.Mmars != "undefined") Mmars = json.Mmars;
    if(typeof json.day != "undefined") day = json.day;
    if(typeof json.dt != "undefined") dt = json.dt;
    if(typeof json.t != "undefined") t = json.t;
    if(typeof json.tstr != "undefined") tstr = json.tstr;
    if(typeof json.cproduct != "undefined") cproduct = json.cproduct;
    if(typeof json.launchstr != "undefined") launchstr = json.launchstr;
    if(typeof json.dt2 != "undefined") dt2 = json.dt2;
    if(typeof json.box != "undefined") box = json.box;
    if(typeof json.color != "undefined") color = json.color;
    if(typeof json.editable != "undefined") editable = json.editable;
    if(typeof json.font != "undefined") font = json.font;
    if(typeof json.fontb != "undefined") fontb = json.fontb;
    if(typeof json.exercise1 != "undefined") exercise1 = json.exercise1;
    if(typeof json.launchday != "undefined") launchday = json.launchday;
    if(typeof json.rinitial != "undefined") rinitial = json.rinitial;
    if(typeof json.marsrocketdist != "undefined") marsrocketdist = json.marsrocketdist;
    if(typeof json.vinitial != "undefined") vinitial = json.vinitial;
    if(typeof json.normv != "undefined") normv = json.normv;
    if(typeof json.dvxslider != "undefined") dvxslider = json.dvxslider;
    if(typeof json.dvyslider != "undefined") dvyslider = json.dvyslider;
    if(typeof json.dv != "undefined") dv = json.dv;
    if(typeof json.v != "undefined") v = json.v;
    if(typeof json.Mrocket != "undefined") Mrocket = json.Mrocket;
    if(typeof json.rocketx != "undefined") rocketx = json.rocketx;
    if(typeof json.rockety != "undefined") rockety = json.rockety;
    if(typeof json.scale1 != "undefined") scale1 = json.scale1;
    if(typeof json.ArrowSizex != "undefined") ArrowSizex = json.ArrowSizex;
    if(typeof json.ArrowSizey != "undefined") ArrowSizey = json.ArrowSizey;
    if(typeof json.vrocket != "undefined") vrocket = json.vrocket;
    if(typeof json.procket != "undefined") procket = json.procket;
    if(typeof json.rocketLaunched != "undefined") rocketLaunched = json.rocketLaunched;
    if(typeof json.justNowLaunched != "undefined") justNowLaunched = json.justNowLaunched;
    if(typeof json.rocketarrowvisible != "undefined") rocketarrowvisible = json.rocketarrowvisible;
    if(typeof json.dx != "undefined") dx = json.dx;
    if(typeof json.dy != "undefined") dy = json.dy;
  };

  function _unserializePublic(json) { return _model.unserializePublic(json); }

  _model._userUnserializePublic = function(json) {
    _model._readParametersPublic(json);
   _resetSolvers();
   _model.update();
  };

  function _unserialize(json) { return _model.unserialize(json); }

  _model._userUnserialize = function(json) {
    _model._readParameters(json);
   _resetSolvers();
   _model.update();
  };

  _model.addToReset(function() {
    __pagesEnabled["NasaData"] = true;
    __pagesEnabled["Range"] = true;
    __pagesEnabled["constants"] = true;
    __pagesEnabled["Diameters"] = true;
    __pagesEnabled["Masses"] = true;
    __pagesEnabled["Exercise1 velocity and momentum"] = true;
    __pagesEnabled["Exercise2launch"] = true;
    __pagesEnabled["time"] = true;
    __pagesEnabled["svg"] = true;
    __pagesEnabled["Exercise1Earth"] = true;
    __pagesEnabled["Ex1 Mars"] = true;
    __pagesEnabled["Ex2 launch"] = true;
    __pagesEnabled["delta t"] = true;
    __pagesEnabled["relative positions of mars and earth"] = true;
    __pagesEnabled["Exercise1 cross product"] = true;
    __pagesEnabled["Ex2 launch"] = true;
    __pagesEnabled["update time label"] = true;
  });

  _model.addToReset(function() {
    marspos = new Array(3); // EjsS Model.Variables.NasaData.marspos
    marsvel = new Array(3); // EjsS Model.Variables.NasaData.marsvel
    earthpos = new Array(3); // EjsS Model.Variables.NasaData.earthpos
    earthvel = new Array(3); // EjsS Model.Variables.NasaData.earthvel
    pearth = []; // EjsS Model.Variables.NasaData.pearth
    pmars = []; // EjsS Model.Variables.NasaData.pmars
    sunpos = [0,0]; // EjsS Model.Variables.NasaData.sunpos
    range = 0; // EjsS Model.Variables.NasaData.range
    suntoearth = []; // EjsS Model.Variables.NasaData.suntoearth
    suntomars = []; // EjsS Model.Variables.NasaData.suntomars
  });

  _model.addToReset(function() {
    marsy = 1000*2.135080519845017e8; // EjsS Model.Variables.PlanetDataforsliderstowork.marsy
    marsx = 1000*-1.181709819034665e8; // EjsS Model.Variables.PlanetDataforsliderstowork.marsx
    marsvelx = 1000*-2.028048448328753e1; // EjsS Model.Variables.PlanetDataforsliderstowork.marsvelx
    marsvely = 1000*-9.673026032986073e0; // EjsS Model.Variables.PlanetDataforsliderstowork.marsvely
    earthx = 1000*1.371047699606275e8; // EjsS Model.Variables.PlanetDataforsliderstowork.earthx
    earthy = 1000*-6.350801741095807e07; // EjsS Model.Variables.PlanetDataforsliderstowork.earthy
    earthvelx = 1000*1.202828172495448e1; // EjsS Model.Variables.PlanetDataforsliderstowork.earthvelx
    earthvely = 1000*2.690745455098789e1; // EjsS Model.Variables.PlanetDataforsliderstowork.earthvely
  });

  _model.addToReset(function() {
    tstr = ""; // EjsS Model.Variables.PlanetData2.tstr
    cproduct = []; // EjsS Model.Variables.PlanetData2.cproduct
    launchstr = ""; // EjsS Model.Variables.PlanetData2.launchstr
  });

  _model.addToReset(function() {
    dt2 = 1; // EjsS Model.Variables.ComboBox.dt2
    box = 0; // EjsS Model.Variables.ComboBox.box
    color = "blue"; // EjsS Model.Variables.ComboBox.color
    editable = true; // EjsS Model.Variables.ComboBox.editable
  });

  _model.addToReset(function() {
    font = "normal normal 1.5vw"; // EjsS Model.Variables.Display.font
    fontb = "normal bold 2vw"; // EjsS Model.Variables.Display.fontb
  });

  _model.addToReset(function() {
    exercise1 = false; // EjsS Model.Variables.exercise1.exercise1
  });

  _model.addToReset(function() {
    launchday = 125; // EjsS Model.Variables.exercise2,3launch.launchday
    rinitial = 5.6*6.4e6; // EjsS Model.Variables.exercise2,3launch.rinitial
    marsrocketdist = 500*6.8e6; // EjsS Model.Variables.exercise2,3launch.marsrocketdist
    vinitial = 5.4e3; // EjsS Model.Variables.exercise2,3launch.vinitial
    normv = []; // EjsS Model.Variables.exercise2,3launch.normv
    dvxslider = -1.6; // EjsS Model.Variables.exercise2,3launch.dvxslider
    dvyslider = -4.6; // EjsS Model.Variables.exercise2,3launch.dvyslider
    dv = [dvxslider,dvyslider]; // EjsS Model.Variables.exercise2,3launch.dv
    v = [vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))]; // EjsS Model.Variables.exercise2,3launch.v
    Mrocket = 1e4; // EjsS Model.Variables.exercise2,3launch.Mrocket
    rocketx = earthx; // EjsS Model.Variables.exercise2,3launch.rocketx
    rockety = earthy; // EjsS Model.Variables.exercise2,3launch.rockety
    scale1 = 0.2*AU; // EjsS Model.Variables.exercise2,3launch.scale1
    ArrowSizex = 0; // EjsS Model.Variables.exercise2,3launch.ArrowSizex
    ArrowSizey = 0; // EjsS Model.Variables.exercise2,3launch.ArrowSizey
    vrocket = new Array(2); // EjsS Model.Variables.exercise2,3launch.vrocket
    (function () {
      var _i0;
      for (_i0=0; _i0<2; _i0+=1) {  // EjsS Model.Variables.exercise2,3launch.vrocket
        vrocket[_i0] = 0;  // EjsS Model.Variables.exercise2,3launch.vrocket
      }
    }());
    procket = new Array(2); // EjsS Model.Variables.exercise2,3launch.procket
    (function () {
      var _i0;
      for (_i0=0; _i0<2; _i0+=1) {  // EjsS Model.Variables.exercise2,3launch.procket
        procket[_i0] = 0;  // EjsS Model.Variables.exercise2,3launch.procket
      }
    }());
    rocketLaunched = false; // EjsS Model.Variables.exercise2,3launch.rocketLaunched
    justNowLaunched = false; // EjsS Model.Variables.exercise2,3launch.justNowLaunched
    rocketarrowvisible = true; // EjsS Model.Variables.exercise2,3launch.rocketarrowvisible
    dx = dv[0]; // EjsS Model.Variables.exercise2,3launch.dx
    dy = dv[1]; // EjsS Model.Variables.exercise2,3launch.dy
  });

  if (_inputParameters) {
    _inputParameters = _model.parseInputParameters(_inputParameters);
    if (_inputParameters) _model.addToReset(function() { _model._readParameters(_inputParameters); });
  }

  _model.addToReset(function() {
    _model.setAutoplay(false);
    _model.setPauseOnPageExit(true);
    _model.setFPS(100);
    _model.setStepsPerDisplay(10);
  });

  //Sets Full Screen  // > CustomCode.Full Screen:1
  //https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode  // > CustomCode.Full Screen:2
  // does not work for iOS   // > CustomCode.Full Screen:3
  /*jslint browser:true */  // > CustomCode.Full Screen:4
  function toggleFullScreen() {  // > CustomCode.Full Screen:5
    if (!document.fullscreenElement &&    // alternative standard method  // > CustomCode.Full Screen:6
        !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods  // > CustomCode.Full Screen:7
      if (document.documentElement.requestFullscreen) {  // > CustomCode.Full Screen:8
        document.documentElement.requestFullscreen();  // > CustomCode.Full Screen:9
      } else if (document.documentElement.msRequestFullscreen) {  // > CustomCode.Full Screen:10
        document.documentElement.msRequestFullscreen();  // > CustomCode.Full Screen:11
      } else if (document.documentElement.mozRequestFullScreen) {  // > CustomCode.Full Screen:12
        document.documentElement.mozRequestFullScreen();  // > CustomCode.Full Screen:13
      } else if (document.documentElement.webkitRequestFullscreen) {  // > CustomCode.Full Screen:14
        document.documentElement.webkitRequestFullscreen();  // > CustomCode.Full Screen:15
      }  // > CustomCode.Full Screen:16
    } else {  // > CustomCode.Full Screen:17
      if (document.exitFullscreen) {  // > CustomCode.Full Screen:18
        document.exitFullscreen();  // > CustomCode.Full Screen:19
      } else if (document.msExitFullscreen) {  // > CustomCode.Full Screen:20
        document.msExitFullscreen();  // > CustomCode.Full Screen:21
      } else if (document.mozCancelFullScreen) {  // > CustomCode.Full Screen:22
        document.mozCancelFullScreen();  // > CustomCode.Full Screen:23
      } else if (document.webkitExitFullscreen) {  // > CustomCode.Full Screen:24
        document.webkitExitFullscreen();  // > CustomCode.Full Screen:25
      }  // > CustomCode.Full Screen:26
    }  // > CustomCode.Full Screen:27
  }  // > CustomCode.Full Screen:28

  //this function is called when the rocket is launched  // > CustomCode.Ex2 launchRocket:1
  //it sets booleans and sets the initial velocitiy and momentum of the rocket  // > CustomCode.Ex2 launchRocket:2
  function launchRocket(){  // > CustomCode.Ex2 launchRocket:3
      rocketLaunched=true;  // > CustomCode.Ex2 launchRocket:4
      justNowLaunched=true;  // > CustomCode.Ex2 launchRocket:5
    //  vrocket[0]=vearthx+v[0];//  // > CustomCode.Ex2 launchRocket:6
     // vrocket[1]=vearthy+v[1];  // > CustomCode.Ex2 launchRocket:7
         vrocket[0]=earthvel[0]+v[0];//  // > CustomCode.Ex2 launchRocket:8
      vrocket[1]=earthvel[1]+v[1];  // > CustomCode.Ex2 launchRocket:9
      procket[0]=Mrocket*vrocket[0];  // > CustomCode.Ex2 launchRocket:10
      procket[1]=Mrocket*vrocket[1];  // > CustomCode.Ex2 launchRocket:11
      rocketarrowvisible=false; // added lookang  // > CustomCode.Ex2 launchRocket:12
        // > CustomCode.Ex2 launchRocket:13
      }  // > CustomCode.Ex2 launchRocket:14

  _model.addToInitialization(function() {
    if (!__pagesEnabled["NasaData"]) return;
    //pos unit is m  // > Initialization.NasaData:1
    //time unit is s  // > Initialization.NasaData:2
    //Aug 29, 2015  // > Initialization.NasaData:3
       // > Initialization.NasaData:4
     //taken by lookang , different from original A.Titus data, probably due to change in Nasa data over the years?  // > Initialization.NasaData:5
    marspos=[1000*(-1.176389005286295E+08),1000*2.135936464902488E+08,0];  // > Initialization.NasaData:6
    marsvel=[1000*(-2.027713823922661E+01),1000*(-9.661960006152405E+00),0];  // > Initialization.NasaData:7
    earthpos=[1000*(1.376368513677354E+08),1000*(-6.342242292720988E+07),0];  // > Initialization.NasaData:8
    earthvel=[1000*(1.203162796791987E+01),1000*2.691852057718956E+01,0];  // > Initialization.NasaData:9
    //original from glowscript....seems to be slightly off from https://ssd.jpl.nasa.gov/horizons.cgi#results for Mars date Aug 29, 2015  // > Initialization.NasaData:10
    //marspos=[1000*(-1.181709819034665E+08),1000*2.135080519845017E+08,0];  // > Initialization.NasaData:11
    //marsvel=[1000*(-2.028048448328753E+01),1000*(-9.673026032986073E+00),0];  // > Initialization.NasaData:12
    //earthpos=[1000*(1.371047699606275E+08),1000*(-6.350801741095807E+07),0];  // > Initialization.NasaData:13
    //earthvel=[1000*(1.202828172495448E+01),1000*2.690745455098789E+01,0];  // > Initialization.NasaData:14
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["Range"]) return;
    //set the scene's range to avoid autoscaling  // > Initialization.Range:1
    //scene.range=1.5*mag(marspos)  // > Initialization.Range:2
    range=1.5*Math.sqrt(Math.pow(marspos[0],2)+Math.pow(marspos[1],2)+Math.pow(marspos[2],2));  // > Initialization.Range:3
    //range=1.5*Math.sqrt(Math.pow(marsx,2)+Math.pow(marsy,2));  // > Initialization.Range:4
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["constants"]) return;
    //constants  // > Initialization.constants:1
    AU=1000*149597870.7 ;//1 astronomical unit in m  // > Initialization.constants:2
    G=6.67384e-11;  // > Initialization.constants:3
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["Diameters"]) return;
    //diameters for drawing Sun, Mars, and Earth. It is not to scale  // > Initialization.Diameters:1
    Dsun=0.2*AU;  // > Initialization.Diameters:2
    Dearth=0.1*AU;  // > Initialization.Diameters:3
    Dmars=0.1*AU;  // > Initialization.Diameters:4
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["Masses"]) return;
    // masses  // > Initialization.Masses:1
    Msun=1.989e30;  // > Initialization.Masses:2
    Mearth=5.97219e24;  // > Initialization.Masses:3
    Mmars=6.4185e23;  // > Initialization.Masses:4
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["Exercise1 velocity and momentum"]) return;
    // define velocity and momentum  // > Initialization.Exercise1 velocity and momentum:1
    //vearthx=earthvelx;  // > Initialization.Exercise1 velocity and momentum:2
    //vmarsx=marsvelx;  // > Initialization.Exercise1 velocity and momentum:3
    //vearthy=earthvely;  // > Initialization.Exercise1 velocity and momentum:4
    //vmarsy=marsvely;  // > Initialization.Exercise1 velocity and momentum:5
    vearth=[earthvel[0],earthvel[1],earthvel[2]];  // > Initialization.Exercise1 velocity and momentum:6
    vmars = [marsvel[0],marsvel[1],marsvel[2]];  // > Initialization.Exercise1 velocity and momentum:7
    //pearth[0]=Mearth*vearthx;  // > Initialization.Exercise1 velocity and momentum:8
    //pearth[1]=Mearth*vearthy;  // > Initialization.Exercise1 velocity and momentum:9
    pearth = [Mearth*earthvel[0],Mearth*earthvel[1],Mearth*earthvel[2]];  // > Initialization.Exercise1 velocity and momentum:10
    //pmars[0]=Mmars*vmarsx;  // > Initialization.Exercise1 velocity and momentum:11
    //pmars[1]=Mmars*vmarsy;  // > Initialization.Exercise1 velocity and momentum:12
    pmars = [Mmars*marsvel[0],Mmars*marsvel[1],Mmars*marsvel[2]];  // > Initialization.Exercise1 velocity and momentum:13
    suntomars[2]=0;  // > Initialization.Exercise1 velocity and momentum:14
    suntoearth[2]=0;  // > Initialization.Exercise1 velocity and momentum:15
    //change in sign of the cross product can be used to find opposition  // > Initialization.Exercise1 velocity and momentum:16
    cproductsign=1;  // > Initialization.Exercise1 velocity and momentum:17
    oldproductsign=1;  // > Initialization.Exercise1 velocity and momentum:18
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["Exercise2launch"]) return;
    //Sets Velocity v  // > Initialization.Exercise2launch:1
    v=[vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))];  // > Initialization.Exercise2launch:2
    //v=[vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))];  // > Initialization.Exercise2launch:3
    //Sets Rocket Initial Position  // > Initialization.Exercise2launch:4
    //vrocket[0]=earthvelx+v[0];  // > Initialization.Exercise2launch:5
    //vrocket[1]=earthvely+v[1];  // > Initialization.Exercise2launch:6
    vrocket[0]=earthvel[0]+v[0];  // > Initialization.Exercise2launch:7
    vrocket[1]=earthvel[1]+v[1];  // > Initialization.Exercise2launch:8
    procket[0]=Mrocket*vrocket[0];  // > Initialization.Exercise2launch:9
    procket[1]=Mrocket*vrocket[1];  // > Initialization.Exercise2launch:10
    //Rocket Position  // > Initialization.Exercise2launch:11
    normv[0]=v[0]/Math.sqrt(v[0]*v[0]+v[1]*v[1]);  // > Initialization.Exercise2launch:12
    normv[1]=v[1]/Math.sqrt(v[0]*v[0]+v[1]*v[1]);  // > Initialization.Exercise2launch:13
    //rocketx=earthx+rinitial*normv[0];  // > Initialization.Exercise2launch:14
    //rockety=earthy+rinitial*normv[1];  // > Initialization.Exercise2launch:15
    rocketx=earthpos[0]+rinitial*normv[0];  // > Initialization.Exercise2launch:16
    rockety=earthpos[1]+rinitial*normv[1];  // > Initialization.Exercise2launch:17
    //Arrow Size  // > Initialization.Exercise2launch:18
    scale1 = 0.2*AU; //added to show direction of launch immediately  // > Initialization.Exercise2launch:19
    ArrowSizex=scale1*normv[0];  // > Initialization.Exercise2launch:20
    ArrowSizey=scale1*normv[1];  // > Initialization.Exercise2launch:21
    //booleans  // > Initialization.Exercise2launch:22
    rocketLaunched=false;  // > Initialization.Exercise2launch:23
    run=false;  // > Initialization.Exercise2launch:24
    justNowLaunched=false;  // > Initialization.Exercise2launch:25
    rocketarrowvisible=true;  // > Initialization.Exercise2launch:26
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["time"]) return;
    //time  // > Initialization.time:1
    dt=2*3600; //per day  // > Initialization.time:2
    day=24*3600;  // > Initialization.time:3
    t=0;  // > Initialization.time:4
    //times for oppositions; the difference is the synodic period  // > Initialization.time:5
    ti=0;  // > Initialization.time:6
    tf=0;  // > Initialization.time:7
    //Set whether the fieldboxes are editable  // > Initialization.time:8
    editable=true;  // > Initialization.time:9
    //Top right text  // > Initialization.time:10
    launchstr="Starting Date: 29 August 2015. Click Play to Start!"  // > Initialization.time:11
  });

  _model.addToInitialization(function() {
    if (!__pagesEnabled["svg"]) return;
    //To Create the Background Gradient  // > Initialization.svg:1
    var container = document.createElement('div');  // > Initialization.svg:2
    var svggradient = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs>'+  // > Initialization.svg:3
      '  <radialGradient id="mygrandient" cx="50%" cy="50%" r="20%" fx="50%" fy="50%">'+  // > Initialization.svg:4
      '    <stop offset="0%" style="stop-color:rgb(250,250,250); stop-opacity:1" />'+  // > Initialization.svg:5
      '    <stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />'+  // > Initialization.svg:6
      '  </radialGradient>'+  // > Initialization.svg:7
      '</defs></svg>';  // > Initialization.svg:8
    container.innerHTML = svggradient;  // > Initialization.svg:9
    document.body.appendChild(container);  // > Initialization.svg:10
    //"url(#mygrandient)"  // > Initialization.svg:11
  });

  _model.addToEvolution(function() {
    if (!__pagesEnabled["Exercise1Earth"]) return;
    var r = [];  // > Evolution.Exercise1Earth:1
    var Fearth=[];  // > Evolution.Exercise1Earth:2
    var rmag  // > Evolution.Exercise1Earth:3
    var runit = [];  // > Evolution.Exercise1Earth:4
    //Earth  // > Evolution.Exercise1Earth:5
    //r[0]=earthx-sunpos[0];  // > Evolution.Exercise1Earth:6
    //r[1]=earthy-sunpos[1];  // > Evolution.Exercise1Earth:7
    //r=earth.pos-sun.pos  // > Evolution.Exercise1Earth:8
    r[0]=earthpos[0]-sunpos[0];  // > Evolution.Exercise1Earth:9
    r[1]=earthpos[1]-sunpos[1];  // > Evolution.Exercise1Earth:10
    // rmag=mag(r)  // > Evolution.Exercise1Earth:11
    rmag=Math.sqrt(r[0]**2+r[1]**2);  // > Evolution.Exercise1Earth:12
    //runit=norm(r)  // > Evolution.Exercise1Earth:13
    runit[0]=r[0]/rmag;  // > Evolution.Exercise1Earth:14
    runit[1]=r[1]/rmag;  // > Evolution.Exercise1Earth:15
    // Fearth=-G*Msun*Mearth/rmag**2*runit  // > Evolution.Exercise1Earth:16
    Fearth[0]=-G*Msun*Mearth/(rmag**2)*runit[0];  // > Evolution.Exercise1Earth:17
    Fearth[1]=-G*Msun*Mearth/(rmag**2)*runit[1];  // > Evolution.Exercise1Earth:18
    //pearth=pearth+Fearth*dt  // > Evolution.Exercise1Earth:19
    pearth[0]+=Fearth[0]*dt;  // > Evolution.Exercise1Earth:20
    pearth[1]+=Fearth[1]*dt;  // > Evolution.Exercise1Earth:21
    //earthx+=pearth[0]/Mearth*dt;  // > Evolution.Exercise1Earth:22
    //earthy+=pearth[1]/Mearth*dt;  // > Evolution.Exercise1Earth:23
    //  earth.pos=earth.pos+pearth/Mearth*dt  // > Evolution.Exercise1Earth:24
    earthpos[0]+=pearth[0]/Mearth*dt;  // > Evolution.Exercise1Earth:25
    earthpos[1]+=pearth[1]/Mearth*dt;  // > Evolution.Exercise1Earth:26
    // need to update velocity to make rocket propel correctly at launch lookang  // > Evolution.Exercise1Earth:27
    earthvel[0] = pearth[0]/Mearth;  // > Evolution.Exercise1Earth:28
    earthvel[1] = pearth[1]/Mearth;  // > Evolution.Exercise1Earth:29
  });

  _model.addToEvolution(function() {
    if (!__pagesEnabled["Ex1 Mars"]) return;
    var r = [];  // > Evolution.Ex1 Mars:1
    var rmag, runit, Fmars;  // > Evolution.Ex1 Mars:2
    runit=[];  // > Evolution.Ex1 Mars:3
    //Mars  // > Evolution.Ex1 Mars:4
    Fmars=[];  // > Evolution.Ex1 Mars:5
    //r[0]=(marsx-sunpos[0]);  // > Evolution.Ex1 Mars:6
    //r[1]=(marsy-sunpos[1]);  // > Evolution.Ex1 Mars:7
    //r=mars.pos-sun.pos  // > Evolution.Ex1 Mars:8
    r[0]=(marspos[0]-sunpos[0]);  // > Evolution.Ex1 Mars:9
    r[1]=(marspos[1]-sunpos[1]);  // > Evolution.Ex1 Mars:10
    //rmag=mag(r)  // > Evolution.Ex1 Mars:11
    rmag=Math.sqrt(r[0]**2+r[1]**2);  // > Evolution.Ex1 Mars:12
    // runit=norm(r)  // > Evolution.Ex1 Mars:13
    runit[0]=r[0]/rmag;  // > Evolution.Ex1 Mars:14
    runit[1]=r[1]/rmag;  // > Evolution.Ex1 Mars:15
    //Fmars=-G*Msun*Mmars/rmag**2*runit  // > Evolution.Ex1 Mars:16
    Fmars[0]=-G*Msun*Mmars/(rmag**2)*runit[0];  // > Evolution.Ex1 Mars:17
    Fmars[1]=-G*Msun*Mmars/(rmag**2)*runit[1];  // > Evolution.Ex1 Mars:18
    //pmars=pmars+Fmars*dt  // > Evolution.Ex1 Mars:19
    pmars[0]=pmars[0]+Fmars[0]*dt;  // > Evolution.Ex1 Mars:20
    pmars[1]=pmars[1]+Fmars[1]*dt;  // > Evolution.Ex1 Mars:21
    //marsx=marsx+pmars[0]/Mmars*dt;  // > Evolution.Ex1 Mars:22
    //marsy=marsy+pmars[1]/Mmars*dt;  // > Evolution.Ex1 Mars:23
    //mars.pos=mars.pos+pmars/Mmars*dt  // > Evolution.Ex1 Mars:24
    marspos[0]=marspos[0]+pmars[0]/Mmars*dt;  // > Evolution.Ex1 Mars:25
    marspos[1]=marspos[1]+pmars[1]/Mmars*dt;  // > Evolution.Ex1 Mars:26
  });

  _model.addToEvolution(function() {
    if (!__pagesEnabled["Ex2 launch"]) return;
    //rocket  // > Evolution.Ex2 launch:1
    var runit=[];  // > Evolution.Ex2 launch:2
    var r = [];  // > Evolution.Ex2 launch:3
    var Frocket_earth=[];  // > Evolution.Ex2 launch:4
    var Frocket_sun=[];  // > Evolution.Ex2 launch:5
    var Frocket_mars=[];  // > Evolution.Ex2 launch:6
    var Fnet=[];  // > Evolution.Ex2 launch:7
    // launched, then compute Fnet, procket, and rocketpos  // > Evolution.Ex2 launch:8
            if(rocketLaunched==true){  // > Evolution.Ex2 launch:9
                if(justNowLaunched){  // > Evolution.Ex2 launch:10
                    justNowLaunched=false;  // > Evolution.Ex2 launch:11
                    }  // > Evolution.Ex2 launch:12
                 // > Evolution.Ex2 launch:13
                //F by earth  // > Evolution.Ex2 launch:14
                r=[];  // > Evolution.Ex2 launch:15
               // r[0]=rocketx-earthx;  // > Evolution.Ex2 launch:16
              //  r[1]=rockety-earthy;  // > Evolution.Ex2 launch:17
                  r[0]=rocketx-earthpos[0];  // > Evolution.Ex2 launch:18
                r[1]=rockety-earthpos[1];  // > Evolution.Ex2 launch:19
                rmag=Math.sqrt(r[0]**2+r[1]**2);  // > Evolution.Ex2 launch:20
                runit[0]=r[0]/rmag;  // > Evolution.Ex2 launch:21
                runit[1]=r[1]/rmag;  // > Evolution.Ex2 launch:22
                Frocket_earth[0]=-G*Mrocket*Mearth/(rmag**2)*runit[0];  // > Evolution.Ex2 launch:23
                Frocket_earth[1]=-G*Mrocket*Mearth/(rmag**2)*runit[1];  // > Evolution.Ex2 launch:24
                //F by sun  // > Evolution.Ex2 launch:25
                r=[];  // > Evolution.Ex2 launch:26
                r[0]=rocketx-sunpos[0];  // > Evolution.Ex2 launch:27
                r[1]=rockety-sunpos[1];  // > Evolution.Ex2 launch:28
                rmag=Math.sqrt(r[0]**2+r[1]**2);  // > Evolution.Ex2 launch:29
                runit[0]=r[0]/rmag;  // > Evolution.Ex2 launch:30
                runit[1]=r[1]/rmag;  // > Evolution.Ex2 launch:31
                Frocket_sun[0]=-G*Mrocket*Msun/(rmag**2)*runit[0];  // > Evolution.Ex2 launch:32
                Frocket_sun[1]=-G*Mrocket*Msun/(rmag**2)*runit[1];  // > Evolution.Ex2 launch:33
                //F by mars  // > Evolution.Ex2 launch:34
                r=[];  // > Evolution.Ex2 launch:35
               // r[0]=rocketx-marsx;  // > Evolution.Ex2 launch:36
              //  r[1]=rockety-marsy;  // > Evolution.Ex2 launch:37
                r[0]=rocketx-marspos[0];  // > Evolution.Ex2 launch:38
                r[1]=rockety-marspos[1];  // > Evolution.Ex2 launch:39
                rmag=Math.sqrt(r[0]**2+r[1]**2);  // > Evolution.Ex2 launch:40
                runit[0]=r[0]/rmag;  // > Evolution.Ex2 launch:41
                runit[1]=r[1]/rmag;  // > Evolution.Ex2 launch:42
                Frocket_mars[0]=-G*Mrocket*Mmars/(rmag**2)*runit[0];  // > Evolution.Ex2 launch:43
                Frocket_mars[1]=-G*Mrocket*Mmars/(rmag**2)*runit[1];  // > Evolution.Ex2 launch:44
                //Fnet  // > Evolution.Ex2 launch:45
                Fnet[0]=Frocket_sun[0]+Frocket_earth[0]+Frocket_mars[0];  // > Evolution.Ex2 launch:46
                Fnet[1]=Frocket_sun[1]+Frocket_earth[1]+Frocket_mars[1];  // > Evolution.Ex2 launch:47
                procket[0]=procket[0]+Fnet[0]*dt;  // > Evolution.Ex2 launch:48
                procket[1]=procket[1]+Fnet[1]*dt;  // > Evolution.Ex2 launch:49
                 vrocket[0]=procket[0]/Mrocket; //added by lookang  // > Evolution.Ex2 launch:50
                vrocket[1]=procket[1]/Mrocket;   // > Evolution.Ex2 launch:51
                rocketx=rocketx+procket[0]/Mrocket*(dt);  // > Evolution.Ex2 launch:52
                rockety=rockety+procket[1]/Mrocket*(dt);  // > Evolution.Ex2 launch:53
     }  // > Evolution.Ex2 launch:54
       // > Evolution.Ex2 launch:55
  });

  _model.addToEvolution(function() {
    if (!__pagesEnabled["delta t"]) return;
    t=t+dt;  // > Evolution.delta t:1
  });

  _model.addToFixedRelations(function() { _isPaused = _model.isPaused(); _isPlaying = _model.isPlaying(); });

  _model.addToFixedRelations(function() {
    if (!__pagesEnabled["relative positions of mars and earth"]) return;
    // relative positions of mars and earth  // > FixedRelations.relative positions of mars and earth:1
    //suntomars[0]=marsx-sunpos[0];  // > FixedRelations.relative positions of mars and earth:2
    suntomars[0]=marspos[0]-sunpos[0];  // > FixedRelations.relative positions of mars and earth:3
    suntomars[1]=marspos[1]-sunpos[1];  // > FixedRelations.relative positions of mars and earth:4
    //suntoearth[0]=earthx-sunpos[0];  // > FixedRelations.relative positions of mars and earth:5
    suntoearth[0]=earthpos[0]-sunpos[0];  // > FixedRelations.relative positions of mars and earth:6
    suntoearth[1]=earthpos[1]-sunpos[1];  // > FixedRelations.relative positions of mars and earth:7
    //suntomars[1]=marsy-sunpos[1];  // > FixedRelations.relative positions of mars and earth:8
    //suntoearth[1]=earthy-sunpos[1];  // > FixedRelations.relative positions of mars and earth:9
    //suntomars[0] = marspos[0] - sunpos[0];  // > FixedRelations.relative positions of mars and earth:10
  });

  _model.addToFixedRelations(function() {
    if (!__pagesEnabled["Exercise1 cross product"]) return;
    //change in sign of the cross product can be used to find opposition  // > FixedRelations.Exercise1 cross product:1
    cproduct=math.cross(suntoearth,suntomars); //need to import MathJS in elements  // > FixedRelations.Exercise1 cross product:2
    //use change in sign of cross product to find opopsition  // > FixedRelations.Exercise1 cross product:3
    oldcproductsign=cproductsign;  // > FixedRelations.Exercise1 cross product:4
    //if(cproduct.z>=0):  // > FixedRelations.Exercise1 cross product:5
    if(cproduct[2]>=0){  // > FixedRelations.Exercise1 cross product:6
            cproductsign=1;  // > FixedRelations.Exercise1 cross product:7
            }  // > FixedRelations.Exercise1 cross product:8
    else{  // > FixedRelations.Exercise1 cross product:9
            cproductsign=-1;  // > FixedRelations.Exercise1 cross product:10
            }  // > FixedRelations.Exercise1 cross product:11
     // opposition occurs  // > FixedRelations.Exercise1 cross product:12
     if(oldcproductsign>0 && cproductsign<0){  // > FixedRelations.Exercise1 cross product:13
            if(ti==0){  // > FixedRelations.Exercise1 cross product:14
                ti=t/day;  // > FixedRelations.Exercise1 cross product:15
                launchstr="Earth Transit at t="+ti.toFixed(1)+" days. Click Play to Continue.";  // > FixedRelations.Exercise1 cross product:16
                //scene.waitfor('click')  // > FixedRelations.Exercise1 cross product:17
                _pause();  // > FixedRelations.Exercise1 cross product:18
                }  // > FixedRelations.Exercise1 cross product:19
            else if(ti>0 && tf==0){  // > FixedRelations.Exercise1 cross product:20
                tf=t/day;  // > FixedRelations.Exercise1 cross product:21
                transit=tf-ti;  // > FixedRelations.Exercise1 cross product:22
                launchstr="Earth Transit at t="+tf.toFixed(1)+" days.\nSynodic period="+transit.toFixed(1)+" days = "+((tf-ti)/30).toFixed(1)+" months.\n Click Play to Continue.";  // > FixedRelations.Exercise1 cross product:23
                //scene.waitfor('click')  // > FixedRelations.Exercise1 cross product:24
                _pause();  // > FixedRelations.Exercise1 cross product:25
                }  // > FixedRelations.Exercise1 cross product:26
    }  // > FixedRelations.Exercise1 cross product:27
  });

  _model.addToFixedRelations(function() {
    if (!__pagesEnabled["Ex2 launch"]) return;
    //launch rocket on the launch day          // > FixedRelations.Ex2 launch:1
    if(t/day>launchday && rocketLaunched==false){launchRocket();}  // > FixedRelations.Ex2 launch:2
    //if not launched, just make the rocket at earth's position  // > FixedRelations.Ex2 launch:3
    if (rocketLaunched==false){  // > FixedRelations.Ex2 launch:4
      // rocketx=earthx;  // > FixedRelations.Ex2 launch:5
      // rockety=earthy;  // > FixedRelations.Ex2 launch:6
       rocketx=earthpos[0];  // > FixedRelations.Ex2 launch:7
       rockety=earthpos[1];  // > FixedRelations.Ex2 launch:8
       vrocket[0]=earthvel[0];  // > FixedRelations.Ex2 launch:9
       vrocket[0]=earthvel[1];  // > FixedRelations.Ex2 launch:10
    }  // > FixedRelations.Ex2 launch:11
    //arrival at Mars  // > FixedRelations.Ex2 launch:12
    //if(math.sqrt((rocketx-marsx)**2+(rockety-marsy)**2)<marsrocketdist){  // > FixedRelations.Ex2 launch:13
      if(Math.sqrt((rocketx-marspos[0])**2+(rockety-marspos[1])**2)<marsrocketdist){  // > FixedRelations.Ex2 launch:14
    //if(math.sqrt((rocketx-marsx)*(rocketx-marsx)+(rockety-marsy)*(rockety-marsy))<marsrocketdist){  // > FixedRelations.Ex2 launch:15
         launchstr="Arrival at Mars.\nTravel time = "+(t/day-launchday).toFixed(2)+" days";  // > FixedRelations.Ex2 launch:16
       //  alert();  // > FixedRelations.Ex2 launch:17
      // _pause();  // > FixedRelations.Ex2 launch:18
      _pause();  // > FixedRelations.Ex2 launch:19
       }  // > FixedRelations.Ex2 launch:20
  });

  _model.addToFixedRelations(function() {
    if (!__pagesEnabled["update time label"]) return;
    tstr ="Time: "+(t/day).toFixed(0)+" days";  // > FixedRelations.update time label:1
  });

  _model.addToFixedRelations(function() { _isPaused = _model.isPaused(); _isPlaying = _model.isPlaying(); });

    _model._fontResized = function(iBase,iSize,iDelta) {
      _view._fontResized(iBase,iSize,iDelta);
  }; // end of _fontResized

  function _getViews() {
    var _viewsInfo = [];
    var _counter = 0;
    _viewsInfo[_counter++] = { name : "HtmlView Page", width : 800, height : 600 };
    return _viewsInfo;
  } // end of _getViews

  function _selectView(_viewNumber) {
    _view = null;
    _view = new PICUP_marsmission_EJSStemplate_View(_topFrame,_viewNumber,_libraryPath,_codebasePath);
    var _view_super_reset = _view._reset;
    _view._reset = function() {
      _view_super_reset();
      switch(_viewNumber) {
        case -10 : break; // make Lint happy
        default :
        case 0:
          _view.executionPanel.linkProperty("Background",  function() { return color; }, function(_v) { color = _v; } ); // HtmlView Page linking property 'Background' for element 'executionPanel'
          _view.executionPanel.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'executionPanel'
          _view.comboBox.linkProperty("Options",  function() { return ["Earth","Mars","Masses","Constants","Exercise1","Exercise2,3,4","exercise4LD=150","exercise4LD=200"]; } ); // HtmlView Page linking property 'Options' for element 'comboBox'
          _view.comboBox.linkProperty("Foreground",  function() { return color; }, function(_v) { color = _v; } ); // HtmlView Page linking property 'Foreground' for element 'comboBox'
          _view.comboBox.setAction("OnChange", function(_data,_info) {
  var opts = _view.comboBox.getProperty("SelectedOptions");  // array of options
      var option = (opts.length > 0)? opts[0]:""; // selected option 
  //[Time]
   if (option == "Earth"){box =0;color="blue";}
  else if (option == "Mars"){box =1;color="red";}
  else if (option == "Masses"){box = 2;color="orange";}
  else if (option == "Constants"){box = 3;color="orange";}
  else if (option == "Exercise1"){exercise1=true;}
  else if (option == "Exercise2,3,4"){box=4;}
  else if (option == "exercise4LD=150"){
    box=4;
    launchday=150;
    dv[0]=dvxslider=-0.6;
    dv[1]=dvyslider=-4.6;
    _initialize();
    }
    else if (option == "exercise4LD=200"){
    box=4;
    launchday=200;
    dv[0]=dvxslider=0.2;
    dv[1]=dvyslider=-4.6;
    _initialize();
    }

}); // HtmlView Page setting action 'OnChange' for element 'comboBox'
          _view.comboBox.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'comboBox'
          _view.box0earth.linkProperty("Display",  function() { return box==0?"inline-block":"none"; } ); // HtmlView Page linking property 'Display' for element 'box0earth'
          _view.Positionx.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'Positionx'
          _view.Positionx.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'Positionx'
          _view.Positionx.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Positionx'
          _view.earthX.linkProperty("Value",  function() { return earthx; }, function(_v) { earthx = _v; } ); // HtmlView Page linking property 'Value' for element 'earthX'
          _view.earthX.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'earthX'
          _view.earthX.setAction("OnChange", function(_data,_info) {
  _initialize();
  earthpos[0]=earthx; //need earthx for slider to work;

}); // HtmlView Page setting action 'OnChange' for element 'earthX'
          _view.earthX.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'earthX'
          _view.earthX.linkProperty("Display",  function() { return box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'earthX'
          _view.Positiony.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'Positiony'
          _view.Positiony.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'Positiony'
          _view.Positiony.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Positiony'
          _view.earthY.linkProperty("Value",  function() { return earthy; }, function(_v) { earthy = _v; } ); // HtmlView Page linking property 'Value' for element 'earthY'
          _view.earthY.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'earthY'
          _view.earthY.setAction("OnChange", function(_data,_info) {
  _initialize();
  earthpos[1]=earthy; //need earthx for slider to work;

}); // HtmlView Page setting action 'OnChange' for element 'earthY'
          _view.earthY.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'earthY'
          _view.earthY.linkProperty("Display",  function() { return box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'earthY'
          _view.VelocityX.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'VelocityX'
          _view.VelocityX.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'VelocityX'
          _view.VelocityX.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'VelocityX'
          _view.earthVelx.linkProperty("Value",  function() { return earthvelx; }, function(_v) { earthvelx = _v; } ); // HtmlView Page linking property 'Value' for element 'earthVelx'
          _view.earthVelx.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'earthVelx'
          _view.earthVelx.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'earthVelx'
          _view.earthVelx.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'earthVelx'
          _view.earthVelx.linkProperty("Display",  function() { return box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'earthVelx'
          _view.VelocityY2.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'VelocityY2'
          _view.VelocityY2.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'VelocityY2'
          _view.VelocityY2.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'VelocityY2'
          _view.earthVely.linkProperty("Value",  function() { return earthvely; }, function(_v) { earthvely = _v; } ); // HtmlView Page linking property 'Value' for element 'earthVely'
          _view.earthVely.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'earthVely'
          _view.earthVely.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'earthVely'
          _view.earthVely.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'earthVely'
          _view.earthVely.linkProperty("Display",  function() { return box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'earthVely'
          _view.box1mars.linkProperty("Display",  function() { return box==1?"inline-block":"none"; } ); // HtmlView Page linking property 'Display' for element 'box1mars'
          _view.Positionx2.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'Positionx2'
          _view.Positionx2.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'Positionx2'
          _view.Positionx2.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Positionx2'
          _view.MarsX.linkProperty("Value",  function() { return marsx; }, function(_v) { marsx = _v; } ); // HtmlView Page linking property 'Value' for element 'MarsX'
          _view.MarsX.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'MarsX'
          _view.MarsX.setAction("OnChange", function(_data,_info) {
  _initialize();
  marspos[0]=marsx; //need earthx for slider to work;

}); // HtmlView Page setting action 'OnChange' for element 'MarsX'
          _view.MarsX.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'MarsX'
          _view.MarsX.linkProperty("Display",  function() { return box==1?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MarsX'
          _view.Positiony2.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'Positiony2'
          _view.Positiony2.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'Positiony2'
          _view.Positiony2.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Positiony2'
          _view.MarsY.linkProperty("Value",  function() { return marsy; }, function(_v) { marsy = _v; } ); // HtmlView Page linking property 'Value' for element 'MarsY'
          _view.MarsY.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'MarsY'
          _view.MarsY.setAction("OnChange", function(_data,_info) {
  _initialize();
  marspos[1]=marsy; //need earthx for slider to work;

}); // HtmlView Page setting action 'OnChange' for element 'MarsY'
          _view.MarsY.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'MarsY'
          _view.MarsY.linkProperty("Display",  function() { return box==1?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MarsY'
          _view.VelocityX2.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'VelocityX2'
          _view.VelocityX2.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'VelocityX2'
          _view.VelocityX2.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'VelocityX2'
          _view.MarsvelX.linkProperty("Value",  function() { return marsvelx; }, function(_v) { marsvelx = _v; } ); // HtmlView Page linking property 'Value' for element 'MarsvelX'
          _view.MarsvelX.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'MarsvelX'
          _view.MarsvelX.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'MarsvelX'
          _view.MarsvelX.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'MarsvelX'
          _view.MarsvelX.linkProperty("Display",  function() { return box==1?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MarsvelX'
          _view.VelocityY.linkProperty("Background",  function() { return box==1?"red":"blue"; } ); // HtmlView Page linking property 'Background' for element 'VelocityY'
          _view.VelocityY.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'VelocityY'
          _view.VelocityY.linkProperty("Display",  function() { return box==1||box==0?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'VelocityY'
          _view.MarsvelY.linkProperty("Value",  function() { return marsvely; }, function(_v) { marsvely = _v; } ); // HtmlView Page linking property 'Value' for element 'MarsvelY'
          _view.MarsvelY.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'MarsvelY'
          _view.MarsvelY.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'MarsvelY'
          _view.MarsvelY.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'MarsvelY'
          _view.MarsvelY.linkProperty("Display",  function() { return box==1?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MarsvelY'
          _view.box2mass.linkProperty("Display",  function() { return box==2?"inline-block":"none"; } ); // HtmlView Page linking property 'Display' for element 'box2mass'
          _view.MassSun.linkProperty("Display",  function() { return box==2?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MassSun'
          _view.Msun.linkProperty("Value",  function() { return Msun; }, function(_v) { Msun = _v; } ); // HtmlView Page linking property 'Value' for element 'Msun'
          _view.Msun.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'Msun'
          _view.Msun.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'Msun'
          _view.Msun.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'Msun'
          _view.Msun.linkProperty("Display",  function() { return box==2?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Msun'
          _view.MassEarth.linkProperty("Display",  function() { return box==2?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MassEarth'
          _view.MEarth.linkProperty("Value",  function() { return Mearth; }, function(_v) { Mearth = _v; } ); // HtmlView Page linking property 'Value' for element 'MEarth'
          _view.MEarth.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'MEarth'
          _view.MEarth.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'MEarth'
          _view.MEarth.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'MEarth'
          _view.MEarth.linkProperty("Display",  function() { return box==2?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'MEarth'
          _view.Mass_Mars.linkProperty("Display",  function() { return box==2?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Mass_Mars'
          _view.Mmars.linkProperty("Value",  function() { return Mmars; }, function(_v) { Mmars = _v; } ); // HtmlView Page linking property 'Value' for element 'Mmars'
          _view.Mmars.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'Mmars'
          _view.Mmars.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'Mmars'
          _view.Mmars.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'Mmars'
          _view.Mmars.linkProperty("Display",  function() { return box==2?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Mmars'
          _view.box3constant.linkProperty("Display",  function() { return box==3?"inline-block":"none"; } ); // HtmlView Page linking property 'Display' for element 'box3constant'
          _view.Change_in_Time.linkProperty("Display",  function() { return box==3?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'Change_in_Time'
          _view.dtfield.linkProperty("Value",  function() { return dt2; }, function(_v) { dt2 = _v; } ); // HtmlView Page linking property 'Value' for element 'dtfield'
          _view.dtfield.setAction("OnChange", function(_data,_info) {
  dt=dt2*3600*24;

}); // HtmlView Page setting action 'OnChange' for element 'dtfield'
          _view.dtfield.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'dtfield'
          _view.dtfield.linkProperty("Display",  function() { return box==3?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'dtfield'
          _view.G.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'G'
          _view.G.linkProperty("Display",  function() { return box==3?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'G'
          _view.fieldG.linkProperty("Value",  function() { return G; }, function(_v) { G = _v; } ); // HtmlView Page linking property 'Value' for element 'fieldG'
          _view.fieldG.linkProperty("Editable",  function() { return editable; }, function(_v) { editable = _v; } ); // HtmlView Page linking property 'Editable' for element 'fieldG'
          _view.fieldG.setAction("OnChange", _initialize); // HtmlView Page setting action 'OnChange' for element 'fieldG'
          _view.fieldG.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'fieldG'
          _view.fieldG.linkProperty("Display",  function() { return box==3?"inline":"none"; } ); // HtmlView Page linking property 'Display' for element 'fieldG'
          _view.box4exercise2.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'box4exercise2'
          _view.box4exercise2.linkProperty("Display",  function() { return box==4?"inline-block":"none"; } ); // HtmlView Page linking property 'Display' for element 'box4exercise2'
          _view.launchday.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'launchday'
          _view.launchday2.linkProperty("Value",  function() { return launchday; }, function(_v) { launchday = _v; } ); // HtmlView Page linking property 'Value' for element 'launchday2'
          _view.launchday2.setAction("OnChange", function(_data,_info) {
  _initialize();// speed up trial and error to find mars arrival;

}); // HtmlView Page setting action 'OnChange' for element 'launchday2'
          _view.launchday2.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'launchday2'
          _view.vx.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'vx'
          _view.vxo.linkProperty("Value",  function() { return dvxslider; }, function(_v) { dvxslider = _v; } ); // HtmlView Page linking property 'Value' for element 'vxo'
          _view.vxo.setAction("OnChange", function(_data,_info) {
  dv[0]=dvxslider;
  //Sets Velocity v
  v=[vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))];
  //v=[vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))];
  //Sets Rocket Initial Position
  //vrocket[0]=earthvelx+v[0];
  //vrocket[1]=earthvely+v[1];
  vrocket[0]=earthvel[0]+v[0];
  vrocket[1]=earthvel[1]+v[1];
  procket[0]=Mrocket*vrocket[0];
  procket[1]=Mrocket*vrocket[1];
  //Rocket Position
  normv[0]=v[0]/Math.sqrt(v[0]*v[0]+v[1]*v[1]);
  normv[1]=v[1]/Math.sqrt(v[0]*v[0]+v[1]*v[1]);
  //rocketx=earthx+rinitial*normv[0];
  //rockety=earthy+rinitial*normv[1];
  rocketx=earthpos[0]+rinitial*normv[0];
  rockety=earthpos[1]+rinitial*normv[1];
  //Arrow Size
  ArrowSizex=scale1*normv[0];
  ArrowSizey=scale1*normv[1];
  //booleans
  rocketLaunched=false;
  run=false;
  justNowLaunched=false;
  rocketarrowvisible=true;
  _initialize();

}); // HtmlView Page setting action 'OnChange' for element 'vxo'
          _view.vxo.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'vxo'
          _view.vy.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'vy'
          _view.vyo.linkProperty("Value",  function() { return dvyslider; }, function(_v) { dvyslider = _v; } ); // HtmlView Page linking property 'Value' for element 'vyo'
          _view.vyo.setAction("OnChange", function(_data,_info) {
  dv[1]=dvyslider;
  //Sets Velocity v
  v=[vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))];
  //v=[vinitial*(dv[1])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1])),vinitial*(dv[0])/Math.sqrt((dv[0])*(dv[0])+(dv[1])*(dv[1]))];
  //Sets Rocket Initial Position
  //vrocket[0]=earthvelx+v[0];
  //vrocket[1]=earthvely+v[1];
  vrocket[0]=earthvel[0]+v[0];
  vrocket[1]=earthvel[1]+v[1];
  procket[0]=Mrocket*vrocket[0];
  procket[1]=Mrocket*vrocket[1];
  //Rocket Position
  normv[0]=v[0]/Math.sqrt(v[0]*v[0]+v[1]*v[1]);
  normv[1]=v[1]/Math.sqrt(v[0]*v[0]+v[1]*v[1]);
  //rocketx=earthx+rinitial*normv[0];
  //rockety=earthy+rinitial*normv[1];
  rocketx=earthpos[0]+rinitial*normv[0];
  rockety=earthpos[1]+rinitial*normv[1];
  //Arrow Size
  ArrowSizex=scale1*normv[0];
  ArrowSizey=scale1*normv[1];
  //booleans
  rocketLaunched=false;
  run=false;
  justNowLaunched=false;
  rocketarrowvisible=true;
  _initialize();

}); // HtmlView Page setting action 'OnChange' for element 'vyo'
          _view.vyo.linkProperty("Font",  function() { return font; }, function(_v) { font = _v; } ); // HtmlView Page linking property 'Font' for element 'vyo'
          _view.playPauseButton.setAction("OffClick", _pause); // HtmlView Page setting action 'OffClick' for element 'playPauseButton'
          _view.playPauseButton.linkProperty("State",  function() { return _isPaused; } ); // HtmlView Page linking property 'State' for element 'playPauseButton'
          _view.playPauseButton.setAction("OnClick", function(_data,_info) {
  _play();tf=0;
  launchstr="Running...";
  editable=false;

}); // HtmlView Page setting action 'OnClick' for element 'playPauseButton'
          _view.playPauseButton.linkProperty("Font",  function() { return fontb; }, function(_v) { fontb = _v; } ); // HtmlView Page linking property 'Font' for element 'playPauseButton'
          _view.resetButton.setAction("OnClick", _reset); // HtmlView Page setting action 'OnClick' for element 'resetButton'
          _view.resetButton.linkProperty("Font",  function() { return fontb; }, function(_v) { fontb = _v; } ); // HtmlView Page linking property 'Font' for element 'resetButton'
          _view.plottingPanel.setAction("OnDoubleClick", function(_data,_info) {
  //toggleFullScreen();
  if (_model.isPlaying())_pause();
  else if (_model.isPaused())_play();

}); // HtmlView Page setting action 'OnDoubleClick' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("MaximumY",  function() { return range; }, function(_v) { range = _v; } ); // HtmlView Page linking property 'MaximumY' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("MaximumX",  function() { return range; }, function(_v) { range = _v; } ); // HtmlView Page linking property 'MaximumX' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("TRMessage",  function() { return ""+launchstr; } ); // HtmlView Page linking property 'TRMessage' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("MinimumX",  function() { return -range; } ); // HtmlView Page linking property 'MinimumX' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("MinimumY",  function() { return -range; } ); // HtmlView Page linking property 'MinimumY' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("TLMessage",  function() { return box==4?"assume launch at v=5500m/s, \nposition =5.6 radius of earth":""; } ); // HtmlView Page linking property 'TLMessage' for element 'plottingPanel'
          _view.plottingPanel.linkProperty("BRMessage",  function() { return tstr; }, function(_v) { tstr = _v; } ); // HtmlView Page linking property 'BRMessage' for element 'plottingPanel'
          _view.Sun.linkProperty("SizeX",  function() { return Dsun; }, function(_v) { Dsun = _v; } ); // HtmlView Page linking property 'SizeX' for element 'Sun'
          _view.Sun.linkProperty("Position",  function() { return sunpos; }, function(_v) { sunpos = _v; } ); // HtmlView Page linking property 'Position' for element 'Sun'
          _view.Sun.linkProperty("SizeY",  function() { return Dsun; }, function(_v) { Dsun = _v; } ); // HtmlView Page linking property 'SizeY' for element 'Sun'
          _view.Mars.linkProperty("SizeX",  function() { return Dmars; }, function(_v) { Dmars = _v; } ); // HtmlView Page linking property 'SizeX' for element 'Mars'
          _view.Mars.linkProperty("X",  function() { return marsx; }, function(_v) { marsx = _v; } ); // HtmlView Page linking property 'X' for element 'Mars'
          _view.Mars.linkProperty("Y",  function() { return marsy; }, function(_v) { marsy = _v; } ); // HtmlView Page linking property 'Y' for element 'Mars'
          _view.Mars.linkProperty("SizeY",  function() { return Dmars; }, function(_v) { Dmars = _v; } ); // HtmlView Page linking property 'SizeY' for element 'Mars'
          _view.Earth.linkProperty("SizeX",  function() { return Dearth; }, function(_v) { Dearth = _v; } ); // HtmlView Page linking property 'SizeX' for element 'Earth'
          _view.Earth.linkProperty("X",  function() { return earthx; }, function(_v) { earthx = _v; } ); // HtmlView Page linking property 'X' for element 'Earth'
          _view.Earth.linkProperty("Y",  function() { return earthy; }, function(_v) { earthy = _v; } ); // HtmlView Page linking property 'Y' for element 'Earth'
          _view.Earth.linkProperty("SizeY",  function() { return Dearth; }, function(_v) { Dearth = _v; } ); // HtmlView Page linking property 'SizeY' for element 'Earth'
          _view.Sun2.linkProperty("SizeX",  function() { return Dsun; }, function(_v) { Dsun = _v; } ); // HtmlView Page linking property 'SizeX' for element 'Sun2'
          _view.Sun2.linkProperty("Position",  function() { return sunpos; }, function(_v) { sunpos = _v; } ); // HtmlView Page linking property 'Position' for element 'Sun2'
          _view.Sun2.linkProperty("SizeY",  function() { return Dsun; }, function(_v) { Dsun = _v; } ); // HtmlView Page linking property 'SizeY' for element 'Sun2'
          _view.Mars2.linkProperty("SizeX",  function() { return Dmars; }, function(_v) { Dmars = _v; } ); // HtmlView Page linking property 'SizeX' for element 'Mars2'
          _view.Mars2.linkProperty("Position",  function() { return marspos; }, function(_v) { marspos = _v; } ); // HtmlView Page linking property 'Position' for element 'Mars2'
          _view.Mars2.linkProperty("SizeY",  function() { return Dmars; }, function(_v) { Dmars = _v; } ); // HtmlView Page linking property 'SizeY' for element 'Mars2'
          _view.Earth2.linkProperty("SizeX",  function() { return Dearth; }, function(_v) { Dearth = _v; } ); // HtmlView Page linking property 'SizeX' for element 'Earth2'
          _view.Earth2.linkProperty("Position",  function() { return earthpos; }, function(_v) { earthpos = _v; } ); // HtmlView Page linking property 'Position' for element 'Earth2'
          _view.Earth2.linkProperty("SizeY",  function() { return Dearth; }, function(_v) { Dearth = _v; } ); // HtmlView Page linking property 'SizeY' for element 'Earth2'
          _view.MarsTrail2.linkProperty("Input",  function() { return marspos; }, function(_v) { marspos = _v; } ); // HtmlView Page linking property 'Input' for element 'MarsTrail2'
          _view.EarthTrail2.linkProperty("Input",  function() { return earthpos; }, function(_v) { earthpos = _v; } ); // HtmlView Page linking property 'Input' for element 'EarthTrail2'
          _view.tlabel.linkProperty("Y",  function() { return -range*0.8; } ); // HtmlView Page linking property 'Y' for element 'tlabel'
          _view.tlabel.linkProperty("Text",  function() { return tstr; }, function(_v) { tstr = _v; } ); // HtmlView Page linking property 'Text' for element 'tlabel'
          _view.launchlabel.linkProperty("Y",  function() { return range*0.8; } ); // HtmlView Page linking property 'Y' for element 'launchlabel'
          _view.launchlabel.linkProperty("Text",  function() { return launchstr; }, function(_v) { launchstr = _v; } ); // HtmlView Page linking property 'Text' for element 'launchlabel'
          _view.exercise1.linkProperty("Visibility",  function() { return exercise1; }, function(_v) { exercise1 = _v; } ); // HtmlView Page linking property 'Visibility' for element 'exercise1'
          _view.suntoearth.linkProperty("Position",  function() { return sunpos; }, function(_v) { sunpos = _v; } ); // HtmlView Page linking property 'Position' for element 'suntoearth'
          _view.suntoearth.linkProperty("Size",  function() { return suntoearth; }, function(_v) { suntoearth = _v; } ); // HtmlView Page linking property 'Size' for element 'suntoearth'
          _view.suntomars.linkProperty("Position",  function() { return sunpos; }, function(_v) { sunpos = _v; } ); // HtmlView Page linking property 'Position' for element 'suntomars'
          _view.suntomars.linkProperty("Size",  function() { return suntomars; }, function(_v) { suntomars = _v; } ); // HtmlView Page linking property 'Size' for element 'suntomars'
          _view.cproduct_2_.linkProperty("Position",  function() { return sunpos; }, function(_v) { sunpos = _v; } ); // HtmlView Page linking property 'Position' for element 'cproduct_2_'
          _view.cproduct_2_.linkProperty("Text",  function() { return "cproductsign="+cproductsign.toFixed(0); } ); // HtmlView Page linking property 'Text' for element 'cproduct_2_'
          _view.Rocket.linkProperty("SizeX",  function() { return Dearth/2; } ); // HtmlView Page linking property 'SizeX' for element 'Rocket'
          _view.Rocket.linkProperty("X",  function() { return rocketx; }, function(_v) { rocketx = _v; } ); // HtmlView Page linking property 'X' for element 'Rocket'
          _view.Rocket.linkProperty("Y",  function() { return rockety; }, function(_v) { rockety = _v; } ); // HtmlView Page linking property 'Y' for element 'Rocket'
          _view.Rocket.linkProperty("SizeY",  function() { return Dearth/2; } ); // HtmlView Page linking property 'SizeY' for element 'Rocket'
          _view.RocketArrow.linkProperty("SizeX",  function() { return ArrowSizex; }, function(_v) { ArrowSizex = _v; } ); // HtmlView Page linking property 'SizeX' for element 'RocketArrow'
          _view.RocketArrow.linkProperty("X",  function() { return rocketx; }, function(_v) { rocketx = _v; } ); // HtmlView Page linking property 'X' for element 'RocketArrow'
          _view.RocketArrow.linkProperty("Y",  function() { return rockety; }, function(_v) { rockety = _v; } ); // HtmlView Page linking property 'Y' for element 'RocketArrow'
          _view.RocketArrow.linkProperty("Visibility",  function() { return rocketarrowvisible; }, function(_v) { rocketarrowvisible = _v; } ); // HtmlView Page linking property 'Visibility' for element 'RocketArrow'
          _view.RocketArrow.linkProperty("SizeY",  function() { return ArrowSizey; }, function(_v) { ArrowSizey = _v; } ); // HtmlView Page linking property 'SizeY' for element 'RocketArrow'
          _view.RocketTrail.linkProperty("InputX",  function() { return rocketx; }, function(_v) { rocketx = _v; } ); // HtmlView Page linking property 'InputX' for element 'RocketTrail'
          _view.RocketTrail.linkProperty("InputY",  function() { return rockety; }, function(_v) { rockety = _v; } ); // HtmlView Page linking property 'InputY' for element 'RocketTrail'
          break;
      } // end of switch
    }; // end of new reset

    _model.setView(_view);
    _model.reset();
    _view._enableEPub();
  } // end of _selectView

  _model.setAutoplay(false);
  _model.setFPS(100);
  _model.setStepsPerDisplay(10);
  _selectView(-1); // this includes _model.reset()
  return _model;
}

function PICUP_marsmission_EJSStemplate_View (_topFrame,_viewNumber,_libraryPath,_codebasePath) {
  var _view;
  switch(_viewNumber) {
    case -10 : break; // make Lint happy
    default :
    case 0: _view = PICUP_marsmission_EJSStemplate_View_0 (_topFrame); break;
  } // end of switch

  if (_codebasePath) _view._2(_codebasePath);

  if (_libraryPath) _view._4(_libraryPath);


  return _view;
} // end of main function

function PICUP_marsmission_EJSStemplate_View_0 (_topFrame) {
  var _view = EJSS_CORE.createView(_topFrame);

  _view._reset = function() {
    _view._1();
    _view._9(EJSS_INTERFACE.panel,"executionPanel", _view._topFrame) // EJsS HtmlView.HtmlView Page: declaration of element 'executionPanel'
      .setProperty("Display","inline-block") // EJsS HtmlView.HtmlView Page: setting property 'Display' for element 'executionPanel'
      ;

    _view._9(EJSS_INTERFACE.comboBox,"comboBox", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'comboBox'
      ;

    _view._9(EJSS_INTERFACE.panel,"box0earth", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'box0earth'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"Positionx", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'Positionx'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Positionx'
      .setProperty("Text","x=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'Positionx'
      ;

    _view._9(EJSS_INTERFACE.numberField,"earthX", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'earthX'
      .setProperty("Width","12vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'earthX'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'earthX'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'earthX'
      .setProperty("Foreground","blue") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'earthX'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"Positiony", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'Positiony'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Positiony'
      .setProperty("Text","y=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'Positiony'
      ;

    _view._9(EJSS_INTERFACE.numberField,"earthY", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'earthY'
      .setProperty("Width","12vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'earthY'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'earthY'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'earthY'
      .setProperty("Foreground","blue") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'earthY'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"VelocityX", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'VelocityX'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'VelocityX'
      .setProperty("Text","vx=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'VelocityX'
      ;

    _view._9(EJSS_INTERFACE.numberField,"earthVelx", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'earthVelx'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'earthVelx'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'earthVelx'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'earthVelx'
      .setProperty("Foreground","blue") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'earthVelx'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"VelocityY2", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'VelocityY2'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'VelocityY2'
      .setProperty("Text","vy=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'VelocityY2'
      ;

    _view._9(EJSS_INTERFACE.numberField,"earthVely", _view.box0earth) // EJsS HtmlView.HtmlView Page: declaration of element 'earthVely'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'earthVely'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'earthVely'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'earthVely'
      .setProperty("Foreground","blue") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'earthVely'
      ;

    _view._9(EJSS_INTERFACE.panel,"box1mars", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'box1mars'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"Positionx2", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'Positionx2'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Positionx2'
      .setProperty("Text","x=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'Positionx2'
      ;

    _view._9(EJSS_INTERFACE.numberField,"MarsX", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'MarsX'
      .setProperty("Width","12vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'MarsX'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'MarsX'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'MarsX'
      .setProperty("Foreground","red") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MarsX'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"Positiony2", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'Positiony2'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Positiony2'
      .setProperty("Text","y=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'Positiony2'
      ;

    _view._9(EJSS_INTERFACE.numberField,"MarsY", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'MarsY'
      .setProperty("Width","12vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'MarsY'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'MarsY'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'MarsY'
      .setProperty("Foreground","red") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MarsY'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"VelocityX2", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'VelocityX2'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'VelocityX2'
      .setProperty("Text","vx=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'VelocityX2'
      ;

    _view._9(EJSS_INTERFACE.numberField,"MarsvelX", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'MarsvelX'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'MarsvelX'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'MarsvelX'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'MarsvelX'
      .setProperty("Foreground","red") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MarsvelX'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"VelocityY", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'VelocityY'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'VelocityY'
      .setProperty("Text","vy=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'VelocityY'
      ;

    _view._9(EJSS_INTERFACE.numberField,"MarsvelY", _view.box1mars) // EJsS HtmlView.HtmlView Page: declaration of element 'MarsvelY'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'MarsvelY'
      .setProperty("Format","0.00e00") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'MarsvelY'
      .setProperty("Background","white") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'MarsvelY'
      .setProperty("Foreground","red") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MarsvelY'
      ;

    _view._9(EJSS_INTERFACE.panel,"box2mass", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'box2mass'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"MassSun", _view.box2mass) // EJsS HtmlView.HtmlView Page: declaration of element 'MassSun'
      .setProperty("Background","orange") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'MassSun'
      .setProperty("Tooltip","Mass of Sun") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'MassSun'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MassSun'
      .setProperty("Text","Msun=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'MassSun'
      ;

    _view._9(EJSS_INTERFACE.numberField,"Msun", _view.box2mass) // EJsS HtmlView.HtmlView Page: declaration of element 'Msun'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'Msun'
      .setProperty("Format","0.00e30") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'Msun'
      .setProperty("Foreground","orange") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Msun'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"MassEarth", _view.box2mass) // EJsS HtmlView.HtmlView Page: declaration of element 'MassEarth'
      .setProperty("Background","orange") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'MassEarth'
      .setProperty("Tooltip","Mass of Earth") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'MassEarth'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MassEarth'
      .setProperty("Text","Mearth=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'MassEarth'
      ;

    _view._9(EJSS_INTERFACE.numberField,"MEarth", _view.box2mass) // EJsS HtmlView.HtmlView Page: declaration of element 'MEarth'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'MEarth'
      .setProperty("Format","0.00e24") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'MEarth'
      .setProperty("Foreground","orange") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'MEarth'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"Mass_Mars", _view.box2mass) // EJsS HtmlView.HtmlView Page: declaration of element 'Mass_Mars'
      .setProperty("Background","orange") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'Mass_Mars'
      .setProperty("Tooltip","Mass of Mars") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'Mass_Mars'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Mass_Mars'
      .setProperty("Text","Mmars=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'Mass_Mars'
      ;

    _view._9(EJSS_INTERFACE.numberField,"Mmars", _view.box2mass) // EJsS HtmlView.HtmlView Page: declaration of element 'Mmars'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'Mmars'
      .setProperty("Format","0.00e23") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'Mmars'
      .setProperty("Foreground","orange") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Mmars'
      ;

    _view._9(EJSS_INTERFACE.panel,"box3constant", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'box3constant'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"Change_in_Time", _view.box3constant) // EJsS HtmlView.HtmlView Page: declaration of element 'Change_in_Time'
      .setProperty("Background","green") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'Change_in_Time'
      .setProperty("Tooltip","Change in Time in days") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'Change_in_Time'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'Change_in_Time'
      .setProperty("Text","t=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'Change_in_Time'
      ;

    _view._9(EJSS_INTERFACE.numberField,"dtfield", _view.box3constant) // EJsS HtmlView.HtmlView Page: declaration of element 'dtfield'
      .setProperty("Width","5vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'dtfield'
      .setProperty("Format","0") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'dtfield'
      .setProperty("Tooltip","days") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'dtfield'
      .setProperty("Foreground","green") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'dtfield'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"G", _view.box3constant) // EJsS HtmlView.HtmlView Page: declaration of element 'G'
      .setProperty("Background","magenta") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'G'
      .setProperty("Foreground","white") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'G'
      .setProperty("Text","G=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'G'
      ;

    _view._9(EJSS_INTERFACE.numberField,"fieldG", _view.box3constant) // EJsS HtmlView.HtmlView Page: declaration of element 'fieldG'
      .setProperty("Width","10vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'fieldG'
      .setProperty("Format","0.00e-11") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'fieldG'
      .setProperty("Foreground","magenta") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'fieldG'
      ;

    _view._9(EJSS_INTERFACE.panel,"box4exercise2", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'box4exercise2'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"launchday", _view.box4exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'launchday'
      .setProperty("Tooltip","launch day, number of days after 2015 Aug 29") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'launchday'
      .setProperty("Foreground","White") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'launchday'
      .setProperty("Text","launchday=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'launchday'
      ;

    _view._9(EJSS_INTERFACE.numberField,"launchday2", _view.box4exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'launchday2'
      .setProperty("Width","7vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'launchday2'
      .setProperty("Format","0.0") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'launchday2'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"vx", _view.box4exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'vx'
      .setProperty("Tooltip","velocity in x direction on launch day") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'vx'
      .setProperty("Foreground","White") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'vx'
      .setProperty("Text","vx0=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'vx'
      ;

    _view._9(EJSS_INTERFACE.numberField,"vxo", _view.box4exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'vxo'
      .setProperty("Width","7vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'vxo'
      .setProperty("Format","0.0") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'vxo'
      ;

    _view._9(EJSS_INTERFACE.imageAndTextButton,"vy", _view.box4exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'vy'
      .setProperty("Tooltip","velocity in y direction on launch day") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'vy'
      .setProperty("Foreground","White") // EJsS HtmlView.HtmlView Page: setting property 'Foreground' for element 'vy'
      .setProperty("Text","vy0=") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'vy'
      ;

    _view._9(EJSS_INTERFACE.numberField,"vyo", _view.box4exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'vyo'
      .setProperty("Width","7vw") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'vyo'
      .setProperty("Format","0.0") // EJsS HtmlView.HtmlView Page: setting property 'Format' for element 'vyo'
      ;

    _view._9(EJSS_INTERFACE.twoStateButton,"playPauseButton", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'playPauseButton'
      .setProperty("TextOn","") // EJsS HtmlView.HtmlView Page: setting property 'TextOn' for element 'playPauseButton'
      .setProperty("Tooltip","Play/Pause") // EJsS HtmlView.HtmlView Page: setting property 'Tooltip' for element 'playPauseButton'
      .setProperty("TextOff","") // EJsS HtmlView.HtmlView Page: setting property 'TextOff' for element 'playPauseButton'
      ;

    _view._9(EJSS_INTERFACE.button,"resetButton", _view.executionPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'resetButton'
      .setProperty("Text","") // EJsS HtmlView.HtmlView Page: setting property 'Text' for element 'resetButton'
      ;

    _view._9(EJSS_INTERFACE.panel,"panel", _view._topFrame) // EJsS HtmlView.HtmlView Page: declaration of element 'panel'
      ;

    _view._9(EJSS_DRAWING2D.plottingPanel,"plottingPanel", _view.panel) // EJsS HtmlView.HtmlView Page: declaration of element 'plottingPanel'
      .setProperty("Height","85vh") // EJsS HtmlView.HtmlView Page: setting property 'Height' for element 'plottingPanel'
      .setProperty("Width","100%") // EJsS HtmlView.HtmlView Page: setting property 'Width' for element 'plottingPanel'
      .setProperty("Gutters",[0,0,0,0]) // EJsS HtmlView.HtmlView Page: setting property 'Gutters' for element 'plottingPanel'
      .setProperty("ShowAreaRectangle",false) // EJsS HtmlView.HtmlView Page: setting property 'ShowAreaRectangle' for element 'plottingPanel'
      .setProperty("ShowCoordinates",false) // EJsS HtmlView.HtmlView Page: setting property 'ShowCoordinates' for element 'plottingPanel'
      .setProperty("Background","url(#mygrandient)") // EJsS HtmlView.HtmlView Page: setting property 'Background' for element 'plottingPanel'
      .setProperty("Enabled",true) // EJsS HtmlView.HtmlView Page: setting property 'Enabled' for element 'plottingPanel'
      .setProperty("SquareAspect",true) // EJsS HtmlView.HtmlView Page: setting property 'SquareAspect' for element 'plottingPanel'
      .setProperty("AxisXShow",false) // EJsS HtmlView.HtmlView Page: setting property 'AxisXShow' for element 'plottingPanel'
      .setProperty("GridYShow",false) // EJsS HtmlView.HtmlView Page: setting property 'GridYShow' for element 'plottingPanel'
      .setProperty("AxisYShow",false) // EJsS HtmlView.HtmlView Page: setting property 'AxisYShow' for element 'plottingPanel'
      .setProperty("AutoScaleY",false) // EJsS HtmlView.HtmlView Page: setting property 'AutoScaleY' for element 'plottingPanel'
      .setProperty("AutoScaleX",false) // EJsS HtmlView.HtmlView Page: setting property 'AutoScaleX' for element 'plottingPanel'
      .setProperty("GridXShow",false) // EJsS HtmlView.HtmlView Page: setting property 'GridXShow' for element 'plottingPanel'
      ;

    _view._9(EJSS_DRAWING2D.group,"Objectsinitial", _view.plottingPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'Objectsinitial'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Sun", _view.Objectsinitial) // EJsS HtmlView.HtmlView Page: declaration of element 'Sun'
      .setProperty("FillColor","yellow") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Sun'
      .setProperty("LineColor","orange") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'Sun'
      .setProperty("DrawFill",false) // EJsS HtmlView.HtmlView Page: setting property 'DrawFill' for element 'Sun'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Mars", _view.Objectsinitial) // EJsS HtmlView.HtmlView Page: declaration of element 'Mars'
      .setProperty("FillColor","red") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Mars'
      .setProperty("LineColor","red") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'Mars'
      .setProperty("DrawFill",false) // EJsS HtmlView.HtmlView Page: setting property 'DrawFill' for element 'Mars'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Earth", _view.Objectsinitial) // EJsS HtmlView.HtmlView Page: declaration of element 'Earth'
      .setProperty("FillColor","blue") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Earth'
      .setProperty("LineColor","blue") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'Earth'
      .setProperty("DrawFill",false) // EJsS HtmlView.HtmlView Page: setting property 'DrawFill' for element 'Earth'
      ;

    _view._9(EJSS_DRAWING2D.group,"create_3D_objects", _view.plottingPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'create_3D_objects'
      .setProperty("X",0) // EJsS HtmlView.HtmlView Page: setting property 'X' for element 'create_3D_objects'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Sun2", _view.create_3D_objects) // EJsS HtmlView.HtmlView Page: declaration of element 'Sun2'
      .setProperty("FillColor","yellow") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Sun2'
      .setProperty("LineColor","orange") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'Sun2'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Mars2", _view.create_3D_objects) // EJsS HtmlView.HtmlView Page: declaration of element 'Mars2'
      .setProperty("FillColor","red") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Mars2'
      .setProperty("LineColor","orange") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'Mars2'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Earth2", _view.create_3D_objects) // EJsS HtmlView.HtmlView Page: declaration of element 'Earth2'
      .setProperty("FillColor","blue") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Earth2'
      ;

    _view._9(EJSS_DRAWING2D.group,"Trails2", _view.create_3D_objects) // EJsS HtmlView.HtmlView Page: declaration of element 'Trails2'
      ;

    _view._9(EJSS_DRAWING2D.trail,"MarsTrail2", _view.Trails2) // EJsS HtmlView.HtmlView Page: declaration of element 'MarsTrail2'
      .setProperty("Maximum",10000) // EJsS HtmlView.HtmlView Page: setting property 'Maximum' for element 'MarsTrail2'
      .setProperty("Connected",true) // EJsS HtmlView.HtmlView Page: setting property 'Connected' for element 'MarsTrail2'
      .setProperty("LineColor","red") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'MarsTrail2'
      .setProperty("NoRepeat",true) // EJsS HtmlView.HtmlView Page: setting property 'NoRepeat' for element 'MarsTrail2'
      .setProperty("LineWidth",2) // EJsS HtmlView.HtmlView Page: setting property 'LineWidth' for element 'MarsTrail2'
      ;

    _view._9(EJSS_DRAWING2D.trail,"EarthTrail2", _view.Trails2) // EJsS HtmlView.HtmlView Page: declaration of element 'EarthTrail2'
      .setProperty("Maximum",10000) // EJsS HtmlView.HtmlView Page: setting property 'Maximum' for element 'EarthTrail2'
      .setProperty("Connected",true) // EJsS HtmlView.HtmlView Page: setting property 'Connected' for element 'EarthTrail2'
      .setProperty("LineColor","blue") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'EarthTrail2'
      .setProperty("NoRepeat",true) // EJsS HtmlView.HtmlView Page: setting property 'NoRepeat' for element 'EarthTrail2'
      .setProperty("LineWidth",2) // EJsS HtmlView.HtmlView Page: setting property 'LineWidth' for element 'EarthTrail2'
      ;

    _view._9(EJSS_DRAWING2D.group,"create_labels_for_displaying_time_and_a_message_string", _view.plottingPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'create_labels_for_displaying_time_and_a_message_string'
      ;

    _view._9(EJSS_DRAWING2D.text,"tlabel", _view.create_labels_for_displaying_time_and_a_message_string) // EJsS HtmlView.HtmlView Page: declaration of element 'tlabel'
      .setProperty("FillColor","Cyan") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'tlabel'
      .setProperty("X",0) // EJsS HtmlView.HtmlView Page: setting property 'X' for element 'tlabel'
      ;

    _view._9(EJSS_DRAWING2D.text,"launchlabel", _view.create_labels_for_displaying_time_and_a_message_string) // EJsS HtmlView.HtmlView Page: declaration of element 'launchlabel'
      .setProperty("FillColor","Cyan") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'launchlabel'
      .setProperty("X",0) // EJsS HtmlView.HtmlView Page: setting property 'X' for element 'launchlabel'
      ;

    _view._9(EJSS_DRAWING2D.group,"exercise1", _view.plottingPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'exercise1'
      ;

    _view._9(EJSS_DRAWING2D.arrow,"suntoearth", _view.exercise1) // EJsS HtmlView.HtmlView Page: declaration of element 'suntoearth'
      .setProperty("LineColor","Blue") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'suntoearth'
      ;

    _view._9(EJSS_DRAWING2D.arrow,"suntomars", _view.exercise1) // EJsS HtmlView.HtmlView Page: declaration of element 'suntomars'
      .setProperty("LineColor","Red") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'suntomars'
      ;

    _view._9(EJSS_DRAWING2D.text,"cproduct_2_", _view.exercise1) // EJsS HtmlView.HtmlView Page: declaration of element 'cproduct_2_'
      .setProperty("FillColor","Green") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'cproduct_2_'
      ;

    _view._9(EJSS_DRAWING2D.group,"exercise2", _view.plottingPanel) // EJsS HtmlView.HtmlView Page: declaration of element 'exercise2'
      ;

    _view._9(EJSS_DRAWING2D.shape,"Rocket", _view.exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'Rocket'
      .setProperty("FillColor","orange") // EJsS HtmlView.HtmlView Page: setting property 'FillColor' for element 'Rocket'
      .setProperty("ShapeType","ELLIPSE") // EJsS HtmlView.HtmlView Page: setting property 'ShapeType' for element 'Rocket'
      ;

    _view._9(EJSS_DRAWING2D.arrow,"RocketArrow", _view.exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'RocketArrow'
      .setProperty("LineColor","Cyan") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'RocketArrow'
      .setProperty("LineWidth",2) // EJsS HtmlView.HtmlView Page: setting property 'LineWidth' for element 'RocketArrow'
      ;

    _view._9(EJSS_DRAWING2D.trail,"RocketTrail", _view.exercise2) // EJsS HtmlView.HtmlView Page: declaration of element 'RocketTrail'
      .setProperty("Maximum",10000) // EJsS HtmlView.HtmlView Page: setting property 'Maximum' for element 'RocketTrail'
      .setProperty("Connected",true) // EJsS HtmlView.HtmlView Page: setting property 'Connected' for element 'RocketTrail'
      .setProperty("LineColor","Magenta") // EJsS HtmlView.HtmlView Page: setting property 'LineColor' for element 'RocketTrail'
      .setProperty("NoRepeat",true) // EJsS HtmlView.HtmlView Page: setting property 'NoRepeat' for element 'RocketTrail'
      .setProperty("LineWidth",1) // EJsS HtmlView.HtmlView Page: setting property 'LineWidth' for element 'RocketTrail'
      ;

  };

  return _view;
}


//--><!]]></script>
  </head>
  <body>
    <div role="button" id="_topFrame" style="text-align:center"></div>
  <div id="metadata" class="metadata">
    <br />
    <div id="title_author">
      <hr />
      <b>Title and author:</b>
      <p>
      Traveling to Mars (Mars Mission Transit) <br />
      </p>
      <p>
      <img alt="author image" src="file:///Users/lookang/Google Drive/PublicLawrence/workspace/source/PICUPupload/ejss_src_PICUP_marsmission_EJSStemplate/01authorarrontitus.png" />
      <img alt="author image" src="file:///Users/lookang/Google Drive/PublicLawrence/workspace/source/PICUPupload/ejss_src_PICUP_marsmission_EJSStemplate/01authorlookang50x50.png" />
 Fremont Teng; Arron Titus; Loo Kang Wee
      </p>
    </div>
    <hr />
    <p></p>
    <div id="copyright_message">
      <div class="cc_left"  style="float:left">&#169; 2018, Fremont Teng; Arron Titus; Loo Kang Wee.</div>
      <div class="cc_right" style="float:right">    Released under a <a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.en_US"> <img alt="Creative Commons Attribution-NonCommercial-ShareAlike" src="file:///Users/lookang/Google Drive/PublicLawrence/EjsS_5.3.SG_171223/bin/javascript/lib/images/cc_icon.png" /> </a> license.</div>
    </div>
  </div>
    <script type="text/javascript"><!--//--><![CDATA[//><!--
      var _model;
      var _scorm;
      window.addEventListener('load',
        function () { 
          _model =  new PICUP_marsmission_EJSStemplate("_topFrame","file:/Users/lookang/Google%20Drive/PublicLawrence/EjsS_5.3.SG_171223/bin/javascript/lib/","file:/Users/lookang/Google%20Drive/PublicLawrence/workspace/source/PICUPupload/ejss_src_PICUP_marsmission_EJSStemplate/");
          if (typeof _isApp !== "undefined" && _isApp) _model.setRunAlways(true);
          TextResizeDetector.TARGET_ELEMENT_ID = '_topFrame';
          TextResizeDetector.USER_INIT_FUNC = function () {
            var iBase = TextResizeDetector.addEventListener(function(e,args) {
              _model._fontResized(args[0].iBase,args[0].iSize,args[0].iDelta);
              },null);
            _model._fontResized(iBase);
          };
          _model.onload();
        }, false);
    //--><!]]></script>
  </body>
</html>
